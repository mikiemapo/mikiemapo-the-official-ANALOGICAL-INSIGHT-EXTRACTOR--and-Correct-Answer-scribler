(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function e(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(r){if(r.ep)return;r.ep=!0;const l=e(r);fetch(r.href,l)}})();function ZT(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var sh={exports:{}},tl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d_;function ZS(){if(d_)return tl;d_=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(o,r,l){var c=null;if(l!==void 0&&(c=""+l),r.key!==void 0&&(c=""+r.key),"key"in r){l={};for(var d in r)d!=="key"&&(l[d]=r[d])}else l=r;return r=l.ref,{$$typeof:n,type:o,key:c,ref:r!==void 0?r:null,props:l}}return tl.Fragment=t,tl.jsx=e,tl.jsxs=e,tl}var h_;function jS(){return h_||(h_=1,sh.exports=ZS()),sh.exports}var it=jS(),rh={exports:{}},Ct={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p_;function tC(){if(p_)return Ct;p_=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),A=Symbol.iterator;function I(O){return O===null||typeof O!="object"?null:(O=A&&O[A]||O["@@iterator"],typeof O=="function"?O:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q=Object.assign,U={};function X(O,Z,rt){this.props=O,this.context=Z,this.refs=U,this.updater=rt||P}X.prototype.isReactComponent={},X.prototype.setState=function(O,Z){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,Z,"setState")},X.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function ot(){}ot.prototype=X.prototype;function J(O,Z,rt){this.props=O,this.context=Z,this.refs=U,this.updater=rt||P}var et=J.prototype=new ot;et.constructor=J,q(et,X.prototype),et.isPureReactComponent=!0;var ct=Array.isArray;function at(){}var D={H:null,A:null,T:null,S:null},M=Object.prototype.hasOwnProperty;function N(O,Z,rt){var pt=rt.ref;return{$$typeof:n,type:O,key:Z,ref:pt!==void 0?pt:null,props:rt}}function V(O,Z){return N(O.type,Z,O.props)}function L(O){return typeof O=="object"&&O!==null&&O.$$typeof===n}function G(O){var Z={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(rt){return Z[rt]})}var b=/\/+/g;function Kt(O,Z){return typeof O=="object"&&O!==null&&O.key!=null?G(""+O.key):Z.toString(36)}function ve(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(at,at):(O.status="pending",O.then(function(Z){O.status==="pending"&&(O.status="fulfilled",O.value=Z)},function(Z){O.status==="pending"&&(O.status="rejected",O.reason=Z)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function $(O,Z,rt,pt,Et){var Mt=typeof O;(Mt==="undefined"||Mt==="boolean")&&(O=null);var Lt=!1;if(O===null)Lt=!0;else switch(Mt){case"bigint":case"string":case"number":Lt=!0;break;case"object":switch(O.$$typeof){case n:case t:Lt=!0;break;case v:return Lt=O._init,$(Lt(O._payload),Z,rt,pt,Et)}}if(Lt)return Et=Et(O),Lt=pt===""?"."+Kt(O,0):pt,ct(Et)?(rt="",Lt!=null&&(rt=Lt.replace(b,"$&/")+"/"),$(Et,Z,rt,"",function(ni){return ni})):Et!=null&&(L(Et)&&(Et=V(Et,rt+(Et.key==null||O&&O.key===Et.key?"":(""+Et.key).replace(b,"$&/")+"/")+Lt)),Z.push(Et)),1;Lt=0;var Oe=pt===""?".":pt+":";if(ct(O))for(var ue=0;ue<O.length;ue++)pt=O[ue],Mt=Oe+Kt(pt,ue),Lt+=$(pt,Z,rt,Mt,Et);else if(ue=I(O),typeof ue=="function")for(O=ue.call(O),ue=0;!(pt=O.next()).done;)pt=pt.value,Mt=Oe+Kt(pt,ue++),Lt+=$(pt,Z,rt,Mt,Et);else if(Mt==="object"){if(typeof O.then=="function")return $(ve(O),Z,rt,pt,Et);throw Z=String(O),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return Lt}function lt(O,Z,rt){if(O==null)return O;var pt=[],Et=0;return $(O,pt,"","",function(Mt){return Z.call(rt,Mt,Et++)}),pt}function _t(O){if(O._status===-1){var Z=O._result;Z=Z(),Z.then(function(rt){(O._status===0||O._status===-1)&&(O._status=1,O._result=rt)},function(rt){(O._status===0||O._status===-1)&&(O._status=2,O._result=rt)}),O._status===-1&&(O._status=0,O._result=Z)}if(O._status===1)return O._result.default;throw O._result}var Gt=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},Qt={map:lt,forEach:function(O,Z,rt){lt(O,function(){Z.apply(this,arguments)},rt)},count:function(O){var Z=0;return lt(O,function(){Z++}),Z},toArray:function(O){return lt(O,function(Z){return Z})||[]},only:function(O){if(!L(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return Ct.Activity=E,Ct.Children=Qt,Ct.Component=X,Ct.Fragment=e,Ct.Profiler=r,Ct.PureComponent=J,Ct.StrictMode=o,Ct.Suspense=y,Ct.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,Ct.__COMPILER_RUNTIME={__proto__:null,c:function(O){return D.H.useMemoCache(O)}},Ct.cache=function(O){return function(){return O.apply(null,arguments)}},Ct.cacheSignal=function(){return null},Ct.cloneElement=function(O,Z,rt){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var pt=q({},O.props),Et=O.key;if(Z!=null)for(Mt in Z.key!==void 0&&(Et=""+Z.key),Z)!M.call(Z,Mt)||Mt==="key"||Mt==="__self"||Mt==="__source"||Mt==="ref"&&Z.ref===void 0||(pt[Mt]=Z[Mt]);var Mt=arguments.length-2;if(Mt===1)pt.children=rt;else if(1<Mt){for(var Lt=Array(Mt),Oe=0;Oe<Mt;Oe++)Lt[Oe]=arguments[Oe+2];pt.children=Lt}return N(O.type,Et,pt)},Ct.createContext=function(O){return O={$$typeof:c,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:l,_context:O},O},Ct.createElement=function(O,Z,rt){var pt,Et={},Mt=null;if(Z!=null)for(pt in Z.key!==void 0&&(Mt=""+Z.key),Z)M.call(Z,pt)&&pt!=="key"&&pt!=="__self"&&pt!=="__source"&&(Et[pt]=Z[pt]);var Lt=arguments.length-2;if(Lt===1)Et.children=rt;else if(1<Lt){for(var Oe=Array(Lt),ue=0;ue<Lt;ue++)Oe[ue]=arguments[ue+2];Et.children=Oe}if(O&&O.defaultProps)for(pt in Lt=O.defaultProps,Lt)Et[pt]===void 0&&(Et[pt]=Lt[pt]);return N(O,Mt,Et)},Ct.createRef=function(){return{current:null}},Ct.forwardRef=function(O){return{$$typeof:d,render:O}},Ct.isValidElement=L,Ct.lazy=function(O){return{$$typeof:v,_payload:{_status:-1,_result:O},_init:_t}},Ct.memo=function(O,Z){return{$$typeof:m,type:O,compare:Z===void 0?null:Z}},Ct.startTransition=function(O){var Z=D.T,rt={};D.T=rt;try{var pt=O(),Et=D.S;Et!==null&&Et(rt,pt),typeof pt=="object"&&pt!==null&&typeof pt.then=="function"&&pt.then(at,Gt)}catch(Mt){Gt(Mt)}finally{Z!==null&&rt.types!==null&&(Z.types=rt.types),D.T=Z}},Ct.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},Ct.use=function(O){return D.H.use(O)},Ct.useActionState=function(O,Z,rt){return D.H.useActionState(O,Z,rt)},Ct.useCallback=function(O,Z){return D.H.useCallback(O,Z)},Ct.useContext=function(O){return D.H.useContext(O)},Ct.useDebugValue=function(){},Ct.useDeferredValue=function(O,Z){return D.H.useDeferredValue(O,Z)},Ct.useEffect=function(O,Z){return D.H.useEffect(O,Z)},Ct.useEffectEvent=function(O){return D.H.useEffectEvent(O)},Ct.useId=function(){return D.H.useId()},Ct.useImperativeHandle=function(O,Z,rt){return D.H.useImperativeHandle(O,Z,rt)},Ct.useInsertionEffect=function(O,Z){return D.H.useInsertionEffect(O,Z)},Ct.useLayoutEffect=function(O,Z){return D.H.useLayoutEffect(O,Z)},Ct.useMemo=function(O,Z){return D.H.useMemo(O,Z)},Ct.useOptimistic=function(O,Z){return D.H.useOptimistic(O,Z)},Ct.useReducer=function(O,Z,rt){return D.H.useReducer(O,Z,rt)},Ct.useRef=function(O){return D.H.useRef(O)},Ct.useState=function(O){return D.H.useState(O)},Ct.useSyncExternalStore=function(O,Z,rt){return D.H.useSyncExternalStore(O,Z,rt)},Ct.useTransition=function(){return D.H.useTransition()},Ct.version="19.2.3",Ct}var m_;function np(){return m_||(m_=1,rh.exports=tC()),rh.exports}var Ue=np();const eC=ZT(Ue);var ah={exports:{}},el={},lh={exports:{}},uh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g_;function nC(){return g_||(g_=1,(function(n){function t($,lt){var _t=$.length;$.push(lt);t:for(;0<_t;){var Gt=_t-1>>>1,Qt=$[Gt];if(0<r(Qt,lt))$[Gt]=lt,$[_t]=Qt,_t=Gt;else break t}}function e($){return $.length===0?null:$[0]}function o($){if($.length===0)return null;var lt=$[0],_t=$.pop();if(_t!==lt){$[0]=_t;t:for(var Gt=0,Qt=$.length,O=Qt>>>1;Gt<O;){var Z=2*(Gt+1)-1,rt=$[Z],pt=Z+1,Et=$[pt];if(0>r(rt,_t))pt<Qt&&0>r(Et,rt)?($[Gt]=Et,$[pt]=_t,Gt=pt):($[Gt]=rt,$[Z]=_t,Gt=Z);else if(pt<Qt&&0>r(Et,_t))$[Gt]=Et,$[pt]=_t,Gt=pt;else break t}}return lt}function r($,lt){var _t=$.sortIndex-lt.sortIndex;return _t!==0?_t:$.id-lt.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var y=[],m=[],v=1,E=null,A=3,I=!1,P=!1,q=!1,U=!1,X=typeof setTimeout=="function"?setTimeout:null,ot=typeof clearTimeout=="function"?clearTimeout:null,J=typeof setImmediate<"u"?setImmediate:null;function et($){for(var lt=e(m);lt!==null;){if(lt.callback===null)o(m);else if(lt.startTime<=$)o(m),lt.sortIndex=lt.expirationTime,t(y,lt);else break;lt=e(m)}}function ct($){if(q=!1,et($),!P)if(e(y)!==null)P=!0,at||(at=!0,G());else{var lt=e(m);lt!==null&&ve(ct,lt.startTime-$)}}var at=!1,D=-1,M=5,N=-1;function V(){return U?!0:!(n.unstable_now()-N<M)}function L(){if(U=!1,at){var $=n.unstable_now();N=$;var lt=!0;try{t:{P=!1,q&&(q=!1,ot(D),D=-1),I=!0;var _t=A;try{e:{for(et($),E=e(y);E!==null&&!(E.expirationTime>$&&V());){var Gt=E.callback;if(typeof Gt=="function"){E.callback=null,A=E.priorityLevel;var Qt=Gt(E.expirationTime<=$);if($=n.unstable_now(),typeof Qt=="function"){E.callback=Qt,et($),lt=!0;break e}E===e(y)&&o(y),et($)}else o(y);E=e(y)}if(E!==null)lt=!0;else{var O=e(m);O!==null&&ve(ct,O.startTime-$),lt=!1}}break t}finally{E=null,A=_t,I=!1}lt=void 0}}finally{lt?G():at=!1}}}var G;if(typeof J=="function")G=function(){J(L)};else if(typeof MessageChannel<"u"){var b=new MessageChannel,Kt=b.port2;b.port1.onmessage=L,G=function(){Kt.postMessage(null)}}else G=function(){X(L,0)};function ve($,lt){D=X(function(){$(n.unstable_now())},lt)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function($){$.callback=null},n.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<$?Math.floor(1e3/$):5},n.unstable_getCurrentPriorityLevel=function(){return A},n.unstable_next=function($){switch(A){case 1:case 2:case 3:var lt=3;break;default:lt=A}var _t=A;A=lt;try{return $()}finally{A=_t}},n.unstable_requestPaint=function(){U=!0},n.unstable_runWithPriority=function($,lt){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var _t=A;A=$;try{return lt()}finally{A=_t}},n.unstable_scheduleCallback=function($,lt,_t){var Gt=n.unstable_now();switch(typeof _t=="object"&&_t!==null?(_t=_t.delay,_t=typeof _t=="number"&&0<_t?Gt+_t:Gt):_t=Gt,$){case 1:var Qt=-1;break;case 2:Qt=250;break;case 5:Qt=1073741823;break;case 4:Qt=1e4;break;default:Qt=5e3}return Qt=_t+Qt,$={id:v++,callback:lt,priorityLevel:$,startTime:_t,expirationTime:Qt,sortIndex:-1},_t>Gt?($.sortIndex=_t,t(m,$),e(y)===null&&$===e(m)&&(q?(ot(D),D=-1):q=!0,ve(ct,_t-Gt))):($.sortIndex=Qt,t(y,$),P||I||(P=!0,at||(at=!0,G()))),$},n.unstable_shouldYield=V,n.unstable_wrapCallback=function($){var lt=A;return function(){var _t=A;A=lt;try{return $.apply(this,arguments)}finally{A=_t}}}})(uh)),uh}var y_;function iC(){return y_||(y_=1,lh.exports=nC()),lh.exports}var ch={exports:{}},Ze={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var __;function oC(){if(__)return Ze;__=1;var n=np();function t(y){var m="https://react.dev/errors/"+y;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+y+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var o={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},r=Symbol.for("react.portal");function l(y,m,v){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:E==null?null:""+E,children:y,containerInfo:m,implementation:v}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(y,m){if(y==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return Ze.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,Ze.createPortal=function(y,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(t(299));return l(y,m,null,v)},Ze.flushSync=function(y){var m=c.T,v=o.p;try{if(c.T=null,o.p=2,y)return y()}finally{c.T=m,o.p=v,o.d.f()}},Ze.preconnect=function(y,m){typeof y=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,o.d.C(y,m))},Ze.prefetchDNS=function(y){typeof y=="string"&&o.d.D(y)},Ze.preinit=function(y,m){if(typeof y=="string"&&m&&typeof m.as=="string"){var v=m.as,E=d(v,m.crossOrigin),A=typeof m.integrity=="string"?m.integrity:void 0,I=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;v==="style"?o.d.S(y,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:E,integrity:A,fetchPriority:I}):v==="script"&&o.d.X(y,{crossOrigin:E,integrity:A,fetchPriority:I,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},Ze.preinitModule=function(y,m){if(typeof y=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var v=d(m.as,m.crossOrigin);o.d.M(y,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&o.d.M(y)},Ze.preload=function(y,m){if(typeof y=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var v=m.as,E=d(v,m.crossOrigin);o.d.L(y,v,{crossOrigin:E,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},Ze.preloadModule=function(y,m){if(typeof y=="string")if(m){var v=d(m.as,m.crossOrigin);o.d.m(y,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else o.d.m(y)},Ze.requestFormReset=function(y){o.d.r(y)},Ze.unstable_batchedUpdates=function(y,m){return y(m)},Ze.useFormState=function(y,m,v){return c.H.useFormState(y,m,v)},Ze.useFormStatus=function(){return c.H.useHostTransitionStatus()},Ze.version="19.2.3",Ze}var v_;function sC(){if(v_)return ch.exports;v_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),ch.exports=oC(),ch.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T_;function rC(){if(T_)return el;T_=1;var n=iC(),t=np(),e=sC();function o(i){var s="https://react.dev/errors/"+i;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var s=i,a=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(a=s.return),i=s.return;while(i)}return s.tag===3?a:null}function c(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function d(i){if(i.tag===31){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function y(i){if(l(i)!==i)throw Error(o(188))}function m(i){var s=i.alternate;if(!s){if(s=l(i),s===null)throw Error(o(188));return s!==i?null:i}for(var a=i,u=s;;){var g=a.return;if(g===null)break;var _=g.alternate;if(_===null){if(u=g.return,u!==null){a=u;continue}break}if(g.child===_.child){for(_=g.child;_;){if(_===a)return y(g),i;if(_===u)return y(g),s;_=_.sibling}throw Error(o(188))}if(a.return!==u.return)a=g,u=_;else{for(var S=!1,R=g.child;R;){if(R===a){S=!0,a=g,u=_;break}if(R===u){S=!0,u=g,a=_;break}R=R.sibling}if(!S){for(R=_.child;R;){if(R===a){S=!0,a=_,u=g;break}if(R===u){S=!0,u=_,a=g;break}R=R.sibling}if(!S)throw Error(o(189))}}if(a.alternate!==u)throw Error(o(190))}if(a.tag!==3)throw Error(o(188));return a.stateNode.current===a?i:s}function v(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i;for(i=i.child;i!==null;){if(s=v(i),s!==null)return s;i=i.sibling}return null}var E=Object.assign,A=Symbol.for("react.element"),I=Symbol.for("react.transitional.element"),P=Symbol.for("react.portal"),q=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),X=Symbol.for("react.profiler"),ot=Symbol.for("react.consumer"),J=Symbol.for("react.context"),et=Symbol.for("react.forward_ref"),ct=Symbol.for("react.suspense"),at=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function G(i){return i===null||typeof i!="object"?null:(i=L&&i[L]||i["@@iterator"],typeof i=="function"?i:null)}var b=Symbol.for("react.client.reference");function Kt(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===b?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case q:return"Fragment";case X:return"Profiler";case U:return"StrictMode";case ct:return"Suspense";case at:return"SuspenseList";case N:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case P:return"Portal";case J:return i.displayName||"Context";case ot:return(i._context.displayName||"Context")+".Consumer";case et:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case D:return s=i.displayName||null,s!==null?s:Kt(i.type)||"Memo";case M:s=i._payload,i=i._init;try{return Kt(i(s))}catch{}}return null}var ve=Array.isArray,$=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,lt=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_t={pending:!1,data:null,method:null,action:null},Gt=[],Qt=-1;function O(i){return{current:i}}function Z(i){0>Qt||(i.current=Gt[Qt],Gt[Qt]=null,Qt--)}function rt(i,s){Qt++,Gt[Qt]=i.current,i.current=s}var pt=O(null),Et=O(null),Mt=O(null),Lt=O(null);function Oe(i,s){switch(rt(Mt,s),rt(Et,i),rt(pt,null),s.nodeType){case 9:case 11:i=(i=s.documentElement)&&(i=i.namespaceURI)?Uy(i):0;break;default:if(i=s.tagName,s=s.namespaceURI)s=Uy(s),i=Ly(s,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}Z(pt),rt(pt,i)}function ue(){Z(pt),Z(Et),Z(Mt)}function ni(i){i.memoizedState!==null&&rt(Lt,i);var s=pt.current,a=Ly(s,i.type);s!==a&&(rt(Et,i),rt(pt,a))}function _i(i){Et.current===i&&(Z(pt),Z(Et)),Lt.current===i&&(Z(Lt),Xa._currentValue=_t)}var Xo,ks;function zn(i){if(Xo===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);Xo=s&&s[1]||"",ks=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Xo+i+ks}var Wo=!1;function Os(i,s){if(!i||Wo)return"";Wo=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var tt=function(){throw Error()};if(Object.defineProperty(tt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(tt,[])}catch(K){var Y=K}Reflect.construct(i,[],tt)}else{try{tt.call()}catch(K){Y=K}i.call(tt.prototype)}}else{try{throw Error()}catch(K){Y=K}(tt=i())&&typeof tt.catch=="function"&&tt.catch(function(){})}}catch(K){if(K&&Y&&typeof K.stack=="string")return[K.stack,Y.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=u.DetermineComponentFrameRoot(),S=_[0],R=_[1];if(S&&R){var x=S.split(`
`),z=R.split(`
`);for(g=u=0;u<x.length&&!x[u].includes("DetermineComponentFrameRoot");)u++;for(;g<z.length&&!z[g].includes("DetermineComponentFrameRoot");)g++;if(u===x.length||g===z.length)for(u=x.length-1,g=z.length-1;1<=u&&0<=g&&x[u]!==z[g];)g--;for(;1<=u&&0<=g;u--,g--)if(x[u]!==z[g]){if(u!==1||g!==1)do if(u--,g--,0>g||x[u]!==z[g]){var W=`
`+x[u].replace(" at new "," at ");return i.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",i.displayName)),W}while(1<=u&&0<=g);break}}}finally{Wo=!1,Error.prepareStackTrace=a}return(a=i?i.displayName||i.name:"")?zn(a):""}function ef(i,s){switch(i.tag){case 26:case 27:case 5:return zn(i.type);case 16:return zn("Lazy");case 13:return i.child!==s&&s!==null?zn("Suspense Fallback"):zn("Suspense");case 19:return zn("SuspenseList");case 0:case 15:return Os(i.type,!1);case 11:return Os(i.type.render,!1);case 1:return Os(i.type,!0);case 31:return zn("Activity");default:return""}}function Dl(i){try{var s="",a=null;do s+=ef(i,a),a=i,i=i.return;while(i);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var qs=Object.prototype.hasOwnProperty,Zo=n.unstable_scheduleCallback,Gs=n.unstable_cancelCallback,nf=n.unstable_shouldYield,jr=n.unstable_requestPaint,qe=n.unstable_now,bl=n.unstable_getCurrentPriorityLevel,we=n.unstable_ImmediatePriority,De=n.unstable_UserBlockingPriority,vi=n.unstable_NormalPriority,xl=n.unstable_LowPriority,ta=n.unstable_IdlePriority,of=n.log,jo=n.unstable_setDisableYieldValue,Zi=null,Xe=null;function Mn(i){if(typeof of=="function"&&jo(i),Xe&&typeof Xe.setStrictMode=="function")try{Xe.setStrictMode(Zi,i)}catch{}}var on=Math.clz32?Math.clz32:Vl,sf=Math.log,ea=Math.LN2;function Vl(i){return i>>>=0,i===0?32:31-(sf(i)/ea|0)|0}var ts=256,ii=262144,ji=4194304;function Yn(i){var s=i&42;if(s!==0)return s;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Dn(i,s,a){var u=i.pendingLanes;if(u===0)return 0;var g=0,_=i.suspendedLanes,S=i.pingedLanes;i=i.warmLanes;var R=u&134217727;return R!==0?(u=R&~_,u!==0?g=Yn(u):(S&=R,S!==0?g=Yn(S):a||(a=R&~i,a!==0&&(g=Yn(a))))):(R=u&~_,R!==0?g=Yn(R):S!==0?g=Yn(S):a||(a=u&~i,a!==0&&(g=Yn(a)))),g===0?0:s!==0&&s!==g&&(s&_)===0&&(_=g&-g,a=s&-s,_>=a||_===32&&(a&4194048)!==0)?s:g}function to(i,s){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&s)===0}function Bs(i,s){switch(i){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function na(){var i=ji;return ji<<=1,(ji&62914560)===0&&(ji=4194304),i}function Ti(i){for(var s=[],a=0;31>a;a++)s.push(i);return s}function eo(i,s){i.pendingLanes|=s,s!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Ge(i,s,a,u,g,_){var S=i.pendingLanes;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=a,i.entangledLanes&=a,i.errorRecoveryDisabledLanes&=a,i.shellSuspendCounter=0;var R=i.entanglements,x=i.expirationTimes,z=i.hiddenUpdates;for(a=S&~a;0<a;){var W=31-on(a),tt=1<<W;R[W]=0,x[W]=-1;var Y=z[W];if(Y!==null)for(z[W]=null,W=0;W<Y.length;W++){var K=Y[W];K!==null&&(K.lane&=-536870913)}a&=~tt}u!==0&&ia(i,u,0),_!==0&&g===0&&i.tag!==0&&(i.suspendedLanes|=_&~(S&~s))}function ia(i,s,a){i.pendingLanes|=s,i.suspendedLanes&=~s;var u=31-on(s);i.entangledLanes|=s,i.entanglements[u]=i.entanglements[u]|1073741824|a&261930}function no(i,s){var a=i.entangledLanes|=s;for(i=i.entanglements;a;){var u=31-on(a),g=1<<u;g&s|i[u]&s&&(i[u]|=s),a&=~g}}function io(i,s){var a=s&-s;return a=(a&42)!==0?1:oa(a),(a&(i.suspendedLanes|s))!==0?0:a}function oa(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function sa(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Ei(){var i=lt.p;return i!==0?i:(i=window.event,i===void 0?32:s_(i.type))}function Pl(i,s){var a=lt.p;try{return lt.p=i,s()}finally{lt.p=a}}var oi=Math.random().toString(36).slice(2),fe="__reactFiber$"+oi,Be="__reactProps$"+oi,si="__reactContainer$"+oi,oo="__reactEvents$"+oi,ri="__reactListeners$"+oi,Ul="__reactHandles$"+oi,ra="__reactResources$"+oi,Ai="__reactMarker$"+oi;function es(i){delete i[fe],delete i[Be],delete i[oo],delete i[ri],delete i[Ul]}function Si(i){var s=i[fe];if(s)return s;for(var a=i.parentNode;a;){if(s=a[si]||a[fe]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(i=Hy(i);i!==null;){if(a=i[fe])return a;i=Hy(i)}return s}i=a,a=i.parentNode}return null}function Ci(i){if(i=i[fe]||i[si]){var s=i.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return i}return null}function ns(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i.stateNode;throw Error(o(33))}function Jn(i){var s=i[ra];return s||(s=i[ra]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function me(i){i[Ai]=!0}var Fs=new Set,so={};function sn(i,s){ai(i,s),ai(i+"Capture",s)}function ai(i,s){for(so[i]=s,i=0;i<s.length;i++)Fs.add(s[i])}var rf=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),aa={},la={};function Ll(i){return qs.call(la,i)?!0:qs.call(aa,i)?!1:rf.test(i)?la[i]=!0:(aa[i]=!0,!1)}function ro(i,s,a){if(Ll(s))if(a===null)i.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":i.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){i.removeAttribute(s);return}}i.setAttribute(s,""+a)}}function ao(i,s,a){if(a===null)i.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(s);return}i.setAttribute(s,""+a)}}function bn(i,s,a,u){if(u===null)i.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttributeNS(s,a,""+u)}}function rn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function kl(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function af(i,s,a){var u=Object.getOwnPropertyDescriptor(i.constructor.prototype,s);if(!i.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,_=u.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return g.call(this)},set:function(S){a=""+S,_.call(this,S)}}),Object.defineProperty(i,s,{enumerable:u.enumerable}),{getValue:function(){return a},setValue:function(S){a=""+S},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function Hs(i){if(!i._valueTracker){var s=kl(i)?"checked":"value";i._valueTracker=af(i,s,""+i[s])}}function ua(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var a=s.getValue(),u="";return i&&(u=kl(i)?i.checked?"true":"false":i.value),i=u,i!==a?(s.setValue(i),!0):!1}function zs(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Ri=/[\n"\\]/g;function de(i){return i.replace(Ri,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function lo(i,s,a,u,g,_,S,R){i.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?i.type=S:i.removeAttribute("type"),s!=null?S==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+rn(s)):i.value!==""+rn(s)&&(i.value=""+rn(s)):S!=="submit"&&S!=="reset"||i.removeAttribute("value"),s!=null?Ys(i,S,rn(s)):a!=null?Ys(i,S,rn(a)):u!=null&&i.removeAttribute("value"),g==null&&_!=null&&(i.defaultChecked=!!_),g!=null&&(i.checked=g&&typeof g!="function"&&typeof g!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?i.name=""+rn(R):i.removeAttribute("name")}function is(i,s,a,u,g,_,S,R){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(i.type=_),s!=null||a!=null){if(!(_!=="submit"&&_!=="reset"||s!=null)){Hs(i);return}a=a!=null?""+rn(a):"",s=s!=null?""+rn(s):a,R||s===i.value||(i.value=s),i.defaultValue=s}u=u??g,u=typeof u!="function"&&typeof u!="symbol"&&!!u,i.checked=R?i.checked:!!u,i.defaultChecked=!!u,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(i.name=S),Hs(i)}function Ys(i,s,a){s==="number"&&zs(i.ownerDocument)===i||i.defaultValue===""+a||(i.defaultValue=""+a)}function Bt(i,s,a,u){if(i=i.options,s){s={};for(var g=0;g<a.length;g++)s["$"+a[g]]=!0;for(a=0;a<i.length;a++)g=s.hasOwnProperty("$"+i[a].value),i[a].selected!==g&&(i[a].selected=g),g&&u&&(i[a].defaultSelected=!0)}else{for(a=""+rn(a),s=null,g=0;g<i.length;g++){if(i[g].value===a){i[g].selected=!0,u&&(i[g].defaultSelected=!0);return}s!==null||i[g].disabled||(s=i[g])}s!==null&&(s.selected=!0)}}function os(i,s,a){if(s!=null&&(s=""+rn(s),s!==i.value&&(i.value=s),a==null)){i.defaultValue!==s&&(i.defaultValue=s);return}i.defaultValue=a!=null?""+rn(a):""}function uo(i,s,a,u){if(s==null){if(u!=null){if(a!=null)throw Error(o(92));if(ve(u)){if(1<u.length)throw Error(o(93));u=u[0]}a=u}a==null&&(a=""),s=a}a=rn(s),i.defaultValue=a,u=i.textContent,u===a&&u!==""&&u!==null&&(i.value=u),Hs(i)}function xn(i,s){if(s){var a=i.firstChild;if(a&&a===i.lastChild&&a.nodeType===3){a.nodeValue=s;return}}i.textContent=s}var lf=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ca(i,s,a){var u=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?u?i.setProperty(s,""):s==="float"?i.cssFloat="":i[s]="":u?i.setProperty(s,a):typeof a!="number"||a===0||lf.has(s)?s==="float"?i.cssFloat=a:i[s]=(""+a).trim():i[s]=a+"px"}function Ol(i,s,a){if(s!=null&&typeof s!="object")throw Error(o(62));if(i=i.style,a!=null){for(var u in a)!a.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?i.setProperty(u,""):u==="float"?i.cssFloat="":i[u]="");for(var g in s)u=s[g],s.hasOwnProperty(g)&&a[g]!==u&&ca(i,g,u)}else for(var _ in s)s.hasOwnProperty(_)&&ca(i,_,s[_])}function fa(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var uf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),cf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function li(i){return cf.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function be(){}var Js=null;function Ks(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Ii=null,vn=null;function ql(i){var s=Ci(i);if(s&&(i=s.stateNode)){var a=i[Be]||null;t:switch(i=s.stateNode,s.type){case"input":if(lo(i,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=i;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+de(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var u=a[s];if(u!==i&&u.form===i.form){var g=u[Be]||null;if(!g)throw Error(o(90));lo(u,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(s=0;s<a.length;s++)u=a[s],u.form===i.form&&ua(u)}break t;case"textarea":os(i,a.value,a.defaultValue);break t;case"select":s=a.value,s!=null&&Bt(i,!!a.multiple,s,!1)}}}var da=!1;function Gl(i,s,a){if(da)return i(s,a);da=!0;try{var u=i(s);return u}finally{if(da=!1,(Ii!==null||vn!==null)&&(Lu(),Ii&&(s=Ii,i=vn,vn=Ii=null,ql(s),i)))for(s=0;s<i.length;s++)ql(i[s])}}function dn(i,s){var a=i.stateNode;if(a===null)return null;var u=a[Be]||null;if(u===null)return null;a=u[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(i=i.type,u=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!u;break t;default:i=!1}if(i)return null;if(a&&typeof a!="function")throw Error(o(231,s,typeof a));return a}var Kn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ha=!1;if(Kn)try{var ui={};Object.defineProperty(ui,"passive",{get:function(){ha=!0}}),window.addEventListener("test",ui,ui),window.removeEventListener("test",ui,ui)}catch{ha=!1}var Tn=null,Qs=null,ci=null;function co(){if(ci)return ci;var i,s=Qs,a=s.length,u,g="value"in Tn?Tn.value:Tn.textContent,_=g.length;for(i=0;i<a&&s[i]===g[i];i++);var S=a-i;for(u=1;u<=S&&s[a-u]===g[_-u];u++);return ci=g.slice(i,1<u?1-u:void 0)}function ss(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function fo(){return!0}function ie(){return!1}function We(i){function s(a,u,g,_,S){this._reactName=a,this._targetInst=g,this.type=u,this.nativeEvent=_,this.target=S,this.currentTarget=null;for(var R in i)i.hasOwnProperty(R)&&(a=i[R],this[R]=a?a(_):_[R]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?fo:ie,this.isPropagationStopped=ie,this}return E(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=fo)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=fo)},persist:function(){},isPersistent:fo}),s}var wi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rs=We(wi),ho=E({},wi,{view:0,detail:0}),Bl=We(ho),po,$s,an,as=E({},ho,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:go,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==an&&(an&&i.type==="mousemove"?(po=i.screenX-an.screenX,$s=i.screenY-an.screenY):$s=po=0,an=i),po)},movementY:function(i){return"movementY"in i?i.movementY:$s}}),Fl=We(as),ls=E({},as,{dataTransfer:0}),Hl=We(ls),pa=E({},ho,{relatedTarget:0}),mo=We(pa),zl=E({},wi,{animationName:0,elapsedTime:0,pseudoElement:0}),Xs=We(zl),ff=E({},wi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Yl=We(ff),us=E({},wi,{data:0}),ma=We(us),Jl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ga={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ya={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Kl(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=ya[i])?!!s[i]:!1}function go(){return Kl}var Ql=E({},ho,{key:function(i){if(i.key){var s=Jl[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=ss(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?ga[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:go,charCode:function(i){return i.type==="keypress"?ss(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?ss(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),$l=We(Ql),Ni=E({},as,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_a=We(Ni),Xl=E({},ho,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:go}),Wl=We(Xl),Zl=E({},wi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ws=We(Zl),ln=E({},as,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),jl=We(ln),tu=E({},wi,{newState:0,oldState:0}),yo=We(tu),h=[9,13,27,32],T=Kn&&"CompositionEvent"in window,C=null;Kn&&"documentMode"in document&&(C=document.documentMode);var w=Kn&&"TextEvent"in window&&!C,F=Kn&&(!T||C&&8<C&&11>=C),Q=" ",ut=!1;function $t(i,s){switch(i){case"keyup":return h.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Te(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Dt=!1;function xe(i,s){switch(i){case"compositionend":return Te(s);case"keypress":return s.which!==32?null:(ut=!0,Q);case"textInput":return i=s.data,i===Q&&ut?null:i;default:return null}}function Ve(i,s){if(Dt)return i==="compositionend"||!T&&$t(i,s)?(i=co(),ci=Qs=Tn=null,Dt=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return F&&s.locale!=="ko"?null:s.data;default:return null}}var _o={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hn(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!_o[i.type]:s==="textarea"}function cs(i,s,a,u){Ii?vn?vn.push(u):vn=[u]:Ii=u,s=Hu(s,"onChange"),0<s.length&&(a=new rs("onChange","change",null,a,u),i.push({event:a,listeners:s}))}var Mi=null,va=null;function RA(i){My(i,0)}function eu(i){var s=ns(i);if(ua(s))return i}function Qp(i,s){if(i==="change")return s}var $p=!1;if(Kn){var df;if(Kn){var hf="oninput"in document;if(!hf){var Xp=document.createElement("div");Xp.setAttribute("oninput","return;"),hf=typeof Xp.oninput=="function"}df=hf}else df=!1;$p=df&&(!document.documentMode||9<document.documentMode)}function Wp(){Mi&&(Mi.detachEvent("onpropertychange",Zp),va=Mi=null)}function Zp(i){if(i.propertyName==="value"&&eu(va)){var s=[];cs(s,va,i,Ks(i)),Gl(RA,s)}}function IA(i,s,a){i==="focusin"?(Wp(),Mi=s,va=a,Mi.attachEvent("onpropertychange",Zp)):i==="focusout"&&Wp()}function wA(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return eu(va)}function NA(i,s){if(i==="click")return eu(s)}function MA(i,s){if(i==="input"||i==="change")return eu(s)}function DA(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var En=typeof Object.is=="function"?Object.is:DA;function Ta(i,s){if(En(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var a=Object.keys(i),u=Object.keys(s);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++){var g=a[u];if(!qs.call(s,g)||!En(i[g],s[g]))return!1}return!0}function jp(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function tm(i,s){var a=jp(i);i=0;for(var u;a;){if(a.nodeType===3){if(u=i+a.textContent.length,i<=s&&u>=s)return{node:a,offset:s-i};i=u}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=jp(a)}}function em(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?em(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function nm(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var s=zs(i.document);s instanceof i.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)i=s.contentWindow;else break;s=zs(i.document)}return s}function pf(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}var bA=Kn&&"documentMode"in document&&11>=document.documentMode,Zs=null,mf=null,Ea=null,gf=!1;function im(i,s,a){var u=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;gf||Zs==null||Zs!==zs(u)||(u=Zs,"selectionStart"in u&&pf(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Ea&&Ta(Ea,u)||(Ea=u,u=Hu(mf,"onSelect"),0<u.length&&(s=new rs("onSelect","select",null,s,a),i.push({event:s,listeners:u}),s.target=Zs)))}function fs(i,s){var a={};return a[i.toLowerCase()]=s.toLowerCase(),a["Webkit"+i]="webkit"+s,a["Moz"+i]="moz"+s,a}var js={animationend:fs("Animation","AnimationEnd"),animationiteration:fs("Animation","AnimationIteration"),animationstart:fs("Animation","AnimationStart"),transitionrun:fs("Transition","TransitionRun"),transitionstart:fs("Transition","TransitionStart"),transitioncancel:fs("Transition","TransitionCancel"),transitionend:fs("Transition","TransitionEnd")},yf={},om={};Kn&&(om=document.createElement("div").style,"AnimationEvent"in window||(delete js.animationend.animation,delete js.animationiteration.animation,delete js.animationstart.animation),"TransitionEvent"in window||delete js.transitionend.transition);function ds(i){if(yf[i])return yf[i];if(!js[i])return i;var s=js[i],a;for(a in s)if(s.hasOwnProperty(a)&&a in om)return yf[i]=s[a];return i}var sm=ds("animationend"),rm=ds("animationiteration"),am=ds("animationstart"),xA=ds("transitionrun"),VA=ds("transitionstart"),PA=ds("transitioncancel"),lm=ds("transitionend"),um=new Map,_f="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");_f.push("scrollEnd");function Qn(i,s){um.set(i,s),sn(s,[i])}var nu=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Vn=[],tr=0,vf=0;function iu(){for(var i=tr,s=vf=tr=0;s<i;){var a=Vn[s];Vn[s++]=null;var u=Vn[s];Vn[s++]=null;var g=Vn[s];Vn[s++]=null;var _=Vn[s];if(Vn[s++]=null,u!==null&&g!==null){var S=u.pending;S===null?g.next=g:(g.next=S.next,S.next=g),u.pending=g}_!==0&&cm(a,g,_)}}function ou(i,s,a,u){Vn[tr++]=i,Vn[tr++]=s,Vn[tr++]=a,Vn[tr++]=u,vf|=u,i.lanes|=u,i=i.alternate,i!==null&&(i.lanes|=u)}function Tf(i,s,a,u){return ou(i,s,a,u),su(i)}function hs(i,s){return ou(i,null,null,s),su(i)}function cm(i,s,a){i.lanes|=a;var u=i.alternate;u!==null&&(u.lanes|=a);for(var g=!1,_=i.return;_!==null;)_.childLanes|=a,u=_.alternate,u!==null&&(u.childLanes|=a),_.tag===22&&(i=_.stateNode,i===null||i._visibility&1||(g=!0)),i=_,_=_.return;return i.tag===3?(_=i.stateNode,g&&s!==null&&(g=31-on(a),i=_.hiddenUpdates,u=i[g],u===null?i[g]=[s]:u.push(s),s.lane=a|536870912),_):null}function su(i){if(50<Ha)throw Ha=0,Md=null,Error(o(185));for(var s=i.return;s!==null;)i=s,s=i.return;return i.tag===3?i.stateNode:null}var er={};function UA(i,s,a,u){this.tag=i,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function An(i,s,a,u){return new UA(i,s,a,u)}function Ef(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Di(i,s){var a=i.alternate;return a===null?(a=An(i.tag,s,i.key,i.mode),a.elementType=i.elementType,a.type=i.type,a.stateNode=i.stateNode,a.alternate=i,i.alternate=a):(a.pendingProps=s,a.type=i.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=i.flags&65011712,a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,s=i.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=i.sibling,a.index=i.index,a.ref=i.ref,a.refCleanup=i.refCleanup,a}function fm(i,s){i.flags&=65011714;var a=i.alternate;return a===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,s=a.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i}function ru(i,s,a,u,g,_){var S=0;if(u=i,typeof i=="function")Ef(i)&&(S=1);else if(typeof i=="string")S=GS(i,a,pt.current)?26:i==="html"||i==="head"||i==="body"?27:5;else t:switch(i){case N:return i=An(31,a,s,g),i.elementType=N,i.lanes=_,i;case q:return ps(a.children,g,_,s);case U:S=8,g|=24;break;case X:return i=An(12,a,s,g|2),i.elementType=X,i.lanes=_,i;case ct:return i=An(13,a,s,g),i.elementType=ct,i.lanes=_,i;case at:return i=An(19,a,s,g),i.elementType=at,i.lanes=_,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case J:S=10;break t;case ot:S=9;break t;case et:S=11;break t;case D:S=14;break t;case M:S=16,u=null;break t}S=29,a=Error(o(130,i===null?"null":typeof i,"")),u=null}return s=An(S,a,s,g),s.elementType=i,s.type=u,s.lanes=_,s}function ps(i,s,a,u){return i=An(7,i,u,s),i.lanes=a,i}function Af(i,s,a){return i=An(6,i,null,s),i.lanes=a,i}function dm(i){var s=An(18,null,null,0);return s.stateNode=i,s}function Sf(i,s,a){return s=An(4,i.children!==null?i.children:[],i.key,s),s.lanes=a,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}var hm=new WeakMap;function Pn(i,s){if(typeof i=="object"&&i!==null){var a=hm.get(i);return a!==void 0?a:(s={value:i,source:s,stack:Dl(s)},hm.set(i,s),s)}return{value:i,source:s,stack:Dl(s)}}var nr=[],ir=0,au=null,Aa=0,Un=[],Ln=0,vo=null,fi=1,di="";function bi(i,s){nr[ir++]=Aa,nr[ir++]=au,au=i,Aa=s}function pm(i,s,a){Un[Ln++]=fi,Un[Ln++]=di,Un[Ln++]=vo,vo=i;var u=fi;i=di;var g=32-on(u)-1;u&=~(1<<g),a+=1;var _=32-on(s)+g;if(30<_){var S=g-g%5;_=(u&(1<<S)-1).toString(32),u>>=S,g-=S,fi=1<<32-on(s)+g|a<<g|u,di=_+i}else fi=1<<_|a<<g|u,di=i}function Cf(i){i.return!==null&&(bi(i,1),pm(i,1,0))}function Rf(i){for(;i===au;)au=nr[--ir],nr[ir]=null,Aa=nr[--ir],nr[ir]=null;for(;i===vo;)vo=Un[--Ln],Un[Ln]=null,di=Un[--Ln],Un[Ln]=null,fi=Un[--Ln],Un[Ln]=null}function mm(i,s){Un[Ln++]=fi,Un[Ln++]=di,Un[Ln++]=vo,fi=s.id,di=s.overflow,vo=i}var Fe=null,oe=null,kt=!1,To=null,kn=!1,If=Error(o(519));function Eo(i){var s=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Sa(Pn(s,i)),If}function gm(i){var s=i.stateNode,a=i.type,u=i.memoizedProps;switch(s[fe]=i,s[Be]=u,a){case"dialog":xt("cancel",s),xt("close",s);break;case"iframe":case"object":case"embed":xt("load",s);break;case"video":case"audio":for(a=0;a<Ya.length;a++)xt(Ya[a],s);break;case"source":xt("error",s);break;case"img":case"image":case"link":xt("error",s),xt("load",s);break;case"details":xt("toggle",s);break;case"input":xt("invalid",s),is(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":xt("invalid",s);break;case"textarea":xt("invalid",s),uo(s,u.value,u.defaultValue,u.children)}a=u.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||u.suppressHydrationWarning===!0||Vy(s.textContent,a)?(u.popover!=null&&(xt("beforetoggle",s),xt("toggle",s)),u.onScroll!=null&&xt("scroll",s),u.onScrollEnd!=null&&xt("scrollend",s),u.onClick!=null&&(s.onclick=be),s=!0):s=!1,s||Eo(i,!0)}function ym(i){for(Fe=i.return;Fe;)switch(Fe.tag){case 5:case 31:case 13:kn=!1;return;case 27:case 3:kn=!0;return;default:Fe=Fe.return}}function or(i){if(i!==Fe)return!1;if(!kt)return ym(i),kt=!0,!1;var s=i.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=i.type,a=!(a!=="form"&&a!=="button")||zd(i.type,i.memoizedProps)),a=!a),a&&oe&&Eo(i),ym(i),s===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(317));oe=Fy(i)}else if(s===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(317));oe=Fy(i)}else s===27?(s=oe,Uo(i.type)?(i=$d,$d=null,oe=i):oe=s):oe=Fe?qn(i.stateNode.nextSibling):null;return!0}function ms(){oe=Fe=null,kt=!1}function wf(){var i=To;return i!==null&&(yn===null?yn=i:yn.push.apply(yn,i),To=null),i}function Sa(i){To===null?To=[i]:To.push(i)}var Nf=O(null),gs=null,xi=null;function Ao(i,s,a){rt(Nf,s._currentValue),s._currentValue=a}function Vi(i){i._currentValue=Nf.current,Z(Nf)}function Mf(i,s,a){for(;i!==null;){var u=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),i===a)break;i=i.return}}function Df(i,s,a,u){var g=i.child;for(g!==null&&(g.return=i);g!==null;){var _=g.dependencies;if(_!==null){var S=g.child;_=_.firstContext;t:for(;_!==null;){var R=_;_=g;for(var x=0;x<s.length;x++)if(R.context===s[x]){_.lanes|=a,R=_.alternate,R!==null&&(R.lanes|=a),Mf(_.return,a,i),u||(S=null);break t}_=R.next}}else if(g.tag===18){if(S=g.return,S===null)throw Error(o(341));S.lanes|=a,_=S.alternate,_!==null&&(_.lanes|=a),Mf(S,a,i),S=null}else S=g.child;if(S!==null)S.return=g;else for(S=g;S!==null;){if(S===i){S=null;break}if(g=S.sibling,g!==null){g.return=S.return,S=g;break}S=S.return}g=S}}function sr(i,s,a,u){i=null;for(var g=s,_=!1;g!==null;){if(!_){if((g.flags&524288)!==0)_=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var S=g.alternate;if(S===null)throw Error(o(387));if(S=S.memoizedProps,S!==null){var R=g.type;En(g.pendingProps.value,S.value)||(i!==null?i.push(R):i=[R])}}else if(g===Lt.current){if(S=g.alternate,S===null)throw Error(o(387));S.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(i!==null?i.push(Xa):i=[Xa])}g=g.return}i!==null&&Df(s,i,a,u),s.flags|=262144}function lu(i){for(i=i.firstContext;i!==null;){if(!En(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function ys(i){gs=i,xi=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function He(i){return _m(gs,i)}function uu(i,s){return gs===null&&ys(i),_m(i,s)}function _m(i,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},xi===null){if(i===null)throw Error(o(308));xi=s,i.dependencies={lanes:0,firstContext:s},i.flags|=524288}else xi=xi.next=s;return a}var LA=typeof AbortController<"u"?AbortController:function(){var i=[],s=this.signal={aborted:!1,addEventListener:function(a,u){i.push(u)}};this.abort=function(){s.aborted=!0,i.forEach(function(a){return a()})}},kA=n.unstable_scheduleCallback,OA=n.unstable_NormalPriority,Ee={$$typeof:J,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function bf(){return{controller:new LA,data:new Map,refCount:0}}function Ca(i){i.refCount--,i.refCount===0&&kA(OA,function(){i.controller.abort()})}var Ra=null,xf=0,rr=0,ar=null;function qA(i,s){if(Ra===null){var a=Ra=[];xf=0,rr=Ud(),ar={status:"pending",value:void 0,then:function(u){a.push(u)}}}return xf++,s.then(vm,vm),s}function vm(){if(--xf===0&&Ra!==null){ar!==null&&(ar.status="fulfilled");var i=Ra;Ra=null,rr=0,ar=null;for(var s=0;s<i.length;s++)(0,i[s])()}}function GA(i,s){var a=[],u={status:"pending",value:null,reason:null,then:function(g){a.push(g)}};return i.then(function(){u.status="fulfilled",u.value=s;for(var g=0;g<a.length;g++)(0,a[g])(s)},function(g){for(u.status="rejected",u.reason=g,g=0;g<a.length;g++)(0,a[g])(void 0)}),u}var Tm=$.S;$.S=function(i,s){iy=qe(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&qA(i,s),Tm!==null&&Tm(i,s)};var _s=O(null);function Vf(){var i=_s.current;return i!==null?i:ne.pooledCache}function cu(i,s){s===null?rt(_s,_s.current):rt(_s,s.pool)}function Em(){var i=Vf();return i===null?null:{parent:Ee._currentValue,pool:i}}var lr=Error(o(460)),Pf=Error(o(474)),fu=Error(o(542)),du={then:function(){}};function Am(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Sm(i,s,a){switch(a=i[a],a===void 0?i.push(s):a!==s&&(s.then(be,be),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,Rm(i),i;default:if(typeof s.status=="string")s.then(be,be);else{if(i=ne,i!==null&&100<i.shellSuspendCounter)throw Error(o(482));i=s,i.status="pending",i.then(function(u){if(s.status==="pending"){var g=s;g.status="fulfilled",g.value=u}},function(u){if(s.status==="pending"){var g=s;g.status="rejected",g.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,Rm(i),i}throw Ts=s,lr}}function vs(i){try{var s=i._init;return s(i._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Ts=a,lr):a}}var Ts=null;function Cm(){if(Ts===null)throw Error(o(459));var i=Ts;return Ts=null,i}function Rm(i){if(i===lr||i===fu)throw Error(o(483))}var ur=null,Ia=0;function hu(i){var s=Ia;return Ia+=1,ur===null&&(ur=[]),Sm(ur,i,s)}function wa(i,s){s=s.props.ref,i.ref=s!==void 0?s:null}function pu(i,s){throw s.$$typeof===A?Error(o(525)):(i=Object.prototype.toString.call(s),Error(o(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i)))}function Im(i){function s(B,k){if(i){var H=B.deletions;H===null?(B.deletions=[k],B.flags|=16):H.push(k)}}function a(B,k){if(!i)return null;for(;k!==null;)s(B,k),k=k.sibling;return null}function u(B){for(var k=new Map;B!==null;)B.key!==null?k.set(B.key,B):k.set(B.index,B),B=B.sibling;return k}function g(B,k){return B=Di(B,k),B.index=0,B.sibling=null,B}function _(B,k,H){return B.index=H,i?(H=B.alternate,H!==null?(H=H.index,H<k?(B.flags|=67108866,k):H):(B.flags|=67108866,k)):(B.flags|=1048576,k)}function S(B){return i&&B.alternate===null&&(B.flags|=67108866),B}function R(B,k,H,j){return k===null||k.tag!==6?(k=Af(H,B.mode,j),k.return=B,k):(k=g(k,H),k.return=B,k)}function x(B,k,H,j){var yt=H.type;return yt===q?W(B,k,H.props.children,j,H.key):k!==null&&(k.elementType===yt||typeof yt=="object"&&yt!==null&&yt.$$typeof===M&&vs(yt)===k.type)?(k=g(k,H.props),wa(k,H),k.return=B,k):(k=ru(H.type,H.key,H.props,null,B.mode,j),wa(k,H),k.return=B,k)}function z(B,k,H,j){return k===null||k.tag!==4||k.stateNode.containerInfo!==H.containerInfo||k.stateNode.implementation!==H.implementation?(k=Sf(H,B.mode,j),k.return=B,k):(k=g(k,H.children||[]),k.return=B,k)}function W(B,k,H,j,yt){return k===null||k.tag!==7?(k=ps(H,B.mode,j,yt),k.return=B,k):(k=g(k,H),k.return=B,k)}function tt(B,k,H){if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return k=Af(""+k,B.mode,H),k.return=B,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case I:return H=ru(k.type,k.key,k.props,null,B.mode,H),wa(H,k),H.return=B,H;case P:return k=Sf(k,B.mode,H),k.return=B,k;case M:return k=vs(k),tt(B,k,H)}if(ve(k)||G(k))return k=ps(k,B.mode,H,null),k.return=B,k;if(typeof k.then=="function")return tt(B,hu(k),H);if(k.$$typeof===J)return tt(B,uu(B,k),H);pu(B,k)}return null}function Y(B,k,H,j){var yt=k!==null?k.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return yt!==null?null:R(B,k,""+H,j);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case I:return H.key===yt?x(B,k,H,j):null;case P:return H.key===yt?z(B,k,H,j):null;case M:return H=vs(H),Y(B,k,H,j)}if(ve(H)||G(H))return yt!==null?null:W(B,k,H,j,null);if(typeof H.then=="function")return Y(B,k,hu(H),j);if(H.$$typeof===J)return Y(B,k,uu(B,H),j);pu(B,H)}return null}function K(B,k,H,j,yt){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return B=B.get(H)||null,R(k,B,""+j,yt);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case I:return B=B.get(j.key===null?H:j.key)||null,x(k,B,j,yt);case P:return B=B.get(j.key===null?H:j.key)||null,z(k,B,j,yt);case M:return j=vs(j),K(B,k,H,j,yt)}if(ve(j)||G(j))return B=B.get(H)||null,W(k,B,j,yt,null);if(typeof j.then=="function")return K(B,k,H,hu(j),yt);if(j.$$typeof===J)return K(B,k,H,uu(k,j),yt);pu(k,j)}return null}function dt(B,k,H,j){for(var yt=null,Ft=null,gt=k,Nt=k=0,Pt=null;gt!==null&&Nt<H.length;Nt++){gt.index>Nt?(Pt=gt,gt=null):Pt=gt.sibling;var Ht=Y(B,gt,H[Nt],j);if(Ht===null){gt===null&&(gt=Pt);break}i&&gt&&Ht.alternate===null&&s(B,gt),k=_(Ht,k,Nt),Ft===null?yt=Ht:Ft.sibling=Ht,Ft=Ht,gt=Pt}if(Nt===H.length)return a(B,gt),kt&&bi(B,Nt),yt;if(gt===null){for(;Nt<H.length;Nt++)gt=tt(B,H[Nt],j),gt!==null&&(k=_(gt,k,Nt),Ft===null?yt=gt:Ft.sibling=gt,Ft=gt);return kt&&bi(B,Nt),yt}for(gt=u(gt);Nt<H.length;Nt++)Pt=K(gt,B,Nt,H[Nt],j),Pt!==null&&(i&&Pt.alternate!==null&&gt.delete(Pt.key===null?Nt:Pt.key),k=_(Pt,k,Nt),Ft===null?yt=Pt:Ft.sibling=Pt,Ft=Pt);return i&&gt.forEach(function(Go){return s(B,Go)}),kt&&bi(B,Nt),yt}function Tt(B,k,H,j){if(H==null)throw Error(o(151));for(var yt=null,Ft=null,gt=k,Nt=k=0,Pt=null,Ht=H.next();gt!==null&&!Ht.done;Nt++,Ht=H.next()){gt.index>Nt?(Pt=gt,gt=null):Pt=gt.sibling;var Go=Y(B,gt,Ht.value,j);if(Go===null){gt===null&&(gt=Pt);break}i&&gt&&Go.alternate===null&&s(B,gt),k=_(Go,k,Nt),Ft===null?yt=Go:Ft.sibling=Go,Ft=Go,gt=Pt}if(Ht.done)return a(B,gt),kt&&bi(B,Nt),yt;if(gt===null){for(;!Ht.done;Nt++,Ht=H.next())Ht=tt(B,Ht.value,j),Ht!==null&&(k=_(Ht,k,Nt),Ft===null?yt=Ht:Ft.sibling=Ht,Ft=Ht);return kt&&bi(B,Nt),yt}for(gt=u(gt);!Ht.done;Nt++,Ht=H.next())Ht=K(gt,B,Nt,Ht.value,j),Ht!==null&&(i&&Ht.alternate!==null&&gt.delete(Ht.key===null?Nt:Ht.key),k=_(Ht,k,Nt),Ft===null?yt=Ht:Ft.sibling=Ht,Ft=Ht);return i&&gt.forEach(function(WS){return s(B,WS)}),kt&&bi(B,Nt),yt}function ee(B,k,H,j){if(typeof H=="object"&&H!==null&&H.type===q&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case I:t:{for(var yt=H.key;k!==null;){if(k.key===yt){if(yt=H.type,yt===q){if(k.tag===7){a(B,k.sibling),j=g(k,H.props.children),j.return=B,B=j;break t}}else if(k.elementType===yt||typeof yt=="object"&&yt!==null&&yt.$$typeof===M&&vs(yt)===k.type){a(B,k.sibling),j=g(k,H.props),wa(j,H),j.return=B,B=j;break t}a(B,k);break}else s(B,k);k=k.sibling}H.type===q?(j=ps(H.props.children,B.mode,j,H.key),j.return=B,B=j):(j=ru(H.type,H.key,H.props,null,B.mode,j),wa(j,H),j.return=B,B=j)}return S(B);case P:t:{for(yt=H.key;k!==null;){if(k.key===yt)if(k.tag===4&&k.stateNode.containerInfo===H.containerInfo&&k.stateNode.implementation===H.implementation){a(B,k.sibling),j=g(k,H.children||[]),j.return=B,B=j;break t}else{a(B,k);break}else s(B,k);k=k.sibling}j=Sf(H,B.mode,j),j.return=B,B=j}return S(B);case M:return H=vs(H),ee(B,k,H,j)}if(ve(H))return dt(B,k,H,j);if(G(H)){if(yt=G(H),typeof yt!="function")throw Error(o(150));return H=yt.call(H),Tt(B,k,H,j)}if(typeof H.then=="function")return ee(B,k,hu(H),j);if(H.$$typeof===J)return ee(B,k,uu(B,H),j);pu(B,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,k!==null&&k.tag===6?(a(B,k.sibling),j=g(k,H),j.return=B,B=j):(a(B,k),j=Af(H,B.mode,j),j.return=B,B=j),S(B)):a(B,k)}return function(B,k,H,j){try{Ia=0;var yt=ee(B,k,H,j);return ur=null,yt}catch(gt){if(gt===lr||gt===fu)throw gt;var Ft=An(29,gt,null,B.mode);return Ft.lanes=j,Ft.return=B,Ft}finally{}}}var Es=Im(!0),wm=Im(!1),So=!1;function Uf(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Lf(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Co(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Ro(i,s,a){var u=i.updateQueue;if(u===null)return null;if(u=u.shared,(Jt&2)!==0){var g=u.pending;return g===null?s.next=s:(s.next=g.next,g.next=s),u.pending=s,s=su(i),cm(i,null,a),s}return ou(i,u,s,a),su(i)}function Na(i,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var u=s.lanes;u&=i.pendingLanes,a|=u,s.lanes=a,no(i,a)}}function kf(i,s){var a=i.updateQueue,u=i.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var g=null,_=null;if(a=a.firstBaseUpdate,a!==null){do{var S={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};_===null?g=_=S:_=_.next=S,a=a.next}while(a!==null);_===null?g=_=s:_=_.next=s}else g=_=s;a={baseState:u.baseState,firstBaseUpdate:g,lastBaseUpdate:_,shared:u.shared,callbacks:u.callbacks},i.updateQueue=a;return}i=a.lastBaseUpdate,i===null?a.firstBaseUpdate=s:i.next=s,a.lastBaseUpdate=s}var Of=!1;function Ma(){if(Of){var i=ar;if(i!==null)throw i}}function Da(i,s,a,u){Of=!1;var g=i.updateQueue;So=!1;var _=g.firstBaseUpdate,S=g.lastBaseUpdate,R=g.shared.pending;if(R!==null){g.shared.pending=null;var x=R,z=x.next;x.next=null,S===null?_=z:S.next=z,S=x;var W=i.alternate;W!==null&&(W=W.updateQueue,R=W.lastBaseUpdate,R!==S&&(R===null?W.firstBaseUpdate=z:R.next=z,W.lastBaseUpdate=x))}if(_!==null){var tt=g.baseState;S=0,W=z=x=null,R=_;do{var Y=R.lane&-536870913,K=Y!==R.lane;if(K?(Vt&Y)===Y:(u&Y)===Y){Y!==0&&Y===rr&&(Of=!0),W!==null&&(W=W.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});t:{var dt=i,Tt=R;Y=s;var ee=a;switch(Tt.tag){case 1:if(dt=Tt.payload,typeof dt=="function"){tt=dt.call(ee,tt,Y);break t}tt=dt;break t;case 3:dt.flags=dt.flags&-65537|128;case 0:if(dt=Tt.payload,Y=typeof dt=="function"?dt.call(ee,tt,Y):dt,Y==null)break t;tt=E({},tt,Y);break t;case 2:So=!0}}Y=R.callback,Y!==null&&(i.flags|=64,K&&(i.flags|=8192),K=g.callbacks,K===null?g.callbacks=[Y]:K.push(Y))}else K={lane:Y,tag:R.tag,payload:R.payload,callback:R.callback,next:null},W===null?(z=W=K,x=tt):W=W.next=K,S|=Y;if(R=R.next,R===null){if(R=g.shared.pending,R===null)break;K=R,R=K.next,K.next=null,g.lastBaseUpdate=K,g.shared.pending=null}}while(!0);W===null&&(x=tt),g.baseState=x,g.firstBaseUpdate=z,g.lastBaseUpdate=W,_===null&&(g.shared.lanes=0),Do|=S,i.lanes=S,i.memoizedState=tt}}function Nm(i,s){if(typeof i!="function")throw Error(o(191,i));i.call(s)}function Mm(i,s){var a=i.callbacks;if(a!==null)for(i.callbacks=null,i=0;i<a.length;i++)Nm(a[i],s)}var cr=O(null),mu=O(0);function Dm(i,s){i=Fi,rt(mu,i),rt(cr,s),Fi=i|s.baseLanes}function qf(){rt(mu,Fi),rt(cr,cr.current)}function Gf(){Fi=mu.current,Z(cr),Z(mu)}var Sn=O(null),On=null;function Io(i){var s=i.alternate;rt(ge,ge.current&1),rt(Sn,i),On===null&&(s===null||cr.current!==null||s.memoizedState!==null)&&(On=i)}function Bf(i){rt(ge,ge.current),rt(Sn,i),On===null&&(On=i)}function bm(i){i.tag===22?(rt(ge,ge.current),rt(Sn,i),On===null&&(On=i)):wo()}function wo(){rt(ge,ge.current),rt(Sn,Sn.current)}function Cn(i){Z(Sn),On===i&&(On=null),Z(ge)}var ge=O(0);function gu(i){for(var s=i;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Kd(a)||Qd(a)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Pi=0,wt=null,jt=null,Ae=null,yu=!1,fr=!1,As=!1,_u=0,ba=0,dr=null,BA=0;function he(){throw Error(o(321))}function Ff(i,s){if(s===null)return!1;for(var a=0;a<s.length&&a<i.length;a++)if(!En(i[a],s[a]))return!1;return!0}function Hf(i,s,a,u,g,_){return Pi=_,wt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,$.H=i===null||i.memoizedState===null?pg:od,As=!1,_=a(u,g),As=!1,fr&&(_=Vm(s,a,u,g)),xm(i),_}function xm(i){$.H=Pa;var s=jt!==null&&jt.next!==null;if(Pi=0,Ae=jt=wt=null,yu=!1,ba=0,dr=null,s)throw Error(o(300));i===null||Se||(i=i.dependencies,i!==null&&lu(i)&&(Se=!0))}function Vm(i,s,a,u){wt=i;var g=0;do{if(fr&&(dr=null),ba=0,fr=!1,25<=g)throw Error(o(301));if(g+=1,Ae=jt=null,i.updateQueue!=null){var _=i.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}$.H=mg,_=s(a,u)}while(fr);return _}function FA(){var i=$.H,s=i.useState()[0];return s=typeof s.then=="function"?xa(s):s,i=i.useState()[0],(jt!==null?jt.memoizedState:null)!==i&&(wt.flags|=1024),s}function zf(){var i=_u!==0;return _u=0,i}function Yf(i,s,a){s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~a}function Jf(i){if(yu){for(i=i.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}yu=!1}Pi=0,Ae=jt=wt=null,fr=!1,ba=_u=0,dr=null}function un(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ae===null?wt.memoizedState=Ae=i:Ae=Ae.next=i,Ae}function ye(){if(jt===null){var i=wt.alternate;i=i!==null?i.memoizedState:null}else i=jt.next;var s=Ae===null?wt.memoizedState:Ae.next;if(s!==null)Ae=s,jt=i;else{if(i===null)throw wt.alternate===null?Error(o(467)):Error(o(310));jt=i,i={memoizedState:jt.memoizedState,baseState:jt.baseState,baseQueue:jt.baseQueue,queue:jt.queue,next:null},Ae===null?wt.memoizedState=Ae=i:Ae=Ae.next=i}return Ae}function vu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function xa(i){var s=ba;return ba+=1,dr===null&&(dr=[]),i=Sm(dr,i,s),s=wt,(Ae===null?s.memoizedState:Ae.next)===null&&(s=s.alternate,$.H=s===null||s.memoizedState===null?pg:od),i}function Tu(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return xa(i);if(i.$$typeof===J)return He(i)}throw Error(o(438,String(i)))}function Kf(i){var s=null,a=wt.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var u=wt.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(g){return g.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=vu(),wt.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(i),u=0;u<i;u++)a[u]=V;return s.index++,a}function Ui(i,s){return typeof s=="function"?s(i):s}function Eu(i){var s=ye();return Qf(s,jt,i)}function Qf(i,s,a){var u=i.queue;if(u===null)throw Error(o(311));u.lastRenderedReducer=a;var g=i.baseQueue,_=u.pending;if(_!==null){if(g!==null){var S=g.next;g.next=_.next,_.next=S}s.baseQueue=g=_,u.pending=null}if(_=i.baseState,g===null)i.memoizedState=_;else{s=g.next;var R=S=null,x=null,z=s,W=!1;do{var tt=z.lane&-536870913;if(tt!==z.lane?(Vt&tt)===tt:(Pi&tt)===tt){var Y=z.revertLane;if(Y===0)x!==null&&(x=x.next={lane:0,revertLane:0,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),tt===rr&&(W=!0);else if((Pi&Y)===Y){z=z.next,Y===rr&&(W=!0);continue}else tt={lane:0,revertLane:z.revertLane,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},x===null?(R=x=tt,S=_):x=x.next=tt,wt.lanes|=Y,Do|=Y;tt=z.action,As&&a(_,tt),_=z.hasEagerState?z.eagerState:a(_,tt)}else Y={lane:tt,revertLane:z.revertLane,gesture:z.gesture,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},x===null?(R=x=Y,S=_):x=x.next=Y,wt.lanes|=tt,Do|=tt;z=z.next}while(z!==null&&z!==s);if(x===null?S=_:x.next=R,!En(_,i.memoizedState)&&(Se=!0,W&&(a=ar,a!==null)))throw a;i.memoizedState=_,i.baseState=S,i.baseQueue=x,u.lastRenderedState=_}return g===null&&(u.lanes=0),[i.memoizedState,u.dispatch]}function $f(i){var s=ye(),a=s.queue;if(a===null)throw Error(o(311));a.lastRenderedReducer=i;var u=a.dispatch,g=a.pending,_=s.memoizedState;if(g!==null){a.pending=null;var S=g=g.next;do _=i(_,S.action),S=S.next;while(S!==g);En(_,s.memoizedState)||(Se=!0),s.memoizedState=_,s.baseQueue===null&&(s.baseState=_),a.lastRenderedState=_}return[_,u]}function Pm(i,s,a){var u=wt,g=ye(),_=kt;if(_){if(a===void 0)throw Error(o(407));a=a()}else a=s();var S=!En((jt||g).memoizedState,a);if(S&&(g.memoizedState=a,Se=!0),g=g.queue,Zf(km.bind(null,u,g,i),[i]),g.getSnapshot!==s||S||Ae!==null&&Ae.memoizedState.tag&1){if(u.flags|=2048,hr(9,{destroy:void 0},Lm.bind(null,u,g,a,s),null),ne===null)throw Error(o(349));_||(Pi&127)!==0||Um(u,s,a)}return a}function Um(i,s,a){i.flags|=16384,i={getSnapshot:s,value:a},s=wt.updateQueue,s===null?(s=vu(),wt.updateQueue=s,s.stores=[i]):(a=s.stores,a===null?s.stores=[i]:a.push(i))}function Lm(i,s,a,u){s.value=a,s.getSnapshot=u,Om(s)&&qm(i)}function km(i,s,a){return a(function(){Om(s)&&qm(i)})}function Om(i){var s=i.getSnapshot;i=i.value;try{var a=s();return!En(i,a)}catch{return!0}}function qm(i){var s=hs(i,2);s!==null&&_n(s,i,2)}function Xf(i){var s=un();if(typeof i=="function"){var a=i;if(i=a(),As){Mn(!0);try{a()}finally{Mn(!1)}}}return s.memoizedState=s.baseState=i,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:i},s}function Gm(i,s,a,u){return i.baseState=a,Qf(i,jt,typeof u=="function"?u:Ui)}function HA(i,s,a,u,g){if(Cu(i))throw Error(o(485));if(i=s.action,i!==null){var _={payload:g,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){_.listeners.push(S)}};$.T!==null?a(!0):_.isTransition=!1,u(_),a=s.pending,a===null?(_.next=s.pending=_,Bm(s,_)):(_.next=a.next,s.pending=a.next=_)}}function Bm(i,s){var a=s.action,u=s.payload,g=i.state;if(s.isTransition){var _=$.T,S={};$.T=S;try{var R=a(g,u),x=$.S;x!==null&&x(S,R),Fm(i,s,R)}catch(z){Wf(i,s,z)}finally{_!==null&&S.types!==null&&(_.types=S.types),$.T=_}}else try{_=a(g,u),Fm(i,s,_)}catch(z){Wf(i,s,z)}}function Fm(i,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(u){Hm(i,s,u)},function(u){return Wf(i,s,u)}):Hm(i,s,a)}function Hm(i,s,a){s.status="fulfilled",s.value=a,zm(s),i.state=a,s=i.pending,s!==null&&(a=s.next,a===s?i.pending=null:(a=a.next,s.next=a,Bm(i,a)))}function Wf(i,s,a){var u=i.pending;if(i.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=a,zm(s),s=s.next;while(s!==u)}i.action=null}function zm(i){i=i.listeners;for(var s=0;s<i.length;s++)(0,i[s])()}function Ym(i,s){return s}function Jm(i,s){if(kt){var a=ne.formState;if(a!==null){t:{var u=wt;if(kt){if(oe){e:{for(var g=oe,_=kn;g.nodeType!==8;){if(!_){g=null;break e}if(g=qn(g.nextSibling),g===null){g=null;break e}}_=g.data,g=_==="F!"||_==="F"?g:null}if(g){oe=qn(g.nextSibling),u=g.data==="F!";break t}}Eo(u)}u=!1}u&&(s=a[0])}}return a=un(),a.memoizedState=a.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ym,lastRenderedState:s},a.queue=u,a=fg.bind(null,wt,u),u.dispatch=a,u=Xf(!1),_=id.bind(null,wt,!1,u.queue),u=un(),g={state:s,dispatch:null,action:i,pending:null},u.queue=g,a=HA.bind(null,wt,g,_,a),g.dispatch=a,u.memoizedState=i,[s,a,!1]}function Km(i){var s=ye();return Qm(s,jt,i)}function Qm(i,s,a){if(s=Qf(i,s,Ym)[0],i=Eu(Ui)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=xa(s)}catch(S){throw S===lr?fu:S}else u=s;s=ye();var g=s.queue,_=g.dispatch;return a!==s.memoizedState&&(wt.flags|=2048,hr(9,{destroy:void 0},zA.bind(null,g,a),null)),[u,_,i]}function zA(i,s){i.action=s}function $m(i){var s=ye(),a=jt;if(a!==null)return Qm(s,a,i);ye(),s=s.memoizedState,a=ye();var u=a.queue.dispatch;return a.memoizedState=i,[s,u,!1]}function hr(i,s,a,u){return i={tag:i,create:a,deps:u,inst:s,next:null},s=wt.updateQueue,s===null&&(s=vu(),wt.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=i.next=i:(u=a.next,a.next=i,i.next=u,s.lastEffect=i),i}function Xm(){return ye().memoizedState}function Au(i,s,a,u){var g=un();wt.flags|=i,g.memoizedState=hr(1|s,{destroy:void 0},a,u===void 0?null:u)}function Su(i,s,a,u){var g=ye();u=u===void 0?null:u;var _=g.memoizedState.inst;jt!==null&&u!==null&&Ff(u,jt.memoizedState.deps)?g.memoizedState=hr(s,_,a,u):(wt.flags|=i,g.memoizedState=hr(1|s,_,a,u))}function Wm(i,s){Au(8390656,8,i,s)}function Zf(i,s){Su(2048,8,i,s)}function YA(i){wt.flags|=4;var s=wt.updateQueue;if(s===null)s=vu(),wt.updateQueue=s,s.events=[i];else{var a=s.events;a===null?s.events=[i]:a.push(i)}}function Zm(i){var s=ye().memoizedState;return YA({ref:s,nextImpl:i}),function(){if((Jt&2)!==0)throw Error(o(440));return s.impl.apply(void 0,arguments)}}function jm(i,s){return Su(4,2,i,s)}function tg(i,s){return Su(4,4,i,s)}function eg(i,s){if(typeof s=="function"){i=i();var a=s(i);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function ng(i,s,a){a=a!=null?a.concat([i]):null,Su(4,4,eg.bind(null,s,i),a)}function jf(){}function ig(i,s){var a=ye();s=s===void 0?null:s;var u=a.memoizedState;return s!==null&&Ff(s,u[1])?u[0]:(a.memoizedState=[i,s],i)}function og(i,s){var a=ye();s=s===void 0?null:s;var u=a.memoizedState;if(s!==null&&Ff(s,u[1]))return u[0];if(u=i(),As){Mn(!0);try{i()}finally{Mn(!1)}}return a.memoizedState=[u,s],u}function td(i,s,a){return a===void 0||(Pi&1073741824)!==0&&(Vt&261930)===0?i.memoizedState=s:(i.memoizedState=a,i=sy(),wt.lanes|=i,Do|=i,a)}function sg(i,s,a,u){return En(a,s)?a:cr.current!==null?(i=td(i,a,u),En(i,s)||(Se=!0),i):(Pi&42)===0||(Pi&1073741824)!==0&&(Vt&261930)===0?(Se=!0,i.memoizedState=a):(i=sy(),wt.lanes|=i,Do|=i,s)}function rg(i,s,a,u,g){var _=lt.p;lt.p=_!==0&&8>_?_:8;var S=$.T,R={};$.T=R,id(i,!1,s,a);try{var x=g(),z=$.S;if(z!==null&&z(R,x),x!==null&&typeof x=="object"&&typeof x.then=="function"){var W=GA(x,u);Va(i,s,W,wn(i))}else Va(i,s,u,wn(i))}catch(tt){Va(i,s,{then:function(){},status:"rejected",reason:tt},wn())}finally{lt.p=_,S!==null&&R.types!==null&&(S.types=R.types),$.T=S}}function JA(){}function ed(i,s,a,u){if(i.tag!==5)throw Error(o(476));var g=ag(i).queue;rg(i,g,s,_t,a===null?JA:function(){return lg(i),a(u)})}function ag(i){var s=i.memoizedState;if(s!==null)return s;s={memoizedState:_t,baseState:_t,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:_t},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:a},next:null},i.memoizedState=s,i=i.alternate,i!==null&&(i.memoizedState=s),s}function lg(i){var s=ag(i);s.next===null&&(s=i.alternate.memoizedState),Va(i,s.next.queue,{},wn())}function nd(){return He(Xa)}function ug(){return ye().memoizedState}function cg(){return ye().memoizedState}function KA(i){for(var s=i.return;s!==null;){switch(s.tag){case 24:case 3:var a=wn();i=Co(a);var u=Ro(s,i,a);u!==null&&(_n(u,s,a),Na(u,s,a)),s={cache:bf()},i.payload=s;return}s=s.return}}function QA(i,s,a){var u=wn();a={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Cu(i)?dg(s,a):(a=Tf(i,s,a,u),a!==null&&(_n(a,i,u),hg(a,s,u)))}function fg(i,s,a){var u=wn();Va(i,s,a,u)}function Va(i,s,a,u){var g={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Cu(i))dg(s,g);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=s.lastRenderedReducer,_!==null))try{var S=s.lastRenderedState,R=_(S,a);if(g.hasEagerState=!0,g.eagerState=R,En(R,S))return ou(i,s,g,0),ne===null&&iu(),!1}catch{}finally{}if(a=Tf(i,s,g,u),a!==null)return _n(a,i,u),hg(a,s,u),!0}return!1}function id(i,s,a,u){if(u={lane:2,revertLane:Ud(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Cu(i)){if(s)throw Error(o(479))}else s=Tf(i,a,u,2),s!==null&&_n(s,i,2)}function Cu(i){var s=i.alternate;return i===wt||s!==null&&s===wt}function dg(i,s){fr=yu=!0;var a=i.pending;a===null?s.next=s:(s.next=a.next,a.next=s),i.pending=s}function hg(i,s,a){if((a&4194048)!==0){var u=s.lanes;u&=i.pendingLanes,a|=u,s.lanes=a,no(i,a)}}var Pa={readContext:He,use:Tu,useCallback:he,useContext:he,useEffect:he,useImperativeHandle:he,useLayoutEffect:he,useInsertionEffect:he,useMemo:he,useReducer:he,useRef:he,useState:he,useDebugValue:he,useDeferredValue:he,useTransition:he,useSyncExternalStore:he,useId:he,useHostTransitionStatus:he,useFormState:he,useActionState:he,useOptimistic:he,useMemoCache:he,useCacheRefresh:he};Pa.useEffectEvent=he;var pg={readContext:He,use:Tu,useCallback:function(i,s){return un().memoizedState=[i,s===void 0?null:s],i},useContext:He,useEffect:Wm,useImperativeHandle:function(i,s,a){a=a!=null?a.concat([i]):null,Au(4194308,4,eg.bind(null,s,i),a)},useLayoutEffect:function(i,s){return Au(4194308,4,i,s)},useInsertionEffect:function(i,s){Au(4,2,i,s)},useMemo:function(i,s){var a=un();s=s===void 0?null:s;var u=i();if(As){Mn(!0);try{i()}finally{Mn(!1)}}return a.memoizedState=[u,s],u},useReducer:function(i,s,a){var u=un();if(a!==void 0){var g=a(s);if(As){Mn(!0);try{a(s)}finally{Mn(!1)}}}else g=s;return u.memoizedState=u.baseState=g,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:g},u.queue=i,i=i.dispatch=QA.bind(null,wt,i),[u.memoizedState,i]},useRef:function(i){var s=un();return i={current:i},s.memoizedState=i},useState:function(i){i=Xf(i);var s=i.queue,a=fg.bind(null,wt,s);return s.dispatch=a,[i.memoizedState,a]},useDebugValue:jf,useDeferredValue:function(i,s){var a=un();return td(a,i,s)},useTransition:function(){var i=Xf(!1);return i=rg.bind(null,wt,i.queue,!0,!1),un().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,s,a){var u=wt,g=un();if(kt){if(a===void 0)throw Error(o(407));a=a()}else{if(a=s(),ne===null)throw Error(o(349));(Vt&127)!==0||Um(u,s,a)}g.memoizedState=a;var _={value:a,getSnapshot:s};return g.queue=_,Wm(km.bind(null,u,_,i),[i]),u.flags|=2048,hr(9,{destroy:void 0},Lm.bind(null,u,_,a,s),null),a},useId:function(){var i=un(),s=ne.identifierPrefix;if(kt){var a=di,u=fi;a=(u&~(1<<32-on(u)-1)).toString(32)+a,s="_"+s+"R_"+a,a=_u++,0<a&&(s+="H"+a.toString(32)),s+="_"}else a=BA++,s="_"+s+"r_"+a.toString(32)+"_";return i.memoizedState=s},useHostTransitionStatus:nd,useFormState:Jm,useActionState:Jm,useOptimistic:function(i){var s=un();s.memoizedState=s.baseState=i;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=id.bind(null,wt,!0,a),a.dispatch=s,[i,s]},useMemoCache:Kf,useCacheRefresh:function(){return un().memoizedState=KA.bind(null,wt)},useEffectEvent:function(i){var s=un(),a={impl:i};return s.memoizedState=a,function(){if((Jt&2)!==0)throw Error(o(440));return a.impl.apply(void 0,arguments)}}},od={readContext:He,use:Tu,useCallback:ig,useContext:He,useEffect:Zf,useImperativeHandle:ng,useInsertionEffect:jm,useLayoutEffect:tg,useMemo:og,useReducer:Eu,useRef:Xm,useState:function(){return Eu(Ui)},useDebugValue:jf,useDeferredValue:function(i,s){var a=ye();return sg(a,jt.memoizedState,i,s)},useTransition:function(){var i=Eu(Ui)[0],s=ye().memoizedState;return[typeof i=="boolean"?i:xa(i),s]},useSyncExternalStore:Pm,useId:ug,useHostTransitionStatus:nd,useFormState:Km,useActionState:Km,useOptimistic:function(i,s){var a=ye();return Gm(a,jt,i,s)},useMemoCache:Kf,useCacheRefresh:cg};od.useEffectEvent=Zm;var mg={readContext:He,use:Tu,useCallback:ig,useContext:He,useEffect:Zf,useImperativeHandle:ng,useInsertionEffect:jm,useLayoutEffect:tg,useMemo:og,useReducer:$f,useRef:Xm,useState:function(){return $f(Ui)},useDebugValue:jf,useDeferredValue:function(i,s){var a=ye();return jt===null?td(a,i,s):sg(a,jt.memoizedState,i,s)},useTransition:function(){var i=$f(Ui)[0],s=ye().memoizedState;return[typeof i=="boolean"?i:xa(i),s]},useSyncExternalStore:Pm,useId:ug,useHostTransitionStatus:nd,useFormState:$m,useActionState:$m,useOptimistic:function(i,s){var a=ye();return jt!==null?Gm(a,jt,i,s):(a.baseState=i,[i,a.queue.dispatch])},useMemoCache:Kf,useCacheRefresh:cg};mg.useEffectEvent=Zm;function sd(i,s,a,u){s=i.memoizedState,a=a(u,s),a=a==null?s:E({},s,a),i.memoizedState=a,i.lanes===0&&(i.updateQueue.baseState=a)}var rd={enqueueSetState:function(i,s,a){i=i._reactInternals;var u=wn(),g=Co(u);g.payload=s,a!=null&&(g.callback=a),s=Ro(i,g,u),s!==null&&(_n(s,i,u),Na(s,i,u))},enqueueReplaceState:function(i,s,a){i=i._reactInternals;var u=wn(),g=Co(u);g.tag=1,g.payload=s,a!=null&&(g.callback=a),s=Ro(i,g,u),s!==null&&(_n(s,i,u),Na(s,i,u))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var a=wn(),u=Co(a);u.tag=2,s!=null&&(u.callback=s),s=Ro(i,u,a),s!==null&&(_n(s,i,a),Na(s,i,a))}};function gg(i,s,a,u,g,_,S){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(u,_,S):s.prototype&&s.prototype.isPureReactComponent?!Ta(a,u)||!Ta(g,_):!0}function yg(i,s,a,u){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,u),s.state!==i&&rd.enqueueReplaceState(s,s.state,null)}function Ss(i,s){var a=s;if("ref"in s){a={};for(var u in s)u!=="ref"&&(a[u]=s[u])}if(i=i.defaultProps){a===s&&(a=E({},a));for(var g in i)a[g]===void 0&&(a[g]=i[g])}return a}function _g(i){nu(i)}function vg(i){console.error(i)}function Tg(i){nu(i)}function Ru(i,s){try{var a=i.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function Eg(i,s,a){try{var u=i.onCaughtError;u(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function ad(i,s,a){return a=Co(a),a.tag=3,a.payload={element:null},a.callback=function(){Ru(i,s)},a}function Ag(i){return i=Co(i),i.tag=3,i}function Sg(i,s,a,u){var g=a.type.getDerivedStateFromError;if(typeof g=="function"){var _=u.value;i.payload=function(){return g(_)},i.callback=function(){Eg(s,a,u)}}var S=a.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(i.callback=function(){Eg(s,a,u),typeof g!="function"&&(bo===null?bo=new Set([this]):bo.add(this));var R=u.stack;this.componentDidCatch(u.value,{componentStack:R!==null?R:""})})}function $A(i,s,a,u,g){if(a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=a.alternate,s!==null&&sr(s,a,g,!0),a=Sn.current,a!==null){switch(a.tag){case 31:case 13:return On===null?ku():a.alternate===null&&pe===0&&(pe=3),a.flags&=-257,a.flags|=65536,a.lanes=g,u===du?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([u]):s.add(u),xd(i,u,g)),!1;case 22:return a.flags|=65536,u===du?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([u]):a.add(u)),xd(i,u,g)),!1}throw Error(o(435,a.tag))}return xd(i,u,g),ku(),!1}if(kt)return s=Sn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=g,u!==If&&(i=Error(o(422),{cause:u}),Sa(Pn(i,a)))):(u!==If&&(s=Error(o(423),{cause:u}),Sa(Pn(s,a))),i=i.current.alternate,i.flags|=65536,g&=-g,i.lanes|=g,u=Pn(u,a),g=ad(i.stateNode,u,g),kf(i,g),pe!==4&&(pe=2)),!1;var _=Error(o(520),{cause:u});if(_=Pn(_,a),Fa===null?Fa=[_]:Fa.push(_),pe!==4&&(pe=2),s===null)return!0;u=Pn(u,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,i=g&-g,a.lanes|=i,i=ad(a.stateNode,u,i),kf(a,i),!1;case 1:if(s=a.type,_=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(bo===null||!bo.has(_))))return a.flags|=65536,g&=-g,a.lanes|=g,g=Ag(g),Sg(g,i,a,u),kf(a,g),!1}a=a.return}while(a!==null);return!1}var ld=Error(o(461)),Se=!1;function ze(i,s,a,u){s.child=i===null?wm(s,null,a,u):Es(s,i.child,a,u)}function Cg(i,s,a,u,g){a=a.render;var _=s.ref;if("ref"in u){var S={};for(var R in u)R!=="ref"&&(S[R]=u[R])}else S=u;return ys(s),u=Hf(i,s,a,S,_,g),R=zf(),i!==null&&!Se?(Yf(i,s,g),Li(i,s,g)):(kt&&R&&Cf(s),s.flags|=1,ze(i,s,u,g),s.child)}function Rg(i,s,a,u,g){if(i===null){var _=a.type;return typeof _=="function"&&!Ef(_)&&_.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=_,Ig(i,s,_,u,g)):(i=ru(a.type,null,u,s,s.mode,g),i.ref=s.ref,i.return=s,s.child=i)}if(_=i.child,!gd(i,g)){var S=_.memoizedProps;if(a=a.compare,a=a!==null?a:Ta,a(S,u)&&i.ref===s.ref)return Li(i,s,g)}return s.flags|=1,i=Di(_,u),i.ref=s.ref,i.return=s,s.child=i}function Ig(i,s,a,u,g){if(i!==null){var _=i.memoizedProps;if(Ta(_,u)&&i.ref===s.ref)if(Se=!1,s.pendingProps=u=_,gd(i,g))(i.flags&131072)!==0&&(Se=!0);else return s.lanes=i.lanes,Li(i,s,g)}return ud(i,s,a,u,g)}function wg(i,s,a,u){var g=u.children,_=i!==null?i.memoizedState:null;if(i===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((s.flags&128)!==0){if(_=_!==null?_.baseLanes|a:a,i!==null){for(u=s.child=i.child,g=0;u!==null;)g=g|u.lanes|u.childLanes,u=u.sibling;u=g&~_}else u=0,s.child=null;return Ng(i,s,_,a,u)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},i!==null&&cu(s,_!==null?_.cachePool:null),_!==null?Dm(s,_):qf(),bm(s);else return u=s.lanes=536870912,Ng(i,s,_!==null?_.baseLanes|a:a,a,u)}else _!==null?(cu(s,_.cachePool),Dm(s,_),wo(),s.memoizedState=null):(i!==null&&cu(s,null),qf(),wo());return ze(i,s,g,a),s.child}function Ua(i,s){return i!==null&&i.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function Ng(i,s,a,u,g){var _=Vf();return _=_===null?null:{parent:Ee._currentValue,pool:_},s.memoizedState={baseLanes:a,cachePool:_},i!==null&&cu(s,null),qf(),bm(s),i!==null&&sr(i,s,u,!0),s.childLanes=g,null}function Iu(i,s){return s=Nu({mode:s.mode,children:s.children},i.mode),s.ref=i.ref,i.child=s,s.return=i,s}function Mg(i,s,a){return Es(s,i.child,null,a),i=Iu(s,s.pendingProps),i.flags|=2,Cn(s),s.memoizedState=null,i}function XA(i,s,a){var u=s.pendingProps,g=(s.flags&128)!==0;if(s.flags&=-129,i===null){if(kt){if(u.mode==="hidden")return i=Iu(s,u),s.lanes=536870912,Ua(null,i);if(Bf(s),(i=oe)?(i=By(i,kn),i=i!==null&&i.data==="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:vo!==null?{id:fi,overflow:di}:null,retryLane:536870912,hydrationErrors:null},a=dm(i),a.return=s,s.child=a,Fe=s,oe=null)):i=null,i===null)throw Eo(s);return s.lanes=536870912,null}return Iu(s,u)}var _=i.memoizedState;if(_!==null){var S=_.dehydrated;if(Bf(s),g)if(s.flags&256)s.flags&=-257,s=Mg(i,s,a);else if(s.memoizedState!==null)s.child=i.child,s.flags|=128,s=null;else throw Error(o(558));else if(Se||sr(i,s,a,!1),g=(a&i.childLanes)!==0,Se||g){if(u=ne,u!==null&&(S=io(u,a),S!==0&&S!==_.retryLane))throw _.retryLane=S,hs(i,S),_n(u,i,S),ld;ku(),s=Mg(i,s,a)}else i=_.treeContext,oe=qn(S.nextSibling),Fe=s,kt=!0,To=null,kn=!1,i!==null&&mm(s,i),s=Iu(s,u),s.flags|=4096;return s}return i=Di(i.child,{mode:u.mode,children:u.children}),i.ref=s.ref,s.child=i,i.return=s,i}function wu(i,s){var a=s.ref;if(a===null)i!==null&&i.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(o(284));(i===null||i.ref!==a)&&(s.flags|=4194816)}}function ud(i,s,a,u,g){return ys(s),a=Hf(i,s,a,u,void 0,g),u=zf(),i!==null&&!Se?(Yf(i,s,g),Li(i,s,g)):(kt&&u&&Cf(s),s.flags|=1,ze(i,s,a,g),s.child)}function Dg(i,s,a,u,g,_){return ys(s),s.updateQueue=null,a=Vm(s,u,a,g),xm(i),u=zf(),i!==null&&!Se?(Yf(i,s,_),Li(i,s,_)):(kt&&u&&Cf(s),s.flags|=1,ze(i,s,a,_),s.child)}function bg(i,s,a,u,g){if(ys(s),s.stateNode===null){var _=er,S=a.contextType;typeof S=="object"&&S!==null&&(_=He(S)),_=new a(u,_),s.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=rd,s.stateNode=_,_._reactInternals=s,_=s.stateNode,_.props=u,_.state=s.memoizedState,_.refs={},Uf(s),S=a.contextType,_.context=typeof S=="object"&&S!==null?He(S):er,_.state=s.memoizedState,S=a.getDerivedStateFromProps,typeof S=="function"&&(sd(s,a,S,u),_.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(S=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),S!==_.state&&rd.enqueueReplaceState(_,_.state,null),Da(s,u,_,g),Ma(),_.state=s.memoizedState),typeof _.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(i===null){_=s.stateNode;var R=s.memoizedProps,x=Ss(a,R);_.props=x;var z=_.context,W=a.contextType;S=er,typeof W=="object"&&W!==null&&(S=He(W));var tt=a.getDerivedStateFromProps;W=typeof tt=="function"||typeof _.getSnapshotBeforeUpdate=="function",R=s.pendingProps!==R,W||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(R||z!==S)&&yg(s,_,u,S),So=!1;var Y=s.memoizedState;_.state=Y,Da(s,u,_,g),Ma(),z=s.memoizedState,R||Y!==z||So?(typeof tt=="function"&&(sd(s,a,tt,u),z=s.memoizedState),(x=So||gg(s,a,x,u,Y,z,S))?(W||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(s.flags|=4194308)):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=z),_.props=u,_.state=z,_.context=S,u=x):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{_=s.stateNode,Lf(i,s),S=s.memoizedProps,W=Ss(a,S),_.props=W,tt=s.pendingProps,Y=_.context,z=a.contextType,x=er,typeof z=="object"&&z!==null&&(x=He(z)),R=a.getDerivedStateFromProps,(z=typeof R=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(S!==tt||Y!==x)&&yg(s,_,u,x),So=!1,Y=s.memoizedState,_.state=Y,Da(s,u,_,g),Ma();var K=s.memoizedState;S!==tt||Y!==K||So||i!==null&&i.dependencies!==null&&lu(i.dependencies)?(typeof R=="function"&&(sd(s,a,R,u),K=s.memoizedState),(W=So||gg(s,a,W,u,Y,K,x)||i!==null&&i.dependencies!==null&&lu(i.dependencies))?(z||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(u,K,x),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(u,K,x)),typeof _.componentDidUpdate=="function"&&(s.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof _.componentDidUpdate!="function"||S===i.memoizedProps&&Y===i.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||S===i.memoizedProps&&Y===i.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=K),_.props=u,_.state=K,_.context=x,u=W):(typeof _.componentDidUpdate!="function"||S===i.memoizedProps&&Y===i.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||S===i.memoizedProps&&Y===i.memoizedState||(s.flags|=1024),u=!1)}return _=u,wu(i,s),u=(s.flags&128)!==0,_||u?(_=s.stateNode,a=u&&typeof a.getDerivedStateFromError!="function"?null:_.render(),s.flags|=1,i!==null&&u?(s.child=Es(s,i.child,null,g),s.child=Es(s,null,a,g)):ze(i,s,a,g),s.memoizedState=_.state,i=s.child):i=Li(i,s,g),i}function xg(i,s,a,u){return ms(),s.flags|=256,ze(i,s,a,u),s.child}var cd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function fd(i){return{baseLanes:i,cachePool:Em()}}function dd(i,s,a){return i=i!==null?i.childLanes&~a:0,s&&(i|=In),i}function Vg(i,s,a){var u=s.pendingProps,g=!1,_=(s.flags&128)!==0,S;if((S=_)||(S=i!==null&&i.memoizedState===null?!1:(ge.current&2)!==0),S&&(g=!0,s.flags&=-129),S=(s.flags&32)!==0,s.flags&=-33,i===null){if(kt){if(g?Io(s):wo(),(i=oe)?(i=By(i,kn),i=i!==null&&i.data!=="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:vo!==null?{id:fi,overflow:di}:null,retryLane:536870912,hydrationErrors:null},a=dm(i),a.return=s,s.child=a,Fe=s,oe=null)):i=null,i===null)throw Eo(s);return Qd(i)?s.lanes=32:s.lanes=536870912,null}var R=u.children;return u=u.fallback,g?(wo(),g=s.mode,R=Nu({mode:"hidden",children:R},g),u=ps(u,g,a,null),R.return=s,u.return=s,R.sibling=u,s.child=R,u=s.child,u.memoizedState=fd(a),u.childLanes=dd(i,S,a),s.memoizedState=cd,Ua(null,u)):(Io(s),hd(s,R))}var x=i.memoizedState;if(x!==null&&(R=x.dehydrated,R!==null)){if(_)s.flags&256?(Io(s),s.flags&=-257,s=pd(i,s,a)):s.memoizedState!==null?(wo(),s.child=i.child,s.flags|=128,s=null):(wo(),R=u.fallback,g=s.mode,u=Nu({mode:"visible",children:u.children},g),R=ps(R,g,a,null),R.flags|=2,u.return=s,R.return=s,u.sibling=R,s.child=u,Es(s,i.child,null,a),u=s.child,u.memoizedState=fd(a),u.childLanes=dd(i,S,a),s.memoizedState=cd,s=Ua(null,u));else if(Io(s),Qd(R)){if(S=R.nextSibling&&R.nextSibling.dataset,S)var z=S.dgst;S=z,u=Error(o(419)),u.stack="",u.digest=S,Sa({value:u,source:null,stack:null}),s=pd(i,s,a)}else if(Se||sr(i,s,a,!1),S=(a&i.childLanes)!==0,Se||S){if(S=ne,S!==null&&(u=io(S,a),u!==0&&u!==x.retryLane))throw x.retryLane=u,hs(i,u),_n(S,i,u),ld;Kd(R)||ku(),s=pd(i,s,a)}else Kd(R)?(s.flags|=192,s.child=i.child,s=null):(i=x.treeContext,oe=qn(R.nextSibling),Fe=s,kt=!0,To=null,kn=!1,i!==null&&mm(s,i),s=hd(s,u.children),s.flags|=4096);return s}return g?(wo(),R=u.fallback,g=s.mode,x=i.child,z=x.sibling,u=Di(x,{mode:"hidden",children:u.children}),u.subtreeFlags=x.subtreeFlags&65011712,z!==null?R=Di(z,R):(R=ps(R,g,a,null),R.flags|=2),R.return=s,u.return=s,u.sibling=R,s.child=u,Ua(null,u),u=s.child,R=i.child.memoizedState,R===null?R=fd(a):(g=R.cachePool,g!==null?(x=Ee._currentValue,g=g.parent!==x?{parent:x,pool:x}:g):g=Em(),R={baseLanes:R.baseLanes|a,cachePool:g}),u.memoizedState=R,u.childLanes=dd(i,S,a),s.memoizedState=cd,Ua(i.child,u)):(Io(s),a=i.child,i=a.sibling,a=Di(a,{mode:"visible",children:u.children}),a.return=s,a.sibling=null,i!==null&&(S=s.deletions,S===null?(s.deletions=[i],s.flags|=16):S.push(i)),s.child=a,s.memoizedState=null,a)}function hd(i,s){return s=Nu({mode:"visible",children:s},i.mode),s.return=i,i.child=s}function Nu(i,s){return i=An(22,i,null,s),i.lanes=0,i}function pd(i,s,a){return Es(s,i.child,null,a),i=hd(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function Pg(i,s,a){i.lanes|=s;var u=i.alternate;u!==null&&(u.lanes|=s),Mf(i.return,s,a)}function md(i,s,a,u,g,_){var S=i.memoizedState;S===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:g,treeForkCount:_}:(S.isBackwards=s,S.rendering=null,S.renderingStartTime=0,S.last=u,S.tail=a,S.tailMode=g,S.treeForkCount=_)}function Ug(i,s,a){var u=s.pendingProps,g=u.revealOrder,_=u.tail;u=u.children;var S=ge.current,R=(S&2)!==0;if(R?(S=S&1|2,s.flags|=128):S&=1,rt(ge,S),ze(i,s,u,a),u=kt?Aa:0,!R&&i!==null&&(i.flags&128)!==0)t:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Pg(i,a,s);else if(i.tag===19)Pg(i,a,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break t;for(;i.sibling===null;){if(i.return===null||i.return===s)break t;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(g){case"forwards":for(a=s.child,g=null;a!==null;)i=a.alternate,i!==null&&gu(i)===null&&(g=a),a=a.sibling;a=g,a===null?(g=s.child,s.child=null):(g=a.sibling,a.sibling=null),md(s,!1,g,a,_,u);break;case"backwards":case"unstable_legacy-backwards":for(a=null,g=s.child,s.child=null;g!==null;){if(i=g.alternate,i!==null&&gu(i)===null){s.child=g;break}i=g.sibling,g.sibling=a,a=g,g=i}md(s,!0,a,null,_,u);break;case"together":md(s,!1,null,null,void 0,u);break;default:s.memoizedState=null}return s.child}function Li(i,s,a){if(i!==null&&(s.dependencies=i.dependencies),Do|=s.lanes,(a&s.childLanes)===0)if(i!==null){if(sr(i,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(i!==null&&s.child!==i.child)throw Error(o(153));if(s.child!==null){for(i=s.child,a=Di(i,i.pendingProps),s.child=a,a.return=s;i.sibling!==null;)i=i.sibling,a=a.sibling=Di(i,i.pendingProps),a.return=s;a.sibling=null}return s.child}function gd(i,s){return(i.lanes&s)!==0?!0:(i=i.dependencies,!!(i!==null&&lu(i)))}function WA(i,s,a){switch(s.tag){case 3:Oe(s,s.stateNode.containerInfo),Ao(s,Ee,i.memoizedState.cache),ms();break;case 27:case 5:ni(s);break;case 4:Oe(s,s.stateNode.containerInfo);break;case 10:Ao(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Bf(s),null;break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(Io(s),s.flags|=128,null):(a&s.child.childLanes)!==0?Vg(i,s,a):(Io(s),i=Li(i,s,a),i!==null?i.sibling:null);Io(s);break;case 19:var g=(i.flags&128)!==0;if(u=(a&s.childLanes)!==0,u||(sr(i,s,a,!1),u=(a&s.childLanes)!==0),g){if(u)return Ug(i,s,a);s.flags|=128}if(g=s.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),rt(ge,ge.current),u)break;return null;case 22:return s.lanes=0,wg(i,s,a,s.pendingProps);case 24:Ao(s,Ee,i.memoizedState.cache)}return Li(i,s,a)}function Lg(i,s,a){if(i!==null)if(i.memoizedProps!==s.pendingProps)Se=!0;else{if(!gd(i,a)&&(s.flags&128)===0)return Se=!1,WA(i,s,a);Se=(i.flags&131072)!==0}else Se=!1,kt&&(s.flags&1048576)!==0&&pm(s,Aa,s.index);switch(s.lanes=0,s.tag){case 16:t:{var u=s.pendingProps;if(i=vs(s.elementType),s.type=i,typeof i=="function")Ef(i)?(u=Ss(i,u),s.tag=1,s=bg(null,s,i,u,a)):(s.tag=0,s=ud(null,s,i,u,a));else{if(i!=null){var g=i.$$typeof;if(g===et){s.tag=11,s=Cg(null,s,i,u,a);break t}else if(g===D){s.tag=14,s=Rg(null,s,i,u,a);break t}}throw s=Kt(i)||i,Error(o(306,s,""))}}return s;case 0:return ud(i,s,s.type,s.pendingProps,a);case 1:return u=s.type,g=Ss(u,s.pendingProps),bg(i,s,u,g,a);case 3:t:{if(Oe(s,s.stateNode.containerInfo),i===null)throw Error(o(387));u=s.pendingProps;var _=s.memoizedState;g=_.element,Lf(i,s),Da(s,u,null,a);var S=s.memoizedState;if(u=S.cache,Ao(s,Ee,u),u!==_.cache&&Df(s,[Ee],a,!0),Ma(),u=S.element,_.isDehydrated)if(_={element:u,isDehydrated:!1,cache:S.cache},s.updateQueue.baseState=_,s.memoizedState=_,s.flags&256){s=xg(i,s,u,a);break t}else if(u!==g){g=Pn(Error(o(424)),s),Sa(g),s=xg(i,s,u,a);break t}else{switch(i=s.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(oe=qn(i.firstChild),Fe=s,kt=!0,To=null,kn=!0,a=wm(s,null,u,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(ms(),u===g){s=Li(i,s,a);break t}ze(i,s,u,a)}s=s.child}return s;case 26:return wu(i,s),i===null?(a=Ky(s.type,null,s.pendingProps,null))?s.memoizedState=a:kt||(a=s.type,i=s.pendingProps,u=zu(Mt.current).createElement(a),u[fe]=s,u[Be]=i,Ye(u,a,i),me(u),s.stateNode=u):s.memoizedState=Ky(s.type,i.memoizedProps,s.pendingProps,i.memoizedState),null;case 27:return ni(s),i===null&&kt&&(u=s.stateNode=zy(s.type,s.pendingProps,Mt.current),Fe=s,kn=!0,g=oe,Uo(s.type)?($d=g,oe=qn(u.firstChild)):oe=g),ze(i,s,s.pendingProps.children,a),wu(i,s),i===null&&(s.flags|=4194304),s.child;case 5:return i===null&&kt&&((g=u=oe)&&(u=wS(u,s.type,s.pendingProps,kn),u!==null?(s.stateNode=u,Fe=s,oe=qn(u.firstChild),kn=!1,g=!0):g=!1),g||Eo(s)),ni(s),g=s.type,_=s.pendingProps,S=i!==null?i.memoizedProps:null,u=_.children,zd(g,_)?u=null:S!==null&&zd(g,S)&&(s.flags|=32),s.memoizedState!==null&&(g=Hf(i,s,FA,null,null,a),Xa._currentValue=g),wu(i,s),ze(i,s,u,a),s.child;case 6:return i===null&&kt&&((i=a=oe)&&(a=NS(a,s.pendingProps,kn),a!==null?(s.stateNode=a,Fe=s,oe=null,i=!0):i=!1),i||Eo(s)),null;case 13:return Vg(i,s,a);case 4:return Oe(s,s.stateNode.containerInfo),u=s.pendingProps,i===null?s.child=Es(s,null,u,a):ze(i,s,u,a),s.child;case 11:return Cg(i,s,s.type,s.pendingProps,a);case 7:return ze(i,s,s.pendingProps,a),s.child;case 8:return ze(i,s,s.pendingProps.children,a),s.child;case 12:return ze(i,s,s.pendingProps.children,a),s.child;case 10:return u=s.pendingProps,Ao(s,s.type,u.value),ze(i,s,u.children,a),s.child;case 9:return g=s.type._context,u=s.pendingProps.children,ys(s),g=He(g),u=u(g),s.flags|=1,ze(i,s,u,a),s.child;case 14:return Rg(i,s,s.type,s.pendingProps,a);case 15:return Ig(i,s,s.type,s.pendingProps,a);case 19:return Ug(i,s,a);case 31:return XA(i,s,a);case 22:return wg(i,s,a,s.pendingProps);case 24:return ys(s),u=He(Ee),i===null?(g=Vf(),g===null&&(g=ne,_=bf(),g.pooledCache=_,_.refCount++,_!==null&&(g.pooledCacheLanes|=a),g=_),s.memoizedState={parent:u,cache:g},Uf(s),Ao(s,Ee,g)):((i.lanes&a)!==0&&(Lf(i,s),Da(s,null,null,a),Ma()),g=i.memoizedState,_=s.memoizedState,g.parent!==u?(g={parent:u,cache:u},s.memoizedState=g,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=g),Ao(s,Ee,u)):(u=_.cache,Ao(s,Ee,u),u!==g.cache&&Df(s,[Ee],a,!0))),ze(i,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(o(156,s.tag))}function ki(i){i.flags|=4}function yd(i,s,a,u,g){if((s=(i.mode&32)!==0)&&(s=!1),s){if(i.flags|=16777216,(g&335544128)===g)if(i.stateNode.complete)i.flags|=8192;else if(uy())i.flags|=8192;else throw Ts=du,Pf}else i.flags&=-16777217}function kg(i,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!Zy(s))if(uy())i.flags|=8192;else throw Ts=du,Pf}function Mu(i,s){s!==null&&(i.flags|=4),i.flags&16384&&(s=i.tag!==22?na():536870912,i.lanes|=s,yr|=s)}function La(i,s){if(!kt)switch(i.tailMode){case"hidden":s=i.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?i.tail=null:a.sibling=null;break;case"collapsed":a=i.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:u.sibling=null}}function se(i){var s=i.alternate!==null&&i.alternate.child===i.child,a=0,u=0;if(s)for(var g=i.child;g!==null;)a|=g.lanes|g.childLanes,u|=g.subtreeFlags&65011712,u|=g.flags&65011712,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)a|=g.lanes|g.childLanes,u|=g.subtreeFlags,u|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=u,i.childLanes=a,s}function ZA(i,s,a){var u=s.pendingProps;switch(Rf(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return se(s),null;case 1:return se(s),null;case 3:return a=s.stateNode,u=null,i!==null&&(u=i.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),Vi(Ee),ue(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(i===null||i.child===null)&&(or(s)?ki(s):i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,wf())),se(s),null;case 26:var g=s.type,_=s.memoizedState;return i===null?(ki(s),_!==null?(se(s),kg(s,_)):(se(s),yd(s,g,null,u,a))):_?_!==i.memoizedState?(ki(s),se(s),kg(s,_)):(se(s),s.flags&=-16777217):(i=i.memoizedProps,i!==u&&ki(s),se(s),yd(s,g,i,u,a)),null;case 27:if(_i(s),a=Mt.current,g=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==u&&ki(s);else{if(!u){if(s.stateNode===null)throw Error(o(166));return se(s),null}i=pt.current,or(s)?gm(s):(i=zy(g,u,a),s.stateNode=i,ki(s))}return se(s),null;case 5:if(_i(s),g=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==u&&ki(s);else{if(!u){if(s.stateNode===null)throw Error(o(166));return se(s),null}if(_=pt.current,or(s))gm(s);else{var S=zu(Mt.current);switch(_){case 1:_=S.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:_=S.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":_=S.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":_=S.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":_=S.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof u.is=="string"?S.createElement("select",{is:u.is}):S.createElement("select"),u.multiple?_.multiple=!0:u.size&&(_.size=u.size);break;default:_=typeof u.is=="string"?S.createElement(g,{is:u.is}):S.createElement(g)}}_[fe]=s,_[Be]=u;t:for(S=s.child;S!==null;){if(S.tag===5||S.tag===6)_.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===s)break t;for(;S.sibling===null;){if(S.return===null||S.return===s)break t;S=S.return}S.sibling.return=S.return,S=S.sibling}s.stateNode=_;t:switch(Ye(_,g,u),g){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break t;case"img":u=!0;break t;default:u=!1}u&&ki(s)}}return se(s),yd(s,s.type,i===null?null:i.memoizedProps,s.pendingProps,a),null;case 6:if(i&&s.stateNode!=null)i.memoizedProps!==u&&ki(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(o(166));if(i=Mt.current,or(s)){if(i=s.stateNode,a=s.memoizedProps,u=null,g=Fe,g!==null)switch(g.tag){case 27:case 5:u=g.memoizedProps}i[fe]=s,i=!!(i.nodeValue===a||u!==null&&u.suppressHydrationWarning===!0||Vy(i.nodeValue,a)),i||Eo(s,!0)}else i=zu(i).createTextNode(u),i[fe]=s,s.stateNode=i}return se(s),null;case 31:if(a=s.memoizedState,i===null||i.memoizedState!==null){if(u=or(s),a!==null){if(i===null){if(!u)throw Error(o(318));if(i=s.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(557));i[fe]=s}else ms(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;se(s),i=!1}else a=wf(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=a),i=!0;if(!i)return s.flags&256?(Cn(s),s):(Cn(s),null);if((s.flags&128)!==0)throw Error(o(558))}return se(s),null;case 13:if(u=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(g=or(s),u!==null&&u.dehydrated!==null){if(i===null){if(!g)throw Error(o(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(o(317));g[fe]=s}else ms(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;se(s),g=!1}else g=wf(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=g),g=!0;if(!g)return s.flags&256?(Cn(s),s):(Cn(s),null)}return Cn(s),(s.flags&128)!==0?(s.lanes=a,s):(a=u!==null,i=i!==null&&i.memoizedState!==null,a&&(u=s.child,g=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(g=u.alternate.memoizedState.cachePool.pool),_=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(_=u.memoizedState.cachePool.pool),_!==g&&(u.flags|=2048)),a!==i&&a&&(s.child.flags|=8192),Mu(s,s.updateQueue),se(s),null);case 4:return ue(),i===null&&qd(s.stateNode.containerInfo),se(s),null;case 10:return Vi(s.type),se(s),null;case 19:if(Z(ge),u=s.memoizedState,u===null)return se(s),null;if(g=(s.flags&128)!==0,_=u.rendering,_===null)if(g)La(u,!1);else{if(pe!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(_=gu(i),_!==null){for(s.flags|=128,La(u,!1),i=_.updateQueue,s.updateQueue=i,Mu(s,i),s.subtreeFlags=0,i=a,a=s.child;a!==null;)fm(a,i),a=a.sibling;return rt(ge,ge.current&1|2),kt&&bi(s,u.treeForkCount),s.child}i=i.sibling}u.tail!==null&&qe()>Pu&&(s.flags|=128,g=!0,La(u,!1),s.lanes=4194304)}else{if(!g)if(i=gu(_),i!==null){if(s.flags|=128,g=!0,i=i.updateQueue,s.updateQueue=i,Mu(s,i),La(u,!0),u.tail===null&&u.tailMode==="hidden"&&!_.alternate&&!kt)return se(s),null}else 2*qe()-u.renderingStartTime>Pu&&a!==536870912&&(s.flags|=128,g=!0,La(u,!1),s.lanes=4194304);u.isBackwards?(_.sibling=s.child,s.child=_):(i=u.last,i!==null?i.sibling=_:s.child=_,u.last=_)}return u.tail!==null?(i=u.tail,u.rendering=i,u.tail=i.sibling,u.renderingStartTime=qe(),i.sibling=null,a=ge.current,rt(ge,g?a&1|2:a&1),kt&&bi(s,u.treeForkCount),i):(se(s),null);case 22:case 23:return Cn(s),Gf(),u=s.memoizedState!==null,i!==null?i.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(a&536870912)!==0&&(s.flags&128)===0&&(se(s),s.subtreeFlags&6&&(s.flags|=8192)):se(s),a=s.updateQueue,a!==null&&Mu(s,a.retryQueue),a=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==a&&(s.flags|=2048),i!==null&&Z(_s),null;case 24:return a=null,i!==null&&(a=i.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),Vi(Ee),se(s),null;case 25:return null;case 30:return null}throw Error(o(156,s.tag))}function jA(i,s){switch(Rf(s),s.tag){case 1:return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return Vi(Ee),ue(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 26:case 27:case 5:return _i(s),null;case 31:if(s.memoizedState!==null){if(Cn(s),s.alternate===null)throw Error(o(340));ms()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 13:if(Cn(s),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(o(340));ms()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return Z(ge),null;case 4:return ue(),null;case 10:return Vi(s.type),null;case 22:case 23:return Cn(s),Gf(),i!==null&&Z(_s),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 24:return Vi(Ee),null;case 25:return null;default:return null}}function Og(i,s){switch(Rf(s),s.tag){case 3:Vi(Ee),ue();break;case 26:case 27:case 5:_i(s);break;case 4:ue();break;case 31:s.memoizedState!==null&&Cn(s);break;case 13:Cn(s);break;case 19:Z(ge);break;case 10:Vi(s.type);break;case 22:case 23:Cn(s),Gf(),i!==null&&Z(_s);break;case 24:Vi(Ee)}}function ka(i,s){try{var a=s.updateQueue,u=a!==null?a.lastEffect:null;if(u!==null){var g=u.next;a=g;do{if((a.tag&i)===i){u=void 0;var _=a.create,S=a.inst;u=_(),S.destroy=u}a=a.next}while(a!==g)}}catch(R){Wt(s,s.return,R)}}function No(i,s,a){try{var u=s.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var _=g.next;u=_;do{if((u.tag&i)===i){var S=u.inst,R=S.destroy;if(R!==void 0){S.destroy=void 0,g=s;var x=a,z=R;try{z()}catch(W){Wt(g,x,W)}}}u=u.next}while(u!==_)}}catch(W){Wt(s,s.return,W)}}function qg(i){var s=i.updateQueue;if(s!==null){var a=i.stateNode;try{Mm(s,a)}catch(u){Wt(i,i.return,u)}}}function Gg(i,s,a){a.props=Ss(i.type,i.memoizedProps),a.state=i.memoizedState;try{a.componentWillUnmount()}catch(u){Wt(i,s,u)}}function Oa(i,s){try{var a=i.ref;if(a!==null){switch(i.tag){case 26:case 27:case 5:var u=i.stateNode;break;case 30:u=i.stateNode;break;default:u=i.stateNode}typeof a=="function"?i.refCleanup=a(u):a.current=u}}catch(g){Wt(i,s,g)}}function hi(i,s){var a=i.ref,u=i.refCleanup;if(a!==null)if(typeof u=="function")try{u()}catch(g){Wt(i,s,g)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(g){Wt(i,s,g)}else a.current=null}function Bg(i){var s=i.type,a=i.memoizedProps,u=i.stateNode;try{t:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&u.focus();break t;case"img":a.src?u.src=a.src:a.srcSet&&(u.srcset=a.srcSet)}}catch(g){Wt(i,i.return,g)}}function _d(i,s,a){try{var u=i.stateNode;ES(u,i.type,a,s),u[Be]=s}catch(g){Wt(i,i.return,g)}}function Fg(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Uo(i.type)||i.tag===4}function vd(i){t:for(;;){for(;i.sibling===null;){if(i.return===null||Fg(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Uo(i.type)||i.flags&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Td(i,s,a){var u=i.tag;if(u===5||u===6)i=i.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(i,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(i),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=be));else if(u!==4&&(u===27&&Uo(i.type)&&(a=i.stateNode,s=null),i=i.child,i!==null))for(Td(i,s,a),i=i.sibling;i!==null;)Td(i,s,a),i=i.sibling}function Du(i,s,a){var u=i.tag;if(u===5||u===6)i=i.stateNode,s?a.insertBefore(i,s):a.appendChild(i);else if(u!==4&&(u===27&&Uo(i.type)&&(a=i.stateNode),i=i.child,i!==null))for(Du(i,s,a),i=i.sibling;i!==null;)Du(i,s,a),i=i.sibling}function Hg(i){var s=i.stateNode,a=i.memoizedProps;try{for(var u=i.type,g=s.attributes;g.length;)s.removeAttributeNode(g[0]);Ye(s,u,a),s[fe]=i,s[Be]=a}catch(_){Wt(i,i.return,_)}}var Oi=!1,Ce=!1,Ed=!1,zg=typeof WeakSet=="function"?WeakSet:Set,Pe=null;function tS(i,s){if(i=i.containerInfo,Fd=Wu,i=nm(i),pf(i)){if("selectionStart"in i)var a={start:i.selectionStart,end:i.selectionEnd};else t:{a=(a=i.ownerDocument)&&a.defaultView||window;var u=a.getSelection&&a.getSelection();if(u&&u.rangeCount!==0){a=u.anchorNode;var g=u.anchorOffset,_=u.focusNode;u=u.focusOffset;try{a.nodeType,_.nodeType}catch{a=null;break t}var S=0,R=-1,x=-1,z=0,W=0,tt=i,Y=null;e:for(;;){for(var K;tt!==a||g!==0&&tt.nodeType!==3||(R=S+g),tt!==_||u!==0&&tt.nodeType!==3||(x=S+u),tt.nodeType===3&&(S+=tt.nodeValue.length),(K=tt.firstChild)!==null;)Y=tt,tt=K;for(;;){if(tt===i)break e;if(Y===a&&++z===g&&(R=S),Y===_&&++W===u&&(x=S),(K=tt.nextSibling)!==null)break;tt=Y,Y=tt.parentNode}tt=K}a=R===-1||x===-1?null:{start:R,end:x}}else a=null}a=a||{start:0,end:0}}else a=null;for(Hd={focusedElem:i,selectionRange:a},Wu=!1,Pe=s;Pe!==null;)if(s=Pe,i=s.child,(s.subtreeFlags&1028)!==0&&i!==null)i.return=s,Pe=i;else for(;Pe!==null;){switch(s=Pe,_=s.alternate,i=s.flags,s.tag){case 0:if((i&4)!==0&&(i=s.updateQueue,i=i!==null?i.events:null,i!==null))for(a=0;a<i.length;a++)g=i[a],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&_!==null){i=void 0,a=s,g=_.memoizedProps,_=_.memoizedState,u=a.stateNode;try{var dt=Ss(a.type,g);i=u.getSnapshotBeforeUpdate(dt,_),u.__reactInternalSnapshotBeforeUpdate=i}catch(Tt){Wt(a,a.return,Tt)}}break;case 3:if((i&1024)!==0){if(i=s.stateNode.containerInfo,a=i.nodeType,a===9)Jd(i);else if(a===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Jd(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(o(163))}if(i=s.sibling,i!==null){i.return=s.return,Pe=i;break}Pe=s.return}}function Yg(i,s,a){var u=a.flags;switch(a.tag){case 0:case 11:case 15:Gi(i,a),u&4&&ka(5,a);break;case 1:if(Gi(i,a),u&4)if(i=a.stateNode,s===null)try{i.componentDidMount()}catch(S){Wt(a,a.return,S)}else{var g=Ss(a.type,s.memoizedProps);s=s.memoizedState;try{i.componentDidUpdate(g,s,i.__reactInternalSnapshotBeforeUpdate)}catch(S){Wt(a,a.return,S)}}u&64&&qg(a),u&512&&Oa(a,a.return);break;case 3:if(Gi(i,a),u&64&&(i=a.updateQueue,i!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{Mm(i,s)}catch(S){Wt(a,a.return,S)}}break;case 27:s===null&&u&4&&Hg(a);case 26:case 5:Gi(i,a),s===null&&u&4&&Bg(a),u&512&&Oa(a,a.return);break;case 12:Gi(i,a);break;case 31:Gi(i,a),u&4&&Qg(i,a);break;case 13:Gi(i,a),u&4&&$g(i,a),u&64&&(i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(a=uS.bind(null,a),MS(i,a))));break;case 22:if(u=a.memoizedState!==null||Oi,!u){s=s!==null&&s.memoizedState!==null||Ce,g=Oi;var _=Ce;Oi=u,(Ce=s)&&!_?Bi(i,a,(a.subtreeFlags&8772)!==0):Gi(i,a),Oi=g,Ce=_}break;case 30:break;default:Gi(i,a)}}function Jg(i){var s=i.alternate;s!==null&&(i.alternate=null,Jg(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&es(s)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var le=null,pn=!1;function qi(i,s,a){for(a=a.child;a!==null;)Kg(i,s,a),a=a.sibling}function Kg(i,s,a){if(Xe&&typeof Xe.onCommitFiberUnmount=="function")try{Xe.onCommitFiberUnmount(Zi,a)}catch{}switch(a.tag){case 26:Ce||hi(a,s),qi(i,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Ce||hi(a,s);var u=le,g=pn;Uo(a.type)&&(le=a.stateNode,pn=!1),qi(i,s,a),Ka(a.stateNode),le=u,pn=g;break;case 5:Ce||hi(a,s);case 6:if(u=le,g=pn,le=null,qi(i,s,a),le=u,pn=g,le!==null)if(pn)try{(le.nodeType===9?le.body:le.nodeName==="HTML"?le.ownerDocument.body:le).removeChild(a.stateNode)}catch(_){Wt(a,s,_)}else try{le.removeChild(a.stateNode)}catch(_){Wt(a,s,_)}break;case 18:le!==null&&(pn?(i=le,qy(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,a.stateNode),Rr(i)):qy(le,a.stateNode));break;case 4:u=le,g=pn,le=a.stateNode.containerInfo,pn=!0,qi(i,s,a),le=u,pn=g;break;case 0:case 11:case 14:case 15:No(2,a,s),Ce||No(4,a,s),qi(i,s,a);break;case 1:Ce||(hi(a,s),u=a.stateNode,typeof u.componentWillUnmount=="function"&&Gg(a,s,u)),qi(i,s,a);break;case 21:qi(i,s,a);break;case 22:Ce=(u=Ce)||a.memoizedState!==null,qi(i,s,a),Ce=u;break;default:qi(i,s,a)}}function Qg(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Rr(i)}catch(a){Wt(s,s.return,a)}}}function $g(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Rr(i)}catch(a){Wt(s,s.return,a)}}function eS(i){switch(i.tag){case 31:case 13:case 19:var s=i.stateNode;return s===null&&(s=i.stateNode=new zg),s;case 22:return i=i.stateNode,s=i._retryCache,s===null&&(s=i._retryCache=new zg),s;default:throw Error(o(435,i.tag))}}function bu(i,s){var a=eS(i);s.forEach(function(u){if(!a.has(u)){a.add(u);var g=cS.bind(null,i,u);u.then(g,g)}})}function mn(i,s){var a=s.deletions;if(a!==null)for(var u=0;u<a.length;u++){var g=a[u],_=i,S=s,R=S;t:for(;R!==null;){switch(R.tag){case 27:if(Uo(R.type)){le=R.stateNode,pn=!1;break t}break;case 5:le=R.stateNode,pn=!1;break t;case 3:case 4:le=R.stateNode.containerInfo,pn=!0;break t}R=R.return}if(le===null)throw Error(o(160));Kg(_,S,g),le=null,pn=!1,_=g.alternate,_!==null&&(_.return=null),g.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)Xg(s,i),s=s.sibling}var $n=null;function Xg(i,s){var a=i.alternate,u=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:mn(s,i),gn(i),u&4&&(No(3,i,i.return),ka(3,i),No(5,i,i.return));break;case 1:mn(s,i),gn(i),u&512&&(Ce||a===null||hi(a,a.return)),u&64&&Oi&&(i=i.updateQueue,i!==null&&(u=i.callbacks,u!==null&&(a=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=a===null?u:a.concat(u))));break;case 26:var g=$n;if(mn(s,i),gn(i),u&512&&(Ce||a===null||hi(a,a.return)),u&4){var _=a!==null?a.memoizedState:null;if(u=i.memoizedState,a===null)if(u===null)if(i.stateNode===null){t:{u=i.type,a=i.memoizedProps,g=g.ownerDocument||g;e:switch(u){case"title":_=g.getElementsByTagName("title")[0],(!_||_[Ai]||_[fe]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=g.createElement(u),g.head.insertBefore(_,g.querySelector("head > title"))),Ye(_,u,a),_[fe]=i,me(_),u=_;break t;case"link":var S=Xy("link","href",g).get(u+(a.href||""));if(S){for(var R=0;R<S.length;R++)if(_=S[R],_.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&_.getAttribute("rel")===(a.rel==null?null:a.rel)&&_.getAttribute("title")===(a.title==null?null:a.title)&&_.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){S.splice(R,1);break e}}_=g.createElement(u),Ye(_,u,a),g.head.appendChild(_);break;case"meta":if(S=Xy("meta","content",g).get(u+(a.content||""))){for(R=0;R<S.length;R++)if(_=S[R],_.getAttribute("content")===(a.content==null?null:""+a.content)&&_.getAttribute("name")===(a.name==null?null:a.name)&&_.getAttribute("property")===(a.property==null?null:a.property)&&_.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&_.getAttribute("charset")===(a.charSet==null?null:a.charSet)){S.splice(R,1);break e}}_=g.createElement(u),Ye(_,u,a),g.head.appendChild(_);break;default:throw Error(o(468,u))}_[fe]=i,me(_),u=_}i.stateNode=u}else Wy(g,i.type,i.stateNode);else i.stateNode=$y(g,u,i.memoizedProps);else _!==u?(_===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):_.count--,u===null?Wy(g,i.type,i.stateNode):$y(g,u,i.memoizedProps)):u===null&&i.stateNode!==null&&_d(i,i.memoizedProps,a.memoizedProps)}break;case 27:mn(s,i),gn(i),u&512&&(Ce||a===null||hi(a,a.return)),a!==null&&u&4&&_d(i,i.memoizedProps,a.memoizedProps);break;case 5:if(mn(s,i),gn(i),u&512&&(Ce||a===null||hi(a,a.return)),i.flags&32){g=i.stateNode;try{xn(g,"")}catch(dt){Wt(i,i.return,dt)}}u&4&&i.stateNode!=null&&(g=i.memoizedProps,_d(i,g,a!==null?a.memoizedProps:g)),u&1024&&(Ed=!0);break;case 6:if(mn(s,i),gn(i),u&4){if(i.stateNode===null)throw Error(o(162));u=i.memoizedProps,a=i.stateNode;try{a.nodeValue=u}catch(dt){Wt(i,i.return,dt)}}break;case 3:if(Ku=null,g=$n,$n=Yu(s.containerInfo),mn(s,i),$n=g,gn(i),u&4&&a!==null&&a.memoizedState.isDehydrated)try{Rr(s.containerInfo)}catch(dt){Wt(i,i.return,dt)}Ed&&(Ed=!1,Wg(i));break;case 4:u=$n,$n=Yu(i.stateNode.containerInfo),mn(s,i),gn(i),$n=u;break;case 12:mn(s,i),gn(i);break;case 31:mn(s,i),gn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,bu(i,u)));break;case 13:mn(s,i),gn(i),i.child.flags&8192&&i.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Vu=qe()),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,bu(i,u)));break;case 22:g=i.memoizedState!==null;var x=a!==null&&a.memoizedState!==null,z=Oi,W=Ce;if(Oi=z||g,Ce=W||x,mn(s,i),Ce=W,Oi=z,gn(i),u&8192)t:for(s=i.stateNode,s._visibility=g?s._visibility&-2:s._visibility|1,g&&(a===null||x||Oi||Ce||Cs(i)),a=null,s=i;;){if(s.tag===5||s.tag===26){if(a===null){x=a=s;try{if(_=x.stateNode,g)S=_.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{R=x.stateNode;var tt=x.memoizedProps.style,Y=tt!=null&&tt.hasOwnProperty("display")?tt.display:null;R.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(dt){Wt(x,x.return,dt)}}}else if(s.tag===6){if(a===null){x=s;try{x.stateNode.nodeValue=g?"":x.memoizedProps}catch(dt){Wt(x,x.return,dt)}}}else if(s.tag===18){if(a===null){x=s;try{var K=x.stateNode;g?Gy(K,!0):Gy(x.stateNode,!1)}catch(dt){Wt(x,x.return,dt)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===i)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break t;for(;s.sibling===null;){if(s.return===null||s.return===i)break t;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=i.updateQueue,u!==null&&(a=u.retryQueue,a!==null&&(u.retryQueue=null,bu(i,a))));break;case 19:mn(s,i),gn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,bu(i,u)));break;case 30:break;case 21:break;default:mn(s,i),gn(i)}}function gn(i){var s=i.flags;if(s&2){try{for(var a,u=i.return;u!==null;){if(Fg(u)){a=u;break}u=u.return}if(a==null)throw Error(o(160));switch(a.tag){case 27:var g=a.stateNode,_=vd(i);Du(i,_,g);break;case 5:var S=a.stateNode;a.flags&32&&(xn(S,""),a.flags&=-33);var R=vd(i);Du(i,R,S);break;case 3:case 4:var x=a.stateNode.containerInfo,z=vd(i);Td(i,z,x);break;default:throw Error(o(161))}}catch(W){Wt(i,i.return,W)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function Wg(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var s=i;Wg(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),i=i.sibling}}function Gi(i,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Yg(i,s.alternate,s),s=s.sibling}function Cs(i){for(i=i.child;i!==null;){var s=i;switch(s.tag){case 0:case 11:case 14:case 15:No(4,s,s.return),Cs(s);break;case 1:hi(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&Gg(s,s.return,a),Cs(s);break;case 27:Ka(s.stateNode);case 26:case 5:hi(s,s.return),Cs(s);break;case 22:s.memoizedState===null&&Cs(s);break;case 30:Cs(s);break;default:Cs(s)}i=i.sibling}}function Bi(i,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,g=i,_=s,S=_.flags;switch(_.tag){case 0:case 11:case 15:Bi(g,_,a),ka(4,_);break;case 1:if(Bi(g,_,a),u=_,g=u.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(z){Wt(u,u.return,z)}if(u=_,g=u.updateQueue,g!==null){var R=u.stateNode;try{var x=g.shared.hiddenCallbacks;if(x!==null)for(g.shared.hiddenCallbacks=null,g=0;g<x.length;g++)Nm(x[g],R)}catch(z){Wt(u,u.return,z)}}a&&S&64&&qg(_),Oa(_,_.return);break;case 27:Hg(_);case 26:case 5:Bi(g,_,a),a&&u===null&&S&4&&Bg(_),Oa(_,_.return);break;case 12:Bi(g,_,a);break;case 31:Bi(g,_,a),a&&S&4&&Qg(g,_);break;case 13:Bi(g,_,a),a&&S&4&&$g(g,_);break;case 22:_.memoizedState===null&&Bi(g,_,a),Oa(_,_.return);break;case 30:break;default:Bi(g,_,a)}s=s.sibling}}function Ad(i,s){var a=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==a&&(i!=null&&i.refCount++,a!=null&&Ca(a))}function Sd(i,s){i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&Ca(i))}function Xn(i,s,a,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Zg(i,s,a,u),s=s.sibling}function Zg(i,s,a,u){var g=s.flags;switch(s.tag){case 0:case 11:case 15:Xn(i,s,a,u),g&2048&&ka(9,s);break;case 1:Xn(i,s,a,u);break;case 3:Xn(i,s,a,u),g&2048&&(i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&Ca(i)));break;case 12:if(g&2048){Xn(i,s,a,u),i=s.stateNode;try{var _=s.memoizedProps,S=_.id,R=_.onPostCommit;typeof R=="function"&&R(S,s.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(x){Wt(s,s.return,x)}}else Xn(i,s,a,u);break;case 31:Xn(i,s,a,u);break;case 13:Xn(i,s,a,u);break;case 23:break;case 22:_=s.stateNode,S=s.alternate,s.memoizedState!==null?_._visibility&2?Xn(i,s,a,u):qa(i,s):_._visibility&2?Xn(i,s,a,u):(_._visibility|=2,pr(i,s,a,u,(s.subtreeFlags&10256)!==0||!1)),g&2048&&Ad(S,s);break;case 24:Xn(i,s,a,u),g&2048&&Sd(s.alternate,s);break;default:Xn(i,s,a,u)}}function pr(i,s,a,u,g){for(g=g&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var _=i,S=s,R=a,x=u,z=S.flags;switch(S.tag){case 0:case 11:case 15:pr(_,S,R,x,g),ka(8,S);break;case 23:break;case 22:var W=S.stateNode;S.memoizedState!==null?W._visibility&2?pr(_,S,R,x,g):qa(_,S):(W._visibility|=2,pr(_,S,R,x,g)),g&&z&2048&&Ad(S.alternate,S);break;case 24:pr(_,S,R,x,g),g&&z&2048&&Sd(S.alternate,S);break;default:pr(_,S,R,x,g)}s=s.sibling}}function qa(i,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=i,u=s,g=u.flags;switch(u.tag){case 22:qa(a,u),g&2048&&Ad(u.alternate,u);break;case 24:qa(a,u),g&2048&&Sd(u.alternate,u);break;default:qa(a,u)}s=s.sibling}}var Ga=8192;function mr(i,s,a){if(i.subtreeFlags&Ga)for(i=i.child;i!==null;)jg(i,s,a),i=i.sibling}function jg(i,s,a){switch(i.tag){case 26:mr(i,s,a),i.flags&Ga&&i.memoizedState!==null&&BS(a,$n,i.memoizedState,i.memoizedProps);break;case 5:mr(i,s,a);break;case 3:case 4:var u=$n;$n=Yu(i.stateNode.containerInfo),mr(i,s,a),$n=u;break;case 22:i.memoizedState===null&&(u=i.alternate,u!==null&&u.memoizedState!==null?(u=Ga,Ga=16777216,mr(i,s,a),Ga=u):mr(i,s,a));break;default:mr(i,s,a)}}function ty(i){var s=i.alternate;if(s!==null&&(i=s.child,i!==null)){s.child=null;do s=i.sibling,i.sibling=null,i=s;while(i!==null)}}function Ba(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var u=s[a];Pe=u,ny(u,i)}ty(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)ey(i),i=i.sibling}function ey(i){switch(i.tag){case 0:case 11:case 15:Ba(i),i.flags&2048&&No(9,i,i.return);break;case 3:Ba(i);break;case 12:Ba(i);break;case 22:var s=i.stateNode;i.memoizedState!==null&&s._visibility&2&&(i.return===null||i.return.tag!==13)?(s._visibility&=-3,xu(i)):Ba(i);break;default:Ba(i)}}function xu(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var u=s[a];Pe=u,ny(u,i)}ty(i)}for(i=i.child;i!==null;){switch(s=i,s.tag){case 0:case 11:case 15:No(8,s,s.return),xu(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,xu(s));break;default:xu(s)}i=i.sibling}}function ny(i,s){for(;Pe!==null;){var a=Pe;switch(a.tag){case 0:case 11:case 15:No(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var u=a.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Ca(a.memoizedState.cache)}if(u=a.child,u!==null)u.return=a,Pe=u;else t:for(a=i;Pe!==null;){u=Pe;var g=u.sibling,_=u.return;if(Jg(u),u===a){Pe=null;break t}if(g!==null){g.return=_,Pe=g;break t}Pe=_}}}var nS={getCacheForType:function(i){var s=He(Ee),a=s.data.get(i);return a===void 0&&(a=i(),s.data.set(i,a)),a},cacheSignal:function(){return He(Ee).controller.signal}},iS=typeof WeakMap=="function"?WeakMap:Map,Jt=0,ne=null,bt=null,Vt=0,Xt=0,Rn=null,Mo=!1,gr=!1,Cd=!1,Fi=0,pe=0,Do=0,Rs=0,Rd=0,In=0,yr=0,Fa=null,yn=null,Id=!1,Vu=0,iy=0,Pu=1/0,Uu=null,bo=null,Ne=0,xo=null,_r=null,Hi=0,wd=0,Nd=null,oy=null,Ha=0,Md=null;function wn(){return(Jt&2)!==0&&Vt!==0?Vt&-Vt:$.T!==null?Ud():Ei()}function sy(){if(In===0)if((Vt&536870912)===0||kt){var i=ii;ii<<=1,(ii&3932160)===0&&(ii=262144),In=i}else In=536870912;return i=Sn.current,i!==null&&(i.flags|=32),In}function _n(i,s,a){(i===ne&&(Xt===2||Xt===9)||i.cancelPendingCommit!==null)&&(vr(i,0),Vo(i,Vt,In,!1)),eo(i,a),((Jt&2)===0||i!==ne)&&(i===ne&&((Jt&2)===0&&(Rs|=a),pe===4&&Vo(i,Vt,In,!1)),pi(i))}function ry(i,s,a){if((Jt&6)!==0)throw Error(o(327));var u=!a&&(s&127)===0&&(s&i.expiredLanes)===0||to(i,s),g=u?rS(i,s):bd(i,s,!0),_=u;do{if(g===0){gr&&!u&&Vo(i,s,0,!1);break}else{if(a=i.current.alternate,_&&!oS(a)){g=bd(i,s,!1),_=!1;continue}if(g===2){if(_=s,i.errorRecoveryDisabledLanes&_)var S=0;else S=i.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){s=S;t:{var R=i;g=Fa;var x=R.current.memoizedState.isDehydrated;if(x&&(vr(R,S).flags|=256),S=bd(R,S,!1),S!==2){if(Cd&&!x){R.errorRecoveryDisabledLanes|=_,Rs|=_,g=4;break t}_=yn,yn=g,_!==null&&(yn===null?yn=_:yn.push.apply(yn,_))}g=S}if(_=!1,g!==2)continue}}if(g===1){vr(i,0),Vo(i,s,0,!0);break}t:{switch(u=i,_=g,_){case 0:case 1:throw Error(o(345));case 4:if((s&4194048)!==s)break;case 6:Vo(u,s,In,!Mo);break t;case 2:yn=null;break;case 3:case 5:break;default:throw Error(o(329))}if((s&62914560)===s&&(g=Vu+300-qe(),10<g)){if(Vo(u,s,In,!Mo),Dn(u,0,!0)!==0)break t;Hi=s,u.timeoutHandle=ky(ay.bind(null,u,a,yn,Uu,Id,s,In,Rs,yr,Mo,_,"Throttled",-0,0),g);break t}ay(u,a,yn,Uu,Id,s,In,Rs,yr,Mo,_,null,-0,0)}}break}while(!0);pi(i)}function ay(i,s,a,u,g,_,S,R,x,z,W,tt,Y,K){if(i.timeoutHandle=-1,tt=s.subtreeFlags,tt&8192||(tt&16785408)===16785408){tt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:be},jg(s,_,tt);var dt=(_&62914560)===_?Vu-qe():(_&4194048)===_?iy-qe():0;if(dt=FS(tt,dt),dt!==null){Hi=_,i.cancelPendingCommit=dt(my.bind(null,i,s,_,a,u,g,S,R,x,W,tt,null,Y,K)),Vo(i,_,S,!z);return}}my(i,s,_,a,u,g,S,R,x)}function oS(i){for(var s=i;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var u=0;u<a.length;u++){var g=a[u],_=g.getSnapshot;g=g.value;try{if(!En(_(),g))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Vo(i,s,a,u){s&=~Rd,s&=~Rs,i.suspendedLanes|=s,i.pingedLanes&=~s,u&&(i.warmLanes|=s),u=i.expirationTimes;for(var g=s;0<g;){var _=31-on(g),S=1<<_;u[_]=-1,g&=~S}a!==0&&ia(i,a,s)}function Lu(){return(Jt&6)===0?(za(0),!1):!0}function Dd(){if(bt!==null){if(Xt===0)var i=bt.return;else i=bt,xi=gs=null,Jf(i),ur=null,Ia=0,i=bt;for(;i!==null;)Og(i.alternate,i),i=i.return;bt=null}}function vr(i,s){var a=i.timeoutHandle;a!==-1&&(i.timeoutHandle=-1,CS(a)),a=i.cancelPendingCommit,a!==null&&(i.cancelPendingCommit=null,a()),Hi=0,Dd(),ne=i,bt=a=Di(i.current,null),Vt=s,Xt=0,Rn=null,Mo=!1,gr=to(i,s),Cd=!1,yr=In=Rd=Rs=Do=pe=0,yn=Fa=null,Id=!1,(s&8)!==0&&(s|=s&32);var u=i.entangledLanes;if(u!==0)for(i=i.entanglements,u&=s;0<u;){var g=31-on(u),_=1<<g;s|=i[g],u&=~_}return Fi=s,iu(),a}function ly(i,s){wt=null,$.H=Pa,s===lr||s===fu?(s=Cm(),Xt=3):s===Pf?(s=Cm(),Xt=4):Xt=s===ld?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Rn=s,bt===null&&(pe=1,Ru(i,Pn(s,i.current)))}function uy(){var i=Sn.current;return i===null?!0:(Vt&4194048)===Vt?On===null:(Vt&62914560)===Vt||(Vt&536870912)!==0?i===On:!1}function cy(){var i=$.H;return $.H=Pa,i===null?Pa:i}function fy(){var i=$.A;return $.A=nS,i}function ku(){pe=4,Mo||(Vt&4194048)!==Vt&&Sn.current!==null||(gr=!0),(Do&134217727)===0&&(Rs&134217727)===0||ne===null||Vo(ne,Vt,In,!1)}function bd(i,s,a){var u=Jt;Jt|=2;var g=cy(),_=fy();(ne!==i||Vt!==s)&&(Uu=null,vr(i,s)),s=!1;var S=pe;t:do try{if(Xt!==0&&bt!==null){var R=bt,x=Rn;switch(Xt){case 8:Dd(),S=6;break t;case 3:case 2:case 9:case 6:Sn.current===null&&(s=!0);var z=Xt;if(Xt=0,Rn=null,Tr(i,R,x,z),a&&gr){S=0;break t}break;default:z=Xt,Xt=0,Rn=null,Tr(i,R,x,z)}}sS(),S=pe;break}catch(W){ly(i,W)}while(!0);return s&&i.shellSuspendCounter++,xi=gs=null,Jt=u,$.H=g,$.A=_,bt===null&&(ne=null,Vt=0,iu()),S}function sS(){for(;bt!==null;)dy(bt)}function rS(i,s){var a=Jt;Jt|=2;var u=cy(),g=fy();ne!==i||Vt!==s?(Uu=null,Pu=qe()+500,vr(i,s)):gr=to(i,s);t:do try{if(Xt!==0&&bt!==null){s=bt;var _=Rn;e:switch(Xt){case 1:Xt=0,Rn=null,Tr(i,s,_,1);break;case 2:case 9:if(Am(_)){Xt=0,Rn=null,hy(s);break}s=function(){Xt!==2&&Xt!==9||ne!==i||(Xt=7),pi(i)},_.then(s,s);break t;case 3:Xt=7;break t;case 4:Xt=5;break t;case 7:Am(_)?(Xt=0,Rn=null,hy(s)):(Xt=0,Rn=null,Tr(i,s,_,7));break;case 5:var S=null;switch(bt.tag){case 26:S=bt.memoizedState;case 5:case 27:var R=bt;if(S?Zy(S):R.stateNode.complete){Xt=0,Rn=null;var x=R.sibling;if(x!==null)bt=x;else{var z=R.return;z!==null?(bt=z,Ou(z)):bt=null}break e}}Xt=0,Rn=null,Tr(i,s,_,5);break;case 6:Xt=0,Rn=null,Tr(i,s,_,6);break;case 8:Dd(),pe=6;break t;default:throw Error(o(462))}}aS();break}catch(W){ly(i,W)}while(!0);return xi=gs=null,$.H=u,$.A=g,Jt=a,bt!==null?0:(ne=null,Vt=0,iu(),pe)}function aS(){for(;bt!==null&&!nf();)dy(bt)}function dy(i){var s=Lg(i.alternate,i,Fi);i.memoizedProps=i.pendingProps,s===null?Ou(i):bt=s}function hy(i){var s=i,a=s.alternate;switch(s.tag){case 15:case 0:s=Dg(a,s,s.pendingProps,s.type,void 0,Vt);break;case 11:s=Dg(a,s,s.pendingProps,s.type.render,s.ref,Vt);break;case 5:Jf(s);default:Og(a,s),s=bt=fm(s,Fi),s=Lg(a,s,Fi)}i.memoizedProps=i.pendingProps,s===null?Ou(i):bt=s}function Tr(i,s,a,u){xi=gs=null,Jf(s),ur=null,Ia=0;var g=s.return;try{if($A(i,g,s,a,Vt)){pe=1,Ru(i,Pn(a,i.current)),bt=null;return}}catch(_){if(g!==null)throw bt=g,_;pe=1,Ru(i,Pn(a,i.current)),bt=null;return}s.flags&32768?(kt||u===1?i=!0:gr||(Vt&536870912)!==0?i=!1:(Mo=i=!0,(u===2||u===9||u===3||u===6)&&(u=Sn.current,u!==null&&u.tag===13&&(u.flags|=16384))),py(s,i)):Ou(s)}function Ou(i){var s=i;do{if((s.flags&32768)!==0){py(s,Mo);return}i=s.return;var a=ZA(s.alternate,s,Fi);if(a!==null){bt=a;return}if(s=s.sibling,s!==null){bt=s;return}bt=s=i}while(s!==null);pe===0&&(pe=5)}function py(i,s){do{var a=jA(i.alternate,i);if(a!==null){a.flags&=32767,bt=a;return}if(a=i.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(i=i.sibling,i!==null)){bt=i;return}bt=i=a}while(i!==null);pe=6,bt=null}function my(i,s,a,u,g,_,S,R,x){i.cancelPendingCommit=null;do qu();while(Ne!==0);if((Jt&6)!==0)throw Error(o(327));if(s!==null){if(s===i.current)throw Error(o(177));if(_=s.lanes|s.childLanes,_|=vf,Ge(i,a,_,S,R,x),i===ne&&(bt=ne=null,Vt=0),_r=s,xo=i,Hi=a,wd=_,Nd=g,oy=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,fS(vi,function(){return Ty(),null})):(i.callbackNode=null,i.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=$.T,$.T=null,g=lt.p,lt.p=2,S=Jt,Jt|=4;try{tS(i,s,a)}finally{Jt=S,lt.p=g,$.T=u}}Ne=1,gy(),yy(),_y()}}function gy(){if(Ne===1){Ne=0;var i=xo,s=_r,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=$.T,$.T=null;var u=lt.p;lt.p=2;var g=Jt;Jt|=4;try{Xg(s,i);var _=Hd,S=nm(i.containerInfo),R=_.focusedElem,x=_.selectionRange;if(S!==R&&R&&R.ownerDocument&&em(R.ownerDocument.documentElement,R)){if(x!==null&&pf(R)){var z=x.start,W=x.end;if(W===void 0&&(W=z),"selectionStart"in R)R.selectionStart=z,R.selectionEnd=Math.min(W,R.value.length);else{var tt=R.ownerDocument||document,Y=tt&&tt.defaultView||window;if(Y.getSelection){var K=Y.getSelection(),dt=R.textContent.length,Tt=Math.min(x.start,dt),ee=x.end===void 0?Tt:Math.min(x.end,dt);!K.extend&&Tt>ee&&(S=ee,ee=Tt,Tt=S);var B=tm(R,Tt),k=tm(R,ee);if(B&&k&&(K.rangeCount!==1||K.anchorNode!==B.node||K.anchorOffset!==B.offset||K.focusNode!==k.node||K.focusOffset!==k.offset)){var H=tt.createRange();H.setStart(B.node,B.offset),K.removeAllRanges(),Tt>ee?(K.addRange(H),K.extend(k.node,k.offset)):(H.setEnd(k.node,k.offset),K.addRange(H))}}}}for(tt=[],K=R;K=K.parentNode;)K.nodeType===1&&tt.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<tt.length;R++){var j=tt[R];j.element.scrollLeft=j.left,j.element.scrollTop=j.top}}Wu=!!Fd,Hd=Fd=null}finally{Jt=g,lt.p=u,$.T=a}}i.current=s,Ne=2}}function yy(){if(Ne===2){Ne=0;var i=xo,s=_r,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=$.T,$.T=null;var u=lt.p;lt.p=2;var g=Jt;Jt|=4;try{Yg(i,s.alternate,s)}finally{Jt=g,lt.p=u,$.T=a}}Ne=3}}function _y(){if(Ne===4||Ne===3){Ne=0,jr();var i=xo,s=_r,a=Hi,u=oy;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Ne=5:(Ne=0,_r=xo=null,vy(i,i.pendingLanes));var g=i.pendingLanes;if(g===0&&(bo=null),sa(a),s=s.stateNode,Xe&&typeof Xe.onCommitFiberRoot=="function")try{Xe.onCommitFiberRoot(Zi,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=$.T,g=lt.p,lt.p=2,$.T=null;try{for(var _=i.onRecoverableError,S=0;S<u.length;S++){var R=u[S];_(R.value,{componentStack:R.stack})}}finally{$.T=s,lt.p=g}}(Hi&3)!==0&&qu(),pi(i),g=i.pendingLanes,(a&261930)!==0&&(g&42)!==0?i===Md?Ha++:(Ha=0,Md=i):Ha=0,za(0)}}function vy(i,s){(i.pooledCacheLanes&=s)===0&&(s=i.pooledCache,s!=null&&(i.pooledCache=null,Ca(s)))}function qu(){return gy(),yy(),_y(),Ty()}function Ty(){if(Ne!==5)return!1;var i=xo,s=wd;wd=0;var a=sa(Hi),u=$.T,g=lt.p;try{lt.p=32>a?32:a,$.T=null,a=Nd,Nd=null;var _=xo,S=Hi;if(Ne=0,_r=xo=null,Hi=0,(Jt&6)!==0)throw Error(o(331));var R=Jt;if(Jt|=4,ey(_.current),Zg(_,_.current,S,a),Jt=R,za(0,!1),Xe&&typeof Xe.onPostCommitFiberRoot=="function")try{Xe.onPostCommitFiberRoot(Zi,_)}catch{}return!0}finally{lt.p=g,$.T=u,vy(i,s)}}function Ey(i,s,a){s=Pn(a,s),s=ad(i.stateNode,s,2),i=Ro(i,s,2),i!==null&&(eo(i,2),pi(i))}function Wt(i,s,a){if(i.tag===3)Ey(i,i,a);else for(;s!==null;){if(s.tag===3){Ey(s,i,a);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(bo===null||!bo.has(u))){i=Pn(a,i),a=Ag(2),u=Ro(s,a,2),u!==null&&(Sg(a,u,s,i),eo(u,2),pi(u));break}}s=s.return}}function xd(i,s,a){var u=i.pingCache;if(u===null){u=i.pingCache=new iS;var g=new Set;u.set(s,g)}else g=u.get(s),g===void 0&&(g=new Set,u.set(s,g));g.has(a)||(Cd=!0,g.add(a),i=lS.bind(null,i,s,a),s.then(i,i))}function lS(i,s,a){var u=i.pingCache;u!==null&&u.delete(s),i.pingedLanes|=i.suspendedLanes&a,i.warmLanes&=~a,ne===i&&(Vt&a)===a&&(pe===4||pe===3&&(Vt&62914560)===Vt&&300>qe()-Vu?(Jt&2)===0&&vr(i,0):Rd|=a,yr===Vt&&(yr=0)),pi(i)}function Ay(i,s){s===0&&(s=na()),i=hs(i,s),i!==null&&(eo(i,s),pi(i))}function uS(i){var s=i.memoizedState,a=0;s!==null&&(a=s.retryLane),Ay(i,a)}function cS(i,s){var a=0;switch(i.tag){case 31:case 13:var u=i.stateNode,g=i.memoizedState;g!==null&&(a=g.retryLane);break;case 19:u=i.stateNode;break;case 22:u=i.stateNode._retryCache;break;default:throw Error(o(314))}u!==null&&u.delete(s),Ay(i,a)}function fS(i,s){return Zo(i,s)}var Gu=null,Er=null,Vd=!1,Bu=!1,Pd=!1,Po=0;function pi(i){i!==Er&&i.next===null&&(Er===null?Gu=Er=i:Er=Er.next=i),Bu=!0,Vd||(Vd=!0,hS())}function za(i,s){if(!Pd&&Bu){Pd=!0;do for(var a=!1,u=Gu;u!==null;){if(i!==0){var g=u.pendingLanes;if(g===0)var _=0;else{var S=u.suspendedLanes,R=u.pingedLanes;_=(1<<31-on(42|i)+1)-1,_&=g&~(S&~R),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(a=!0,Iy(u,_))}else _=Vt,_=Dn(u,u===ne?_:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(_&3)===0||to(u,_)||(a=!0,Iy(u,_));u=u.next}while(a);Pd=!1}}function dS(){Sy()}function Sy(){Bu=Vd=!1;var i=0;Po!==0&&SS()&&(i=Po);for(var s=qe(),a=null,u=Gu;u!==null;){var g=u.next,_=Cy(u,s);_===0?(u.next=null,a===null?Gu=g:a.next=g,g===null&&(Er=a)):(a=u,(i!==0||(_&3)!==0)&&(Bu=!0)),u=g}Ne!==0&&Ne!==5||za(i),Po!==0&&(Po=0)}function Cy(i,s){for(var a=i.suspendedLanes,u=i.pingedLanes,g=i.expirationTimes,_=i.pendingLanes&-62914561;0<_;){var S=31-on(_),R=1<<S,x=g[S];x===-1?((R&a)===0||(R&u)!==0)&&(g[S]=Bs(R,s)):x<=s&&(i.expiredLanes|=R),_&=~R}if(s=ne,a=Vt,a=Dn(i,i===s?a:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u=i.callbackNode,a===0||i===s&&(Xt===2||Xt===9)||i.cancelPendingCommit!==null)return u!==null&&u!==null&&Gs(u),i.callbackNode=null,i.callbackPriority=0;if((a&3)===0||to(i,a)){if(s=a&-a,s===i.callbackPriority)return s;switch(u!==null&&Gs(u),sa(a)){case 2:case 8:a=De;break;case 32:a=vi;break;case 268435456:a=ta;break;default:a=vi}return u=Ry.bind(null,i),a=Zo(a,u),i.callbackPriority=s,i.callbackNode=a,s}return u!==null&&u!==null&&Gs(u),i.callbackPriority=2,i.callbackNode=null,2}function Ry(i,s){if(Ne!==0&&Ne!==5)return i.callbackNode=null,i.callbackPriority=0,null;var a=i.callbackNode;if(qu()&&i.callbackNode!==a)return null;var u=Vt;return u=Dn(i,i===ne?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u===0?null:(ry(i,u,s),Cy(i,qe()),i.callbackNode!=null&&i.callbackNode===a?Ry.bind(null,i):null)}function Iy(i,s){if(qu())return null;ry(i,s,!0)}function hS(){RS(function(){(Jt&6)!==0?Zo(we,dS):Sy()})}function Ud(){if(Po===0){var i=rr;i===0&&(i=ts,ts<<=1,(ts&261888)===0&&(ts=256)),Po=i}return Po}function wy(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:li(""+i)}function Ny(i,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,i.id&&a.setAttribute("form",i.id),s.parentNode.insertBefore(a,s),i=new FormData(i),a.parentNode.removeChild(a),i}function pS(i,s,a,u,g){if(s==="submit"&&a&&a.stateNode===g){var _=wy((g[Be]||null).action),S=u.submitter;S&&(s=(s=S[Be]||null)?wy(s.formAction):S.getAttribute("formAction"),s!==null&&(_=s,S=null));var R=new rs("action","action",null,u,g);i.push({event:R,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Po!==0){var x=S?Ny(g,S):new FormData(g);ed(a,{pending:!0,data:x,method:g.method,action:_},null,x)}}else typeof _=="function"&&(R.preventDefault(),x=S?Ny(g,S):new FormData(g),ed(a,{pending:!0,data:x,method:g.method,action:_},_,x))},currentTarget:g}]})}}for(var Ld=0;Ld<_f.length;Ld++){var kd=_f[Ld],mS=kd.toLowerCase(),gS=kd[0].toUpperCase()+kd.slice(1);Qn(mS,"on"+gS)}Qn(sm,"onAnimationEnd"),Qn(rm,"onAnimationIteration"),Qn(am,"onAnimationStart"),Qn("dblclick","onDoubleClick"),Qn("focusin","onFocus"),Qn("focusout","onBlur"),Qn(xA,"onTransitionRun"),Qn(VA,"onTransitionStart"),Qn(PA,"onTransitionCancel"),Qn(lm,"onTransitionEnd"),ai("onMouseEnter",["mouseout","mouseover"]),ai("onMouseLeave",["mouseout","mouseover"]),ai("onPointerEnter",["pointerout","pointerover"]),ai("onPointerLeave",["pointerout","pointerover"]),sn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),sn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),sn("onBeforeInput",["compositionend","keypress","textInput","paste"]),sn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),sn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),sn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ya="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ya));function My(i,s){s=(s&4)!==0;for(var a=0;a<i.length;a++){var u=i[a],g=u.event;u=u.listeners;t:{var _=void 0;if(s)for(var S=u.length-1;0<=S;S--){var R=u[S],x=R.instance,z=R.currentTarget;if(R=R.listener,x!==_&&g.isPropagationStopped())break t;_=R,g.currentTarget=z;try{_(g)}catch(W){nu(W)}g.currentTarget=null,_=x}else for(S=0;S<u.length;S++){if(R=u[S],x=R.instance,z=R.currentTarget,R=R.listener,x!==_&&g.isPropagationStopped())break t;_=R,g.currentTarget=z;try{_(g)}catch(W){nu(W)}g.currentTarget=null,_=x}}}}function xt(i,s){var a=s[oo];a===void 0&&(a=s[oo]=new Set);var u=i+"__bubble";a.has(u)||(Dy(s,i,2,!1),a.add(u))}function Od(i,s,a){var u=0;s&&(u|=4),Dy(a,i,u,s)}var Fu="_reactListening"+Math.random().toString(36).slice(2);function qd(i){if(!i[Fu]){i[Fu]=!0,Fs.forEach(function(a){a!=="selectionchange"&&(yS.has(a)||Od(a,!1,i),Od(a,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[Fu]||(s[Fu]=!0,Od("selectionchange",!1,s))}}function Dy(i,s,a,u){switch(s_(s)){case 2:var g=YS;break;case 8:g=JS;break;default:g=th}a=g.bind(null,s,a,i),g=void 0,!ha||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(g=!0),u?g!==void 0?i.addEventListener(s,a,{capture:!0,passive:g}):i.addEventListener(s,a,!0):g!==void 0?i.addEventListener(s,a,{passive:g}):i.addEventListener(s,a,!1)}function Gd(i,s,a,u,g){var _=u;if((s&1)===0&&(s&2)===0&&u!==null)t:for(;;){if(u===null)return;var S=u.tag;if(S===3||S===4){var R=u.stateNode.containerInfo;if(R===g)break;if(S===4)for(S=u.return;S!==null;){var x=S.tag;if((x===3||x===4)&&S.stateNode.containerInfo===g)return;S=S.return}for(;R!==null;){if(S=Si(R),S===null)return;if(x=S.tag,x===5||x===6||x===26||x===27){u=_=S;continue t}R=R.parentNode}}u=u.return}Gl(function(){var z=_,W=Ks(a),tt=[];t:{var Y=um.get(i);if(Y!==void 0){var K=rs,dt=i;switch(i){case"keypress":if(ss(a)===0)break t;case"keydown":case"keyup":K=$l;break;case"focusin":dt="focus",K=mo;break;case"focusout":dt="blur",K=mo;break;case"beforeblur":case"afterblur":K=mo;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=Fl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=Hl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=Wl;break;case sm:case rm:case am:K=Xs;break;case lm:K=Ws;break;case"scroll":case"scrollend":K=Bl;break;case"wheel":K=jl;break;case"copy":case"cut":case"paste":K=Yl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=_a;break;case"toggle":case"beforetoggle":K=yo}var Tt=(s&4)!==0,ee=!Tt&&(i==="scroll"||i==="scrollend"),B=Tt?Y!==null?Y+"Capture":null:Y;Tt=[];for(var k=z,H;k!==null;){var j=k;if(H=j.stateNode,j=j.tag,j!==5&&j!==26&&j!==27||H===null||B===null||(j=dn(k,B),j!=null&&Tt.push(Ja(k,j,H))),ee)break;k=k.return}0<Tt.length&&(Y=new K(Y,dt,null,a,W),tt.push({event:Y,listeners:Tt}))}}if((s&7)===0){t:{if(Y=i==="mouseover"||i==="pointerover",K=i==="mouseout"||i==="pointerout",Y&&a!==Js&&(dt=a.relatedTarget||a.fromElement)&&(Si(dt)||dt[si]))break t;if((K||Y)&&(Y=W.window===W?W:(Y=W.ownerDocument)?Y.defaultView||Y.parentWindow:window,K?(dt=a.relatedTarget||a.toElement,K=z,dt=dt?Si(dt):null,dt!==null&&(ee=l(dt),Tt=dt.tag,dt!==ee||Tt!==5&&Tt!==27&&Tt!==6)&&(dt=null)):(K=null,dt=z),K!==dt)){if(Tt=Fl,j="onMouseLeave",B="onMouseEnter",k="mouse",(i==="pointerout"||i==="pointerover")&&(Tt=_a,j="onPointerLeave",B="onPointerEnter",k="pointer"),ee=K==null?Y:ns(K),H=dt==null?Y:ns(dt),Y=new Tt(j,k+"leave",K,a,W),Y.target=ee,Y.relatedTarget=H,j=null,Si(W)===z&&(Tt=new Tt(B,k+"enter",dt,a,W),Tt.target=H,Tt.relatedTarget=ee,j=Tt),ee=j,K&&dt)e:{for(Tt=_S,B=K,k=dt,H=0,j=B;j;j=Tt(j))H++;j=0;for(var yt=k;yt;yt=Tt(yt))j++;for(;0<H-j;)B=Tt(B),H--;for(;0<j-H;)k=Tt(k),j--;for(;H--;){if(B===k||k!==null&&B===k.alternate){Tt=B;break e}B=Tt(B),k=Tt(k)}Tt=null}else Tt=null;K!==null&&by(tt,Y,K,Tt,!1),dt!==null&&ee!==null&&by(tt,ee,dt,Tt,!0)}}t:{if(Y=z?ns(z):window,K=Y.nodeName&&Y.nodeName.toLowerCase(),K==="select"||K==="input"&&Y.type==="file")var Ft=Qp;else if(hn(Y))if($p)Ft=MA;else{Ft=wA;var gt=IA}else K=Y.nodeName,!K||K.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?z&&fa(z.elementType)&&(Ft=Qp):Ft=NA;if(Ft&&(Ft=Ft(i,z))){cs(tt,Ft,a,W);break t}gt&&gt(i,Y,z),i==="focusout"&&z&&Y.type==="number"&&z.memoizedProps.value!=null&&Ys(Y,"number",Y.value)}switch(gt=z?ns(z):window,i){case"focusin":(hn(gt)||gt.contentEditable==="true")&&(Zs=gt,mf=z,Ea=null);break;case"focusout":Ea=mf=Zs=null;break;case"mousedown":gf=!0;break;case"contextmenu":case"mouseup":case"dragend":gf=!1,im(tt,a,W);break;case"selectionchange":if(bA)break;case"keydown":case"keyup":im(tt,a,W)}var Nt;if(T)t:{switch(i){case"compositionstart":var Pt="onCompositionStart";break t;case"compositionend":Pt="onCompositionEnd";break t;case"compositionupdate":Pt="onCompositionUpdate";break t}Pt=void 0}else Dt?$t(i,a)&&(Pt="onCompositionEnd"):i==="keydown"&&a.keyCode===229&&(Pt="onCompositionStart");Pt&&(F&&a.locale!=="ko"&&(Dt||Pt!=="onCompositionStart"?Pt==="onCompositionEnd"&&Dt&&(Nt=co()):(Tn=W,Qs="value"in Tn?Tn.value:Tn.textContent,Dt=!0)),gt=Hu(z,Pt),0<gt.length&&(Pt=new ma(Pt,i,null,a,W),tt.push({event:Pt,listeners:gt}),Nt?Pt.data=Nt:(Nt=Te(a),Nt!==null&&(Pt.data=Nt)))),(Nt=w?xe(i,a):Ve(i,a))&&(Pt=Hu(z,"onBeforeInput"),0<Pt.length&&(gt=new ma("onBeforeInput","beforeinput",null,a,W),tt.push({event:gt,listeners:Pt}),gt.data=Nt)),pS(tt,i,z,a,W)}My(tt,s)})}function Ja(i,s,a){return{instance:i,listener:s,currentTarget:a}}function Hu(i,s){for(var a=s+"Capture",u=[];i!==null;){var g=i,_=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||_===null||(g=dn(i,a),g!=null&&u.unshift(Ja(i,g,_)),g=dn(i,s),g!=null&&u.push(Ja(i,g,_))),i.tag===3)return u;i=i.return}return[]}function _S(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function by(i,s,a,u,g){for(var _=s._reactName,S=[];a!==null&&a!==u;){var R=a,x=R.alternate,z=R.stateNode;if(R=R.tag,x!==null&&x===u)break;R!==5&&R!==26&&R!==27||z===null||(x=z,g?(z=dn(a,_),z!=null&&S.unshift(Ja(a,z,x))):g||(z=dn(a,_),z!=null&&S.push(Ja(a,z,x)))),a=a.return}S.length!==0&&i.push({event:s,listeners:S})}var vS=/\r\n?/g,TS=/\u0000|\uFFFD/g;function xy(i){return(typeof i=="string"?i:""+i).replace(vS,`
`).replace(TS,"")}function Vy(i,s){return s=xy(s),xy(i)===s}function te(i,s,a,u,g,_){switch(a){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||xn(i,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&xn(i,""+u);break;case"className":ao(i,"class",u);break;case"tabIndex":ao(i,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":ao(i,a,u);break;case"style":Ol(i,u,_);break;case"data":if(s!=="object"){ao(i,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||a!=="href")){i.removeAttribute(a);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(a);break}u=li(""+u),i.setAttribute(a,u);break;case"action":case"formAction":if(typeof u=="function"){i.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(a==="formAction"?(s!=="input"&&te(i,s,"name",g.name,g,null),te(i,s,"formEncType",g.formEncType,g,null),te(i,s,"formMethod",g.formMethod,g,null),te(i,s,"formTarget",g.formTarget,g,null)):(te(i,s,"encType",g.encType,g,null),te(i,s,"method",g.method,g,null),te(i,s,"target",g.target,g,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(a);break}u=li(""+u),i.setAttribute(a,u);break;case"onClick":u!=null&&(i.onclick=be);break;case"onScroll":u!=null&&xt("scroll",i);break;case"onScrollEnd":u!=null&&xt("scrollend",i);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(o(61));if(a=u.__html,a!=null){if(g.children!=null)throw Error(o(60));i.innerHTML=a}}break;case"multiple":i.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":i.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){i.removeAttribute("xlink:href");break}a=li(""+u),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,""+u):i.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,""):i.removeAttribute(a);break;case"capture":case"download":u===!0?i.setAttribute(a,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,u):i.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?i.setAttribute(a,u):i.removeAttribute(a);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?i.removeAttribute(a):i.setAttribute(a,u);break;case"popover":xt("beforetoggle",i),xt("toggle",i),ro(i,"popover",u);break;case"xlinkActuate":bn(i,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":bn(i,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":bn(i,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":bn(i,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":bn(i,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":bn(i,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":bn(i,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":bn(i,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":bn(i,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":ro(i,"is",u);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=uf.get(a)||a,ro(i,a,u))}}function Bd(i,s,a,u,g,_){switch(a){case"style":Ol(i,u,_);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(o(61));if(a=u.__html,a!=null){if(g.children!=null)throw Error(o(60));i.innerHTML=a}}break;case"children":typeof u=="string"?xn(i,u):(typeof u=="number"||typeof u=="bigint")&&xn(i,""+u);break;case"onScroll":u!=null&&xt("scroll",i);break;case"onScrollEnd":u!=null&&xt("scrollend",i);break;case"onClick":u!=null&&(i.onclick=be);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!so.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(g=a.endsWith("Capture"),s=a.slice(2,g?a.length-7:void 0),_=i[Be]||null,_=_!=null?_[a]:null,typeof _=="function"&&i.removeEventListener(s,_,g),typeof u=="function")){typeof _!="function"&&_!==null&&(a in i?i[a]=null:i.hasAttribute(a)&&i.removeAttribute(a)),i.addEventListener(s,u,g);break t}a in i?i[a]=u:u===!0?i.setAttribute(a,""):ro(i,a,u)}}}function Ye(i,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":xt("error",i),xt("load",i);var u=!1,g=!1,_;for(_ in a)if(a.hasOwnProperty(_)){var S=a[_];if(S!=null)switch(_){case"src":u=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:te(i,s,_,S,a,null)}}g&&te(i,s,"srcSet",a.srcSet,a,null),u&&te(i,s,"src",a.src,a,null);return;case"input":xt("invalid",i);var R=_=S=g=null,x=null,z=null;for(u in a)if(a.hasOwnProperty(u)){var W=a[u];if(W!=null)switch(u){case"name":g=W;break;case"type":S=W;break;case"checked":x=W;break;case"defaultChecked":z=W;break;case"value":_=W;break;case"defaultValue":R=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(o(137,s));break;default:te(i,s,u,W,a,null)}}is(i,_,R,x,z,S,g,!1);return;case"select":xt("invalid",i),u=S=_=null;for(g in a)if(a.hasOwnProperty(g)&&(R=a[g],R!=null))switch(g){case"value":_=R;break;case"defaultValue":S=R;break;case"multiple":u=R;default:te(i,s,g,R,a,null)}s=_,a=S,i.multiple=!!u,s!=null?Bt(i,!!u,s,!1):a!=null&&Bt(i,!!u,a,!0);return;case"textarea":xt("invalid",i),_=g=u=null;for(S in a)if(a.hasOwnProperty(S)&&(R=a[S],R!=null))switch(S){case"value":u=R;break;case"defaultValue":g=R;break;case"children":_=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(o(91));break;default:te(i,s,S,R,a,null)}uo(i,u,g,_);return;case"option":for(x in a)if(a.hasOwnProperty(x)&&(u=a[x],u!=null))switch(x){case"selected":i.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:te(i,s,x,u,a,null)}return;case"dialog":xt("beforetoggle",i),xt("toggle",i),xt("cancel",i),xt("close",i);break;case"iframe":case"object":xt("load",i);break;case"video":case"audio":for(u=0;u<Ya.length;u++)xt(Ya[u],i);break;case"image":xt("error",i),xt("load",i);break;case"details":xt("toggle",i);break;case"embed":case"source":case"link":xt("error",i),xt("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(z in a)if(a.hasOwnProperty(z)&&(u=a[z],u!=null))switch(z){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:te(i,s,z,u,a,null)}return;default:if(fa(s)){for(W in a)a.hasOwnProperty(W)&&(u=a[W],u!==void 0&&Bd(i,s,W,u,a,void 0));return}}for(R in a)a.hasOwnProperty(R)&&(u=a[R],u!=null&&te(i,s,R,u,a,null))}function ES(i,s,a,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,_=null,S=null,R=null,x=null,z=null,W=null;for(K in a){var tt=a[K];if(a.hasOwnProperty(K)&&tt!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":x=tt;default:u.hasOwnProperty(K)||te(i,s,K,null,u,tt)}}for(var Y in u){var K=u[Y];if(tt=a[Y],u.hasOwnProperty(Y)&&(K!=null||tt!=null))switch(Y){case"type":_=K;break;case"name":g=K;break;case"checked":z=K;break;case"defaultChecked":W=K;break;case"value":S=K;break;case"defaultValue":R=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(o(137,s));break;default:K!==tt&&te(i,s,Y,K,u,tt)}}lo(i,S,R,x,z,W,_,g);return;case"select":K=S=R=Y=null;for(_ in a)if(x=a[_],a.hasOwnProperty(_)&&x!=null)switch(_){case"value":break;case"multiple":K=x;default:u.hasOwnProperty(_)||te(i,s,_,null,u,x)}for(g in u)if(_=u[g],x=a[g],u.hasOwnProperty(g)&&(_!=null||x!=null))switch(g){case"value":Y=_;break;case"defaultValue":R=_;break;case"multiple":S=_;default:_!==x&&te(i,s,g,_,u,x)}s=R,a=S,u=K,Y!=null?Bt(i,!!a,Y,!1):!!u!=!!a&&(s!=null?Bt(i,!!a,s,!0):Bt(i,!!a,a?[]:"",!1));return;case"textarea":K=Y=null;for(R in a)if(g=a[R],a.hasOwnProperty(R)&&g!=null&&!u.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:te(i,s,R,null,u,g)}for(S in u)if(g=u[S],_=a[S],u.hasOwnProperty(S)&&(g!=null||_!=null))switch(S){case"value":Y=g;break;case"defaultValue":K=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(o(91));break;default:g!==_&&te(i,s,S,g,u,_)}os(i,Y,K);return;case"option":for(var dt in a)if(Y=a[dt],a.hasOwnProperty(dt)&&Y!=null&&!u.hasOwnProperty(dt))switch(dt){case"selected":i.selected=!1;break;default:te(i,s,dt,null,u,Y)}for(x in u)if(Y=u[x],K=a[x],u.hasOwnProperty(x)&&Y!==K&&(Y!=null||K!=null))switch(x){case"selected":i.selected=Y&&typeof Y!="function"&&typeof Y!="symbol";break;default:te(i,s,x,Y,u,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Tt in a)Y=a[Tt],a.hasOwnProperty(Tt)&&Y!=null&&!u.hasOwnProperty(Tt)&&te(i,s,Tt,null,u,Y);for(z in u)if(Y=u[z],K=a[z],u.hasOwnProperty(z)&&Y!==K&&(Y!=null||K!=null))switch(z){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(o(137,s));break;default:te(i,s,z,Y,u,K)}return;default:if(fa(s)){for(var ee in a)Y=a[ee],a.hasOwnProperty(ee)&&Y!==void 0&&!u.hasOwnProperty(ee)&&Bd(i,s,ee,void 0,u,Y);for(W in u)Y=u[W],K=a[W],!u.hasOwnProperty(W)||Y===K||Y===void 0&&K===void 0||Bd(i,s,W,Y,u,K);return}}for(var B in a)Y=a[B],a.hasOwnProperty(B)&&Y!=null&&!u.hasOwnProperty(B)&&te(i,s,B,null,u,Y);for(tt in u)Y=u[tt],K=a[tt],!u.hasOwnProperty(tt)||Y===K||Y==null&&K==null||te(i,s,tt,Y,u,K)}function Py(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function AS(){if(typeof performance.getEntriesByType=="function"){for(var i=0,s=0,a=performance.getEntriesByType("resource"),u=0;u<a.length;u++){var g=a[u],_=g.transferSize,S=g.initiatorType,R=g.duration;if(_&&R&&Py(S)){for(S=0,R=g.responseEnd,u+=1;u<a.length;u++){var x=a[u],z=x.startTime;if(z>R)break;var W=x.transferSize,tt=x.initiatorType;W&&Py(tt)&&(x=x.responseEnd,S+=W*(x<R?1:(R-z)/(x-z)))}if(--u,s+=8*(_+S)/(g.duration/1e3),i++,10<i)break}}if(0<i)return s/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Fd=null,Hd=null;function zu(i){return i.nodeType===9?i:i.ownerDocument}function Uy(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ly(i,s){if(i===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&s==="foreignObject"?0:i}function zd(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Yd=null;function SS(){var i=window.event;return i&&i.type==="popstate"?i===Yd?!1:(Yd=i,!0):(Yd=null,!1)}var ky=typeof setTimeout=="function"?setTimeout:void 0,CS=typeof clearTimeout=="function"?clearTimeout:void 0,Oy=typeof Promise=="function"?Promise:void 0,RS=typeof queueMicrotask=="function"?queueMicrotask:typeof Oy<"u"?function(i){return Oy.resolve(null).then(i).catch(IS)}:ky;function IS(i){setTimeout(function(){throw i})}function Uo(i){return i==="head"}function qy(i,s){var a=s,u=0;do{var g=a.nextSibling;if(i.removeChild(a),g&&g.nodeType===8)if(a=g.data,a==="/$"||a==="/&"){if(u===0){i.removeChild(g),Rr(s);return}u--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")u++;else if(a==="html")Ka(i.ownerDocument.documentElement);else if(a==="head"){a=i.ownerDocument.head,Ka(a);for(var _=a.firstChild;_;){var S=_.nextSibling,R=_.nodeName;_[Ai]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&_.rel.toLowerCase()==="stylesheet"||a.removeChild(_),_=S}}else a==="body"&&Ka(i.ownerDocument.body);a=g}while(a);Rr(s)}function Gy(i,s){var a=i;i=0;do{var u=a.nextSibling;if(a.nodeType===1?s?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(s?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),u&&u.nodeType===8)if(a=u.data,a==="/$"){if(i===0)break;i--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||i++;a=u}while(a)}function Jd(i){var s=i.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Jd(a),es(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}i.removeChild(a)}}function wS(i,s,a,u){for(;i.nodeType===1;){var g=a;if(i.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(u){if(!i[Ai])switch(s){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(_=i.getAttribute("rel"),_==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(_!==g.rel||i.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||i.getAttribute("title")!==(g.title==null?null:g.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(_=i.getAttribute("src"),(_!==(g.src==null?null:g.src)||i.getAttribute("type")!==(g.type==null?null:g.type)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&_&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(s==="input"&&i.type==="hidden"){var _=g.name==null?null:""+g.name;if(g.type==="hidden"&&i.getAttribute("name")===_)return i}else return i;if(i=qn(i.nextSibling),i===null)break}return null}function NS(i,s,a){if(s==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=qn(i.nextSibling),i===null))return null;return i}function By(i,s){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!s||(i=qn(i.nextSibling),i===null))return null;return i}function Kd(i){return i.data==="$?"||i.data==="$~"}function Qd(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function MS(i,s){var a=i.ownerDocument;if(i.data==="$~")i._reactRetry=s;else if(i.data!=="$?"||a.readyState!=="loading")s();else{var u=function(){s(),a.removeEventListener("DOMContentLoaded",u)};a.addEventListener("DOMContentLoaded",u),i._reactRetry=u}}function qn(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return i}var $d=null;function Fy(i){i=i.nextSibling;for(var s=0;i;){if(i.nodeType===8){var a=i.data;if(a==="/$"||a==="/&"){if(s===0)return qn(i.nextSibling);s--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||s++}i=i.nextSibling}return null}function Hy(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var a=i.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(s===0)return i;s--}else a!=="/$"&&a!=="/&"||s++}i=i.previousSibling}return null}function zy(i,s,a){switch(s=zu(a),i){case"html":if(i=s.documentElement,!i)throw Error(o(452));return i;case"head":if(i=s.head,!i)throw Error(o(453));return i;case"body":if(i=s.body,!i)throw Error(o(454));return i;default:throw Error(o(451))}}function Ka(i){for(var s=i.attributes;s.length;)i.removeAttributeNode(s[0]);es(i)}var Gn=new Map,Yy=new Set;function Yu(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var zi=lt.d;lt.d={f:DS,r:bS,D:xS,C:VS,L:PS,m:US,X:kS,S:LS,M:OS};function DS(){var i=zi.f(),s=Lu();return i||s}function bS(i){var s=Ci(i);s!==null&&s.tag===5&&s.type==="form"?lg(s):zi.r(i)}var Ar=typeof document>"u"?null:document;function Jy(i,s,a){var u=Ar;if(u&&typeof s=="string"&&s){var g=de(s);g='link[rel="'+i+'"][href="'+g+'"]',typeof a=="string"&&(g+='[crossorigin="'+a+'"]'),Yy.has(g)||(Yy.add(g),i={rel:i,crossOrigin:a,href:s},u.querySelector(g)===null&&(s=u.createElement("link"),Ye(s,"link",i),me(s),u.head.appendChild(s)))}}function xS(i){zi.D(i),Jy("dns-prefetch",i,null)}function VS(i,s){zi.C(i,s),Jy("preconnect",i,s)}function PS(i,s,a){zi.L(i,s,a);var u=Ar;if(u&&i&&s){var g='link[rel="preload"][as="'+de(s)+'"]';s==="image"&&a&&a.imageSrcSet?(g+='[imagesrcset="'+de(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(g+='[imagesizes="'+de(a.imageSizes)+'"]')):g+='[href="'+de(i)+'"]';var _=g;switch(s){case"style":_=Sr(i);break;case"script":_=Cr(i)}Gn.has(_)||(i=E({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:i,as:s},a),Gn.set(_,i),u.querySelector(g)!==null||s==="style"&&u.querySelector(Qa(_))||s==="script"&&u.querySelector($a(_))||(s=u.createElement("link"),Ye(s,"link",i),me(s),u.head.appendChild(s)))}}function US(i,s){zi.m(i,s);var a=Ar;if(a&&i){var u=s&&typeof s.as=="string"?s.as:"script",g='link[rel="modulepreload"][as="'+de(u)+'"][href="'+de(i)+'"]',_=g;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=Cr(i)}if(!Gn.has(_)&&(i=E({rel:"modulepreload",href:i},s),Gn.set(_,i),a.querySelector(g)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector($a(_)))return}u=a.createElement("link"),Ye(u,"link",i),me(u),a.head.appendChild(u)}}}function LS(i,s,a){zi.S(i,s,a);var u=Ar;if(u&&i){var g=Jn(u).hoistableStyles,_=Sr(i);s=s||"default";var S=g.get(_);if(!S){var R={loading:0,preload:null};if(S=u.querySelector(Qa(_)))R.loading=5;else{i=E({rel:"stylesheet",href:i,"data-precedence":s},a),(a=Gn.get(_))&&Xd(i,a);var x=S=u.createElement("link");me(x),Ye(x,"link",i),x._p=new Promise(function(z,W){x.onload=z,x.onerror=W}),x.addEventListener("load",function(){R.loading|=1}),x.addEventListener("error",function(){R.loading|=2}),R.loading|=4,Ju(S,s,u)}S={type:"stylesheet",instance:S,count:1,state:R},g.set(_,S)}}}function kS(i,s){zi.X(i,s);var a=Ar;if(a&&i){var u=Jn(a).hoistableScripts,g=Cr(i),_=u.get(g);_||(_=a.querySelector($a(g)),_||(i=E({src:i,async:!0},s),(s=Gn.get(g))&&Wd(i,s),_=a.createElement("script"),me(_),Ye(_,"link",i),a.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},u.set(g,_))}}function OS(i,s){zi.M(i,s);var a=Ar;if(a&&i){var u=Jn(a).hoistableScripts,g=Cr(i),_=u.get(g);_||(_=a.querySelector($a(g)),_||(i=E({src:i,async:!0,type:"module"},s),(s=Gn.get(g))&&Wd(i,s),_=a.createElement("script"),me(_),Ye(_,"link",i),a.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},u.set(g,_))}}function Ky(i,s,a,u){var g=(g=Mt.current)?Yu(g):null;if(!g)throw Error(o(446));switch(i){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=Sr(a.href),a=Jn(g).hoistableStyles,u=a.get(s),u||(u={type:"style",instance:null,count:0,state:null},a.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){i=Sr(a.href);var _=Jn(g).hoistableStyles,S=_.get(i);if(S||(g=g.ownerDocument||g,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(i,S),(_=g.querySelector(Qa(i)))&&!_._p&&(S.instance=_,S.state.loading=5),Gn.has(i)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Gn.set(i,a),_||qS(g,i,a,S.state))),s&&u===null)throw Error(o(528,""));return S}if(s&&u!==null)throw Error(o(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Cr(a),a=Jn(g).hoistableScripts,u=a.get(s),u||(u={type:"script",instance:null,count:0,state:null},a.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,i))}}function Sr(i){return'href="'+de(i)+'"'}function Qa(i){return'link[rel="stylesheet"]['+i+"]"}function Qy(i){return E({},i,{"data-precedence":i.precedence,precedence:null})}function qS(i,s,a,u){i.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=i.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),Ye(s,"link",a),me(s),i.head.appendChild(s))}function Cr(i){return'[src="'+de(i)+'"]'}function $a(i){return"script[async]"+i}function $y(i,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var u=i.querySelector('style[data-href~="'+de(a.href)+'"]');if(u)return s.instance=u,me(u),u;var g=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return u=(i.ownerDocument||i).createElement("style"),me(u),Ye(u,"style",g),Ju(u,a.precedence,i),s.instance=u;case"stylesheet":g=Sr(a.href);var _=i.querySelector(Qa(g));if(_)return s.state.loading|=4,s.instance=_,me(_),_;u=Qy(a),(g=Gn.get(g))&&Xd(u,g),_=(i.ownerDocument||i).createElement("link"),me(_);var S=_;return S._p=new Promise(function(R,x){S.onload=R,S.onerror=x}),Ye(_,"link",u),s.state.loading|=4,Ju(_,a.precedence,i),s.instance=_;case"script":return _=Cr(a.src),(g=i.querySelector($a(_)))?(s.instance=g,me(g),g):(u=a,(g=Gn.get(_))&&(u=E({},a),Wd(u,g)),i=i.ownerDocument||i,g=i.createElement("script"),me(g),Ye(g,"link",u),i.head.appendChild(g),s.instance=g);case"void":return null;default:throw Error(o(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,Ju(u,a.precedence,i));return s.instance}function Ju(i,s,a){for(var u=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=u.length?u[u.length-1]:null,_=g,S=0;S<u.length;S++){var R=u[S];if(R.dataset.precedence===s)_=R;else if(_!==g)break}_?_.parentNode.insertBefore(i,_.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(i,s.firstChild))}function Xd(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.title==null&&(i.title=s.title)}function Wd(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.integrity==null&&(i.integrity=s.integrity)}var Ku=null;function Xy(i,s,a){if(Ku===null){var u=new Map,g=Ku=new Map;g.set(a,u)}else g=Ku,u=g.get(a),u||(u=new Map,g.set(a,u));if(u.has(i))return u;for(u.set(i,null),a=a.getElementsByTagName(i),g=0;g<a.length;g++){var _=a[g];if(!(_[Ai]||_[fe]||i==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var S=_.getAttribute(s)||"";S=i+S;var R=u.get(S);R?R.push(_):u.set(S,[_])}}return u}function Wy(i,s,a){i=i.ownerDocument||i,i.head.insertBefore(a,s==="title"?i.querySelector("head > title"):null)}function GS(i,s,a){if(a===1||s.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return i=s.disabled,typeof s.precedence=="string"&&i==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Zy(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function BS(i,s,a,u){if(a.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var g=Sr(u.href),_=s.querySelector(Qa(g));if(_){s=_._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(i.count++,i=Qu.bind(i),s.then(i,i)),a.state.loading|=4,a.instance=_,me(_);return}_=s.ownerDocument||s,u=Qy(u),(g=Gn.get(g))&&Xd(u,g),_=_.createElement("link"),me(_);var S=_;S._p=new Promise(function(R,x){S.onload=R,S.onerror=x}),Ye(_,"link",u),a.instance=_}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(i.count++,a=Qu.bind(i),s.addEventListener("load",a),s.addEventListener("error",a))}}var Zd=0;function FS(i,s){return i.stylesheets&&i.count===0&&Xu(i,i.stylesheets),0<i.count||0<i.imgCount?function(a){var u=setTimeout(function(){if(i.stylesheets&&Xu(i,i.stylesheets),i.unsuspend){var _=i.unsuspend;i.unsuspend=null,_()}},6e4+s);0<i.imgBytes&&Zd===0&&(Zd=62500*AS());var g=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Xu(i,i.stylesheets),i.unsuspend)){var _=i.unsuspend;i.unsuspend=null,_()}},(i.imgBytes>Zd?50:800)+s);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(u),clearTimeout(g)}}:null}function Qu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Xu(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var $u=null;function Xu(i,s){i.stylesheets=null,i.unsuspend!==null&&(i.count++,$u=new Map,s.forEach(HS,i),$u=null,Qu.call(i))}function HS(i,s){if(!(s.state.loading&4)){var a=$u.get(i);if(a)var u=a.get(null);else{a=new Map,$u.set(i,a);for(var g=i.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<g.length;_++){var S=g[_];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(a.set(S.dataset.precedence,S),u=S)}u&&a.set(null,u)}g=s.instance,S=g.getAttribute("data-precedence"),_=a.get(S)||u,_===u&&a.set(null,g),a.set(S,g),this.count++,u=Qu.bind(this),g.addEventListener("load",u),g.addEventListener("error",u),_?_.parentNode.insertBefore(g,_.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(g,i.firstChild)),s.state.loading|=4}}var Xa={$$typeof:J,Provider:null,Consumer:null,_currentValue:_t,_currentValue2:_t,_threadCount:0};function zS(i,s,a,u,g,_,S,R,x){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ti(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ti(0),this.hiddenUpdates=Ti(null),this.identifierPrefix=u,this.onUncaughtError=g,this.onCaughtError=_,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=x,this.incompleteTransitions=new Map}function jy(i,s,a,u,g,_,S,R,x,z,W,tt){return i=new zS(i,s,a,S,x,z,W,tt,R),s=1,_===!0&&(s|=24),_=An(3,null,null,s),i.current=_,_.stateNode=i,s=bf(),s.refCount++,i.pooledCache=s,s.refCount++,_.memoizedState={element:u,isDehydrated:a,cache:s},Uf(_),i}function t_(i){return i?(i=er,i):er}function e_(i,s,a,u,g,_){g=t_(g),u.context===null?u.context=g:u.pendingContext=g,u=Co(s),u.payload={element:a},_=_===void 0?null:_,_!==null&&(u.callback=_),a=Ro(i,u,s),a!==null&&(_n(a,i,s),Na(a,i,s))}function n_(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var a=i.retryLane;i.retryLane=a!==0&&a<s?a:s}}function jd(i,s){n_(i,s),(i=i.alternate)&&n_(i,s)}function i_(i){if(i.tag===13||i.tag===31){var s=hs(i,67108864);s!==null&&_n(s,i,67108864),jd(i,67108864)}}function o_(i){if(i.tag===13||i.tag===31){var s=wn();s=oa(s);var a=hs(i,s);a!==null&&_n(a,i,s),jd(i,s)}}var Wu=!0;function YS(i,s,a,u){var g=$.T;$.T=null;var _=lt.p;try{lt.p=2,th(i,s,a,u)}finally{lt.p=_,$.T=g}}function JS(i,s,a,u){var g=$.T;$.T=null;var _=lt.p;try{lt.p=8,th(i,s,a,u)}finally{lt.p=_,$.T=g}}function th(i,s,a,u){if(Wu){var g=eh(u);if(g===null)Gd(i,s,u,Zu,a),r_(i,u);else if(QS(g,i,s,a,u))u.stopPropagation();else if(r_(i,u),s&4&&-1<KS.indexOf(i)){for(;g!==null;){var _=Ci(g);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var S=Yn(_.pendingLanes);if(S!==0){var R=_;for(R.pendingLanes|=2,R.entangledLanes|=2;S;){var x=1<<31-on(S);R.entanglements[1]|=x,S&=~x}pi(_),(Jt&6)===0&&(Pu=qe()+500,za(0))}}break;case 31:case 13:R=hs(_,2),R!==null&&_n(R,_,2),Lu(),jd(_,2)}if(_=eh(u),_===null&&Gd(i,s,u,Zu,a),_===g)break;g=_}g!==null&&u.stopPropagation()}else Gd(i,s,u,null,a)}}function eh(i){return i=Ks(i),nh(i)}var Zu=null;function nh(i){if(Zu=null,i=Si(i),i!==null){var s=l(i);if(s===null)i=null;else{var a=s.tag;if(a===13){if(i=c(s),i!==null)return i;i=null}else if(a===31){if(i=d(s),i!==null)return i;i=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return Zu=i,null}function s_(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(bl()){case we:return 2;case De:return 8;case vi:case xl:return 32;case ta:return 268435456;default:return 32}default:return 32}}var ih=!1,Lo=null,ko=null,Oo=null,Wa=new Map,Za=new Map,qo=[],KS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function r_(i,s){switch(i){case"focusin":case"focusout":Lo=null;break;case"dragenter":case"dragleave":ko=null;break;case"mouseover":case"mouseout":Oo=null;break;case"pointerover":case"pointerout":Wa.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Za.delete(s.pointerId)}}function ja(i,s,a,u,g,_){return i===null||i.nativeEvent!==_?(i={blockedOn:s,domEventName:a,eventSystemFlags:u,nativeEvent:_,targetContainers:[g]},s!==null&&(s=Ci(s),s!==null&&i_(s)),i):(i.eventSystemFlags|=u,s=i.targetContainers,g!==null&&s.indexOf(g)===-1&&s.push(g),i)}function QS(i,s,a,u,g){switch(s){case"focusin":return Lo=ja(Lo,i,s,a,u,g),!0;case"dragenter":return ko=ja(ko,i,s,a,u,g),!0;case"mouseover":return Oo=ja(Oo,i,s,a,u,g),!0;case"pointerover":var _=g.pointerId;return Wa.set(_,ja(Wa.get(_)||null,i,s,a,u,g)),!0;case"gotpointercapture":return _=g.pointerId,Za.set(_,ja(Za.get(_)||null,i,s,a,u,g)),!0}return!1}function a_(i){var s=Si(i.target);if(s!==null){var a=l(s);if(a!==null){if(s=a.tag,s===13){if(s=c(a),s!==null){i.blockedOn=s,Pl(i.priority,function(){o_(a)});return}}else if(s===31){if(s=d(a),s!==null){i.blockedOn=s,Pl(i.priority,function(){o_(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){i.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}i.blockedOn=null}function ju(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var a=eh(i.nativeEvent);if(a===null){a=i.nativeEvent;var u=new a.constructor(a.type,a);Js=u,a.target.dispatchEvent(u),Js=null}else return s=Ci(a),s!==null&&i_(s),i.blockedOn=a,!1;s.shift()}return!0}function l_(i,s,a){ju(i)&&a.delete(s)}function $S(){ih=!1,Lo!==null&&ju(Lo)&&(Lo=null),ko!==null&&ju(ko)&&(ko=null),Oo!==null&&ju(Oo)&&(Oo=null),Wa.forEach(l_),Za.forEach(l_)}function tc(i,s){i.blockedOn===s&&(i.blockedOn=null,ih||(ih=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,$S)))}var ec=null;function u_(i){ec!==i&&(ec=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){ec===i&&(ec=null);for(var s=0;s<i.length;s+=3){var a=i[s],u=i[s+1],g=i[s+2];if(typeof u!="function"){if(nh(u||a)===null)continue;break}var _=Ci(a);_!==null&&(i.splice(s,3),s-=3,ed(_,{pending:!0,data:g,method:a.method,action:u},u,g))}}))}function Rr(i){function s(x){return tc(x,i)}Lo!==null&&tc(Lo,i),ko!==null&&tc(ko,i),Oo!==null&&tc(Oo,i),Wa.forEach(s),Za.forEach(s);for(var a=0;a<qo.length;a++){var u=qo[a];u.blockedOn===i&&(u.blockedOn=null)}for(;0<qo.length&&(a=qo[0],a.blockedOn===null);)a_(a),a.blockedOn===null&&qo.shift();if(a=(i.ownerDocument||i).$$reactFormReplay,a!=null)for(u=0;u<a.length;u+=3){var g=a[u],_=a[u+1],S=g[Be]||null;if(typeof _=="function")S||u_(a);else if(S){var R=null;if(_&&_.hasAttribute("formAction")){if(g=_,S=_[Be]||null)R=S.formAction;else if(nh(g)!==null)continue}else R=S.action;typeof R=="function"?a[u+1]=R:(a.splice(u,3),u-=3),u_(a)}}}function c_(){function i(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(S){return g=S})},focusReset:"manual",scroll:"manual"})}function s(){g!==null&&(g(),g=null),u||setTimeout(a,20)}function a(){if(!u&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,g=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(a,100),function(){u=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),g!==null&&(g(),g=null)}}}function oh(i){this._internalRoot=i}nc.prototype.render=oh.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(o(409));var a=s.current,u=wn();e_(a,u,i,s,null,null)},nc.prototype.unmount=oh.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;e_(i.current,2,null,i,null,null),Lu(),s[si]=null}};function nc(i){this._internalRoot=i}nc.prototype.unstable_scheduleHydration=function(i){if(i){var s=Ei();i={blockedOn:null,target:i,priority:s};for(var a=0;a<qo.length&&s!==0&&s<qo[a].priority;a++);qo.splice(a,0,i),a===0&&a_(i)}};var f_=t.version;if(f_!=="19.2.3")throw Error(o(527,f_,"19.2.3"));lt.findDOMNode=function(i){var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(o(188)):(i=Object.keys(i).join(","),Error(o(268,i)));return i=m(s),i=i!==null?v(i):null,i=i===null?null:i.stateNode,i};var XS={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ic.isDisabled&&ic.supportsFiber)try{Zi=ic.inject(XS),Xe=ic}catch{}}return el.createRoot=function(i,s){if(!r(i))throw Error(o(299));var a=!1,u="",g=_g,_=vg,S=Tg;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(g=s.onUncaughtError),s.onCaughtError!==void 0&&(_=s.onCaughtError),s.onRecoverableError!==void 0&&(S=s.onRecoverableError)),s=jy(i,1,!1,null,null,a,u,null,g,_,S,c_),i[si]=s.current,qd(i),new oh(s)},el.hydrateRoot=function(i,s,a){if(!r(i))throw Error(o(299));var u=!1,g="",_=_g,S=vg,R=Tg,x=null;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onUncaughtError!==void 0&&(_=a.onUncaughtError),a.onCaughtError!==void 0&&(S=a.onCaughtError),a.onRecoverableError!==void 0&&(R=a.onRecoverableError),a.formState!==void 0&&(x=a.formState)),s=jy(i,1,!0,s,a??null,u,g,x,_,S,R,c_),s.context=t_(null),a=s.current,u=wn(),u=oa(u),g=Co(u),g.callback=null,Ro(a,g,u),a=u,s.current.lanes=a,eo(s,a),pi(s),i[si]=s.current,qd(i),new nc(s)},el.version="19.2.3",el}var E_;function aC(){if(E_)return ah.exports;E_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),ah.exports=rC(),ah.exports}var lC=aC();const uC=ZT(lC);var cC={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let fC,dC;function hC(){return{geminiUrl:fC,vertexUrl:dC}}function pC(n,t,e,o){var r,l;if(!n?.baseUrl){const c=hC();return t?(r=c.vertexUrl)!==null&&r!==void 0?r:e:(l=c.geminiUrl)!==null&&l!==void 0?l:o}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Xi{}function ft(n,t){const e=/\{([^}]+)\}/g;return n.replace(e,(o,r)=>{if(Object.prototype.hasOwnProperty.call(t,r)){const l=t[r];return l!=null?String(l):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function p(n,t,e){for(let l=0;l<t.length-1;l++){const c=t[l];if(c.endsWith("[]")){const d=c.slice(0,-2);if(!(d in n))if(Array.isArray(e))n[d]=Array.from({length:e.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(n[d])){const y=n[d];if(Array.isArray(e))for(let m=0;m<y.length;m++){const v=y[m];p(v,t.slice(l+1),e[m])}else for(const m of y)p(m,t.slice(l+1),e)}return}else if(c.endsWith("[0]")){const d=c.slice(0,-3);d in n||(n[d]=[{}]);const y=n[d];p(y[0],t.slice(l+1),e);return}(!n[c]||typeof n[c]!="object")&&(n[c]={}),n=n[c]}const o=t[t.length-1],r=n[o];if(r!==void 0){if(!e||typeof e=="object"&&Object.keys(e).length===0||e===r)return;if(typeof r=="object"&&typeof e=="object"&&r!==null&&e!==null)Object.assign(r,e);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else o==="_self"&&typeof e=="object"&&e!==null&&!Array.isArray(e)?Object.assign(n,e):n[o]=e}function f(n,t,e=void 0){try{if(t.length===1&&t[0]==="_self")return n;for(let o=0;o<t.length;o++){if(typeof n!="object"||n===null)return e;const r=t[o];if(r.endsWith("[]")){const l=r.slice(0,-2);if(l in n){const c=n[l];return Array.isArray(c)?c.map(d=>f(d,t.slice(o+1),e)):e}else return e}else n=n[r]}return n}catch(o){if(o instanceof TypeError)return e;throw o}}function mC(n,t){for(const[e,o]of Object.entries(t)){const r=e.split("."),l=o.split("."),c=new Set;let d=-1;for(let y=0;y<r.length;y++)if(r[y]==="*"){d=y;break}if(d!==-1&&l.length>d)for(let y=d;y<l.length;y++){const m=l[y];m!=="*"&&!m.endsWith("[]")&&!m.endsWith("[0]")&&c.add(m)}Eh(n,r,l,0,c)}}function Eh(n,t,e,o,r){if(o>=t.length||typeof n!="object"||n===null)return;const l=t[o];if(l.endsWith("[]")){const c=l.slice(0,-2),d=n;if(c in d&&Array.isArray(d[c]))for(const y of d[c])Eh(y,t,e,o+1,r)}else if(l==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const c=n,d=Object.keys(c).filter(m=>!m.startsWith("_")&&!r.has(m)),y={};for(const m of d)y[m]=c[m];for(const[m,v]of Object.entries(y)){const E=[];for(const A of e.slice(o))A==="*"?E.push(m):E.push(A);p(c,E,v)}for(const m of d)delete c[m]}}else{const c=n;l in c&&Eh(c[l],t,e,o+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ip(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gC(n){const t={},e=f(n,["operationName"]);e!=null&&p(t,["operationName"],e);const o=f(n,["resourceName"]);return o!=null&&p(t,["_url","resourceName"],o),t}function yC(n){const t={},e=f(n,["name"]);e!=null&&p(t,["name"],e);const o=f(n,["metadata"]);o!=null&&p(t,["metadata"],o);const r=f(n,["done"]);r!=null&&p(t,["done"],r);const l=f(n,["error"]);l!=null&&p(t,["error"],l);const c=f(n,["response","generateVideoResponse"]);return c!=null&&p(t,["response"],vC(c)),t}function _C(n){const t={},e=f(n,["name"]);e!=null&&p(t,["name"],e);const o=f(n,["metadata"]);o!=null&&p(t,["metadata"],o);const r=f(n,["done"]);r!=null&&p(t,["done"],r);const l=f(n,["error"]);l!=null&&p(t,["error"],l);const c=f(n,["response"]);return c!=null&&p(t,["response"],TC(c)),t}function vC(n){const t={},e=f(n,["generatedSamples"]);if(e!=null){let l=e;Array.isArray(l)&&(l=l.map(c=>EC(c))),p(t,["generatedVideos"],l)}const o=f(n,["raiMediaFilteredCount"]);o!=null&&p(t,["raiMediaFilteredCount"],o);const r=f(n,["raiMediaFilteredReasons"]);return r!=null&&p(t,["raiMediaFilteredReasons"],r),t}function TC(n){const t={},e=f(n,["videos"]);if(e!=null){let l=e;Array.isArray(l)&&(l=l.map(c=>AC(c))),p(t,["generatedVideos"],l)}const o=f(n,["raiMediaFilteredCount"]);o!=null&&p(t,["raiMediaFilteredCount"],o);const r=f(n,["raiMediaFilteredReasons"]);return r!=null&&p(t,["raiMediaFilteredReasons"],r),t}function EC(n){const t={},e=f(n,["video"]);return e!=null&&p(t,["video"],NC(e)),t}function AC(n){const t={},e=f(n,["_self"]);return e!=null&&p(t,["video"],MC(e)),t}function SC(n){const t={},e=f(n,["operationName"]);return e!=null&&p(t,["_url","operationName"],e),t}function CC(n){const t={},e=f(n,["operationName"]);return e!=null&&p(t,["_url","operationName"],e),t}function RC(n){const t={},e=f(n,["name"]);e!=null&&p(t,["name"],e);const o=f(n,["metadata"]);o!=null&&p(t,["metadata"],o);const r=f(n,["done"]);r!=null&&p(t,["done"],r);const l=f(n,["error"]);l!=null&&p(t,["error"],l);const c=f(n,["response"]);return c!=null&&p(t,["response"],IC(c)),t}function IC(n){const t={},e=f(n,["sdkHttpResponse"]);e!=null&&p(t,["sdkHttpResponse"],e);const o=f(n,["parent"]);o!=null&&p(t,["parent"],o);const r=f(n,["documentName"]);return r!=null&&p(t,["documentName"],r),t}function jT(n){const t={},e=f(n,["name"]);e!=null&&p(t,["name"],e);const o=f(n,["metadata"]);o!=null&&p(t,["metadata"],o);const r=f(n,["done"]);r!=null&&p(t,["done"],r);const l=f(n,["error"]);l!=null&&p(t,["error"],l);const c=f(n,["response"]);return c!=null&&p(t,["response"],wC(c)),t}function wC(n){const t={},e=f(n,["sdkHttpResponse"]);e!=null&&p(t,["sdkHttpResponse"],e);const o=f(n,["parent"]);o!=null&&p(t,["parent"],o);const r=f(n,["documentName"]);return r!=null&&p(t,["documentName"],r),t}function NC(n){const t={},e=f(n,["uri"]);e!=null&&p(t,["uri"],e);const o=f(n,["encodedVideo"]);o!=null&&p(t,["videoBytes"],ip(o));const r=f(n,["encoding"]);return r!=null&&p(t,["mimeType"],r),t}function MC(n){const t={},e=f(n,["gcsUri"]);e!=null&&p(t,["uri"],e);const o=f(n,["bytesBase64Encoded"]);o!=null&&p(t,["videoBytes"],ip(o));const r=f(n,["mimeType"]);return r!=null&&p(t,["mimeType"],r),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var A_;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(A_||(A_={}));var S_;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(S_||(S_={}));var C_;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(C_||(C_={}));var re;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(re||(re={}));var R_;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(R_||(R_={}));var I_;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(I_||(I_={}));var w_;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(w_||(w_={}));var N_;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(N_||(N_={}));var M_;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(M_||(M_={}));var D_;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(D_||(D_={}));var b_;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(b_||(b_={}));var x_;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"})(x_||(x_={}));var V_;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(V_||(V_={}));var P_;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(P_||(P_={}));var U_;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(U_||(U_={}));var L_;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})(L_||(L_={}));var k_;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(k_||(k_={}));var O_;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(O_||(O_={}));var q_;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(q_||(q_={}));var G_;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(G_||(G_={}));var B_;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(B_||(B_={}));var Ec;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Ec||(Ec={}));var F_;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(F_||(F_={}));var H_;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(H_||(H_={}));var z_;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(z_||(z_={}));var Ah;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Ah||(Ah={}));var Y_;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Y_||(Y_={}));var J_;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(J_||(J_={}));var K_;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(K_||(K_={}));var Q_;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Q_||(Q_={}));var $_;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})($_||($_={}));var X_;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(X_||(X_={}));var W_;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(W_||(W_={}));var Z_;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Z_||(Z_={}));var j_;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(j_||(j_={}));var tv;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(tv||(tv={}));var ev;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(ev||(ev={}));var nv;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(nv||(nv={}));var iv;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(iv||(iv={}));var ov;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(ov||(ov={}));var sv;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(sv||(sv={}));var rv;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(rv||(rv={}));var av;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(av||(av={}));var lv;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(lv||(lv={}));var uv;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED",n.REGISTERED="REGISTERED"})(uv||(uv={}));var cv;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(cv||(cv={}));var fv;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(fv||(fv={}));var dv;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(dv||(dv={}));var hv;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.ACTIVITY_START="ACTIVITY_START",n.ACTIVITY_END="ACTIVITY_END"})(hv||(hv={}));var pv;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(pv||(pv={}));var mv;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(mv||(mv={}));var gv;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(gv||(gv={}));var yv;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(yv||(yv={}));var _v;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(_v||(_v={}));var vv;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(vv||(vv={}));var Dr;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(Dr||(Dr={}));class Sh{constructor(t){const e={};for(const o of t.headers.entries())e[o[0]]=o[1];this.headers=e,this.responseInternal=t}json(){return this.responseInternal.json()}}class nl{get text(){var t,e,o,r,l,c,d,y;if(((r=(o=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",v=!1;const E=[];for(const A of(y=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)!==null&&y!==void 0?y:[]){for(const[I,P]of Object.entries(A))I!=="text"&&I!=="thought"&&I!=="thoughtSignature"&&(P!==null||P!==void 0)&&E.push(I);if(typeof A.text=="string"){if(typeof A.thought=="boolean"&&A.thought)continue;v=!0,m+=A.text}}return E.length>0&&console.warn(`there are non-text parts ${E} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?m:void 0}get data(){var t,e,o,r,l,c,d,y;if(((r=(o=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const v=[];for(const E of(y=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)!==null&&y!==void 0?y:[]){for(const[A,I]of Object.entries(E))A!=="inlineData"&&(I!==null||I!==void 0)&&v.push(A);E.inlineData&&typeof E.inlineData.data=="string"&&(m+=atob(E.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var t,e,o,r,l,c,d,y;if(((r=(o=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(y=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||y===void 0?void 0:y.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if(m?.length!==0)return m}get executableCode(){var t,e,o,r,l,c,d,y,m;if(((r=(o=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(y=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||y===void 0?void 0:y.filter(E=>E.executableCode).map(E=>E.executableCode).filter(E=>E!==void 0);if(v?.length!==0)return(m=v?.[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var t,e,o,r,l,c,d,y,m;if(((r=(o=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(y=(d=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||d===void 0?void 0:d.parts)===null||y===void 0?void 0:y.filter(E=>E.codeExecutionResult).map(E=>E.codeExecutionResult).filter(E=>E!==void 0);if(v?.length!==0)return(m=v?.[0])===null||m===void 0?void 0:m.output}}class Tv{}class Ev{}class DC{}class bC{}class xC{}class VC{}class Av{}class Sv{}class Cv{}class PC{}class Ac{_fromAPIResponse({apiResponse:t,_isVertexAI:e}){const o=new Ac;let r;const l=t;return e?r=_C(l):r=yC(l),Object.assign(o,r),o}}class Rv{}class Iv{}class wv{}class Nv{}class UC{}class LC{}class kC{}class op{_fromAPIResponse({apiResponse:t,_isVertexAI:e}){const o=new op,l=RC(t);return Object.assign(o,l),o}}class OC{}class qC{}class GC{}class Mv{}class BC{get text(){var t,e,o;let r="",l=!1;const c=[];for(const d of(o=(e=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||e===void 0?void 0:e.parts)!==null&&o!==void 0?o:[]){for(const[y,m]of Object.entries(d))y!=="text"&&y!=="thought"&&m!==null&&c.push(y);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;l=!0,r+=d.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?r:void 0}get data(){var t,e,o;let r="";const l=[];for(const c of(o=(e=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||e===void 0?void 0:e.parts)!==null&&o!==void 0?o:[]){for(const[d,y]of Object.entries(c))d!=="inlineData"&&y!==null&&l.push(d);c.inlineData&&typeof c.inlineData.data=="string"&&(r+=atob(c.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class FC{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class sp{_fromAPIResponse({apiResponse:t,_isVertexAI:e}){const o=new sp,l=jT(t);return Object.assign(o,l),o}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Yt(n,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(t.includes("..")||t.includes("?")||t.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const e=t.split("/",2);return`publishers/${e[0]}/models/${e[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function tE(n,t){const e=Yt(n,t);return e?e.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:e.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${e}`:e:""}function eE(n){return Array.isArray(n)?n.map(t=>Sc(t)):[Sc(n)]}function Sc(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function nE(n){const t=Sc(n);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function iE(n){const t=Sc(n);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function Dv(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function oE(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(t=>Dv(t)):[Dv(n)]}function Ch(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function bv(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function xv(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function nn(n){if(n==null)throw new Error("ContentUnion is required");return Ch(n)?n:{role:"user",parts:oE(n)}}function rp(n,t){if(!t)return[];if(n.isVertexAI()&&Array.isArray(t))return t.flatMap(e=>{const o=nn(e);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(n.isVertexAI()){const e=nn(t);return e.parts&&e.parts.length>0&&e.parts[0].text!==void 0?[e.parts[0].text]:[]}return Array.isArray(t)?t.map(e=>nn(e)):[nn(t)]}function Fn(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(bv(n)||xv(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[nn(n)]}const t=[],e=[],o=Ch(n[0]);for(const r of n){const l=Ch(r);if(l!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)t.push(r);else{if(bv(r)||xv(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");e.push(r)}}return o||t.push({role:"user",parts:oE(e)}),t}function HC(n,t){n.includes("null")&&(t.nullable=!0);const e=n.filter(o=>o!=="null");if(e.length===1)t.type=Object.values(re).includes(e[0].toUpperCase())?e[0].toUpperCase():re.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const o of e)t.anyOf.push({type:Object.values(re).includes(o.toUpperCase())?o.toUpperCase():re.TYPE_UNSPECIFIED})}}function xr(n){const t={},e=["items"],o=["anyOf"],r=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=n.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(t.nullable=!0,n=l[1]):l[1].type==="null"&&(t.nullable=!0,n=l[0])),n.type instanceof Array&&HC(n.type,t);for(const[c,d]of Object.entries(n))if(d!=null)if(c=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;t.type=Object.values(re).includes(d.toUpperCase())?d.toUpperCase():re.TYPE_UNSPECIFIED}else if(e.includes(c))t[c]=xr(d);else if(o.includes(c)){const y=[];for(const m of d){if(m.type=="null"){t.nullable=!0;continue}y.push(xr(m))}t[c]=y}else if(r.includes(c)){const y={};for(const[m,v]of Object.entries(d))y[m]=xr(v);t[c]=y}else{if(c==="additionalProperties")continue;t[c]=d}return t}function ap(n){return xr(n)}function lp(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function up(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function zr(n){if(n.functionDeclarations)for(const t of n.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=xr(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=xr(t.response));return n}function Yr(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const t=[];for(const e of n)t.push(e);return t}function zC(n,t,e,o=1){const r=!t.startsWith(`${e}/`)&&t.split("/").length===o;return n.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${n.getProject()}/${t}`:t.startsWith(`${e}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:r?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}/${t}`:t:r?`${e}/${t}`:t}function Wi(n,t){if(typeof t!="string")throw new Error("name must be a string");return zC(n,t,"cachedContents")}function sE(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function $o(n){return ip(n)}function YC(n){return n!=null&&typeof n=="object"&&"name"in n}function JC(n){return n!=null&&typeof n=="object"&&"video"in n}function KC(n){return n!=null&&typeof n=="object"&&"uri"in n}function rE(n){var t;let e;if(YC(n)&&(e=n.name),!(KC(n)&&(e=n.uri,e===void 0))&&!(JC(n)&&(e=(t=n.video)===null||t===void 0?void 0:t.uri,e===void 0))){if(typeof n=="string"&&(e=n),e===void 0)throw new Error("Could not extract file name from the provided input.");if(e.startsWith("https://")){const r=e.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${e}`);e=r[0]}else e.startsWith("files/")&&(e=e.split("files/")[1]);return e}}function aE(n,t){let e;return n.isVertexAI()?e=t?"publishers/google/models":"models":e=t?"models":"tunedModels",e}function lE(n){for(const t of["models","tunedModels","publisherModels"])if(QC(n,t))return n[t];return[]}function QC(n,t){return n!==null&&typeof n=="object"&&t in n}function $C(n,t={}){const e=n,o={name:e.name,description:e.description,parametersJsonSchema:e.inputSchema};return e.outputSchema&&(o.responseJsonSchema=e.outputSchema),t.behavior&&(o.behavior=t.behavior),{functionDeclarations:[o]}}function XC(n,t={}){const e=[],o=new Set;for(const r of n){const l=r.name;if(o.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);o.add(l);const c=$C(r,t);c.functionDeclarations&&e.push(...c.functionDeclarations)}return{functionDeclarations:e}}function uE(n,t){let e;if(typeof t=="string")if(n.isVertexAI())if(t.startsWith("gs://"))e={format:"jsonl",gcsUri:[t]};else if(t.startsWith("bq://"))e={format:"bigquery",bigqueryUri:t};else throw new Error(`Unsupported string source for Vertex AI: ${t}`);else if(t.startsWith("files/"))e={fileName:t};else throw new Error(`Unsupported string source for Gemini API: ${t}`);else if(Array.isArray(t)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");e={inlinedRequests:t}}else e=t;const o=[e.gcsUri,e.bigqueryUri].filter(Boolean).length,r=[e.inlinedRequests,e.fileName].filter(Boolean).length;if(n.isVertexAI()){if(r>0||o!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return e}function WC(n){if(typeof n!="string")return n;const t=n;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error(`Unsupported destination: ${t}`)}function cE(n){if(typeof n!="object"||n===null)return{};const t=n,e=t.inlinedResponses;if(typeof e!="object"||e===null)return n;const r=e.inlinedResponses;if(!Array.isArray(r)||r.length===0)return n;let l=!1;for(const c of r){if(typeof c!="object"||c===null)continue;const y=c.response;if(typeof y!="object"||y===null)continue;if(y.embedding!==void 0){l=!0;break}}return l&&(t.inlinedEmbedContentResponses=t.inlinedResponses,delete t.inlinedResponses),n}function Jr(n,t){const e=t;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(e))return e.split("/").pop();throw new Error(`Invalid batch job name: ${e}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(e))return e.split("/").pop();if(/^\d+$/.test(e))return e;throw new Error(`Invalid batch job name: ${e}.`)}function fE(n){const t=n;return t==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":t==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":t==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":t==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":t==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":t==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":t==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ZC(n){const t={},e=f(n,["responsesFile"]);e!=null&&p(t,["fileName"],e);const o=f(n,["inlinedResponses","inlinedResponses"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>xR(c))),p(t,["inlinedResponses"],l)}const r=f(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),p(t,["inlinedEmbedContentResponses"],l)}return t}function jC(n){const t={},e=f(n,["predictionsFormat"]);e!=null&&p(t,["format"],e);const o=f(n,["gcsDestination","outputUriPrefix"]);o!=null&&p(t,["gcsUri"],o);const r=f(n,["bigqueryDestination","outputUri"]);return r!=null&&p(t,["bigqueryUri"],r),t}function tR(n){const t={},e=f(n,["format"]);e!=null&&p(t,["predictionsFormat"],e);const o=f(n,["gcsUri"]);o!=null&&p(t,["gcsDestination","outputUriPrefix"],o);const r=f(n,["bigqueryUri"]);if(r!=null&&p(t,["bigqueryDestination","outputUri"],r),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return t}function pc(n){const t={},e=f(n,["name"]);e!=null&&p(t,["name"],e);const o=f(n,["metadata","displayName"]);o!=null&&p(t,["displayName"],o);const r=f(n,["metadata","state"]);r!=null&&p(t,["state"],fE(r));const l=f(n,["metadata","createTime"]);l!=null&&p(t,["createTime"],l);const c=f(n,["metadata","endTime"]);c!=null&&p(t,["endTime"],c);const d=f(n,["metadata","updateTime"]);d!=null&&p(t,["updateTime"],d);const y=f(n,["metadata","model"]);y!=null&&p(t,["model"],y);const m=f(n,["metadata","output"]);return m!=null&&p(t,["dest"],ZC(cE(m))),t}function Rh(n){const t={},e=f(n,["name"]);e!=null&&p(t,["name"],e);const o=f(n,["displayName"]);o!=null&&p(t,["displayName"],o);const r=f(n,["state"]);r!=null&&p(t,["state"],fE(r));const l=f(n,["error"]);l!=null&&p(t,["error"],l);const c=f(n,["createTime"]);c!=null&&p(t,["createTime"],c);const d=f(n,["startTime"]);d!=null&&p(t,["startTime"],d);const y=f(n,["endTime"]);y!=null&&p(t,["endTime"],y);const m=f(n,["updateTime"]);m!=null&&p(t,["updateTime"],m);const v=f(n,["model"]);v!=null&&p(t,["model"],v);const E=f(n,["inputConfig"]);E!=null&&p(t,["src"],eR(E));const A=f(n,["outputConfig"]);A!=null&&p(t,["dest"],jC(cE(A)));const I=f(n,["completionStats"]);return I!=null&&p(t,["completionStats"],I),t}function eR(n){const t={},e=f(n,["instancesFormat"]);e!=null&&p(t,["format"],e);const o=f(n,["gcsSource","uris"]);o!=null&&p(t,["gcsUri"],o);const r=f(n,["bigquerySource","inputUri"]);return r!=null&&p(t,["bigqueryUri"],r),t}function nR(n,t){const e={};if(f(t,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(t,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=f(t,["fileName"]);o!=null&&p(e,["fileName"],o);const r=f(t,["inlinedRequests"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>bR(n,c))),p(e,["requests","requests"],l)}return e}function iR(n){const t={},e=f(n,["format"]);e!=null&&p(t,["instancesFormat"],e);const o=f(n,["gcsUri"]);o!=null&&p(t,["gcsSource","uris"],o);const r=f(n,["bigqueryUri"]);if(r!=null&&p(t,["bigquerySource","inputUri"],r),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}function oR(n){const t={},e=f(n,["data"]);if(e!=null&&p(t,["data"],e),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(n,["mimeType"]);return o!=null&&p(t,["mimeType"],o),t}function sR(n,t){const e={},o=f(t,["name"]);return o!=null&&p(e,["_url","name"],Jr(n,o)),e}function rR(n,t){const e={},o=f(t,["name"]);return o!=null&&p(e,["_url","name"],Jr(n,o)),e}function aR(n){const t={},e=f(n,["content"]);e!=null&&p(t,["content"],e);const o=f(n,["citationMetadata"]);o!=null&&p(t,["citationMetadata"],lR(o));const r=f(n,["tokenCount"]);r!=null&&p(t,["tokenCount"],r);const l=f(n,["finishReason"]);l!=null&&p(t,["finishReason"],l);const c=f(n,["avgLogprobs"]);c!=null&&p(t,["avgLogprobs"],c);const d=f(n,["groundingMetadata"]);d!=null&&p(t,["groundingMetadata"],d);const y=f(n,["index"]);y!=null&&p(t,["index"],y);const m=f(n,["logprobsResult"]);m!=null&&p(t,["logprobsResult"],m);const v=f(n,["safetyRatings"]);if(v!=null){let A=v;Array.isArray(A)&&(A=A.map(I=>I)),p(t,["safetyRatings"],A)}const E=f(n,["urlContextMetadata"]);return E!=null&&p(t,["urlContextMetadata"],E),t}function lR(n){const t={},e=f(n,["citationSources"]);if(e!=null){let o=e;Array.isArray(o)&&(o=o.map(r=>r)),p(t,["citations"],o)}return t}function dE(n){const t={},e=f(n,["parts"]);if(e!=null){let r=e;Array.isArray(r)&&(r=r.map(l=>qR(l))),p(t,["parts"],r)}const o=f(n,["role"]);return o!=null&&p(t,["role"],o),t}function uR(n,t){const e={},o=f(n,["displayName"]);if(t!==void 0&&o!=null&&p(t,["batch","displayName"],o),f(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return e}function cR(n,t){const e={},o=f(n,["displayName"]);t!==void 0&&o!=null&&p(t,["displayName"],o);const r=f(n,["dest"]);return t!==void 0&&r!=null&&p(t,["outputConfig"],tR(WC(r))),e}function Vv(n,t){const e={},o=f(t,["model"]);o!=null&&p(e,["_url","model"],Yt(n,o));const r=f(t,["src"]);r!=null&&p(e,["batch","inputConfig"],nR(n,uE(n,r)));const l=f(t,["config"]);return l!=null&&uR(l,e),e}function fR(n,t){const e={},o=f(t,["model"]);o!=null&&p(e,["model"],Yt(n,o));const r=f(t,["src"]);r!=null&&p(e,["inputConfig"],iR(uE(n,r)));const l=f(t,["config"]);return l!=null&&cR(l,e),e}function dR(n,t){const e={},o=f(n,["displayName"]);return t!==void 0&&o!=null&&p(t,["batch","displayName"],o),e}function hR(n,t){const e={},o=f(t,["model"]);o!=null&&p(e,["_url","model"],Yt(n,o));const r=f(t,["src"]);r!=null&&p(e,["batch","inputConfig"],TR(n,r));const l=f(t,["config"]);return l!=null&&dR(l,e),e}function pR(n,t){const e={},o=f(t,["name"]);return o!=null&&p(e,["_url","name"],Jr(n,o)),e}function mR(n,t){const e={},o=f(t,["name"]);return o!=null&&p(e,["_url","name"],Jr(n,o)),e}function gR(n){const t={},e=f(n,["sdkHttpResponse"]);e!=null&&p(t,["sdkHttpResponse"],e);const o=f(n,["name"]);o!=null&&p(t,["name"],o);const r=f(n,["done"]);r!=null&&p(t,["done"],r);const l=f(n,["error"]);return l!=null&&p(t,["error"],l),t}function yR(n){const t={},e=f(n,["sdkHttpResponse"]);e!=null&&p(t,["sdkHttpResponse"],e);const o=f(n,["name"]);o!=null&&p(t,["name"],o);const r=f(n,["done"]);r!=null&&p(t,["done"],r);const l=f(n,["error"]);return l!=null&&p(t,["error"],l),t}function _R(n,t){const e={},o=f(t,["contents"]);if(o!=null){let l=rp(n,o);Array.isArray(l)&&(l=l.map(c=>c)),p(e,["requests[]","request","content"],l)}const r=f(t,["config"]);return r!=null&&(p(e,["_self"],vR(r,e)),mC(e,{"requests[].*":"requests[].request.*"})),e}function vR(n,t){const e={},o=f(n,["taskType"]);t!==void 0&&o!=null&&p(t,["requests[]","taskType"],o);const r=f(n,["title"]);t!==void 0&&r!=null&&p(t,["requests[]","title"],r);const l=f(n,["outputDimensionality"]);if(t!==void 0&&l!=null&&p(t,["requests[]","outputDimensionality"],l),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return e}function TR(n,t){const e={},o=f(t,["fileName"]);o!=null&&p(e,["file_name"],o);const r=f(t,["inlinedRequests"]);return r!=null&&p(e,["requests"],_R(n,r)),e}function ER(n){const t={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const e=f(n,["fileUri"]);e!=null&&p(t,["fileUri"],e);const o=f(n,["mimeType"]);return o!=null&&p(t,["mimeType"],o),t}function AR(n){const t={},e=f(n,["id"]);e!=null&&p(t,["id"],e);const o=f(n,["args"]);o!=null&&p(t,["args"],o);const r=f(n,["name"]);if(r!=null&&p(t,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function SR(n){const t={},e=f(n,["allowedFunctionNames"]);e!=null&&p(t,["allowedFunctionNames"],e);const o=f(n,["mode"]);if(o!=null&&p(t,["mode"],o),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function CR(n,t,e){const o={},r=f(t,["systemInstruction"]);e!==void 0&&r!=null&&p(e,["systemInstruction"],dE(nn(r)));const l=f(t,["temperature"]);l!=null&&p(o,["temperature"],l);const c=f(t,["topP"]);c!=null&&p(o,["topP"],c);const d=f(t,["topK"]);d!=null&&p(o,["topK"],d);const y=f(t,["candidateCount"]);y!=null&&p(o,["candidateCount"],y);const m=f(t,["maxOutputTokens"]);m!=null&&p(o,["maxOutputTokens"],m);const v=f(t,["stopSequences"]);v!=null&&p(o,["stopSequences"],v);const E=f(t,["responseLogprobs"]);E!=null&&p(o,["responseLogprobs"],E);const A=f(t,["logprobs"]);A!=null&&p(o,["logprobs"],A);const I=f(t,["presencePenalty"]);I!=null&&p(o,["presencePenalty"],I);const P=f(t,["frequencyPenalty"]);P!=null&&p(o,["frequencyPenalty"],P);const q=f(t,["seed"]);q!=null&&p(o,["seed"],q);const U=f(t,["responseMimeType"]);U!=null&&p(o,["responseMimeType"],U);const X=f(t,["responseSchema"]);X!=null&&p(o,["responseSchema"],ap(X));const ot=f(t,["responseJsonSchema"]);if(ot!=null&&p(o,["responseJsonSchema"],ot),f(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const J=f(t,["safetySettings"]);if(e!==void 0&&J!=null){let b=J;Array.isArray(b)&&(b=b.map(Kt=>GR(Kt))),p(e,["safetySettings"],b)}const et=f(t,["tools"]);if(e!==void 0&&et!=null){let b=Yr(et);Array.isArray(b)&&(b=b.map(Kt=>FR(zr(Kt)))),p(e,["tools"],b)}const ct=f(t,["toolConfig"]);if(e!==void 0&&ct!=null&&p(e,["toolConfig"],BR(ct)),f(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const at=f(t,["cachedContent"]);e!==void 0&&at!=null&&p(e,["cachedContent"],Wi(n,at));const D=f(t,["responseModalities"]);D!=null&&p(o,["responseModalities"],D);const M=f(t,["mediaResolution"]);M!=null&&p(o,["mediaResolution"],M);const N=f(t,["speechConfig"]);if(N!=null&&p(o,["speechConfig"],lp(N)),f(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const V=f(t,["thinkingConfig"]);V!=null&&p(o,["thinkingConfig"],V);const L=f(t,["imageConfig"]);L!=null&&p(o,["imageConfig"],DR(L));const G=f(t,["enableEnhancedCivicAnswers"]);return G!=null&&p(o,["enableEnhancedCivicAnswers"],G),o}function RR(n){const t={},e=f(n,["sdkHttpResponse"]);e!=null&&p(t,["sdkHttpResponse"],e);const o=f(n,["candidates"]);if(o!=null){let y=o;Array.isArray(y)&&(y=y.map(m=>aR(m))),p(t,["candidates"],y)}const r=f(n,["modelVersion"]);r!=null&&p(t,["modelVersion"],r);const l=f(n,["promptFeedback"]);l!=null&&p(t,["promptFeedback"],l);const c=f(n,["responseId"]);c!=null&&p(t,["responseId"],c);const d=f(n,["usageMetadata"]);return d!=null&&p(t,["usageMetadata"],d),t}function IR(n,t){const e={},o=f(t,["name"]);return o!=null&&p(e,["_url","name"],Jr(n,o)),e}function wR(n,t){const e={},o=f(t,["name"]);return o!=null&&p(e,["_url","name"],Jr(n,o)),e}function NR(n){const t={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const e=f(n,["enableWidget"]);return e!=null&&p(t,["enableWidget"],e),t}function MR(n){const t={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const e=f(n,["timeRangeFilter"]);return e!=null&&p(t,["timeRangeFilter"],e),t}function DR(n){const t={},e=f(n,["aspectRatio"]);e!=null&&p(t,["aspectRatio"],e);const o=f(n,["imageSize"]);if(o!=null&&p(t,["imageSize"],o),f(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(f(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function bR(n,t){const e={},o=f(t,["model"]);o!=null&&p(e,["request","model"],Yt(n,o));const r=f(t,["contents"]);if(r!=null){let d=Fn(r);Array.isArray(d)&&(d=d.map(y=>dE(y))),p(e,["request","contents"],d)}const l=f(t,["metadata"]);l!=null&&p(e,["metadata"],l);const c=f(t,["config"]);return c!=null&&p(e,["request","generationConfig"],CR(n,c,f(e,["request"],{}))),e}function xR(n){const t={},e=f(n,["response"]);e!=null&&p(t,["response"],RR(e));const o=f(n,["error"]);return o!=null&&p(t,["error"],o),t}function VR(n,t){const e={},o=f(n,["pageSize"]);t!==void 0&&o!=null&&p(t,["_query","pageSize"],o);const r=f(n,["pageToken"]);if(t!==void 0&&r!=null&&p(t,["_query","pageToken"],r),f(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return e}function PR(n,t){const e={},o=f(n,["pageSize"]);t!==void 0&&o!=null&&p(t,["_query","pageSize"],o);const r=f(n,["pageToken"]);t!==void 0&&r!=null&&p(t,["_query","pageToken"],r);const l=f(n,["filter"]);return t!==void 0&&l!=null&&p(t,["_query","filter"],l),e}function UR(n){const t={},e=f(n,["config"]);return e!=null&&VR(e,t),t}function LR(n){const t={},e=f(n,["config"]);return e!=null&&PR(e,t),t}function kR(n){const t={},e=f(n,["sdkHttpResponse"]);e!=null&&p(t,["sdkHttpResponse"],e);const o=f(n,["nextPageToken"]);o!=null&&p(t,["nextPageToken"],o);const r=f(n,["operations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>pc(c))),p(t,["batchJobs"],l)}return t}function OR(n){const t={},e=f(n,["sdkHttpResponse"]);e!=null&&p(t,["sdkHttpResponse"],e);const o=f(n,["nextPageToken"]);o!=null&&p(t,["nextPageToken"],o);const r=f(n,["batchPredictionJobs"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>Rh(c))),p(t,["batchJobs"],l)}return t}function qR(n){const t={},e=f(n,["mediaResolution"]);e!=null&&p(t,["mediaResolution"],e);const o=f(n,["codeExecutionResult"]);o!=null&&p(t,["codeExecutionResult"],o);const r=f(n,["executableCode"]);r!=null&&p(t,["executableCode"],r);const l=f(n,["fileData"]);l!=null&&p(t,["fileData"],ER(l));const c=f(n,["functionCall"]);c!=null&&p(t,["functionCall"],AR(c));const d=f(n,["functionResponse"]);d!=null&&p(t,["functionResponse"],d);const y=f(n,["inlineData"]);y!=null&&p(t,["inlineData"],oR(y));const m=f(n,["text"]);m!=null&&p(t,["text"],m);const v=f(n,["thought"]);v!=null&&p(t,["thought"],v);const E=f(n,["thoughtSignature"]);E!=null&&p(t,["thoughtSignature"],E);const A=f(n,["videoMetadata"]);return A!=null&&p(t,["videoMetadata"],A),t}function GR(n){const t={},e=f(n,["category"]);if(e!=null&&p(t,["category"],e),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=f(n,["threshold"]);return o!=null&&p(t,["threshold"],o),t}function BR(n){const t={},e=f(n,["retrievalConfig"]);e!=null&&p(t,["retrievalConfig"],e);const o=f(n,["functionCallingConfig"]);return o!=null&&p(t,["functionCallingConfig"],SR(o)),t}function FR(n){const t={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const e=f(n,["computerUse"]);e!=null&&p(t,["computerUse"],e);const o=f(n,["fileSearch"]);o!=null&&p(t,["fileSearch"],o);const r=f(n,["codeExecution"]);if(r!=null&&p(t,["codeExecution"],r),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(n,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(E=>E)),p(t,["functionDeclarations"],v)}const c=f(n,["googleMaps"]);c!=null&&p(t,["googleMaps"],NR(c));const d=f(n,["googleSearch"]);d!=null&&p(t,["googleSearch"],MR(d));const y=f(n,["googleSearchRetrieval"]);y!=null&&p(t,["googleSearchRetrieval"],y);const m=f(n,["urlContext"]);return m!=null&&p(t,["urlContext"],m),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ji;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(Ji||(Ji={}));class Vs{constructor(t,e,o,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=e,this.init(t,o,r)}init(t,e,o){var r,l;this.nameInternal=t,this.pageInternal=e[this.nameInternal]||[],this.sdkHttpResponseInternal=e?.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!o||Object.keys(o).length===0?c={config:{}}:typeof o=="object"?c=Object.assign({},o):c=o,c.config&&(c.config.pageToken=e.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(l=(r=c.config)===null||r===void 0?void 0:r.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class HR extends Xi{constructor(t){super(),this.apiClient=t,this.list=async(e={})=>new Vs(Ji.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(e),e),this.create=async e=>(this.apiClient.isVertexAI()&&(e.config=this.formatDestination(e.src,e.config)),this.createInternal(e)),this.createEmbeddings=async e=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(e)}}createInlinedGenerateContentRequest(t){const e=Vv(this.apiClient,t),o=e._url,r=ft("{model}:batchGenerateContent",o),d=e.batch.inputConfig.requests,y=d.requests,m=[];for(const v of y){const E=Object.assign({},v);if(E.systemInstruction){const A=E.systemInstruction;delete E.systemInstruction;const I=E.request;I.systemInstruction=A,E.request=I}m.push(E)}return d.requests=m,delete e.config,delete e._url,delete e._query,{path:r,body:e}}getGcsUri(t){if(typeof t=="string")return t.startsWith("gs://")?t:void 0;if(!Array.isArray(t)&&t.gcsUri&&t.gcsUri.length>0)return t.gcsUri[0]}getBigqueryUri(t){if(typeof t=="string")return t.startsWith("bq://")?t:void 0;if(!Array.isArray(t))return t.bigqueryUri}formatDestination(t,e){const o=e?Object.assign({},e):{},r=Date.now().toString();if(o.displayName||(o.displayName=`genaiBatchJob_${r}`),o.dest===void 0){const l=this.getGcsUri(t),c=this.getBigqueryUri(t);if(l)l.endsWith(".jsonl")?o.dest=`${l.slice(0,-6)}/dest`:o.dest=`${l}_dest_${r}`;else if(c)o.dest=`${c}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return o}async createInternal(t){var e,o,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=fR(this.apiClient,t);return d=ft("batchPredictionJobs",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>Rh(v))}else{const m=Vv(this.apiClient,t);return d=ft("{model}:batchGenerateContent",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>pc(v))}}async createEmbeddingsInternal(t){var e,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=hR(this.apiClient,t);return l=ft("{model}:asyncBatchEmbedContent",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>pc(y))}}async get(t){var e,o,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=wR(this.apiClient,t);return d=ft("batchPredictionJobs/{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>Rh(v))}else{const m=IR(this.apiClient,t);return d=ft("batches/{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>pc(v))}}async cancel(t){var e,o,r,l;let c="",d={};if(this.apiClient.isVertexAI()){const y=rR(this.apiClient,t);c=ft("batchPredictionJobs/{name}:cancel",y._url),d=y._query,delete y._url,delete y._query,await this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal})}else{const y=sR(this.apiClient,t);c=ft("batches/{name}:cancel",y._url),d=y._query,delete y._url,delete y._query,await this.apiClient.request({path:c,queryParams:d,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(t){var e,o,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=LR(t);return d=ft("batchPredictionJobs",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=OR(v),A=new Mv;return Object.assign(A,E),A})}else{const m=UR(t);return d=ft("batches",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=kR(v),A=new Mv;return Object.assign(A,E),A})}}async delete(t){var e,o,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=mR(this.apiClient,t);return d=ft("batchPredictionJobs/{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>yR(v))}else{const m=pR(this.apiClient,t);return d=ft("batches/{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>gR(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zR(n){const t={},e=f(n,["data"]);if(e!=null&&p(t,["data"],e),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(n,["mimeType"]);return o!=null&&p(t,["mimeType"],o),t}function Pv(n){const t={},e=f(n,["parts"]);if(e!=null){let r=e;Array.isArray(r)&&(r=r.map(l=>hI(l))),p(t,["parts"],r)}const o=f(n,["role"]);return o!=null&&p(t,["role"],o),t}function YR(n,t){const e={},o=f(n,["ttl"]);t!==void 0&&o!=null&&p(t,["ttl"],o);const r=f(n,["expireTime"]);t!==void 0&&r!=null&&p(t,["expireTime"],r);const l=f(n,["displayName"]);t!==void 0&&l!=null&&p(t,["displayName"],l);const c=f(n,["contents"]);if(t!==void 0&&c!=null){let v=Fn(c);Array.isArray(v)&&(v=v.map(E=>Pv(E))),p(t,["contents"],v)}const d=f(n,["systemInstruction"]);t!==void 0&&d!=null&&p(t,["systemInstruction"],Pv(nn(d)));const y=f(n,["tools"]);if(t!==void 0&&y!=null){let v=y;Array.isArray(v)&&(v=v.map(E=>mI(E))),p(t,["tools"],v)}const m=f(n,["toolConfig"]);if(t!==void 0&&m!=null&&p(t,["toolConfig"],pI(m)),f(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return e}function JR(n,t){const e={},o=f(n,["ttl"]);t!==void 0&&o!=null&&p(t,["ttl"],o);const r=f(n,["expireTime"]);t!==void 0&&r!=null&&p(t,["expireTime"],r);const l=f(n,["displayName"]);t!==void 0&&l!=null&&p(t,["displayName"],l);const c=f(n,["contents"]);if(t!==void 0&&c!=null){let E=Fn(c);Array.isArray(E)&&(E=E.map(A=>A)),p(t,["contents"],E)}const d=f(n,["systemInstruction"]);t!==void 0&&d!=null&&p(t,["systemInstruction"],nn(d));const y=f(n,["tools"]);if(t!==void 0&&y!=null){let E=y;Array.isArray(E)&&(E=E.map(A=>gI(A))),p(t,["tools"],E)}const m=f(n,["toolConfig"]);t!==void 0&&m!=null&&p(t,["toolConfig"],m);const v=f(n,["kmsKeyName"]);return t!==void 0&&v!=null&&p(t,["encryption_spec","kmsKeyName"],v),e}function KR(n,t){const e={},o=f(t,["model"]);o!=null&&p(e,["model"],tE(n,o));const r=f(t,["config"]);return r!=null&&YR(r,e),e}function QR(n,t){const e={},o=f(t,["model"]);o!=null&&p(e,["model"],tE(n,o));const r=f(t,["config"]);return r!=null&&JR(r,e),e}function $R(n,t){const e={},o=f(t,["name"]);return o!=null&&p(e,["_url","name"],Wi(n,o)),e}function XR(n,t){const e={},o=f(t,["name"]);return o!=null&&p(e,["_url","name"],Wi(n,o)),e}function WR(n){const t={},e=f(n,["sdkHttpResponse"]);return e!=null&&p(t,["sdkHttpResponse"],e),t}function ZR(n){const t={},e=f(n,["sdkHttpResponse"]);return e!=null&&p(t,["sdkHttpResponse"],e),t}function jR(n){const t={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const e=f(n,["fileUri"]);e!=null&&p(t,["fileUri"],e);const o=f(n,["mimeType"]);return o!=null&&p(t,["mimeType"],o),t}function tI(n){const t={},e=f(n,["id"]);e!=null&&p(t,["id"],e);const o=f(n,["args"]);o!=null&&p(t,["args"],o);const r=f(n,["name"]);if(r!=null&&p(t,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function eI(n){const t={},e=f(n,["allowedFunctionNames"]);e!=null&&p(t,["allowedFunctionNames"],e);const o=f(n,["mode"]);if(o!=null&&p(t,["mode"],o),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function nI(n){const t={},e=f(n,["description"]);e!=null&&p(t,["description"],e);const o=f(n,["name"]);o!=null&&p(t,["name"],o);const r=f(n,["parameters"]);r!=null&&p(t,["parameters"],r);const l=f(n,["parametersJsonSchema"]);l!=null&&p(t,["parametersJsonSchema"],l);const c=f(n,["response"]);c!=null&&p(t,["response"],c);const d=f(n,["responseJsonSchema"]);if(d!=null&&p(t,["responseJsonSchema"],d),f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return t}function iI(n,t){const e={},o=f(t,["name"]);return o!=null&&p(e,["_url","name"],Wi(n,o)),e}function oI(n,t){const e={},o=f(t,["name"]);return o!=null&&p(e,["_url","name"],Wi(n,o)),e}function sI(n){const t={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const e=f(n,["enableWidget"]);return e!=null&&p(t,["enableWidget"],e),t}function rI(n){const t={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const e=f(n,["timeRangeFilter"]);return e!=null&&p(t,["timeRangeFilter"],e),t}function aI(n,t){const e={},o=f(n,["pageSize"]);t!==void 0&&o!=null&&p(t,["_query","pageSize"],o);const r=f(n,["pageToken"]);return t!==void 0&&r!=null&&p(t,["_query","pageToken"],r),e}function lI(n,t){const e={},o=f(n,["pageSize"]);t!==void 0&&o!=null&&p(t,["_query","pageSize"],o);const r=f(n,["pageToken"]);return t!==void 0&&r!=null&&p(t,["_query","pageToken"],r),e}function uI(n){const t={},e=f(n,["config"]);return e!=null&&aI(e,t),t}function cI(n){const t={},e=f(n,["config"]);return e!=null&&lI(e,t),t}function fI(n){const t={},e=f(n,["sdkHttpResponse"]);e!=null&&p(t,["sdkHttpResponse"],e);const o=f(n,["nextPageToken"]);o!=null&&p(t,["nextPageToken"],o);const r=f(n,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),p(t,["cachedContents"],l)}return t}function dI(n){const t={},e=f(n,["sdkHttpResponse"]);e!=null&&p(t,["sdkHttpResponse"],e);const o=f(n,["nextPageToken"]);o!=null&&p(t,["nextPageToken"],o);const r=f(n,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),p(t,["cachedContents"],l)}return t}function hI(n){const t={},e=f(n,["mediaResolution"]);e!=null&&p(t,["mediaResolution"],e);const o=f(n,["codeExecutionResult"]);o!=null&&p(t,["codeExecutionResult"],o);const r=f(n,["executableCode"]);r!=null&&p(t,["executableCode"],r);const l=f(n,["fileData"]);l!=null&&p(t,["fileData"],jR(l));const c=f(n,["functionCall"]);c!=null&&p(t,["functionCall"],tI(c));const d=f(n,["functionResponse"]);d!=null&&p(t,["functionResponse"],d);const y=f(n,["inlineData"]);y!=null&&p(t,["inlineData"],zR(y));const m=f(n,["text"]);m!=null&&p(t,["text"],m);const v=f(n,["thought"]);v!=null&&p(t,["thought"],v);const E=f(n,["thoughtSignature"]);E!=null&&p(t,["thoughtSignature"],E);const A=f(n,["videoMetadata"]);return A!=null&&p(t,["videoMetadata"],A),t}function pI(n){const t={},e=f(n,["retrievalConfig"]);e!=null&&p(t,["retrievalConfig"],e);const o=f(n,["functionCallingConfig"]);return o!=null&&p(t,["functionCallingConfig"],eI(o)),t}function mI(n){const t={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const e=f(n,["computerUse"]);e!=null&&p(t,["computerUse"],e);const o=f(n,["fileSearch"]);o!=null&&p(t,["fileSearch"],o);const r=f(n,["codeExecution"]);if(r!=null&&p(t,["codeExecution"],r),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(n,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(E=>E)),p(t,["functionDeclarations"],v)}const c=f(n,["googleMaps"]);c!=null&&p(t,["googleMaps"],sI(c));const d=f(n,["googleSearch"]);d!=null&&p(t,["googleSearch"],rI(d));const y=f(n,["googleSearchRetrieval"]);y!=null&&p(t,["googleSearchRetrieval"],y);const m=f(n,["urlContext"]);return m!=null&&p(t,["urlContext"],m),t}function gI(n){const t={},e=f(n,["retrieval"]);e!=null&&p(t,["retrieval"],e);const o=f(n,["computerUse"]);if(o!=null&&p(t,["computerUse"],o),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=f(n,["codeExecution"]);r!=null&&p(t,["codeExecution"],r);const l=f(n,["enterpriseWebSearch"]);l!=null&&p(t,["enterpriseWebSearch"],l);const c=f(n,["functionDeclarations"]);if(c!=null){let E=c;Array.isArray(E)&&(E=E.map(A=>nI(A))),p(t,["functionDeclarations"],E)}const d=f(n,["googleMaps"]);d!=null&&p(t,["googleMaps"],d);const y=f(n,["googleSearch"]);y!=null&&p(t,["googleSearch"],y);const m=f(n,["googleSearchRetrieval"]);m!=null&&p(t,["googleSearchRetrieval"],m);const v=f(n,["urlContext"]);return v!=null&&p(t,["urlContext"],v),t}function yI(n,t){const e={},o=f(n,["ttl"]);t!==void 0&&o!=null&&p(t,["ttl"],o);const r=f(n,["expireTime"]);return t!==void 0&&r!=null&&p(t,["expireTime"],r),e}function _I(n,t){const e={},o=f(n,["ttl"]);t!==void 0&&o!=null&&p(t,["ttl"],o);const r=f(n,["expireTime"]);return t!==void 0&&r!=null&&p(t,["expireTime"],r),e}function vI(n,t){const e={},o=f(t,["name"]);o!=null&&p(e,["_url","name"],Wi(n,o));const r=f(t,["config"]);return r!=null&&yI(r,e),e}function TI(n,t){const e={},o=f(t,["name"]);o!=null&&p(e,["_url","name"],Wi(n,o));const r=f(t,["config"]);return r!=null&&_I(r,e),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class EI extends Xi{constructor(t){super(),this.apiClient=t,this.list=async(e={})=>new Vs(Ji.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(e),e)}async create(t){var e,o,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=QR(this.apiClient,t);return d=ft("cachedContents",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const m=KR(this.apiClient,t);return d=ft("cachedContents",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async get(t){var e,o,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=oI(this.apiClient,t);return d=ft("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const m=iI(this.apiClient,t);return d=ft("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async delete(t){var e,o,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=XR(this.apiClient,t);return d=ft("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=ZR(v),A=new wv;return Object.assign(A,E),A})}else{const m=$R(this.apiClient,t);return d=ft("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=WR(v),A=new wv;return Object.assign(A,E),A})}}async update(t){var e,o,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=TI(this.apiClient,t);return d=ft("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const m=vI(this.apiClient,t);return d=ft("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async listInternal(t){var e,o,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=cI(t);return d=ft("cachedContents",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=dI(v),A=new Nv;return Object.assign(A,E),A})}else{const m=uI(t);return d=ft("cachedContents",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=fI(v),A=new Nv;return Object.assign(A,E),A})}}}function Cc(n,t){var e={};for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&t.indexOf(o)<0&&(e[o]=n[o]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(n);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(n,o[r])&&(e[o[r]]=n[o[r]]);return e}function Uv(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],o=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&o>=n.length&&(n=void 0),{value:n&&n[o++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function St(n){return this instanceof St?(this.v=n,this):new St(n)}function Zn(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=e.apply(n,t||[]),r,l=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",c),r[Symbol.asyncIterator]=function(){return this},r;function c(I){return function(P){return Promise.resolve(P).then(I,E)}}function d(I,P){o[I]&&(r[I]=function(q){return new Promise(function(U,X){l.push([I,q,U,X])>1||y(I,q)})},P&&(r[I]=P(r[I])))}function y(I,P){try{m(o[I](P))}catch(q){A(l[0][3],q)}}function m(I){I.value instanceof St?Promise.resolve(I.value.v).then(v,E):A(l[0][2],I)}function v(I){y("next",I)}function E(I){y("throw",I)}function A(I,P){I(P),l.shift(),l.length&&y(l[0][0],l[0][1])}}function jn(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],e;return t?t.call(n):(n=typeof Uv=="function"?Uv(n):n[Symbol.iterator](),e={},o("next"),o("throw"),o("return"),e[Symbol.asyncIterator]=function(){return this},e);function o(l){e[l]=n[l]&&function(c){return new Promise(function(d,y){c=n[l](c),r(d,y,c.done,c.value)})}}function r(l,c,d,y){Promise.resolve(y).then(function(m){l({value:m,done:d})},c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function AI(n){var t;if(n.candidates==null||n.candidates.length===0)return!1;const e=(t=n.candidates[0])===null||t===void 0?void 0:t.content;return e===void 0?!1:hE(e)}function hE(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const t of n.parts)if(t===void 0||Object.keys(t).length===0)return!1;return!0}function SI(n){if(n.length!==0){for(const t of n)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function Lv(n){if(n===void 0||n.length===0)return[];const t=[],e=n.length;let o=0;for(;o<e;)if(n[o].role==="user")t.push(n[o]),o++;else{const r=[];let l=!0;for(;o<e&&n[o].role==="model";)r.push(n[o]),l&&!hE(n[o])&&(l=!1),o++;l?t.push(...r):t.pop()}return t}class CI{constructor(t,e){this.modelsModule=t,this.apiClient=e}create(t){return new RI(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}}class RI{constructor(t,e,o,r={},l=[]){this.apiClient=t,this.modelsModule=e,this.model=o,this.config=r,this.history=l,this.sendPromise=Promise.resolve(),SI(l)}async sendMessage(t){var e;await this.sendPromise;const o=nn(t.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(e=t.config)!==null&&e!==void 0?e:this.config});return this.sendPromise=(async()=>{var l,c,d;const y=await r,m=(c=(l=y.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content,v=y.automaticFunctionCallingHistory,E=this.getHistory(!0).length;let A=[];v!=null&&(A=(d=v.slice(E))!==null&&d!==void 0?d:[]);const I=m?[m]:[];this.recordHistory(o,I,A)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(t){var e;await this.sendPromise;const o=nn(t.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(e=t.config)!==null&&e!==void 0?e:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const l=await r;return this.processStreamResponse(l,o)}getHistory(t=!1){const e=t?Lv(this.history):this.history;return structuredClone(e)}processStreamResponse(t,e){return Zn(this,arguments,function*(){var r,l,c,d,y,m;const v=[];try{for(var E=!0,A=jn(t),I;I=yield St(A.next()),r=I.done,!r;E=!0){d=I.value,E=!1;const P=d;if(AI(P)){const q=(m=(y=P.candidates)===null||y===void 0?void 0:y[0])===null||m===void 0?void 0:m.content;q!==void 0&&v.push(q)}yield yield St(P)}}catch(P){l={error:P}}finally{try{!E&&!r&&(c=A.return)&&(yield St(c.call(A)))}finally{if(l)throw l.error}}this.recordHistory(e,v)})}recordHistory(t,e,o){let r=[];e.length>0&&e.every(l=>l.role!==void 0)?r=e:r.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...Lv(o)):this.history.push(t),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kc extends Error{constructor(t){super(t.message),this.name="ApiError",this.status=t.status,Object.setPrototypeOf(this,kc.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function II(n){const t={},e=f(n,["file"]);return e!=null&&p(t,["file"],e),t}function wI(n){const t={},e=f(n,["sdkHttpResponse"]);return e!=null&&p(t,["sdkHttpResponse"],e),t}function NI(n){const t={},e=f(n,["name"]);return e!=null&&p(t,["_url","file"],rE(e)),t}function MI(n){const t={},e=f(n,["sdkHttpResponse"]);return e!=null&&p(t,["sdkHttpResponse"],e),t}function DI(n){const t={},e=f(n,["name"]);return e!=null&&p(t,["_url","file"],rE(e)),t}function bI(n,t){const e={},o=f(n,["pageSize"]);t!==void 0&&o!=null&&p(t,["_query","pageSize"],o);const r=f(n,["pageToken"]);return t!==void 0&&r!=null&&p(t,["_query","pageToken"],r),e}function xI(n){const t={},e=f(n,["config"]);return e!=null&&bI(e,t),t}function VI(n){const t={},e=f(n,["sdkHttpResponse"]);e!=null&&p(t,["sdkHttpResponse"],e);const o=f(n,["nextPageToken"]);o!=null&&p(t,["nextPageToken"],o);const r=f(n,["files"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),p(t,["files"],l)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class PI extends Xi{constructor(t){super(),this.apiClient=t,this.list=async(e={})=>new Vs(Ji.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(e),e)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(e=>e)}async download(t){await this.apiClient.downloadFile(t)}async listInternal(t){var e,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=xI(t);return l=ft("files",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:y.headers},v})),r.then(y=>{const m=VI(y),v=new OC;return Object.assign(v,m),v})}}async createInternal(t){var e,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=II(t);return l=ft("upload/v1beta/files",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>{const m=wI(y),v=new qC;return Object.assign(v,m),v})}}async get(t){var e,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=DI(t);return l=ft("files/{file}",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>y)}}async delete(t){var e,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=NI(t);return l=ft("files/{file}",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:y.headers},v})),r.then(y=>{const m=MI(y),v=new GC;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mc(n){const t={},e=f(n,["data"]);if(e!=null&&p(t,["data"],e),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(n,["mimeType"]);return o!=null&&p(t,["mimeType"],o),t}function UI(n){const t={},e=f(n,["parts"]);if(e!=null){let r=e;Array.isArray(r)&&(r=r.map(l=>WI(l))),p(t,["parts"],r)}const o=f(n,["role"]);return o!=null&&p(t,["role"],o),t}function LI(n){const t={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const e=f(n,["fileUri"]);e!=null&&p(t,["fileUri"],e);const o=f(n,["mimeType"]);return o!=null&&p(t,["mimeType"],o),t}function kI(n){const t={},e=f(n,["id"]);e!=null&&p(t,["id"],e);const o=f(n,["args"]);o!=null&&p(t,["args"],o);const r=f(n,["name"]);if(r!=null&&p(t,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function OI(n){const t={},e=f(n,["description"]);e!=null&&p(t,["description"],e);const o=f(n,["name"]);o!=null&&p(t,["name"],o);const r=f(n,["parameters"]);r!=null&&p(t,["parameters"],r);const l=f(n,["parametersJsonSchema"]);l!=null&&p(t,["parametersJsonSchema"],l);const c=f(n,["response"]);c!=null&&p(t,["response"],c);const d=f(n,["responseJsonSchema"]);if(d!=null&&p(t,["responseJsonSchema"],d),f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return t}function qI(n){const t={},e=f(n,["modelSelectionConfig"]);e!=null&&p(t,["modelConfig"],e);const o=f(n,["responseJsonSchema"]);o!=null&&p(t,["responseJsonSchema"],o);const r=f(n,["audioTimestamp"]);r!=null&&p(t,["audioTimestamp"],r);const l=f(n,["candidateCount"]);l!=null&&p(t,["candidateCount"],l);const c=f(n,["enableAffectiveDialog"]);c!=null&&p(t,["enableAffectiveDialog"],c);const d=f(n,["frequencyPenalty"]);d!=null&&p(t,["frequencyPenalty"],d);const y=f(n,["logprobs"]);y!=null&&p(t,["logprobs"],y);const m=f(n,["maxOutputTokens"]);m!=null&&p(t,["maxOutputTokens"],m);const v=f(n,["mediaResolution"]);v!=null&&p(t,["mediaResolution"],v);const E=f(n,["presencePenalty"]);E!=null&&p(t,["presencePenalty"],E);const A=f(n,["responseLogprobs"]);A!=null&&p(t,["responseLogprobs"],A);const I=f(n,["responseMimeType"]);I!=null&&p(t,["responseMimeType"],I);const P=f(n,["responseModalities"]);P!=null&&p(t,["responseModalities"],P);const q=f(n,["responseSchema"]);q!=null&&p(t,["responseSchema"],q);const U=f(n,["routingConfig"]);U!=null&&p(t,["routingConfig"],U);const X=f(n,["seed"]);X!=null&&p(t,["seed"],X);const ot=f(n,["speechConfig"]);ot!=null&&p(t,["speechConfig"],ot);const J=f(n,["stopSequences"]);J!=null&&p(t,["stopSequences"],J);const et=f(n,["temperature"]);et!=null&&p(t,["temperature"],et);const ct=f(n,["thinkingConfig"]);ct!=null&&p(t,["thinkingConfig"],ct);const at=f(n,["topK"]);at!=null&&p(t,["topK"],at);const D=f(n,["topP"]);if(D!=null&&p(t,["topP"],D),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function GI(n){const t={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const e=f(n,["enableWidget"]);return e!=null&&p(t,["enableWidget"],e),t}function BI(n){const t={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const e=f(n,["timeRangeFilter"]);return e!=null&&p(t,["timeRangeFilter"],e),t}function FI(n,t){const e={},o=f(n,["generationConfig"]);t!==void 0&&o!=null&&p(t,["setup","generationConfig"],o);const r=f(n,["responseModalities"]);t!==void 0&&r!=null&&p(t,["setup","generationConfig","responseModalities"],r);const l=f(n,["temperature"]);t!==void 0&&l!=null&&p(t,["setup","generationConfig","temperature"],l);const c=f(n,["topP"]);t!==void 0&&c!=null&&p(t,["setup","generationConfig","topP"],c);const d=f(n,["topK"]);t!==void 0&&d!=null&&p(t,["setup","generationConfig","topK"],d);const y=f(n,["maxOutputTokens"]);t!==void 0&&y!=null&&p(t,["setup","generationConfig","maxOutputTokens"],y);const m=f(n,["mediaResolution"]);t!==void 0&&m!=null&&p(t,["setup","generationConfig","mediaResolution"],m);const v=f(n,["seed"]);t!==void 0&&v!=null&&p(t,["setup","generationConfig","seed"],v);const E=f(n,["speechConfig"]);t!==void 0&&E!=null&&p(t,["setup","generationConfig","speechConfig"],up(E));const A=f(n,["thinkingConfig"]);t!==void 0&&A!=null&&p(t,["setup","generationConfig","thinkingConfig"],A);const I=f(n,["enableAffectiveDialog"]);t!==void 0&&I!=null&&p(t,["setup","generationConfig","enableAffectiveDialog"],I);const P=f(n,["systemInstruction"]);t!==void 0&&P!=null&&p(t,["setup","systemInstruction"],UI(nn(P)));const q=f(n,["tools"]);if(t!==void 0&&q!=null){let at=Yr(q);Array.isArray(at)&&(at=at.map(D=>jI(zr(D)))),p(t,["setup","tools"],at)}const U=f(n,["sessionResumption"]);t!==void 0&&U!=null&&p(t,["setup","sessionResumption"],ZI(U));const X=f(n,["inputAudioTranscription"]);t!==void 0&&X!=null&&p(t,["setup","inputAudioTranscription"],X);const ot=f(n,["outputAudioTranscription"]);t!==void 0&&ot!=null&&p(t,["setup","outputAudioTranscription"],ot);const J=f(n,["realtimeInputConfig"]);t!==void 0&&J!=null&&p(t,["setup","realtimeInputConfig"],J);const et=f(n,["contextWindowCompression"]);t!==void 0&&et!=null&&p(t,["setup","contextWindowCompression"],et);const ct=f(n,["proactivity"]);if(t!==void 0&&ct!=null&&p(t,["setup","proactivity"],ct),f(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return e}function HI(n,t){const e={},o=f(n,["generationConfig"]);t!==void 0&&o!=null&&p(t,["setup","generationConfig"],qI(o));const r=f(n,["responseModalities"]);t!==void 0&&r!=null&&p(t,["setup","generationConfig","responseModalities"],r);const l=f(n,["temperature"]);t!==void 0&&l!=null&&p(t,["setup","generationConfig","temperature"],l);const c=f(n,["topP"]);t!==void 0&&c!=null&&p(t,["setup","generationConfig","topP"],c);const d=f(n,["topK"]);t!==void 0&&d!=null&&p(t,["setup","generationConfig","topK"],d);const y=f(n,["maxOutputTokens"]);t!==void 0&&y!=null&&p(t,["setup","generationConfig","maxOutputTokens"],y);const m=f(n,["mediaResolution"]);t!==void 0&&m!=null&&p(t,["setup","generationConfig","mediaResolution"],m);const v=f(n,["seed"]);t!==void 0&&v!=null&&p(t,["setup","generationConfig","seed"],v);const E=f(n,["speechConfig"]);t!==void 0&&E!=null&&p(t,["setup","generationConfig","speechConfig"],up(E));const A=f(n,["thinkingConfig"]);t!==void 0&&A!=null&&p(t,["setup","generationConfig","thinkingConfig"],A);const I=f(n,["enableAffectiveDialog"]);t!==void 0&&I!=null&&p(t,["setup","generationConfig","enableAffectiveDialog"],I);const P=f(n,["systemInstruction"]);t!==void 0&&P!=null&&p(t,["setup","systemInstruction"],nn(P));const q=f(n,["tools"]);if(t!==void 0&&q!=null){let D=Yr(q);Array.isArray(D)&&(D=D.map(M=>tw(zr(M)))),p(t,["setup","tools"],D)}const U=f(n,["sessionResumption"]);t!==void 0&&U!=null&&p(t,["setup","sessionResumption"],U);const X=f(n,["inputAudioTranscription"]);t!==void 0&&X!=null&&p(t,["setup","inputAudioTranscription"],X);const ot=f(n,["outputAudioTranscription"]);t!==void 0&&ot!=null&&p(t,["setup","outputAudioTranscription"],ot);const J=f(n,["realtimeInputConfig"]);t!==void 0&&J!=null&&p(t,["setup","realtimeInputConfig"],J);const et=f(n,["contextWindowCompression"]);t!==void 0&&et!=null&&p(t,["setup","contextWindowCompression"],et);const ct=f(n,["proactivity"]);t!==void 0&&ct!=null&&p(t,["setup","proactivity"],ct);const at=f(n,["explicitVadSignal"]);return t!==void 0&&at!=null&&p(t,["setup","explicitVadSignal"],at),e}function zI(n,t){const e={},o=f(t,["model"]);o!=null&&p(e,["setup","model"],Yt(n,o));const r=f(t,["config"]);return r!=null&&p(e,["config"],FI(r,e)),e}function YI(n,t){const e={},o=f(t,["model"]);o!=null&&p(e,["setup","model"],Yt(n,o));const r=f(t,["config"]);return r!=null&&p(e,["config"],HI(r,e)),e}function JI(n){const t={},e=f(n,["musicGenerationConfig"]);return e!=null&&p(t,["musicGenerationConfig"],e),t}function KI(n){const t={},e=f(n,["weightedPrompts"]);if(e!=null){let o=e;Array.isArray(o)&&(o=o.map(r=>r)),p(t,["weightedPrompts"],o)}return t}function QI(n){const t={},e=f(n,["media"]);if(e!=null){let m=eE(e);Array.isArray(m)&&(m=m.map(v=>mc(v))),p(t,["mediaChunks"],m)}const o=f(n,["audio"]);o!=null&&p(t,["audio"],mc(iE(o)));const r=f(n,["audioStreamEnd"]);r!=null&&p(t,["audioStreamEnd"],r);const l=f(n,["video"]);l!=null&&p(t,["video"],mc(nE(l)));const c=f(n,["text"]);c!=null&&p(t,["text"],c);const d=f(n,["activityStart"]);d!=null&&p(t,["activityStart"],d);const y=f(n,["activityEnd"]);return y!=null&&p(t,["activityEnd"],y),t}function $I(n){const t={},e=f(n,["media"]);if(e!=null){let m=eE(e);Array.isArray(m)&&(m=m.map(v=>v)),p(t,["mediaChunks"],m)}const o=f(n,["audio"]);o!=null&&p(t,["audio"],iE(o));const r=f(n,["audioStreamEnd"]);r!=null&&p(t,["audioStreamEnd"],r);const l=f(n,["video"]);l!=null&&p(t,["video"],nE(l));const c=f(n,["text"]);c!=null&&p(t,["text"],c);const d=f(n,["activityStart"]);d!=null&&p(t,["activityStart"],d);const y=f(n,["activityEnd"]);return y!=null&&p(t,["activityEnd"],y),t}function XI(n){const t={},e=f(n,["setupComplete"]);e!=null&&p(t,["setupComplete"],e);const o=f(n,["serverContent"]);o!=null&&p(t,["serverContent"],o);const r=f(n,["toolCall"]);r!=null&&p(t,["toolCall"],r);const l=f(n,["toolCallCancellation"]);l!=null&&p(t,["toolCallCancellation"],l);const c=f(n,["usageMetadata"]);c!=null&&p(t,["usageMetadata"],ew(c));const d=f(n,["goAway"]);d!=null&&p(t,["goAway"],d);const y=f(n,["sessionResumptionUpdate"]);y!=null&&p(t,["sessionResumptionUpdate"],y);const m=f(n,["voiceActivityDetectionSignal"]);m!=null&&p(t,["voiceActivityDetectionSignal"],m);const v=f(n,["voiceActivity"]);return v!=null&&p(t,["voiceActivity"],nw(v)),t}function WI(n){const t={},e=f(n,["mediaResolution"]);e!=null&&p(t,["mediaResolution"],e);const o=f(n,["codeExecutionResult"]);o!=null&&p(t,["codeExecutionResult"],o);const r=f(n,["executableCode"]);r!=null&&p(t,["executableCode"],r);const l=f(n,["fileData"]);l!=null&&p(t,["fileData"],LI(l));const c=f(n,["functionCall"]);c!=null&&p(t,["functionCall"],kI(c));const d=f(n,["functionResponse"]);d!=null&&p(t,["functionResponse"],d);const y=f(n,["inlineData"]);y!=null&&p(t,["inlineData"],mc(y));const m=f(n,["text"]);m!=null&&p(t,["text"],m);const v=f(n,["thought"]);v!=null&&p(t,["thought"],v);const E=f(n,["thoughtSignature"]);E!=null&&p(t,["thoughtSignature"],E);const A=f(n,["videoMetadata"]);return A!=null&&p(t,["videoMetadata"],A),t}function ZI(n){const t={},e=f(n,["handle"]);if(e!=null&&p(t,["handle"],e),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function jI(n){const t={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const e=f(n,["computerUse"]);e!=null&&p(t,["computerUse"],e);const o=f(n,["fileSearch"]);o!=null&&p(t,["fileSearch"],o);const r=f(n,["codeExecution"]);if(r!=null&&p(t,["codeExecution"],r),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(n,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(E=>E)),p(t,["functionDeclarations"],v)}const c=f(n,["googleMaps"]);c!=null&&p(t,["googleMaps"],GI(c));const d=f(n,["googleSearch"]);d!=null&&p(t,["googleSearch"],BI(d));const y=f(n,["googleSearchRetrieval"]);y!=null&&p(t,["googleSearchRetrieval"],y);const m=f(n,["urlContext"]);return m!=null&&p(t,["urlContext"],m),t}function tw(n){const t={},e=f(n,["retrieval"]);e!=null&&p(t,["retrieval"],e);const o=f(n,["computerUse"]);if(o!=null&&p(t,["computerUse"],o),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=f(n,["codeExecution"]);r!=null&&p(t,["codeExecution"],r);const l=f(n,["enterpriseWebSearch"]);l!=null&&p(t,["enterpriseWebSearch"],l);const c=f(n,["functionDeclarations"]);if(c!=null){let E=c;Array.isArray(E)&&(E=E.map(A=>OI(A))),p(t,["functionDeclarations"],E)}const d=f(n,["googleMaps"]);d!=null&&p(t,["googleMaps"],d);const y=f(n,["googleSearch"]);y!=null&&p(t,["googleSearch"],y);const m=f(n,["googleSearchRetrieval"]);m!=null&&p(t,["googleSearchRetrieval"],m);const v=f(n,["urlContext"]);return v!=null&&p(t,["urlContext"],v),t}function ew(n){const t={},e=f(n,["promptTokenCount"]);e!=null&&p(t,["promptTokenCount"],e);const o=f(n,["cachedContentTokenCount"]);o!=null&&p(t,["cachedContentTokenCount"],o);const r=f(n,["candidatesTokenCount"]);r!=null&&p(t,["responseTokenCount"],r);const l=f(n,["toolUsePromptTokenCount"]);l!=null&&p(t,["toolUsePromptTokenCount"],l);const c=f(n,["thoughtsTokenCount"]);c!=null&&p(t,["thoughtsTokenCount"],c);const d=f(n,["totalTokenCount"]);d!=null&&p(t,["totalTokenCount"],d);const y=f(n,["promptTokensDetails"]);if(y!=null){let I=y;Array.isArray(I)&&(I=I.map(P=>P)),p(t,["promptTokensDetails"],I)}const m=f(n,["cacheTokensDetails"]);if(m!=null){let I=m;Array.isArray(I)&&(I=I.map(P=>P)),p(t,["cacheTokensDetails"],I)}const v=f(n,["candidatesTokensDetails"]);if(v!=null){let I=v;Array.isArray(I)&&(I=I.map(P=>P)),p(t,["responseTokensDetails"],I)}const E=f(n,["toolUsePromptTokensDetails"]);if(E!=null){let I=E;Array.isArray(I)&&(I=I.map(P=>P)),p(t,["toolUsePromptTokensDetails"],I)}const A=f(n,["trafficType"]);return A!=null&&p(t,["trafficType"],A),t}function nw(n){const t={},e=f(n,["type"]);return e!=null&&p(t,["voiceActivityType"],e),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function iw(n){const t={},e=f(n,["data"]);if(e!=null&&p(t,["data"],e),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(n,["mimeType"]);return o!=null&&p(t,["mimeType"],o),t}function ow(n){const t={},e=f(n,["content"]);e!=null&&p(t,["content"],e);const o=f(n,["citationMetadata"]);o!=null&&p(t,["citationMetadata"],sw(o));const r=f(n,["tokenCount"]);r!=null&&p(t,["tokenCount"],r);const l=f(n,["finishReason"]);l!=null&&p(t,["finishReason"],l);const c=f(n,["avgLogprobs"]);c!=null&&p(t,["avgLogprobs"],c);const d=f(n,["groundingMetadata"]);d!=null&&p(t,["groundingMetadata"],d);const y=f(n,["index"]);y!=null&&p(t,["index"],y);const m=f(n,["logprobsResult"]);m!=null&&p(t,["logprobsResult"],m);const v=f(n,["safetyRatings"]);if(v!=null){let A=v;Array.isArray(A)&&(A=A.map(I=>I)),p(t,["safetyRatings"],A)}const E=f(n,["urlContextMetadata"]);return E!=null&&p(t,["urlContextMetadata"],E),t}function sw(n){const t={},e=f(n,["citationSources"]);if(e!=null){let o=e;Array.isArray(o)&&(o=o.map(r=>r)),p(t,["citations"],o)}return t}function rw(n,t){const e={},o=f(t,["model"]);o!=null&&p(e,["_url","model"],Yt(n,o));const r=f(t,["contents"]);if(r!=null){let l=Fn(r);Array.isArray(l)&&(l=l.map(c=>c)),p(e,["contents"],l)}return e}function aw(n){const t={},e=f(n,["sdkHttpResponse"]);e!=null&&p(t,["sdkHttpResponse"],e);const o=f(n,["tokensInfo"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>l)),p(t,["tokensInfo"],r)}return t}function lw(n){const t={},e=f(n,["values"]);e!=null&&p(t,["values"],e);const o=f(n,["statistics"]);return o!=null&&p(t,["statistics"],uw(o)),t}function uw(n){const t={},e=f(n,["truncated"]);e!=null&&p(t,["truncated"],e);const o=f(n,["token_count"]);return o!=null&&p(t,["tokenCount"],o),t}function Oc(n){const t={},e=f(n,["parts"]);if(e!=null){let r=e;Array.isArray(r)&&(r=r.map(l=>_N(l))),p(t,["parts"],r)}const o=f(n,["role"]);return o!=null&&p(t,["role"],o),t}function cw(n){const t={},e=f(n,["controlType"]);e!=null&&p(t,["controlType"],e);const o=f(n,["enableControlImageComputation"]);return o!=null&&p(t,["computeControl"],o),t}function fw(n){const t={};if(f(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function dw(n,t){const e={},o=f(n,["systemInstruction"]);t!==void 0&&o!=null&&p(t,["systemInstruction"],nn(o));const r=f(n,["tools"]);if(t!==void 0&&r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>yE(d))),p(t,["tools"],c)}const l=f(n,["generationConfig"]);return t!==void 0&&l!=null&&p(t,["generationConfig"],iN(l)),e}function hw(n,t){const e={},o=f(t,["model"]);o!=null&&p(e,["_url","model"],Yt(n,o));const r=f(t,["contents"]);if(r!=null){let c=Fn(r);Array.isArray(c)&&(c=c.map(d=>Oc(d))),p(e,["contents"],c)}const l=f(t,["config"]);return l!=null&&fw(l),e}function pw(n,t){const e={},o=f(t,["model"]);o!=null&&p(e,["_url","model"],Yt(n,o));const r=f(t,["contents"]);if(r!=null){let c=Fn(r);Array.isArray(c)&&(c=c.map(d=>d)),p(e,["contents"],c)}const l=f(t,["config"]);return l!=null&&dw(l,e),e}function mw(n){const t={},e=f(n,["sdkHttpResponse"]);e!=null&&p(t,["sdkHttpResponse"],e);const o=f(n,["totalTokens"]);o!=null&&p(t,["totalTokens"],o);const r=f(n,["cachedContentTokenCount"]);return r!=null&&p(t,["cachedContentTokenCount"],r),t}function gw(n){const t={},e=f(n,["sdkHttpResponse"]);e!=null&&p(t,["sdkHttpResponse"],e);const o=f(n,["totalTokens"]);return o!=null&&p(t,["totalTokens"],o),t}function yw(n,t){const e={},o=f(t,["model"]);return o!=null&&p(e,["_url","name"],Yt(n,o)),e}function _w(n,t){const e={},o=f(t,["model"]);return o!=null&&p(e,["_url","name"],Yt(n,o)),e}function vw(n){const t={},e=f(n,["sdkHttpResponse"]);return e!=null&&p(t,["sdkHttpResponse"],e),t}function Tw(n){const t={},e=f(n,["sdkHttpResponse"]);return e!=null&&p(t,["sdkHttpResponse"],e),t}function Ew(n,t){const e={},o=f(n,["outputGcsUri"]);t!==void 0&&o!=null&&p(t,["parameters","storageUri"],o);const r=f(n,["negativePrompt"]);t!==void 0&&r!=null&&p(t,["parameters","negativePrompt"],r);const l=f(n,["numberOfImages"]);t!==void 0&&l!=null&&p(t,["parameters","sampleCount"],l);const c=f(n,["aspectRatio"]);t!==void 0&&c!=null&&p(t,["parameters","aspectRatio"],c);const d=f(n,["guidanceScale"]);t!==void 0&&d!=null&&p(t,["parameters","guidanceScale"],d);const y=f(n,["seed"]);t!==void 0&&y!=null&&p(t,["parameters","seed"],y);const m=f(n,["safetyFilterLevel"]);t!==void 0&&m!=null&&p(t,["parameters","safetySetting"],m);const v=f(n,["personGeneration"]);t!==void 0&&v!=null&&p(t,["parameters","personGeneration"],v);const E=f(n,["includeSafetyAttributes"]);t!==void 0&&E!=null&&p(t,["parameters","includeSafetyAttributes"],E);const A=f(n,["includeRaiReason"]);t!==void 0&&A!=null&&p(t,["parameters","includeRaiReason"],A);const I=f(n,["language"]);t!==void 0&&I!=null&&p(t,["parameters","language"],I);const P=f(n,["outputMimeType"]);t!==void 0&&P!=null&&p(t,["parameters","outputOptions","mimeType"],P);const q=f(n,["outputCompressionQuality"]);t!==void 0&&q!=null&&p(t,["parameters","outputOptions","compressionQuality"],q);const U=f(n,["addWatermark"]);t!==void 0&&U!=null&&p(t,["parameters","addWatermark"],U);const X=f(n,["labels"]);t!==void 0&&X!=null&&p(t,["labels"],X);const ot=f(n,["editMode"]);t!==void 0&&ot!=null&&p(t,["parameters","editMode"],ot);const J=f(n,["baseSteps"]);return t!==void 0&&J!=null&&p(t,["parameters","editConfig","baseSteps"],J),e}function Aw(n,t){const e={},o=f(t,["model"]);o!=null&&p(e,["_url","model"],Yt(n,o));const r=f(t,["prompt"]);r!=null&&p(e,["instances[0]","prompt"],r);const l=f(t,["referenceImages"]);if(l!=null){let d=l;Array.isArray(d)&&(d=d.map(y=>CN(y))),p(e,["instances[0]","referenceImages"],d)}const c=f(t,["config"]);return c!=null&&Ew(c,e),e}function Sw(n){const t={},e=f(n,["sdkHttpResponse"]);e!=null&&p(t,["sdkHttpResponse"],e);const o=f(n,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>qc(l))),p(t,["generatedImages"],r)}return t}function Cw(n,t){const e={},o=f(n,["taskType"]);t!==void 0&&o!=null&&p(t,["requests[]","taskType"],o);const r=f(n,["title"]);t!==void 0&&r!=null&&p(t,["requests[]","title"],r);const l=f(n,["outputDimensionality"]);if(t!==void 0&&l!=null&&p(t,["requests[]","outputDimensionality"],l),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return e}function Rw(n,t){const e={},o=f(n,["taskType"]);t!==void 0&&o!=null&&p(t,["instances[]","task_type"],o);const r=f(n,["title"]);t!==void 0&&r!=null&&p(t,["instances[]","title"],r);const l=f(n,["outputDimensionality"]);t!==void 0&&l!=null&&p(t,["parameters","outputDimensionality"],l);const c=f(n,["mimeType"]);t!==void 0&&c!=null&&p(t,["instances[]","mimeType"],c);const d=f(n,["autoTruncate"]);return t!==void 0&&d!=null&&p(t,["parameters","autoTruncate"],d),e}function Iw(n,t){const e={},o=f(t,["model"]);o!=null&&p(e,["_url","model"],Yt(n,o));const r=f(t,["contents"]);if(r!=null){let d=rp(n,r);Array.isArray(d)&&(d=d.map(y=>y)),p(e,["requests[]","content"],d)}const l=f(t,["config"]);l!=null&&Cw(l,e);const c=f(t,["model"]);return c!==void 0&&p(e,["requests[]","model"],Yt(n,c)),e}function ww(n,t){const e={},o=f(t,["model"]);o!=null&&p(e,["_url","model"],Yt(n,o));const r=f(t,["contents"]);if(r!=null){let c=rp(n,r);Array.isArray(c)&&(c=c.map(d=>d)),p(e,["instances[]","content"],c)}const l=f(t,["config"]);return l!=null&&Rw(l,e),e}function Nw(n){const t={},e=f(n,["sdkHttpResponse"]);e!=null&&p(t,["sdkHttpResponse"],e);const o=f(n,["embeddings"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),p(t,["embeddings"],l)}const r=f(n,["metadata"]);return r!=null&&p(t,["metadata"],r),t}function Mw(n){const t={},e=f(n,["sdkHttpResponse"]);e!=null&&p(t,["sdkHttpResponse"],e);const o=f(n,["predictions[]","embeddings"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>lw(c))),p(t,["embeddings"],l)}const r=f(n,["metadata"]);return r!=null&&p(t,["metadata"],r),t}function Dw(n){const t={},e=f(n,["endpoint"]);e!=null&&p(t,["name"],e);const o=f(n,["deployedModelId"]);return o!=null&&p(t,["deployedModelId"],o),t}function bw(n){const t={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const e=f(n,["fileUri"]);e!=null&&p(t,["fileUri"],e);const o=f(n,["mimeType"]);return o!=null&&p(t,["mimeType"],o),t}function xw(n){const t={},e=f(n,["id"]);e!=null&&p(t,["id"],e);const o=f(n,["args"]);o!=null&&p(t,["args"],o);const r=f(n,["name"]);if(r!=null&&p(t,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function Vw(n){const t={},e=f(n,["allowedFunctionNames"]);e!=null&&p(t,["allowedFunctionNames"],e);const o=f(n,["mode"]);if(o!=null&&p(t,["mode"],o),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function Pw(n){const t={},e=f(n,["description"]);e!=null&&p(t,["description"],e);const o=f(n,["name"]);o!=null&&p(t,["name"],o);const r=f(n,["parameters"]);r!=null&&p(t,["parameters"],r);const l=f(n,["parametersJsonSchema"]);l!=null&&p(t,["parametersJsonSchema"],l);const c=f(n,["response"]);c!=null&&p(t,["response"],c);const d=f(n,["responseJsonSchema"]);if(d!=null&&p(t,["responseJsonSchema"],d),f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return t}function Uw(n,t,e){const o={},r=f(t,["systemInstruction"]);e!==void 0&&r!=null&&p(e,["systemInstruction"],Oc(nn(r)));const l=f(t,["temperature"]);l!=null&&p(o,["temperature"],l);const c=f(t,["topP"]);c!=null&&p(o,["topP"],c);const d=f(t,["topK"]);d!=null&&p(o,["topK"],d);const y=f(t,["candidateCount"]);y!=null&&p(o,["candidateCount"],y);const m=f(t,["maxOutputTokens"]);m!=null&&p(o,["maxOutputTokens"],m);const v=f(t,["stopSequences"]);v!=null&&p(o,["stopSequences"],v);const E=f(t,["responseLogprobs"]);E!=null&&p(o,["responseLogprobs"],E);const A=f(t,["logprobs"]);A!=null&&p(o,["logprobs"],A);const I=f(t,["presencePenalty"]);I!=null&&p(o,["presencePenalty"],I);const P=f(t,["frequencyPenalty"]);P!=null&&p(o,["frequencyPenalty"],P);const q=f(t,["seed"]);q!=null&&p(o,["seed"],q);const U=f(t,["responseMimeType"]);U!=null&&p(o,["responseMimeType"],U);const X=f(t,["responseSchema"]);X!=null&&p(o,["responseSchema"],ap(X));const ot=f(t,["responseJsonSchema"]);if(ot!=null&&p(o,["responseJsonSchema"],ot),f(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const J=f(t,["safetySettings"]);if(e!==void 0&&J!=null){let b=J;Array.isArray(b)&&(b=b.map(Kt=>RN(Kt))),p(e,["safetySettings"],b)}const et=f(t,["tools"]);if(e!==void 0&&et!=null){let b=Yr(et);Array.isArray(b)&&(b=b.map(Kt=>xN(zr(Kt)))),p(e,["tools"],b)}const ct=f(t,["toolConfig"]);if(e!==void 0&&ct!=null&&p(e,["toolConfig"],bN(ct)),f(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const at=f(t,["cachedContent"]);e!==void 0&&at!=null&&p(e,["cachedContent"],Wi(n,at));const D=f(t,["responseModalities"]);D!=null&&p(o,["responseModalities"],D);const M=f(t,["mediaResolution"]);M!=null&&p(o,["mediaResolution"],M);const N=f(t,["speechConfig"]);if(N!=null&&p(o,["speechConfig"],lp(N)),f(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const V=f(t,["thinkingConfig"]);V!=null&&p(o,["thinkingConfig"],V);const L=f(t,["imageConfig"]);L!=null&&p(o,["imageConfig"],lN(L));const G=f(t,["enableEnhancedCivicAnswers"]);return G!=null&&p(o,["enableEnhancedCivicAnswers"],G),o}function Lw(n,t,e){const o={},r=f(t,["systemInstruction"]);e!==void 0&&r!=null&&p(e,["systemInstruction"],nn(r));const l=f(t,["temperature"]);l!=null&&p(o,["temperature"],l);const c=f(t,["topP"]);c!=null&&p(o,["topP"],c);const d=f(t,["topK"]);d!=null&&p(o,["topK"],d);const y=f(t,["candidateCount"]);y!=null&&p(o,["candidateCount"],y);const m=f(t,["maxOutputTokens"]);m!=null&&p(o,["maxOutputTokens"],m);const v=f(t,["stopSequences"]);v!=null&&p(o,["stopSequences"],v);const E=f(t,["responseLogprobs"]);E!=null&&p(o,["responseLogprobs"],E);const A=f(t,["logprobs"]);A!=null&&p(o,["logprobs"],A);const I=f(t,["presencePenalty"]);I!=null&&p(o,["presencePenalty"],I);const P=f(t,["frequencyPenalty"]);P!=null&&p(o,["frequencyPenalty"],P);const q=f(t,["seed"]);q!=null&&p(o,["seed"],q);const U=f(t,["responseMimeType"]);U!=null&&p(o,["responseMimeType"],U);const X=f(t,["responseSchema"]);X!=null&&p(o,["responseSchema"],ap(X));const ot=f(t,["responseJsonSchema"]);ot!=null&&p(o,["responseJsonSchema"],ot);const J=f(t,["routingConfig"]);J!=null&&p(o,["routingConfig"],J);const et=f(t,["modelSelectionConfig"]);et!=null&&p(o,["modelConfig"],et);const ct=f(t,["safetySettings"]);if(e!==void 0&&ct!=null){let $=ct;Array.isArray($)&&($=$.map(lt=>lt)),p(e,["safetySettings"],$)}const at=f(t,["tools"]);if(e!==void 0&&at!=null){let $=Yr(at);Array.isArray($)&&($=$.map(lt=>yE(zr(lt)))),p(e,["tools"],$)}const D=f(t,["toolConfig"]);e!==void 0&&D!=null&&p(e,["toolConfig"],D);const M=f(t,["labels"]);e!==void 0&&M!=null&&p(e,["labels"],M);const N=f(t,["cachedContent"]);e!==void 0&&N!=null&&p(e,["cachedContent"],Wi(n,N));const V=f(t,["responseModalities"]);V!=null&&p(o,["responseModalities"],V);const L=f(t,["mediaResolution"]);L!=null&&p(o,["mediaResolution"],L);const G=f(t,["speechConfig"]);G!=null&&p(o,["speechConfig"],lp(G));const b=f(t,["audioTimestamp"]);b!=null&&p(o,["audioTimestamp"],b);const Kt=f(t,["thinkingConfig"]);Kt!=null&&p(o,["thinkingConfig"],Kt);const ve=f(t,["imageConfig"]);if(ve!=null&&p(o,["imageConfig"],uN(ve)),f(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return o}function kv(n,t){const e={},o=f(t,["model"]);o!=null&&p(e,["_url","model"],Yt(n,o));const r=f(t,["contents"]);if(r!=null){let c=Fn(r);Array.isArray(c)&&(c=c.map(d=>Oc(d))),p(e,["contents"],c)}const l=f(t,["config"]);return l!=null&&p(e,["generationConfig"],Uw(n,l,e)),e}function Ov(n,t){const e={},o=f(t,["model"]);o!=null&&p(e,["_url","model"],Yt(n,o));const r=f(t,["contents"]);if(r!=null){let c=Fn(r);Array.isArray(c)&&(c=c.map(d=>d)),p(e,["contents"],c)}const l=f(t,["config"]);return l!=null&&p(e,["generationConfig"],Lw(n,l,e)),e}function qv(n){const t={},e=f(n,["sdkHttpResponse"]);e!=null&&p(t,["sdkHttpResponse"],e);const o=f(n,["candidates"]);if(o!=null){let y=o;Array.isArray(y)&&(y=y.map(m=>ow(m))),p(t,["candidates"],y)}const r=f(n,["modelVersion"]);r!=null&&p(t,["modelVersion"],r);const l=f(n,["promptFeedback"]);l!=null&&p(t,["promptFeedback"],l);const c=f(n,["responseId"]);c!=null&&p(t,["responseId"],c);const d=f(n,["usageMetadata"]);return d!=null&&p(t,["usageMetadata"],d),t}function Gv(n){const t={},e=f(n,["sdkHttpResponse"]);e!=null&&p(t,["sdkHttpResponse"],e);const o=f(n,["candidates"]);if(o!=null){let m=o;Array.isArray(m)&&(m=m.map(v=>v)),p(t,["candidates"],m)}const r=f(n,["createTime"]);r!=null&&p(t,["createTime"],r);const l=f(n,["modelVersion"]);l!=null&&p(t,["modelVersion"],l);const c=f(n,["promptFeedback"]);c!=null&&p(t,["promptFeedback"],c);const d=f(n,["responseId"]);d!=null&&p(t,["responseId"],d);const y=f(n,["usageMetadata"]);return y!=null&&p(t,["usageMetadata"],y),t}function kw(n,t){const e={};if(f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=f(n,["numberOfImages"]);t!==void 0&&o!=null&&p(t,["parameters","sampleCount"],o);const r=f(n,["aspectRatio"]);t!==void 0&&r!=null&&p(t,["parameters","aspectRatio"],r);const l=f(n,["guidanceScale"]);if(t!==void 0&&l!=null&&p(t,["parameters","guidanceScale"],l),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=f(n,["safetyFilterLevel"]);t!==void 0&&c!=null&&p(t,["parameters","safetySetting"],c);const d=f(n,["personGeneration"]);t!==void 0&&d!=null&&p(t,["parameters","personGeneration"],d);const y=f(n,["includeSafetyAttributes"]);t!==void 0&&y!=null&&p(t,["parameters","includeSafetyAttributes"],y);const m=f(n,["includeRaiReason"]);t!==void 0&&m!=null&&p(t,["parameters","includeRaiReason"],m);const v=f(n,["language"]);t!==void 0&&v!=null&&p(t,["parameters","language"],v);const E=f(n,["outputMimeType"]);t!==void 0&&E!=null&&p(t,["parameters","outputOptions","mimeType"],E);const A=f(n,["outputCompressionQuality"]);if(t!==void 0&&A!=null&&p(t,["parameters","outputOptions","compressionQuality"],A),f(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const I=f(n,["imageSize"]);if(t!==void 0&&I!=null&&p(t,["parameters","sampleImageSize"],I),f(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return e}function Ow(n,t){const e={},o=f(n,["outputGcsUri"]);t!==void 0&&o!=null&&p(t,["parameters","storageUri"],o);const r=f(n,["negativePrompt"]);t!==void 0&&r!=null&&p(t,["parameters","negativePrompt"],r);const l=f(n,["numberOfImages"]);t!==void 0&&l!=null&&p(t,["parameters","sampleCount"],l);const c=f(n,["aspectRatio"]);t!==void 0&&c!=null&&p(t,["parameters","aspectRatio"],c);const d=f(n,["guidanceScale"]);t!==void 0&&d!=null&&p(t,["parameters","guidanceScale"],d);const y=f(n,["seed"]);t!==void 0&&y!=null&&p(t,["parameters","seed"],y);const m=f(n,["safetyFilterLevel"]);t!==void 0&&m!=null&&p(t,["parameters","safetySetting"],m);const v=f(n,["personGeneration"]);t!==void 0&&v!=null&&p(t,["parameters","personGeneration"],v);const E=f(n,["includeSafetyAttributes"]);t!==void 0&&E!=null&&p(t,["parameters","includeSafetyAttributes"],E);const A=f(n,["includeRaiReason"]);t!==void 0&&A!=null&&p(t,["parameters","includeRaiReason"],A);const I=f(n,["language"]);t!==void 0&&I!=null&&p(t,["parameters","language"],I);const P=f(n,["outputMimeType"]);t!==void 0&&P!=null&&p(t,["parameters","outputOptions","mimeType"],P);const q=f(n,["outputCompressionQuality"]);t!==void 0&&q!=null&&p(t,["parameters","outputOptions","compressionQuality"],q);const U=f(n,["addWatermark"]);t!==void 0&&U!=null&&p(t,["parameters","addWatermark"],U);const X=f(n,["labels"]);t!==void 0&&X!=null&&p(t,["labels"],X);const ot=f(n,["imageSize"]);t!==void 0&&ot!=null&&p(t,["parameters","sampleImageSize"],ot);const J=f(n,["enhancePrompt"]);return t!==void 0&&J!=null&&p(t,["parameters","enhancePrompt"],J),e}function qw(n,t){const e={},o=f(t,["model"]);o!=null&&p(e,["_url","model"],Yt(n,o));const r=f(t,["prompt"]);r!=null&&p(e,["instances[0]","prompt"],r);const l=f(t,["config"]);return l!=null&&kw(l,e),e}function Gw(n,t){const e={},o=f(t,["model"]);o!=null&&p(e,["_url","model"],Yt(n,o));const r=f(t,["prompt"]);r!=null&&p(e,["instances[0]","prompt"],r);const l=f(t,["config"]);return l!=null&&Ow(l,e),e}function Bw(n){const t={},e=f(n,["sdkHttpResponse"]);e!=null&&p(t,["sdkHttpResponse"],e);const o=f(n,["predictions"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>jw(c))),p(t,["generatedImages"],l)}const r=f(n,["positivePromptSafetyAttributes"]);return r!=null&&p(t,["positivePromptSafetyAttributes"],mE(r)),t}function Fw(n){const t={},e=f(n,["sdkHttpResponse"]);e!=null&&p(t,["sdkHttpResponse"],e);const o=f(n,["predictions"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>qc(c))),p(t,["generatedImages"],l)}const r=f(n,["positivePromptSafetyAttributes"]);return r!=null&&p(t,["positivePromptSafetyAttributes"],gE(r)),t}function Hw(n,t){const e={},o=f(n,["numberOfVideos"]);if(t!==void 0&&o!=null&&p(t,["parameters","sampleCount"],o),f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=f(n,["durationSeconds"]);if(t!==void 0&&r!=null&&p(t,["parameters","durationSeconds"],r),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=f(n,["aspectRatio"]);t!==void 0&&l!=null&&p(t,["parameters","aspectRatio"],l);const c=f(n,["resolution"]);t!==void 0&&c!=null&&p(t,["parameters","resolution"],c);const d=f(n,["personGeneration"]);if(t!==void 0&&d!=null&&p(t,["parameters","personGeneration"],d),f(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const y=f(n,["negativePrompt"]);t!==void 0&&y!=null&&p(t,["parameters","negativePrompt"],y);const m=f(n,["enhancePrompt"]);if(t!==void 0&&m!=null&&p(t,["parameters","enhancePrompt"],m),f(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=f(n,["lastFrame"]);t!==void 0&&v!=null&&p(t,["instances[0]","lastFrame"],Gc(v));const E=f(n,["referenceImages"]);if(t!==void 0&&E!=null){let A=E;Array.isArray(A)&&(A=A.map(I=>YN(I))),p(t,["instances[0]","referenceImages"],A)}if(f(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return e}function zw(n,t){const e={},o=f(n,["numberOfVideos"]);t!==void 0&&o!=null&&p(t,["parameters","sampleCount"],o);const r=f(n,["outputGcsUri"]);t!==void 0&&r!=null&&p(t,["parameters","storageUri"],r);const l=f(n,["fps"]);t!==void 0&&l!=null&&p(t,["parameters","fps"],l);const c=f(n,["durationSeconds"]);t!==void 0&&c!=null&&p(t,["parameters","durationSeconds"],c);const d=f(n,["seed"]);t!==void 0&&d!=null&&p(t,["parameters","seed"],d);const y=f(n,["aspectRatio"]);t!==void 0&&y!=null&&p(t,["parameters","aspectRatio"],y);const m=f(n,["resolution"]);t!==void 0&&m!=null&&p(t,["parameters","resolution"],m);const v=f(n,["personGeneration"]);t!==void 0&&v!=null&&p(t,["parameters","personGeneration"],v);const E=f(n,["pubsubTopic"]);t!==void 0&&E!=null&&p(t,["parameters","pubsubTopic"],E);const A=f(n,["negativePrompt"]);t!==void 0&&A!=null&&p(t,["parameters","negativePrompt"],A);const I=f(n,["enhancePrompt"]);t!==void 0&&I!=null&&p(t,["parameters","enhancePrompt"],I);const P=f(n,["generateAudio"]);t!==void 0&&P!=null&&p(t,["parameters","generateAudio"],P);const q=f(n,["lastFrame"]);t!==void 0&&q!=null&&p(t,["instances[0]","lastFrame"],ei(q));const U=f(n,["referenceImages"]);if(t!==void 0&&U!=null){let J=U;Array.isArray(J)&&(J=J.map(et=>JN(et))),p(t,["instances[0]","referenceImages"],J)}const X=f(n,["mask"]);t!==void 0&&X!=null&&p(t,["instances[0]","mask"],zN(X));const ot=f(n,["compressionQuality"]);return t!==void 0&&ot!=null&&p(t,["parameters","compressionQuality"],ot),e}function Yw(n){const t={},e=f(n,["name"]);e!=null&&p(t,["name"],e);const o=f(n,["metadata"]);o!=null&&p(t,["metadata"],o);const r=f(n,["done"]);r!=null&&p(t,["done"],r);const l=f(n,["error"]);l!=null&&p(t,["error"],l);const c=f(n,["response","generateVideoResponse"]);return c!=null&&p(t,["response"],$w(c)),t}function Jw(n){const t={},e=f(n,["name"]);e!=null&&p(t,["name"],e);const o=f(n,["metadata"]);o!=null&&p(t,["metadata"],o);const r=f(n,["done"]);r!=null&&p(t,["done"],r);const l=f(n,["error"]);l!=null&&p(t,["error"],l);const c=f(n,["response"]);return c!=null&&p(t,["response"],Xw(c)),t}function Kw(n,t){const e={},o=f(t,["model"]);o!=null&&p(e,["_url","model"],Yt(n,o));const r=f(t,["prompt"]);r!=null&&p(e,["instances[0]","prompt"],r);const l=f(t,["image"]);l!=null&&p(e,["instances[0]","image"],Gc(l));const c=f(t,["video"]);c!=null&&p(e,["instances[0]","video"],_E(c));const d=f(t,["source"]);d!=null&&Ww(d,e);const y=f(t,["config"]);return y!=null&&Hw(y,e),e}function Qw(n,t){const e={},o=f(t,["model"]);o!=null&&p(e,["_url","model"],Yt(n,o));const r=f(t,["prompt"]);r!=null&&p(e,["instances[0]","prompt"],r);const l=f(t,["image"]);l!=null&&p(e,["instances[0]","image"],ei(l));const c=f(t,["video"]);c!=null&&p(e,["instances[0]","video"],vE(c));const d=f(t,["source"]);d!=null&&Zw(d,e);const y=f(t,["config"]);return y!=null&&zw(y,e),e}function $w(n){const t={},e=f(n,["generatedSamples"]);if(e!=null){let l=e;Array.isArray(l)&&(l=l.map(c=>eN(c))),p(t,["generatedVideos"],l)}const o=f(n,["raiMediaFilteredCount"]);o!=null&&p(t,["raiMediaFilteredCount"],o);const r=f(n,["raiMediaFilteredReasons"]);return r!=null&&p(t,["raiMediaFilteredReasons"],r),t}function Xw(n){const t={},e=f(n,["videos"]);if(e!=null){let l=e;Array.isArray(l)&&(l=l.map(c=>nN(c))),p(t,["generatedVideos"],l)}const o=f(n,["raiMediaFilteredCount"]);o!=null&&p(t,["raiMediaFilteredCount"],o);const r=f(n,["raiMediaFilteredReasons"]);return r!=null&&p(t,["raiMediaFilteredReasons"],r),t}function Ww(n,t){const e={},o=f(n,["prompt"]);t!==void 0&&o!=null&&p(t,["instances[0]","prompt"],o);const r=f(n,["image"]);t!==void 0&&r!=null&&p(t,["instances[0]","image"],Gc(r));const l=f(n,["video"]);return t!==void 0&&l!=null&&p(t,["instances[0]","video"],_E(l)),e}function Zw(n,t){const e={},o=f(n,["prompt"]);t!==void 0&&o!=null&&p(t,["instances[0]","prompt"],o);const r=f(n,["image"]);t!==void 0&&r!=null&&p(t,["instances[0]","image"],ei(r));const l=f(n,["video"]);return t!==void 0&&l!=null&&p(t,["instances[0]","video"],vE(l)),e}function jw(n){const t={},e=f(n,["_self"]);e!=null&&p(t,["image"],cN(e));const o=f(n,["raiFilteredReason"]);o!=null&&p(t,["raiFilteredReason"],o);const r=f(n,["_self"]);return r!=null&&p(t,["safetyAttributes"],mE(r)),t}function qc(n){const t={},e=f(n,["_self"]);e!=null&&p(t,["image"],pE(e));const o=f(n,["raiFilteredReason"]);o!=null&&p(t,["raiFilteredReason"],o);const r=f(n,["_self"]);r!=null&&p(t,["safetyAttributes"],gE(r));const l=f(n,["prompt"]);return l!=null&&p(t,["enhancedPrompt"],l),t}function tN(n){const t={},e=f(n,["_self"]);e!=null&&p(t,["mask"],pE(e));const o=f(n,["labels"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>l)),p(t,["labels"],r)}return t}function eN(n){const t={},e=f(n,["video"]);return e!=null&&p(t,["video"],FN(e)),t}function nN(n){const t={},e=f(n,["_self"]);return e!=null&&p(t,["video"],HN(e)),t}function iN(n){const t={},e=f(n,["modelSelectionConfig"]);e!=null&&p(t,["modelConfig"],e);const o=f(n,["responseJsonSchema"]);o!=null&&p(t,["responseJsonSchema"],o);const r=f(n,["audioTimestamp"]);r!=null&&p(t,["audioTimestamp"],r);const l=f(n,["candidateCount"]);l!=null&&p(t,["candidateCount"],l);const c=f(n,["enableAffectiveDialog"]);c!=null&&p(t,["enableAffectiveDialog"],c);const d=f(n,["frequencyPenalty"]);d!=null&&p(t,["frequencyPenalty"],d);const y=f(n,["logprobs"]);y!=null&&p(t,["logprobs"],y);const m=f(n,["maxOutputTokens"]);m!=null&&p(t,["maxOutputTokens"],m);const v=f(n,["mediaResolution"]);v!=null&&p(t,["mediaResolution"],v);const E=f(n,["presencePenalty"]);E!=null&&p(t,["presencePenalty"],E);const A=f(n,["responseLogprobs"]);A!=null&&p(t,["responseLogprobs"],A);const I=f(n,["responseMimeType"]);I!=null&&p(t,["responseMimeType"],I);const P=f(n,["responseModalities"]);P!=null&&p(t,["responseModalities"],P);const q=f(n,["responseSchema"]);q!=null&&p(t,["responseSchema"],q);const U=f(n,["routingConfig"]);U!=null&&p(t,["routingConfig"],U);const X=f(n,["seed"]);X!=null&&p(t,["seed"],X);const ot=f(n,["speechConfig"]);ot!=null&&p(t,["speechConfig"],ot);const J=f(n,["stopSequences"]);J!=null&&p(t,["stopSequences"],J);const et=f(n,["temperature"]);et!=null&&p(t,["temperature"],et);const ct=f(n,["thinkingConfig"]);ct!=null&&p(t,["thinkingConfig"],ct);const at=f(n,["topK"]);at!=null&&p(t,["topK"],at);const D=f(n,["topP"]);if(D!=null&&p(t,["topP"],D),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function oN(n,t){const e={},o=f(t,["model"]);return o!=null&&p(e,["_url","name"],Yt(n,o)),e}function sN(n,t){const e={},o=f(t,["model"]);return o!=null&&p(e,["_url","name"],Yt(n,o)),e}function rN(n){const t={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const e=f(n,["enableWidget"]);return e!=null&&p(t,["enableWidget"],e),t}function aN(n){const t={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const e=f(n,["timeRangeFilter"]);return e!=null&&p(t,["timeRangeFilter"],e),t}function lN(n){const t={},e=f(n,["aspectRatio"]);e!=null&&p(t,["aspectRatio"],e);const o=f(n,["imageSize"]);if(o!=null&&p(t,["imageSize"],o),f(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(f(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function uN(n){const t={},e=f(n,["aspectRatio"]);e!=null&&p(t,["aspectRatio"],e);const o=f(n,["imageSize"]);o!=null&&p(t,["imageSize"],o);const r=f(n,["personGeneration"]);r!=null&&p(t,["personGeneration"],r);const l=f(n,["outputMimeType"]);l!=null&&p(t,["imageOutputOptions","mimeType"],l);const c=f(n,["outputCompressionQuality"]);return c!=null&&p(t,["imageOutputOptions","compressionQuality"],c),t}function cN(n){const t={},e=f(n,["bytesBase64Encoded"]);e!=null&&p(t,["imageBytes"],$o(e));const o=f(n,["mimeType"]);return o!=null&&p(t,["mimeType"],o),t}function pE(n){const t={},e=f(n,["gcsUri"]);e!=null&&p(t,["gcsUri"],e);const o=f(n,["bytesBase64Encoded"]);o!=null&&p(t,["imageBytes"],$o(o));const r=f(n,["mimeType"]);return r!=null&&p(t,["mimeType"],r),t}function Gc(n){const t={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const e=f(n,["imageBytes"]);e!=null&&p(t,["bytesBase64Encoded"],$o(e));const o=f(n,["mimeType"]);return o!=null&&p(t,["mimeType"],o),t}function ei(n){const t={},e=f(n,["gcsUri"]);e!=null&&p(t,["gcsUri"],e);const o=f(n,["imageBytes"]);o!=null&&p(t,["bytesBase64Encoded"],$o(o));const r=f(n,["mimeType"]);return r!=null&&p(t,["mimeType"],r),t}function fN(n,t,e){const o={},r=f(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const l=f(t,["pageToken"]);e!==void 0&&l!=null&&p(e,["_query","pageToken"],l);const c=f(t,["filter"]);e!==void 0&&c!=null&&p(e,["_query","filter"],c);const d=f(t,["queryBase"]);return e!==void 0&&d!=null&&p(e,["_url","models_url"],aE(n,d)),o}function dN(n,t,e){const o={},r=f(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const l=f(t,["pageToken"]);e!==void 0&&l!=null&&p(e,["_query","pageToken"],l);const c=f(t,["filter"]);e!==void 0&&c!=null&&p(e,["_query","filter"],c);const d=f(t,["queryBase"]);return e!==void 0&&d!=null&&p(e,["_url","models_url"],aE(n,d)),o}function hN(n,t){const e={},o=f(t,["config"]);return o!=null&&fN(n,o,e),e}function pN(n,t){const e={},o=f(t,["config"]);return o!=null&&dN(n,o,e),e}function mN(n){const t={},e=f(n,["sdkHttpResponse"]);e!=null&&p(t,["sdkHttpResponse"],e);const o=f(n,["nextPageToken"]);o!=null&&p(t,["nextPageToken"],o);const r=f(n,["_self"]);if(r!=null){let l=lE(r);Array.isArray(l)&&(l=l.map(c=>Ih(c))),p(t,["models"],l)}return t}function gN(n){const t={},e=f(n,["sdkHttpResponse"]);e!=null&&p(t,["sdkHttpResponse"],e);const o=f(n,["nextPageToken"]);o!=null&&p(t,["nextPageToken"],o);const r=f(n,["_self"]);if(r!=null){let l=lE(r);Array.isArray(l)&&(l=l.map(c=>wh(c))),p(t,["models"],l)}return t}function yN(n){const t={},e=f(n,["maskMode"]);e!=null&&p(t,["maskMode"],e);const o=f(n,["segmentationClasses"]);o!=null&&p(t,["maskClasses"],o);const r=f(n,["maskDilation"]);return r!=null&&p(t,["dilation"],r),t}function Ih(n){const t={},e=f(n,["name"]);e!=null&&p(t,["name"],e);const o=f(n,["displayName"]);o!=null&&p(t,["displayName"],o);const r=f(n,["description"]);r!=null&&p(t,["description"],r);const l=f(n,["version"]);l!=null&&p(t,["version"],l);const c=f(n,["_self"]);c!=null&&p(t,["tunedModelInfo"],VN(c));const d=f(n,["inputTokenLimit"]);d!=null&&p(t,["inputTokenLimit"],d);const y=f(n,["outputTokenLimit"]);y!=null&&p(t,["outputTokenLimit"],y);const m=f(n,["supportedGenerationMethods"]);m!=null&&p(t,["supportedActions"],m);const v=f(n,["temperature"]);v!=null&&p(t,["temperature"],v);const E=f(n,["maxTemperature"]);E!=null&&p(t,["maxTemperature"],E);const A=f(n,["topP"]);A!=null&&p(t,["topP"],A);const I=f(n,["topK"]);I!=null&&p(t,["topK"],I);const P=f(n,["thinking"]);return P!=null&&p(t,["thinking"],P),t}function wh(n){const t={},e=f(n,["name"]);e!=null&&p(t,["name"],e);const o=f(n,["displayName"]);o!=null&&p(t,["displayName"],o);const r=f(n,["description"]);r!=null&&p(t,["description"],r);const l=f(n,["versionId"]);l!=null&&p(t,["version"],l);const c=f(n,["deployedModels"]);if(c!=null){let E=c;Array.isArray(E)&&(E=E.map(A=>Dw(A))),p(t,["endpoints"],E)}const d=f(n,["labels"]);d!=null&&p(t,["labels"],d);const y=f(n,["_self"]);y!=null&&p(t,["tunedModelInfo"],PN(y));const m=f(n,["defaultCheckpointId"]);m!=null&&p(t,["defaultCheckpointId"],m);const v=f(n,["checkpoints"]);if(v!=null){let E=v;Array.isArray(E)&&(E=E.map(A=>A)),p(t,["checkpoints"],E)}return t}function _N(n){const t={},e=f(n,["mediaResolution"]);e!=null&&p(t,["mediaResolution"],e);const o=f(n,["codeExecutionResult"]);o!=null&&p(t,["codeExecutionResult"],o);const r=f(n,["executableCode"]);r!=null&&p(t,["executableCode"],r);const l=f(n,["fileData"]);l!=null&&p(t,["fileData"],bw(l));const c=f(n,["functionCall"]);c!=null&&p(t,["functionCall"],xw(c));const d=f(n,["functionResponse"]);d!=null&&p(t,["functionResponse"],d);const y=f(n,["inlineData"]);y!=null&&p(t,["inlineData"],iw(y));const m=f(n,["text"]);m!=null&&p(t,["text"],m);const v=f(n,["thought"]);v!=null&&p(t,["thought"],v);const E=f(n,["thoughtSignature"]);E!=null&&p(t,["thoughtSignature"],E);const A=f(n,["videoMetadata"]);return A!=null&&p(t,["videoMetadata"],A),t}function vN(n){const t={},e=f(n,["productImage"]);return e!=null&&p(t,["image"],ei(e)),t}function TN(n,t){const e={},o=f(n,["numberOfImages"]);t!==void 0&&o!=null&&p(t,["parameters","sampleCount"],o);const r=f(n,["baseSteps"]);t!==void 0&&r!=null&&p(t,["parameters","baseSteps"],r);const l=f(n,["outputGcsUri"]);t!==void 0&&l!=null&&p(t,["parameters","storageUri"],l);const c=f(n,["seed"]);t!==void 0&&c!=null&&p(t,["parameters","seed"],c);const d=f(n,["safetyFilterLevel"]);t!==void 0&&d!=null&&p(t,["parameters","safetySetting"],d);const y=f(n,["personGeneration"]);t!==void 0&&y!=null&&p(t,["parameters","personGeneration"],y);const m=f(n,["addWatermark"]);t!==void 0&&m!=null&&p(t,["parameters","addWatermark"],m);const v=f(n,["outputMimeType"]);t!==void 0&&v!=null&&p(t,["parameters","outputOptions","mimeType"],v);const E=f(n,["outputCompressionQuality"]);t!==void 0&&E!=null&&p(t,["parameters","outputOptions","compressionQuality"],E);const A=f(n,["enhancePrompt"]);t!==void 0&&A!=null&&p(t,["parameters","enhancePrompt"],A);const I=f(n,["labels"]);return t!==void 0&&I!=null&&p(t,["labels"],I),e}function EN(n,t){const e={},o=f(t,["model"]);o!=null&&p(e,["_url","model"],Yt(n,o));const r=f(t,["source"]);r!=null&&SN(r,e);const l=f(t,["config"]);return l!=null&&TN(l,e),e}function AN(n){const t={},e=f(n,["predictions"]);if(e!=null){let o=e;Array.isArray(o)&&(o=o.map(r=>qc(r))),p(t,["generatedImages"],o)}return t}function SN(n,t){const e={},o=f(n,["prompt"]);t!==void 0&&o!=null&&p(t,["instances[0]","prompt"],o);const r=f(n,["personImage"]);t!==void 0&&r!=null&&p(t,["instances[0]","personImage","image"],ei(r));const l=f(n,["productImages"]);if(t!==void 0&&l!=null){let c=l;Array.isArray(c)&&(c=c.map(d=>vN(d))),p(t,["instances[0]","productImages"],c)}return e}function CN(n){const t={},e=f(n,["referenceImage"]);e!=null&&p(t,["referenceImage"],ei(e));const o=f(n,["referenceId"]);o!=null&&p(t,["referenceId"],o);const r=f(n,["referenceType"]);r!=null&&p(t,["referenceType"],r);const l=f(n,["maskImageConfig"]);l!=null&&p(t,["maskImageConfig"],yN(l));const c=f(n,["controlImageConfig"]);c!=null&&p(t,["controlImageConfig"],cw(c));const d=f(n,["styleImageConfig"]);d!=null&&p(t,["styleImageConfig"],d);const y=f(n,["subjectImageConfig"]);return y!=null&&p(t,["subjectImageConfig"],y),t}function mE(n){const t={},e=f(n,["safetyAttributes","categories"]);e!=null&&p(t,["categories"],e);const o=f(n,["safetyAttributes","scores"]);o!=null&&p(t,["scores"],o);const r=f(n,["contentType"]);return r!=null&&p(t,["contentType"],r),t}function gE(n){const t={},e=f(n,["safetyAttributes","categories"]);e!=null&&p(t,["categories"],e);const o=f(n,["safetyAttributes","scores"]);o!=null&&p(t,["scores"],o);const r=f(n,["contentType"]);return r!=null&&p(t,["contentType"],r),t}function RN(n){const t={},e=f(n,["category"]);if(e!=null&&p(t,["category"],e),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=f(n,["threshold"]);return o!=null&&p(t,["threshold"],o),t}function IN(n){const t={},e=f(n,["image"]);return e!=null&&p(t,["image"],ei(e)),t}function wN(n,t){const e={},o=f(n,["mode"]);t!==void 0&&o!=null&&p(t,["parameters","mode"],o);const r=f(n,["maxPredictions"]);t!==void 0&&r!=null&&p(t,["parameters","maxPredictions"],r);const l=f(n,["confidenceThreshold"]);t!==void 0&&l!=null&&p(t,["parameters","confidenceThreshold"],l);const c=f(n,["maskDilation"]);t!==void 0&&c!=null&&p(t,["parameters","maskDilation"],c);const d=f(n,["binaryColorThreshold"]);t!==void 0&&d!=null&&p(t,["parameters","binaryColorThreshold"],d);const y=f(n,["labels"]);return t!==void 0&&y!=null&&p(t,["labels"],y),e}function NN(n,t){const e={},o=f(t,["model"]);o!=null&&p(e,["_url","model"],Yt(n,o));const r=f(t,["source"]);r!=null&&DN(r,e);const l=f(t,["config"]);return l!=null&&wN(l,e),e}function MN(n){const t={},e=f(n,["predictions"]);if(e!=null){let o=e;Array.isArray(o)&&(o=o.map(r=>tN(r))),p(t,["generatedMasks"],o)}return t}function DN(n,t){const e={},o=f(n,["prompt"]);t!==void 0&&o!=null&&p(t,["instances[0]","prompt"],o);const r=f(n,["image"]);t!==void 0&&r!=null&&p(t,["instances[0]","image"],ei(r));const l=f(n,["scribbleImage"]);return t!==void 0&&l!=null&&p(t,["instances[0]","scribble"],IN(l)),e}function bN(n){const t={},e=f(n,["retrievalConfig"]);e!=null&&p(t,["retrievalConfig"],e);const o=f(n,["functionCallingConfig"]);return o!=null&&p(t,["functionCallingConfig"],Vw(o)),t}function xN(n){const t={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const e=f(n,["computerUse"]);e!=null&&p(t,["computerUse"],e);const o=f(n,["fileSearch"]);o!=null&&p(t,["fileSearch"],o);const r=f(n,["codeExecution"]);if(r!=null&&p(t,["codeExecution"],r),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(n,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(E=>E)),p(t,["functionDeclarations"],v)}const c=f(n,["googleMaps"]);c!=null&&p(t,["googleMaps"],rN(c));const d=f(n,["googleSearch"]);d!=null&&p(t,["googleSearch"],aN(d));const y=f(n,["googleSearchRetrieval"]);y!=null&&p(t,["googleSearchRetrieval"],y);const m=f(n,["urlContext"]);return m!=null&&p(t,["urlContext"],m),t}function yE(n){const t={},e=f(n,["retrieval"]);e!=null&&p(t,["retrieval"],e);const o=f(n,["computerUse"]);if(o!=null&&p(t,["computerUse"],o),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=f(n,["codeExecution"]);r!=null&&p(t,["codeExecution"],r);const l=f(n,["enterpriseWebSearch"]);l!=null&&p(t,["enterpriseWebSearch"],l);const c=f(n,["functionDeclarations"]);if(c!=null){let E=c;Array.isArray(E)&&(E=E.map(A=>Pw(A))),p(t,["functionDeclarations"],E)}const d=f(n,["googleMaps"]);d!=null&&p(t,["googleMaps"],d);const y=f(n,["googleSearch"]);y!=null&&p(t,["googleSearch"],y);const m=f(n,["googleSearchRetrieval"]);m!=null&&p(t,["googleSearchRetrieval"],m);const v=f(n,["urlContext"]);return v!=null&&p(t,["urlContext"],v),t}function VN(n){const t={},e=f(n,["baseModel"]);e!=null&&p(t,["baseModel"],e);const o=f(n,["createTime"]);o!=null&&p(t,["createTime"],o);const r=f(n,["updateTime"]);return r!=null&&p(t,["updateTime"],r),t}function PN(n){const t={},e=f(n,["labels","google-vertex-llm-tuning-base-model-id"]);e!=null&&p(t,["baseModel"],e);const o=f(n,["createTime"]);o!=null&&p(t,["createTime"],o);const r=f(n,["updateTime"]);return r!=null&&p(t,["updateTime"],r),t}function UN(n,t){const e={},o=f(n,["displayName"]);t!==void 0&&o!=null&&p(t,["displayName"],o);const r=f(n,["description"]);t!==void 0&&r!=null&&p(t,["description"],r);const l=f(n,["defaultCheckpointId"]);return t!==void 0&&l!=null&&p(t,["defaultCheckpointId"],l),e}function LN(n,t){const e={},o=f(n,["displayName"]);t!==void 0&&o!=null&&p(t,["displayName"],o);const r=f(n,["description"]);t!==void 0&&r!=null&&p(t,["description"],r);const l=f(n,["defaultCheckpointId"]);return t!==void 0&&l!=null&&p(t,["defaultCheckpointId"],l),e}function kN(n,t){const e={},o=f(t,["model"]);o!=null&&p(e,["_url","name"],Yt(n,o));const r=f(t,["config"]);return r!=null&&UN(r,e),e}function ON(n,t){const e={},o=f(t,["model"]);o!=null&&p(e,["_url","model"],Yt(n,o));const r=f(t,["config"]);return r!=null&&LN(r,e),e}function qN(n,t){const e={},o=f(n,["outputGcsUri"]);t!==void 0&&o!=null&&p(t,["parameters","storageUri"],o);const r=f(n,["safetyFilterLevel"]);t!==void 0&&r!=null&&p(t,["parameters","safetySetting"],r);const l=f(n,["personGeneration"]);t!==void 0&&l!=null&&p(t,["parameters","personGeneration"],l);const c=f(n,["includeRaiReason"]);t!==void 0&&c!=null&&p(t,["parameters","includeRaiReason"],c);const d=f(n,["outputMimeType"]);t!==void 0&&d!=null&&p(t,["parameters","outputOptions","mimeType"],d);const y=f(n,["outputCompressionQuality"]);t!==void 0&&y!=null&&p(t,["parameters","outputOptions","compressionQuality"],y);const m=f(n,["enhanceInputImage"]);t!==void 0&&m!=null&&p(t,["parameters","upscaleConfig","enhanceInputImage"],m);const v=f(n,["imagePreservationFactor"]);t!==void 0&&v!=null&&p(t,["parameters","upscaleConfig","imagePreservationFactor"],v);const E=f(n,["labels"]);t!==void 0&&E!=null&&p(t,["labels"],E);const A=f(n,["numberOfImages"]);t!==void 0&&A!=null&&p(t,["parameters","sampleCount"],A);const I=f(n,["mode"]);return t!==void 0&&I!=null&&p(t,["parameters","mode"],I),e}function GN(n,t){const e={},o=f(t,["model"]);o!=null&&p(e,["_url","model"],Yt(n,o));const r=f(t,["image"]);r!=null&&p(e,["instances[0]","image"],ei(r));const l=f(t,["upscaleFactor"]);l!=null&&p(e,["parameters","upscaleConfig","upscaleFactor"],l);const c=f(t,["config"]);return c!=null&&qN(c,e),e}function BN(n){const t={},e=f(n,["sdkHttpResponse"]);e!=null&&p(t,["sdkHttpResponse"],e);const o=f(n,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>qc(l))),p(t,["generatedImages"],r)}return t}function FN(n){const t={},e=f(n,["uri"]);e!=null&&p(t,["uri"],e);const o=f(n,["encodedVideo"]);o!=null&&p(t,["videoBytes"],$o(o));const r=f(n,["encoding"]);return r!=null&&p(t,["mimeType"],r),t}function HN(n){const t={},e=f(n,["gcsUri"]);e!=null&&p(t,["uri"],e);const o=f(n,["bytesBase64Encoded"]);o!=null&&p(t,["videoBytes"],$o(o));const r=f(n,["mimeType"]);return r!=null&&p(t,["mimeType"],r),t}function zN(n){const t={},e=f(n,["image"]);e!=null&&p(t,["_self"],ei(e));const o=f(n,["maskMode"]);return o!=null&&p(t,["maskMode"],o),t}function YN(n){const t={},e=f(n,["image"]);e!=null&&p(t,["image"],Gc(e));const o=f(n,["referenceType"]);return o!=null&&p(t,["referenceType"],o),t}function JN(n){const t={},e=f(n,["image"]);e!=null&&p(t,["image"],ei(e));const o=f(n,["referenceType"]);return o!=null&&p(t,["referenceType"],o),t}function _E(n){const t={},e=f(n,["uri"]);e!=null&&p(t,["uri"],e);const o=f(n,["videoBytes"]);o!=null&&p(t,["encodedVideo"],$o(o));const r=f(n,["mimeType"]);return r!=null&&p(t,["encoding"],r),t}function vE(n){const t={},e=f(n,["uri"]);e!=null&&p(t,["gcsUri"],e);const o=f(n,["videoBytes"]);o!=null&&p(t,["bytesBase64Encoded"],$o(o));const r=f(n,["mimeType"]);return r!=null&&p(t,["mimeType"],r),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function KN(n,t){const e={},o=f(n,["displayName"]);return t!==void 0&&o!=null&&p(t,["displayName"],o),e}function QN(n){const t={},e=f(n,["config"]);return e!=null&&KN(e,t),t}function $N(n,t){const e={},o=f(n,["force"]);return t!==void 0&&o!=null&&p(t,["_query","force"],o),e}function XN(n){const t={},e=f(n,["name"]);e!=null&&p(t,["_url","name"],e);const o=f(n,["config"]);return o!=null&&$N(o,t),t}function WN(n){const t={},e=f(n,["name"]);return e!=null&&p(t,["_url","name"],e),t}function ZN(n,t){const e={},o=f(n,["customMetadata"]);if(t!==void 0&&o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),p(t,["customMetadata"],l)}const r=f(n,["chunkingConfig"]);return t!==void 0&&r!=null&&p(t,["chunkingConfig"],r),e}function jN(n){const t={},e=f(n,["name"]);e!=null&&p(t,["name"],e);const o=f(n,["metadata"]);o!=null&&p(t,["metadata"],o);const r=f(n,["done"]);r!=null&&p(t,["done"],r);const l=f(n,["error"]);l!=null&&p(t,["error"],l);const c=f(n,["response"]);return c!=null&&p(t,["response"],eM(c)),t}function tM(n){const t={},e=f(n,["fileSearchStoreName"]);e!=null&&p(t,["_url","file_search_store_name"],e);const o=f(n,["fileName"]);o!=null&&p(t,["fileName"],o);const r=f(n,["config"]);return r!=null&&ZN(r,t),t}function eM(n){const t={},e=f(n,["sdkHttpResponse"]);e!=null&&p(t,["sdkHttpResponse"],e);const o=f(n,["parent"]);o!=null&&p(t,["parent"],o);const r=f(n,["documentName"]);return r!=null&&p(t,["documentName"],r),t}function nM(n,t){const e={},o=f(n,["pageSize"]);t!==void 0&&o!=null&&p(t,["_query","pageSize"],o);const r=f(n,["pageToken"]);return t!==void 0&&r!=null&&p(t,["_query","pageToken"],r),e}function iM(n){const t={},e=f(n,["config"]);return e!=null&&nM(e,t),t}function oM(n){const t={},e=f(n,["sdkHttpResponse"]);e!=null&&p(t,["sdkHttpResponse"],e);const o=f(n,["nextPageToken"]);o!=null&&p(t,["nextPageToken"],o);const r=f(n,["fileSearchStores"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),p(t,["fileSearchStores"],l)}return t}function TE(n,t){const e={},o=f(n,["mimeType"]);t!==void 0&&o!=null&&p(t,["mimeType"],o);const r=f(n,["displayName"]);t!==void 0&&r!=null&&p(t,["displayName"],r);const l=f(n,["customMetadata"]);if(t!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(y=>y)),p(t,["customMetadata"],d)}const c=f(n,["chunkingConfig"]);return t!==void 0&&c!=null&&p(t,["chunkingConfig"],c),e}function sM(n){const t={},e=f(n,["fileSearchStoreName"]);e!=null&&p(t,["_url","file_search_store_name"],e);const o=f(n,["config"]);return o!=null&&TE(o,t),t}function rM(n){const t={},e=f(n,["sdkHttpResponse"]);return e!=null&&p(t,["sdkHttpResponse"],e),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const aM="Content-Type",lM="X-Server-Timeout",uM="User-Agent",Nh="x-goog-api-client",cM="1.37.0",fM=`google-genai-sdk/${cM}`,dM="v1beta1",hM="v1beta";class pM{constructor(t){var e,o;this.clientOptions=Object.assign(Object.assign({},t),{project:t.project,location:t.location,apiKey:t.apiKey,vertexai:t.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(e=this.clientOptions.apiVersion)!==null&&e!==void 0?e:dM,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:hM,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,t.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const t=new Headers;return await this.clientOptions.auth.addAuthHeaders(t),t}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&o.push(t.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),e=new URL(t);return e.protocol=e.protocol=="http:"?"ws":"wss",e.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,e,o){const r=[this.getRequestUrlInternal(e)];return o&&r.push(this.getBaseResourcePath()),t!==""&&r.push(t),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(t){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let e=this.clientOptions.httpOptions;t.httpOptions&&(e=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const o=this.shouldPrependVertexProjectPath(t),r=this.constructUrl(t.path,e,o);if(t.queryParams)for(const[c,d]of Object.entries(t.queryParams))r.searchParams.append(c,String(d));let l={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=t.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,e,r.toString(),t.abortSignal),this.unaryApiCall(r,l,t.httpMethod)}patchHttpOptions(t,e){const o=JSON.parse(JSON.stringify(t));for(const[r,l]of Object.entries(e))typeof l=="object"?o[r]=Object.assign(Object.assign({},o[r]),l):l!==void 0&&(o[r]=l);return o}async requestStream(t){let e=this.clientOptions.httpOptions;t.httpOptions&&(e=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const o=this.shouldPrependVertexProjectPath(t),r=this.constructUrl(t.path,e,o);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let l={};return l.body=t.body,l=await this.includeExtraHttpOptionsToRequestInit(l,e,r.toString(),t.abortSignal),this.streamApiCall(r,l,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,e,o,r){if(e&&e.timeout||r){const l=new AbortController,c=l.signal;if(e.timeout&&e?.timeout>0){const d=setTimeout(()=>l.abort(),e.timeout);d&&typeof d.unref=="function"&&d.unref()}r&&r.addEventListener("abort",()=>{l.abort()}),t.signal=c}return e&&e.extraBody!==null&&mM(t,e.extraBody),t.headers=await this.getHeadersInternal(e,o),t}async unaryApiCall(t,e,o){return this.apiCall(t.toString(),Object.assign(Object.assign({},e),{method:o})).then(async r=>(await Bv(r),new Sh(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(t,e,o){return this.apiCall(t.toString(),Object.assign(Object.assign({},e),{method:o})).then(async r=>(await Bv(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(t){return Zn(this,arguments,function*(){var o;const r=(o=t?.body)===null||o===void 0?void 0:o.getReader(),l=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let c="";const d="data:",y=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:m,value:v}=yield St(r.read());if(m){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const E=l.decode(v,{stream:!0});try{const P=JSON.parse(E);if("error"in P){const q=JSON.parse(JSON.stringify(P.error)),U=q.status,X=q.code,ot=`got status: ${U}. ${JSON.stringify(P)}`;if(X>=400&&X<600)throw new kc({message:ot,status:X})}}catch(P){if(P.name==="ApiError")throw P}c+=E;let A=-1,I=0;for(;;){A=-1,I=0;for(const U of y){const X=c.indexOf(U);X!==-1&&(A===-1||X<A)&&(A=X,I=U.length)}if(A===-1)break;const P=c.substring(0,A);c=c.substring(A+I);const q=P.trim();if(q.startsWith(d)){const U=q.substring(d.length).trim();try{const X=new Response(U,{headers:t?.headers,status:t?.status,statusText:t?.statusText});yield yield St(new Sh(X))}catch(X){throw new Error(`exception parsing stream chunk ${U}. ${X}`)}}}}}finally{r.releaseLock()}})}async apiCall(t,e){return fetch(t,e).catch(o=>{throw new Error(`exception ${o} sending request`)})}getDefaultHeaders(){const t={},e=fM+" "+this.clientOptions.userAgentExtra;return t[uM]=e,t[Nh]=e,t[aM]="application/json",t}async getHeadersInternal(t,e){const o=new Headers;if(t&&t.headers){for(const[r,l]of Object.entries(t.headers))o.append(r,l);t.timeout&&t.timeout>0&&o.append(lM,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(o,e),o}getFileName(t){var e;let o="";return typeof t=="string"&&(o=t.replace(/[/\\]+$/,""),o=(e=o.split(/[/\\]/).pop())!==null&&e!==void 0?e:""),o}async uploadFile(t,e){var o;const r={};e!=null&&(r.mimeType=e.mimeType,r.name=e.name,r.displayName=e.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const l=this.clientOptions.uploader,c=await l.stat(t);r.sizeBytes=String(c.size);const d=(o=e?.mimeType)!==null&&o!==void 0?o:c.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=d;const y={file:r},m=this.getFileName(t),v=ft("upload/v1beta/files",y._url),E=await this.fetchUploadUrl(v,r.sizeBytes,r.mimeType,m,y,e?.httpOptions);return l.upload(t,E,this)}async uploadFileToFileSearchStore(t,e,o){var r;const l=this.clientOptions.uploader,c=await l.stat(e),d=String(c.size),y=(r=o?.mimeType)!==null&&r!==void 0?r:c.type;if(y===void 0||y==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const m=`upload/v1beta/${t}:uploadToFileSearchStore`,v=this.getFileName(e),E={};o!=null&&TE(o,E);const A=await this.fetchUploadUrl(m,d,y,v,E,o?.httpOptions);return l.uploadToFileSearchStore(e,A,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,e,o,r,l,c){var d;let y={};c?y=c:y={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e}`,"X-Goog-Upload-Header-Content-Type":`${o}`},r?{"X-Goog-Upload-File-Name":r}:{})};const m=await this.request({path:t,body:JSON.stringify(l),httpMethod:"POST",httpOptions:y});if(!m||!m?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(d=m?.headers)===null||d===void 0?void 0:d["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function Bv(n){var t;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const e=n.status;let o;!((t=n.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?o=await n.json():o={error:{message:await n.text(),code:n.status,status:n.statusText}};const r=JSON.stringify(o);throw e>=400&&e<600?new kc({message:r,status:e}):new Error(r)}}function mM(n,t){if(!t||Object.keys(t).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let e={};if(typeof n.body=="string"&&n.body.length>0)try{const l=JSON.parse(n.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))e=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(l,c){const d=Object.assign({},l);for(const y in c)if(Object.prototype.hasOwnProperty.call(c,y)){const m=c[y],v=d[y];m&&typeof m=="object"&&!Array.isArray(m)&&v&&typeof v=="object"&&!Array.isArray(v)?d[y]=o(v,m):(v&&m&&typeof v!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${y}". Original type: ${typeof v}, New type: ${typeof m}. Overwriting.`),d[y]=m)}return d}const r=o(e,t);n.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const gM="mcp_used/unknown";let yM=!1;function EE(n){for(const t of n)if(_M(t)||typeof t=="object"&&"inputSchema"in t)return!0;return yM}function AE(n){var t;const e=(t=n[Nh])!==null&&t!==void 0?t:"";n[Nh]=(e+` ${gM}`).trimStart()}function _M(n){return n!==null&&typeof n=="object"&&n instanceof cp}function vM(n){return Zn(this,arguments,function*(e,o=100){let r,l=0;for(;l<o;){const c=yield St(e.listTools({cursor:r}));for(const d of c.tools)yield yield St(d),l++;if(!c.nextCursor)break;r=c.nextCursor}})}class cp{constructor(t=[],e){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=t,this.config=e}static create(t,e){return new cp(t,e)}async initialize(){var t,e,o,r;if(this.mcpTools.length>0)return;const l={},c=[];for(const v of this.mcpClients)try{for(var d=!0,y=(e=void 0,jn(vM(v))),m;m=await y.next(),t=m.done,!t;d=!0){r=m.value,d=!1;const E=r;c.push(E);const A=E.name;if(l[A])throw new Error(`Duplicate function name ${A} found in MCP tools. Please ensure function names are unique.`);l[A]=v}}catch(E){e={error:E}}finally{try{!d&&!t&&(o=y.return)&&await o.call(y)}finally{if(e)throw e.error}}this.mcpTools=c,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),XC(this.mcpTools,this.config)}async callTool(t){await this.initialize();const e=[];for(const o of t)if(o.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[o.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const c=await r.callTool({name:o.name,arguments:o.args},void 0,l);e.push({functionResponse:{name:o.name,response:c.isError?{error:c}:c}})}return e}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function TM(n,t,e){const o=new FC;let r;e.data instanceof Blob?r=JSON.parse(await e.data.text()):r=JSON.parse(e.data),Object.assign(o,r),t(o)}class EM{constructor(t,e,o){this.apiClient=t,this.auth=e,this.webSocketFactory=o}async connect(t){var e,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),c=CM(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),y=`${r}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${d}`;let m=()=>{};const v=new Promise(J=>{m=J}),E=t.callbacks,A=function(){m({})},I=this.apiClient,P={onopen:A,onmessage:J=>{TM(I,E.onmessage,J)},onerror:(e=E?.onerror)!==null&&e!==void 0?e:function(J){},onclose:(o=E?.onclose)!==null&&o!==void 0?o:function(J){}},q=this.webSocketFactory.create(y,SM(c),P);q.connect(),await v;const ot={setup:{model:Yt(this.apiClient,t.model)}};return q.send(JSON.stringify(ot)),new AM(q,this.apiClient)}}class AM{constructor(t,e){this.conn=t,this.apiClient=e}async setWeightedPrompts(t){if(!t.weightedPrompts||Object.keys(t.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const e=KI(t);this.conn.send(JSON.stringify({clientContent:e}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});const e=JI(t);this.conn.send(JSON.stringify(e))}sendPlaybackControl(t){const e={playbackControl:t};this.conn.send(JSON.stringify(e))}play(){this.sendPlaybackControl(Dr.PLAY)}pause(){this.sendPlaybackControl(Dr.PAUSE)}stop(){this.sendPlaybackControl(Dr.STOP)}resetContext(){this.sendPlaybackControl(Dr.RESET_CONTEXT)}close(){this.conn.close()}}function SM(n){const t={};return n.forEach((e,o)=>{t[o]=e}),t}function CM(n){const t=new Headers;for(const[e,o]of Object.entries(n))t.append(e,o);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const RM="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function IM(n,t,e){const o=new BC;let r;e.data instanceof Blob?r=await e.data.text():e.data instanceof ArrayBuffer?r=new TextDecoder().decode(e.data):r=e.data;const l=JSON.parse(r);if(n.isVertexAI()){const c=XI(l);Object.assign(o,c)}else Object.assign(o,l);t(o)}class wM{constructor(t,e,o){this.apiClient=t,this.auth=e,this.webSocketFactory=o,this.music=new EM(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var e,o,r,l,c,d;if(t.config&&t.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const y=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let v;const E=this.apiClient.getHeaders();t.config&&t.config.tools&&EE(t.config.tools)&&AE(E);const A=bM(E);if(this.apiClient.isVertexAI())v=`${y}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(A,v);else{const N=this.apiClient.getApiKey();let V="BidiGenerateContent",L="key";N?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),m!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),V="BidiGenerateContentConstrained",L="access_token"),v=`${y}/ws/google.ai.generativelanguage.${m}.GenerativeService.${V}?${L}=${N}`}let I=()=>{};const P=new Promise(N=>{I=N}),q=t.callbacks,U=function(){var N;(N=q?.onopen)===null||N===void 0||N.call(q),I({})},X=this.apiClient,ot={onopen:U,onmessage:N=>{IM(X,q.onmessage,N)},onerror:(e=q?.onerror)!==null&&e!==void 0?e:function(N){},onclose:(o=q?.onclose)!==null&&o!==void 0?o:function(N){}},J=this.webSocketFactory.create(v,DM(A),ot);J.connect(),await P;let et=Yt(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&et.startsWith("publishers/")){const N=this.apiClient.getProject(),V=this.apiClient.getLocation();et=`projects/${N}/locations/${V}/`+et}let ct={};this.apiClient.isVertexAI()&&((r=t.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[Ec.AUDIO]}:t.config.responseModalities=[Ec.AUDIO]),!((l=t.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const at=(d=(c=t.config)===null||c===void 0?void 0:c.tools)!==null&&d!==void 0?d:[],D=[];for(const N of at)if(this.isCallableTool(N)){const V=N;D.push(await V.tool())}else D.push(N);D.length>0&&(t.config.tools=D);const M={model:et,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?ct=YI(this.apiClient,M):ct=zI(this.apiClient,M),delete ct.config,J.send(JSON.stringify(ct)),new MM(J,this.apiClient)}isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}}const NM={turnComplete:!0};class MM{constructor(t,e){this.conn=t,this.apiClient=e}tLiveClientContent(t,e){if(e.turns!==null&&e.turns!==void 0){let o=[];try{o=Fn(e.turns),t.isVertexAI()||(o=o.map(r=>Oc(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof e.turns}'`)}return{clientContent:{turns:o,turnComplete:e.turnComplete}}}return{clientContent:{turnComplete:e.turnComplete}}}tLiveClienttToolResponse(t,e){let o=[];if(e.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(e.functionResponses)?o=e.functionResponses:o=[e.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const l of o){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!t.isVertexAI()&&!("id"in l))throw new Error(RM)}return{toolResponse:{functionResponses:o}}}sendClientContent(t){t=Object.assign(Object.assign({},NM),t);const e=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(e))}sendRealtimeInput(t){let e={};this.apiClient.isVertexAI()?e={realtimeInput:$I(t)}:e={realtimeInput:QI(t)},this.conn.send(JSON.stringify(e))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");const e=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(e))}close(){this.conn.close()}}function DM(n){const t={};return n.forEach((e,o)=>{t[o]=e}),t}function bM(n){const t=new Headers;for(const[e,o]of Object.entries(n))t.append(e,o);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Fv=10;function Hv(n){var t,e,o;if(!((t=n?.automaticFunctionCalling)===null||t===void 0)&&t.disable)return!0;let r=!1;for(const c of(e=n?.tools)!==null&&e!==void 0?e:[])if(Vr(c)){r=!0;break}if(!r)return!0;const l=(o=n?.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function Vr(n){return"callTool"in n&&typeof n.callTool=="function"}function xM(n){var t,e,o;return(o=(e=(t=n.config)===null||t===void 0?void 0:t.tools)===null||e===void 0?void 0:e.some(r=>Vr(r)))!==null&&o!==void 0?o:!1}function zv(n){var t;const e=[];return!((t=n?.config)===null||t===void 0)&&t.tools&&n.config.tools.forEach((o,r)=>{if(Vr(o))return;const l=o;l.functionDeclarations&&l.functionDeclarations.length>0&&e.push(r)}),e}function Yv(n){var t;return!(!((t=n?.automaticFunctionCalling)===null||t===void 0)&&t.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class VM extends Xi{constructor(t){super(),this.apiClient=t,this.generateContent=async e=>{var o,r,l,c,d;const y=await this.processParamsMaybeAddMcpUsage(e);if(this.maybeMoveToResponseJsonSchem(e),!xM(e)||Hv(e.config))return await this.generateContentInternal(y);const m=zv(e);if(m.length>0){const q=m.map(U=>`tools[${U}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${q}.`)}let v,E;const A=Fn(y.contents),I=(l=(r=(o=y.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&l!==void 0?l:Fv;let P=0;for(;P<I&&(v=await this.generateContentInternal(y),!(!v.functionCalls||v.functionCalls.length===0));){const q=v.candidates[0].content,U=[];for(const X of(d=(c=e.config)===null||c===void 0?void 0:c.tools)!==null&&d!==void 0?d:[])if(Vr(X)){const J=await X.callTool(v.functionCalls);U.push(...J)}P++,E={role:"user",parts:U},y.contents=Fn(y.contents),y.contents.push(q),y.contents.push(E),Yv(y.config)&&(A.push(q),A.push(E))}return Yv(y.config)&&(v.automaticFunctionCallingHistory=A),v},this.generateContentStream=async e=>{var o,r,l,c,d;if(this.maybeMoveToResponseJsonSchem(e),Hv(e.config)){const E=await this.processParamsMaybeAddMcpUsage(e);return await this.generateContentStreamInternal(E)}const y=zv(e);if(y.length>0){const E=y.map(A=>`tools[${A}]`).join(", ");throw new Error(`Incompatible tools found at ${E}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const m=(l=(r=(o=e?.config)===null||o===void 0?void 0:o.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||l===void 0?void 0:l.streamFunctionCallArguments,v=(d=(c=e?.config)===null||c===void 0?void 0:c.automaticFunctionCalling)===null||d===void 0?void 0:d.disable;if(m&&!v)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(e)},this.generateImages=async e=>await this.generateImagesInternal(e).then(o=>{var r;let l;const c=[];if(o?.generatedImages)for(const y of o.generatedImages)y&&y?.safetyAttributes&&((r=y?.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?l=y?.safetyAttributes:c.push(y);let d;return l?d={generatedImages:c,positivePromptSafetyAttributes:l,sdkHttpResponse:o.sdkHttpResponse}:d={generatedImages:c,sdkHttpResponse:o.sdkHttpResponse},d}),this.list=async e=>{var o;const c={config:Object.assign(Object.assign({},{queryBase:!0}),e?.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((o=c.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new Vs(Ji.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(c),c)},this.editImage=async e=>{const o={model:e.model,prompt:e.prompt,referenceImages:[],config:e.config};return e.referenceImages&&e.referenceImages&&(o.referenceImages=e.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async e=>{let o={numberOfImages:1,mode:"upscale"};e.config&&(o=Object.assign(Object.assign({},o),e.config));const r={model:e.model,image:e.image,upscaleFactor:e.upscaleFactor,config:o};return await this.upscaleImageInternal(r)},this.generateVideos=async e=>{var o,r,l,c,d,y;if((e.prompt||e.image||e.video)&&e.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((o=e.video)===null||o===void 0)&&o.uri&&(!((r=e.video)===null||r===void 0)&&r.videoBytes)?e.video={uri:e.video.uri,mimeType:e.video.mimeType}:!((c=(l=e.source)===null||l===void 0?void 0:l.video)===null||c===void 0)&&c.uri&&(!((y=(d=e.source)===null||d===void 0?void 0:d.video)===null||y===void 0)&&y.videoBytes)&&(e.source.video={uri:e.source.video.uri,mimeType:e.source.video.mimeType})),await this.generateVideosInternal(e)}}maybeMoveToResponseJsonSchem(t){t.config&&t.config.responseSchema&&(t.config.responseJsonSchema||Object.keys(t.config.responseSchema).includes("$schema")&&(t.config.responseJsonSchema=t.config.responseSchema,delete t.config.responseSchema))}async processParamsMaybeAddMcpUsage(t){var e,o,r;const l=(e=t.config)===null||e===void 0?void 0:e.tools;if(!l)return t;const c=await Promise.all(l.map(async y=>Vr(y)?await y.tool():y)),d={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:c})};if(d.config.tools=c,t.config&&t.config.tools&&EE(t.config.tools)){const y=(r=(o=t.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&r!==void 0?r:{};let m=Object.assign({},y);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),AE(m),d.config.httpOptions=Object.assign(Object.assign({},t.config.httpOptions),{headers:m})}return d}async initAfcToolsMap(t){var e,o,r;const l=new Map;for(const c of(o=(e=t.config)===null||e===void 0?void 0:e.tools)!==null&&o!==void 0?o:[])if(Vr(c)){const d=c,y=await d.tool();for(const m of(r=y.functionDeclarations)!==null&&r!==void 0?r:[]){if(!m.name)throw new Error("Function declaration name is required.");if(l.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);l.set(m.name,d)}}return l}async processAfcStream(t){var e,o,r;const l=(r=(o=(e=t.config)===null||e===void 0?void 0:e.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&r!==void 0?r:Fv;let c=!1,d=0;const y=await this.initAfcToolsMap(t);return(function(m,v,E){return Zn(this,arguments,function*(){for(var A,I,P,q,U,X;d<l;){c&&(d++,c=!1);const ct=yield St(m.processParamsMaybeAddMcpUsage(E)),at=yield St(m.generateContentStreamInternal(ct)),D=[],M=[];try{for(var ot=!0,J=(I=void 0,jn(at)),et;et=yield St(J.next()),A=et.done,!A;ot=!0){q=et.value,ot=!1;const N=q;if(yield yield St(N),N.candidates&&(!((U=N.candidates[0])===null||U===void 0)&&U.content)){M.push(N.candidates[0].content);for(const V of(X=N.candidates[0].content.parts)!==null&&X!==void 0?X:[])if(d<l&&V.functionCall){if(!V.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(V.functionCall.name)){const L=yield St(v.get(V.functionCall.name).callTool([V.functionCall]));D.push(...L)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${V.functionCall.name}`)}}}}catch(N){I={error:N}}finally{try{!ot&&!A&&(P=J.return)&&(yield St(P.call(J)))}finally{if(I)throw I.error}}if(D.length>0){c=!0;const N=new nl;N.candidates=[{content:{role:"user",parts:D}}],yield yield St(N);const V=[];V.push(...M),V.push({role:"user",parts:D});const L=Fn(E.contents).concat(V);E.contents=L}else break}})})(this,y,t)}async generateContentInternal(t){var e,o,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=Ov(this.apiClient,t);return d=ft("{model}:generateContent",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=Gv(v),A=new nl;return Object.assign(A,E),A})}else{const m=kv(this.apiClient,t);return d=ft("{model}:generateContent",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=qv(v),A=new nl;return Object.assign(A,E),A})}}async generateContentStreamInternal(t){var e,o,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=Ov(this.apiClient,t);return d=ft("{model}:streamGenerateContent?alt=sse",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.requestStream({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}),c.then(function(E){return Zn(this,arguments,function*(){var A,I,P,q;try{for(var U=!0,X=jn(E),ot;ot=yield St(X.next()),A=ot.done,!A;U=!0){q=ot.value,U=!1;const J=q,et=Gv(yield St(J.json()));et.sdkHttpResponse={headers:J.headers};const ct=new nl;Object.assign(ct,et),yield yield St(ct)}}catch(J){I={error:J}}finally{try{!U&&!A&&(P=X.return)&&(yield St(P.call(X)))}finally{if(I)throw I.error}}})})}else{const m=kv(this.apiClient,t);return d=ft("{model}:streamGenerateContent?alt=sse",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.requestStream({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}),c.then(function(E){return Zn(this,arguments,function*(){var A,I,P,q;try{for(var U=!0,X=jn(E),ot;ot=yield St(X.next()),A=ot.done,!A;U=!0){q=ot.value,U=!1;const J=q,et=qv(yield St(J.json()));et.sdkHttpResponse={headers:J.headers};const ct=new nl;Object.assign(ct,et),yield yield St(ct)}}catch(J){I={error:J}}finally{try{!U&&!A&&(P=X.return)&&(yield St(P.call(X)))}finally{if(I)throw I.error}}})})}}async embedContent(t){var e,o,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=ww(this.apiClient,t);return d=ft("{model}:predict",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=Mw(v),A=new Tv;return Object.assign(A,E),A})}else{const m=Iw(this.apiClient,t);return d=ft("{model}:batchEmbedContents",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=Nw(v),A=new Tv;return Object.assign(A,E),A})}}async generateImagesInternal(t){var e,o,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=Gw(this.apiClient,t);return d=ft("{model}:predict",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=Fw(v),A=new Ev;return Object.assign(A,E),A})}else{const m=qw(this.apiClient,t);return d=ft("{model}:predict",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=Bw(v),A=new Ev;return Object.assign(A,E),A})}}async editImageInternal(t){var e,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=Aw(this.apiClient,t);return l=ft("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:y.headers},v})),r.then(y=>{const m=Sw(y),v=new DC;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var e,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=GN(this.apiClient,t);return l=ft("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:y.headers},v})),r.then(y=>{const m=BN(y),v=new bC;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(t){var e,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=EN(this.apiClient,t);return l=ft("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>{const m=AN(y),v=new xC;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(t){var e,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=NN(this.apiClient,t);return l=ft("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>{const m=MN(y),v=new VC;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var e,o,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=sN(this.apiClient,t);return d=ft("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>wh(v))}else{const m=oN(this.apiClient,t);return d=ft("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>Ih(v))}}async listInternal(t){var e,o,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=pN(this.apiClient,t);return d=ft("{models_url}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=gN(v),A=new Av;return Object.assign(A,E),A})}else{const m=hN(this.apiClient,t);return d=ft("{models_url}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=mN(v),A=new Av;return Object.assign(A,E),A})}}async update(t){var e,o,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=ON(this.apiClient,t);return d=ft("{model}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>wh(v))}else{const m=kN(this.apiClient,t);return d=ft("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>Ih(v))}}async delete(t){var e,o,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=_w(this.apiClient,t);return d=ft("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=Tw(v),A=new Sv;return Object.assign(A,E),A})}else{const m=yw(this.apiClient,t);return d=ft("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=vw(v),A=new Sv;return Object.assign(A,E),A})}}async countTokens(t){var e,o,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=pw(this.apiClient,t);return d=ft("{model}:countTokens",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=gw(v),A=new Cv;return Object.assign(A,E),A})}else{const m=hw(this.apiClient,t);return d=ft("{model}:countTokens",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=mw(v),A=new Cv;return Object.assign(A,E),A})}}async computeTokens(t){var e,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=rw(this.apiClient,t);return l=ft("{model}:computeTokens",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:y.headers},v})),r.then(y=>{const m=aw(y),v=new PC;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(t){var e,o,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=Qw(this.apiClient,t);return d=ft("{model}:predictLongRunning",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>{const E=Jw(v),A=new Ac;return Object.assign(A,E),A})}else{const m=Kw(this.apiClient,t);return d=ft("{model}:predictLongRunning",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>{const E=Yw(v),A=new Ac;return Object.assign(A,E),A})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class PM extends Xi{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){const e=t.operation,o=t.config;if(e.name===void 0||e.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=e.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:e.name,resourceName:r,config:{httpOptions:l}});return e._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:e.name,config:o});return e._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(t){const e=t.operation,o=t.config;if(e.name===void 0||e.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=e.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:e.name,resourceName:r,config:{httpOptions:l}});return e._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:e.name,config:o});return e._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(t){var e,o,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=CC(t);return d=ft("{operationName}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c}else{const m=SC(t);return d=ft("{operationName}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c}}async fetchPredictVideosOperationInternal(t){var e,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=gC(t);return l=ft("{resourceName}:fetchPredictOperation",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function UM(n){const t={},e=f(n,["data"]);if(e!=null&&p(t,["data"],e),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(n,["mimeType"]);return o!=null&&p(t,["mimeType"],o),t}function LM(n){const t={},e=f(n,["parts"]);if(e!=null){let r=e;Array.isArray(r)&&(r=r.map(l=>YM(l))),p(t,["parts"],r)}const o=f(n,["role"]);return o!=null&&p(t,["role"],o),t}function kM(n,t,e){const o={},r=f(t,["expireTime"]);e!==void 0&&r!=null&&p(e,["expireTime"],r);const l=f(t,["newSessionExpireTime"]);e!==void 0&&l!=null&&p(e,["newSessionExpireTime"],l);const c=f(t,["uses"]);e!==void 0&&c!=null&&p(e,["uses"],c);const d=f(t,["liveConnectConstraints"]);e!==void 0&&d!=null&&p(e,["bidiGenerateContentSetup"],zM(n,d));const y=f(t,["lockAdditionalFields"]);return e!==void 0&&y!=null&&p(e,["fieldMask"],y),o}function OM(n,t){const e={},o=f(t,["config"]);return o!=null&&p(e,["config"],kM(n,o,e)),e}function qM(n){const t={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const e=f(n,["fileUri"]);e!=null&&p(t,["fileUri"],e);const o=f(n,["mimeType"]);return o!=null&&p(t,["mimeType"],o),t}function GM(n){const t={},e=f(n,["id"]);e!=null&&p(t,["id"],e);const o=f(n,["args"]);o!=null&&p(t,["args"],o);const r=f(n,["name"]);if(r!=null&&p(t,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function BM(n){const t={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const e=f(n,["enableWidget"]);return e!=null&&p(t,["enableWidget"],e),t}function FM(n){const t={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const e=f(n,["timeRangeFilter"]);return e!=null&&p(t,["timeRangeFilter"],e),t}function HM(n,t){const e={},o=f(n,["generationConfig"]);t!==void 0&&o!=null&&p(t,["setup","generationConfig"],o);const r=f(n,["responseModalities"]);t!==void 0&&r!=null&&p(t,["setup","generationConfig","responseModalities"],r);const l=f(n,["temperature"]);t!==void 0&&l!=null&&p(t,["setup","generationConfig","temperature"],l);const c=f(n,["topP"]);t!==void 0&&c!=null&&p(t,["setup","generationConfig","topP"],c);const d=f(n,["topK"]);t!==void 0&&d!=null&&p(t,["setup","generationConfig","topK"],d);const y=f(n,["maxOutputTokens"]);t!==void 0&&y!=null&&p(t,["setup","generationConfig","maxOutputTokens"],y);const m=f(n,["mediaResolution"]);t!==void 0&&m!=null&&p(t,["setup","generationConfig","mediaResolution"],m);const v=f(n,["seed"]);t!==void 0&&v!=null&&p(t,["setup","generationConfig","seed"],v);const E=f(n,["speechConfig"]);t!==void 0&&E!=null&&p(t,["setup","generationConfig","speechConfig"],up(E));const A=f(n,["thinkingConfig"]);t!==void 0&&A!=null&&p(t,["setup","generationConfig","thinkingConfig"],A);const I=f(n,["enableAffectiveDialog"]);t!==void 0&&I!=null&&p(t,["setup","generationConfig","enableAffectiveDialog"],I);const P=f(n,["systemInstruction"]);t!==void 0&&P!=null&&p(t,["setup","systemInstruction"],LM(nn(P)));const q=f(n,["tools"]);if(t!==void 0&&q!=null){let at=Yr(q);Array.isArray(at)&&(at=at.map(D=>KM(zr(D)))),p(t,["setup","tools"],at)}const U=f(n,["sessionResumption"]);t!==void 0&&U!=null&&p(t,["setup","sessionResumption"],JM(U));const X=f(n,["inputAudioTranscription"]);t!==void 0&&X!=null&&p(t,["setup","inputAudioTranscription"],X);const ot=f(n,["outputAudioTranscription"]);t!==void 0&&ot!=null&&p(t,["setup","outputAudioTranscription"],ot);const J=f(n,["realtimeInputConfig"]);t!==void 0&&J!=null&&p(t,["setup","realtimeInputConfig"],J);const et=f(n,["contextWindowCompression"]);t!==void 0&&et!=null&&p(t,["setup","contextWindowCompression"],et);const ct=f(n,["proactivity"]);if(t!==void 0&&ct!=null&&p(t,["setup","proactivity"],ct),f(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return e}function zM(n,t){const e={},o=f(t,["model"]);o!=null&&p(e,["setup","model"],Yt(n,o));const r=f(t,["config"]);return r!=null&&p(e,["config"],HM(r,e)),e}function YM(n){const t={},e=f(n,["mediaResolution"]);e!=null&&p(t,["mediaResolution"],e);const o=f(n,["codeExecutionResult"]);o!=null&&p(t,["codeExecutionResult"],o);const r=f(n,["executableCode"]);r!=null&&p(t,["executableCode"],r);const l=f(n,["fileData"]);l!=null&&p(t,["fileData"],qM(l));const c=f(n,["functionCall"]);c!=null&&p(t,["functionCall"],GM(c));const d=f(n,["functionResponse"]);d!=null&&p(t,["functionResponse"],d);const y=f(n,["inlineData"]);y!=null&&p(t,["inlineData"],UM(y));const m=f(n,["text"]);m!=null&&p(t,["text"],m);const v=f(n,["thought"]);v!=null&&p(t,["thought"],v);const E=f(n,["thoughtSignature"]);E!=null&&p(t,["thoughtSignature"],E);const A=f(n,["videoMetadata"]);return A!=null&&p(t,["videoMetadata"],A),t}function JM(n){const t={},e=f(n,["handle"]);if(e!=null&&p(t,["handle"],e),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function KM(n){const t={};if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const e=f(n,["computerUse"]);e!=null&&p(t,["computerUse"],e);const o=f(n,["fileSearch"]);o!=null&&p(t,["fileSearch"],o);const r=f(n,["codeExecution"]);if(r!=null&&p(t,["codeExecution"],r),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=f(n,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(E=>E)),p(t,["functionDeclarations"],v)}const c=f(n,["googleMaps"]);c!=null&&p(t,["googleMaps"],BM(c));const d=f(n,["googleSearch"]);d!=null&&p(t,["googleSearch"],FM(d));const y=f(n,["googleSearchRetrieval"]);y!=null&&p(t,["googleSearchRetrieval"],y);const m=f(n,["urlContext"]);return m!=null&&p(t,["urlContext"],m),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function QM(n){const t=[];for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e)){const o=n[e];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const r=Object.keys(o).map(l=>`${e}.${l}`);t.push(...r)}else t.push(e)}return t.join(",")}function $M(n,t){let e=null;const o=n.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const l=o.setup;typeof l=="object"&&l!==null?(n.bidiGenerateContentSetup=l,e=l):delete n.bidiGenerateContentSetup}else o!==void 0&&delete n.bidiGenerateContentSetup;const r=n.fieldMask;if(e){const l=QM(e);if(Array.isArray(t?.lockAdditionalFields)&&t?.lockAdditionalFields.length===0)l?n.fieldMask=l:delete n.fieldMask;else if(t?.lockAdditionalFields&&t.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];r.length>0&&(d=r.map(m=>c.includes(m)?`generationConfig.${m}`:m));const y=[];l&&y.push(l),d.length>0&&y.push(...d),y.length>0?n.fieldMask=y.join(","):delete n.fieldMask}else delete n.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?n.fieldMask=r.join(","):delete n.fieldMask;return n}class XM extends Xi{constructor(t){super(),this.apiClient=t}async create(t){var e,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=OM(this.apiClient,t);l=ft("auth_tokens",d._url),c=d._query,delete d.config,delete d._url,delete d._query;const y=$M(d,t.config);return r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),r.then(m=>m)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function WM(n,t){const e={},o=f(n,["force"]);return t!==void 0&&o!=null&&p(t,["_query","force"],o),e}function ZM(n){const t={},e=f(n,["name"]);e!=null&&p(t,["_url","name"],e);const o=f(n,["config"]);return o!=null&&WM(o,t),t}function jM(n){const t={},e=f(n,["name"]);return e!=null&&p(t,["_url","name"],e),t}function tD(n,t){const e={},o=f(n,["pageSize"]);t!==void 0&&o!=null&&p(t,["_query","pageSize"],o);const r=f(n,["pageToken"]);return t!==void 0&&r!=null&&p(t,["_query","pageToken"],r),e}function eD(n){const t={},e=f(n,["parent"]);e!=null&&p(t,["_url","parent"],e);const o=f(n,["config"]);return o!=null&&tD(o,t),t}function nD(n){const t={},e=f(n,["sdkHttpResponse"]);e!=null&&p(t,["sdkHttpResponse"],e);const o=f(n,["nextPageToken"]);o!=null&&p(t,["nextPageToken"],o);const r=f(n,["documents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),p(t,["documents"],l)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class iD extends Xi{constructor(t){super(),this.apiClient=t,this.list=async e=>new Vs(Ji.PAGED_ITEM_DOCUMENTS,o=>this.listInternal({parent:e.parent,config:o.config}),await this.listInternal(e),e)}async get(t){var e,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=jM(t);return l=ft("{name}",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>y)}}async delete(t){var e,o;let r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=ZM(t);r=ft("{name}",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(t){var e,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=eD(t);return l=ft("{parent}/documents",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>{const m=nD(y),v=new UC;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class oD extends Xi{constructor(t,e=new iD(t)){super(),this.apiClient=t,this.documents=e,this.list=async(o={})=>new Vs(Ji.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(o),o)}async uploadToFileSearchStore(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(t.fileSearchStoreName,t.file,t.config)}async create(t){var e,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=QN(t);return l=ft("fileSearchStores",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>y)}}async get(t){var e,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=WN(t);return l=ft("{name}",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>y)}}async delete(t){var e,o;let r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=XN(t);r=ft("{name}",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(t){var e,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=iM(t);return l=ft("fileSearchStores",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>{const m=oM(y),v=new LC;return Object.assign(v,m),v})}}async uploadToFileSearchStoreInternal(t){var e,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=sM(t);return l=ft("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>{const m=rM(y),v=new kC;return Object.assign(v,m),v})}}async importFile(t){var e,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=tM(t);return l=ft("{file_search_store_name}:importFile",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>{const m=jN(y),v=new op;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let SE=function(){const{crypto:n}=globalThis;if(n?.randomUUID)return SE=n.randomUUID.bind(n),n.randomUUID();const t=new Uint8Array(1),e=n?()=>n.getRandomValues(t)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,o=>(+o^e()&15>>+o/4).toString(16))};const sD=()=>SE();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Mh(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const Dh=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const t=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(t.stack=n.stack),n.cause&&!t.cause&&(t.cause=n.cause),n.name&&(t.name=n.name),t}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Hn extends Error{}class fn extends Hn{constructor(t,e,o,r){super(`${fn.makeMessage(t,e,o)}`),this.status=t,this.headers=r,this.error=e}static makeMessage(t,e,o){const r=e?.message?typeof e.message=="string"?e.message:JSON.stringify(e.message):e?JSON.stringify(e):o;return t&&r?`${t} ${r}`:t?`${t} status code (no body)`:r||"(no status code or body)"}static generate(t,e,o,r){if(!t||!r)return new Bc({message:o,cause:Dh(e)});const l=e;return t===400?new RE(t,l,o,r):t===401?new IE(t,l,o,r):t===403?new wE(t,l,o,r):t===404?new NE(t,l,o,r):t===409?new ME(t,l,o,r):t===422?new DE(t,l,o,r):t===429?new bE(t,l,o,r):t>=500?new xE(t,l,o,r):new fn(t,l,o,r)}}class bh extends fn{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0)}}class Bc extends fn{constructor({message:t,cause:e}){super(void 0,void 0,t||"Connection error.",void 0),e&&(this.cause=e)}}class CE extends Bc{constructor({message:t}={}){super({message:t??"Request timed out."})}}class RE extends fn{}class IE extends fn{}class wE extends fn{}class NE extends fn{}class ME extends fn{}class DE extends fn{}class bE extends fn{}class xE extends fn{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const rD=/^[a-z][a-z0-9+.-]*:/i,aD=n=>rD.test(n);let xh=n=>(xh=Array.isArray,xh(n));const lD=xh;let uD=lD;const Jv=uD;function cD(n){if(!n)return!0;for(const t in n)return!1;return!0}function fD(n,t){return Object.prototype.hasOwnProperty.call(n,t)}const dD=(n,t)=>{if(typeof t!="number"||!Number.isInteger(t))throw new Hn(`${n} must be an integer`);if(t<0)throw new Hn(`${n} must be a positive integer`);return t},hD=n=>{try{return JSON.parse(n)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const pD=n=>new Promise(t=>setTimeout(t,n));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ir="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mD(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const gD=()=>{var n,t,e,o,r;const l=mD();if(l==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ir,"X-Stainless-OS":Qv(Deno.build.os),"X-Stainless-Arch":Kv(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(t=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&t!==void 0?t:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ir,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(l==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ir,"X-Stainless-OS":Qv((e=globalThis.process.platform)!==null&&e!==void 0?e:"unknown"),"X-Stainless-Arch":Kv((o=globalThis.process.arch)!==null&&o!==void 0?o:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const c=yD();return c?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ir,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${c.browser}`,"X-Stainless-Runtime-Version":c.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ir,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function yD(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:e}of n){const o=e.exec(navigator.userAgent);if(o){const r=o[1]||0,l=o[2]||0,c=o[3]||0;return{browser:t,version:`${r}.${l}.${c}`}}}return null}const Kv=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",Qv=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let oc;const _D=()=>oc??(oc=gD());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vD(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function VE(...n){const t=globalThis.ReadableStream;if(typeof t>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new t(...n)}function TD(n){let t=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return VE({start(){},async pull(e){const{done:o,value:r}=await t.next();o?e.close():e.enqueue(r)},async cancel(){var e;await((e=t.return)===null||e===void 0?void 0:e.call(t))}})}function PE(n){if(n[Symbol.asyncIterator])return n;const t=n.getReader();return{async next(){try{const e=await t.read();return e?.done&&t.releaseLock(),e}catch(e){throw t.releaseLock(),e}},async return(){const e=t.cancel();return t.releaseLock(),await e,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function ED(n){var t,e;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((e=(t=n[Symbol.asyncIterator]()).return)===null||e===void 0?void 0:e.call(t));return}const o=n.getReader(),r=o.cancel();o.releaseLock(),await r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const AD=({headers:n,body:t})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(t)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const UE=()=>{var n;if(typeof File>"u"){const{process:t}=globalThis,e=typeof((n=t?.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(e?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function fh(n,t,e){return UE(),new File(n,t??"unknown_file",e)}function SD(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const CD=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const LE=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",RD=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&LE(n),ID=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function wD(n,t,e){if(UE(),n=await n,RD(n))return n instanceof File?n:fh([await n.arrayBuffer()],n.name);if(ID(n)){const r=await n.blob();return t||(t=new URL(n.url).pathname.split(/[\\/]/).pop()),fh(await Vh(r),t,e)}const o=await Vh(n);if(t||(t=SD(n)),!e?.type){const r=o.find(l=>typeof l=="object"&&"type"in l&&l.type);typeof r=="string"&&(e=Object.assign(Object.assign({},e),{type:r}))}return fh(o,t,e)}async function Vh(n){var t,e,o,r,l;let c=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)c.push(n);else if(LE(n))c.push(n instanceof Blob?n:await n.arrayBuffer());else if(CD(n))try{for(var d=!0,y=jn(n),m;m=await y.next(),t=m.done,!t;d=!0){r=m.value,d=!1;const v=r;c.push(...await Vh(v))}}catch(v){e={error:v}}finally{try{!d&&!t&&(o=y.return)&&await o.call(y)}finally{if(e)throw e.error}}else{const v=(l=n?.constructor)===null||l===void 0?void 0:l.name;throw new Error(`Unexpected data type: ${typeof n}${v?`; constructor: ${v}`:""}${ND(n)}`)}return c}function ND(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(e=>`"${e}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kE{constructor(t){this._client=t}}kE._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function OE(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const $v=Object.freeze(Object.create(null)),MD=(n=OE)=>(function(e,...o){if(e.length===1)return e[0];let r=!1;const l=[],c=e.reduce((v,E,A)=>{var I,P,q;/[?#]/.test(E)&&(r=!0);const U=o[A];let X=(r?encodeURIComponent:n)(""+U);return A!==o.length&&(U==null||typeof U=="object"&&U.toString===((q=Object.getPrototypeOf((P=Object.getPrototypeOf((I=U.hasOwnProperty)!==null&&I!==void 0?I:$v))!==null&&P!==void 0?P:$v))===null||q===void 0?void 0:q.toString))&&(X=U+"",l.push({start:v.length+E.length,length:X.length,error:`Value of type ${Object.prototype.toString.call(U).slice(8,-1)} is not a valid path parameter`})),v+E+(A===o.length?"":X)},""),d=c.split(/[?#]/,1)[0],y=/(?<=^|\/)(?:\.|%2e){1,2}(?=\/|$)/gi;let m;for(;(m=y.exec(d))!==null;)l.push({start:m.index,length:m[0].length,error:`Value "${m[0]}" can't be safely passed as a path parameter`});if(l.sort((v,E)=>v.start-E.start),l.length>0){let v=0;const E=l.reduce((A,I)=>{const P=" ".repeat(I.start-v),q="^".repeat(I.length);return v=I.start+I.length,A+P+q},"");throw new Hn(`Path parameters result in path with invalid segments:
${l.map(A=>A.error).join(`
`)}
${c}
${E}`)}return c}),sc=MD(OE);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qE extends kE{create(t,e){var o;const{api_version:r=this._client.apiVersion}=t,l=Cc(t,["api_version"]);if("model"in l&&"agent_config"in l)throw new Hn("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in l&&"generation_config"in l)throw new Hn("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(sc`/${r}/interactions`,Object.assign(Object.assign({body:l},e),{stream:(o=t.stream)!==null&&o!==void 0?o:!1}))}delete(t,e={},o){const{api_version:r=this._client.apiVersion}=e??{};return this._client.delete(sc`/${r}/interactions/${t}`,o)}cancel(t,e={},o){const{api_version:r=this._client.apiVersion}=e??{};return this._client.post(sc`/${r}/interactions/${t}/cancel`,o)}get(t,e={},o){var r;const l=e??{},{api_version:c=this._client.apiVersion}=l,d=Cc(l,["api_version"]);return this._client.get(sc`/${c}/interactions/${t}`,Object.assign(Object.assign({query:d},o),{stream:(r=e?.stream)!==null&&r!==void 0?r:!1}))}}qE._key=Object.freeze(["interactions"]);class GE extends qE{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function DD(n){let t=0;for(const r of n)t+=r.length;const e=new Uint8Array(t);let o=0;for(const r of n)e.set(r,o),o+=r.length;return e}let rc;function fp(n){let t;return(rc??(t=new globalThis.TextEncoder,rc=t.encode.bind(t)))(n)}let ac;function Xv(n){let t;return(ac??(t=new globalThis.TextDecoder,ac=t.decode.bind(t)))(n)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Fc{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(t){if(t==null)return[];const e=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?fp(t):t;this.buffer=DD([this.buffer,e]);const o=[];let r;for(;(r=bD(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){o.push(Xv(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const l=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,c=Xv(this.buffer.subarray(0,l));o.push(c),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return o}flush(){return this.buffer.length?this.decode(`
`):[]}}Fc.NEWLINE_CHARS=new Set([`
`,"\r"]);Fc.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function bD(n,t){for(let r=t??0;r<n.length;r++){if(n[r]===10)return{preceding:r,index:r+1,carriage:!1};if(n[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function xD(n){for(let o=0;o<n.length-1;o++){if(n[o]===10&&n[o+1]===10||n[o]===13&&n[o+1]===13)return o+2;if(n[o]===13&&n[o+1]===10&&o+3<n.length&&n[o+2]===13&&n[o+3]===10)return o+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Rc={off:0,error:200,warn:300,info:400,debug:500},Wv=(n,t,e)=>{if(n){if(fD(Rc,n))return n;cn(e).warn(`${t} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(Rc))}`)}};function sl(){}function lc(n,t,e){return!t||Rc[n]>Rc[e]?sl:t[n].bind(t)}const VD={error:sl,warn:sl,info:sl,debug:sl};let Zv=new WeakMap;function cn(n){var t;const e=n.logger,o=(t=n.logLevel)!==null&&t!==void 0?t:"off";if(!e)return VD;const r=Zv.get(e);if(r&&r[0]===o)return r[1];const l={error:lc("error",e,o),warn:lc("warn",e,o),info:lc("info",e,o),debug:lc("debug",e,o)};return Zv.set(e,[o,l]),l}const Is=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([t,e])=>[t,t.toLowerCase()==="x-goog-api-key"||t.toLowerCase()==="authorization"||t.toLowerCase()==="cookie"||t.toLowerCase()==="set-cookie"?"***":e]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class br{constructor(t,e,o){this.iterator=t,this.controller=e,this.client=o}static fromSSEResponse(t,e,o){let r=!1;const l=o?cn(o):console;function c(){return Zn(this,arguments,function*(){var y,m,v,E;if(r)throw new Hn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let A=!1;try{try{for(var I=!0,P=jn(PD(t,e)),q;q=yield St(P.next()),y=q.done,!y;I=!0){E=q.value,I=!1;const U=E;if(!A)if(U.data.startsWith("[DONE]")){A=!0;continue}else try{yield yield St(JSON.parse(U.data))}catch(X){throw l.error("Could not parse message into JSON:",U.data),l.error("From chunk:",U.raw),X}}}catch(U){m={error:U}}finally{try{!I&&!y&&(v=P.return)&&(yield St(v.call(P)))}finally{if(m)throw m.error}}A=!0}catch(U){if(Mh(U))return yield St(void 0);throw U}finally{A||e.abort()}})}return new br(c,e,o)}static fromReadableStream(t,e,o){let r=!1;function l(){return Zn(this,arguments,function*(){var y,m,v,E;const A=new Fc,I=PE(t);try{for(var P=!0,q=jn(I),U;U=yield St(q.next()),y=U.done,!y;P=!0){E=U.value,P=!1;const X=E;for(const ot of A.decode(X))yield yield St(ot)}}catch(X){m={error:X}}finally{try{!P&&!y&&(v=q.return)&&(yield St(v.call(q)))}finally{if(m)throw m.error}}for(const X of A.flush())yield yield St(X)})}function c(){return Zn(this,arguments,function*(){var y,m,v,E;if(r)throw new Hn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let A=!1;try{try{for(var I=!0,P=jn(l()),q;q=yield St(P.next()),y=q.done,!y;I=!0){E=q.value,I=!1;const U=E;A||U&&(yield yield St(JSON.parse(U)))}}catch(U){m={error:U}}finally{try{!I&&!y&&(v=P.return)&&(yield St(v.call(P)))}finally{if(m)throw m.error}}A=!0}catch(U){if(Mh(U))return yield St(void 0);throw U}finally{A||e.abort()}})}return new br(c,e,o)}[Symbol.asyncIterator](){return this.iterator()}tee(){const t=[],e=[],o=this.iterator(),r=l=>({next:()=>{if(l.length===0){const c=o.next();t.push(c),e.push(c)}return l.shift()}});return[new br(()=>r(t),this.controller,this.client),new br(()=>r(e),this.controller,this.client)]}toReadableStream(){const t=this;let e;return VE({async start(){e=t[Symbol.asyncIterator]()},async pull(o){try{const{value:r,done:l}=await e.next();if(l)return o.close();const c=fp(JSON.stringify(r)+`
`);o.enqueue(c)}catch(r){o.error(r)}},async cancel(){var o;await((o=e.return)===null||o===void 0?void 0:o.call(e))}})}}function PD(n,t){return Zn(this,arguments,function*(){var o,r,l,c;if(!n.body)throw t.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Hn("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Hn("Attempted to iterate over a response with no body");const d=new LD,y=new Fc,m=PE(n.body);try{for(var v=!0,E=jn(UD(m)),A;A=yield St(E.next()),o=A.done,!o;v=!0){c=A.value,v=!1;const I=c;for(const P of y.decode(I)){const q=d.decode(P);q&&(yield yield St(q))}}}catch(I){r={error:I}}finally{try{!v&&!o&&(l=E.return)&&(yield St(l.call(E)))}finally{if(r)throw r.error}}for(const I of y.flush()){const P=d.decode(I);P&&(yield yield St(P))}})}function UD(n){return Zn(this,arguments,function*(){var e,o,r,l;let c=new Uint8Array;try{for(var d=!0,y=jn(n),m;m=yield St(y.next()),e=m.done,!e;d=!0){l=m.value,d=!1;const v=l;if(v==null)continue;const E=v instanceof ArrayBuffer?new Uint8Array(v):typeof v=="string"?fp(v):v;let A=new Uint8Array(c.length+E.length);A.set(c),A.set(E,c.length),c=A;let I;for(;(I=xD(c))!==-1;)yield yield St(c.slice(0,I)),c=c.slice(I)}}catch(v){o={error:v}}finally{try{!d&&!e&&(r=y.return)&&(yield St(r.call(y)))}finally{if(o)throw o.error}}c.length>0&&(yield yield St(c))})}class LD{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;const l={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],l}if(this.chunks.push(t),t.startsWith(":"))return null;let[e,o,r]=kD(t,":");return r.startsWith(" ")&&(r=r.substring(1)),e==="event"?this.event=r:e==="data"&&this.data.push(r),null}}function kD(n,t){const e=n.indexOf(t);return e!==-1?[n.substring(0,e),t,n.substring(e+t.length)]:[n,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function OD(n,t){const{response:e,requestLogID:o,retryOfRequestLogID:r,startTime:l}=t,c=await(async()=>{var d;if(t.options.stream)return cn(n).debug("response",e.status,e.url,e.headers,e.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(e,t.controller,n):br.fromSSEResponse(e,t.controller,n);if(e.status===204)return null;if(t.options.__binaryResponse)return e;const y=e.headers.get("content-type"),m=(d=y?.split(";")[0])===null||d===void 0?void 0:d.trim();return m?.includes("application/json")||m?.endsWith("+json")?await e.json():await e.text()})();return cn(n).debug(`[${o}] response parsed`,Is({retryOfRequestLogID:r,url:e.url,status:e.status,body:c,durationMs:Date.now()-l})),c}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dp extends Promise{constructor(t,e,o=OD){super(r=>{r(null)}),this.responsePromise=e,this.parseResponse=o,this.client=t}_thenUnwrap(t){return new dp(this.client,this.responsePromise,async(e,o)=>t(await this.parseResponse(e,o),o))}asResponse(){return this.responsePromise.then(t=>t.response)}async withResponse(){const[t,e]=await Promise.all([this.parse(),this.asResponse()]);return{data:t,response:e}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(t=>this.parseResponse(this.client,t))),this.parsedPromise}then(t,e){return this.parse().then(t,e)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const BE=Symbol("brand.privateNullableHeaders");function*qD(n){if(!n)return;if(BE in n){const{values:o,nulls:r}=n;yield*o.entries();for(const l of r)yield[l,null];return}let t=!1,e;n instanceof Headers?e=n.entries():Jv(n)?e=n:(t=!0,e=Object.entries(n??{}));for(let o of e){const r=o[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const l=Jv(o[1])?o[1]:[o[1]];let c=!1;for(const d of l)d!==void 0&&(t&&!c&&(c=!0,yield[r,null]),yield[r,d])}}const il=n=>{const t=new Headers,e=new Set;for(const o of n){const r=new Set;for(const[l,c]of qD(o)){const d=l.toLowerCase();r.has(d)||(t.delete(l),r.add(d)),c===null?(t.delete(l),e.add(d)):(t.append(l,c),e.delete(d))}}return{[BE]:!0,values:t,nulls:e}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dh=n=>{var t,e,o,r,l,c;if(typeof globalThis.process<"u")return(o=(e=(t=cC)===null||t===void 0?void 0:t[n])===null||e===void 0?void 0:e.trim())!==null&&o!==void 0?o:void 0;if(typeof globalThis.Deno<"u")return(c=(l=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||l===void 0?void 0:l.call(r,n))===null||c===void 0?void 0:c.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var FE;class Hc{constructor(t){var e,o,r,l,c,d,y,{baseURL:m=dh("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:v=(e=dh("GEMINI_API_KEY"))!==null&&e!==void 0?e:null,apiVersion:E="v1beta"}=t,A=Cc(t,["baseURL","apiKey","apiVersion"]);const I=Object.assign(Object.assign({apiKey:v,apiVersion:E},A),{baseURL:m||"https://generativelanguage.googleapis.com"});this.baseURL=I.baseURL,this.timeout=(o=I.timeout)!==null&&o!==void 0?o:Hc.DEFAULT_TIMEOUT,this.logger=(r=I.logger)!==null&&r!==void 0?r:console;const P="warn";this.logLevel=P,this.logLevel=(c=(l=Wv(I.logLevel,"ClientOptions.logLevel",this))!==null&&l!==void 0?l:Wv(dh("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&c!==void 0?c:P,this.fetchOptions=I.fetchOptions,this.maxRetries=(d=I.maxRetries)!==null&&d!==void 0?d:2,this.fetch=(y=I.fetch)!==null&&y!==void 0?y:vD(),this.encoder=AD,this._options=I,this.apiKey=v,this.apiVersion=E,this.clientAdapter=I.clientAdapter}withOptions(t){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),t))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:t,nulls:e}){if(!(t.has("authorization")||t.has("x-goog-api-key"))&&!(this.apiKey&&t.get("x-goog-api-key"))&&!e.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(t){const e=il([t.headers]);if(!(e.values.has("authorization")||e.values.has("x-goog-api-key"))){if(this.apiKey)return il([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return il([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(t){return Object.entries(t).filter(([e,o])=>typeof o<"u").map(([e,o])=>{if(typeof o=="string"||typeof o=="number"||typeof o=="boolean")return`${encodeURIComponent(e)}=${encodeURIComponent(o)}`;if(o===null)return`${encodeURIComponent(e)}=`;throw new Hn(`Cannot stringify type ${typeof o}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Ir}`}defaultIdempotencyKey(){return`stainless-node-retry-${sD()}`}makeStatusError(t,e,o,r){return fn.generate(t,e,o,r)}buildURL(t,e,o){const r=!this.baseURLOverridden()&&o||this.baseURL,l=aD(t)?new URL(t):new URL(r+(r.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),c=this.defaultQuery();return cD(c)||(e=Object.assign(Object.assign({},c),e)),typeof e=="object"&&e&&!Array.isArray(e)&&(l.search=this.stringifyQuery(e)),l.toString()}async prepareOptions(t){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!t.path.startsWith(`/${this.apiVersion}/projects/`)){const e=t.path.slice(this.apiVersion.length+1);t.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${e}`}}async prepareRequest(t,{url:e,options:o}){}get(t,e){return this.methodRequest("get",t,e)}post(t,e){return this.methodRequest("post",t,e)}patch(t,e){return this.methodRequest("patch",t,e)}put(t,e){return this.methodRequest("put",t,e)}delete(t,e){return this.methodRequest("delete",t,e)}methodRequest(t,e,o){return this.request(Promise.resolve(o).then(r=>Object.assign({method:t,path:e},r)))}request(t,e=null){return new dp(this,this.makeRequest(t,e,void 0))}async makeRequest(t,e,o){var r,l,c;const d=await t,y=(r=d.maxRetries)!==null&&r!==void 0?r:this.maxRetries;e==null&&(e=y),await this.prepareOptions(d);const{req:m,url:v,timeout:E}=await this.buildRequest(d,{retryCount:y-e});await this.prepareRequest(m,{url:v,options:d});const A="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),I=o===void 0?"":`, retryOf: ${o}`,P=Date.now();if(cn(this).debug(`[${A}] sending request`,Is({retryOfRequestLogID:o,method:d.method,url:v,options:d,headers:m.headers})),!((l=d.signal)===null||l===void 0)&&l.aborted)throw new bh;const q=new AbortController,U=await this.fetchWithTimeout(v,m,E,q).catch(Dh),X=Date.now();if(U instanceof globalThis.Error){const J=`retrying, ${e} attempts remaining`;if(!((c=d.signal)===null||c===void 0)&&c.aborted)throw new bh;const et=Mh(U)||/timed? ?out/i.test(String(U)+("cause"in U?String(U.cause):""));if(e)return cn(this).info(`[${A}] connection ${et?"timed out":"failed"} - ${J}`),cn(this).debug(`[${A}] connection ${et?"timed out":"failed"} (${J})`,Is({retryOfRequestLogID:o,url:v,durationMs:X-P,message:U.message})),this.retryRequest(d,e,o??A);throw cn(this).info(`[${A}] connection ${et?"timed out":"failed"} - error; no more retries left`),cn(this).debug(`[${A}] connection ${et?"timed out":"failed"} (error; no more retries left)`,Is({retryOfRequestLogID:o,url:v,durationMs:X-P,message:U.message})),et?new CE:new Bc({cause:U})}const ot=`[${A}${I}] ${m.method} ${v} ${U.ok?"succeeded":"failed"} with status ${U.status} in ${X-P}ms`;if(!U.ok){const J=await this.shouldRetry(U);if(e&&J){const N=`retrying, ${e} attempts remaining`;return await ED(U.body),cn(this).info(`${ot} - ${N}`),cn(this).debug(`[${A}] response error (${N})`,Is({retryOfRequestLogID:o,url:U.url,status:U.status,headers:U.headers,durationMs:X-P})),this.retryRequest(d,e,o??A,U.headers)}const et=J?"error; no more retries left":"error; not retryable";cn(this).info(`${ot} - ${et}`);const ct=await U.text().catch(N=>Dh(N).message),at=hD(ct),D=at?void 0:ct;throw cn(this).debug(`[${A}] response error (${et})`,Is({retryOfRequestLogID:o,url:U.url,status:U.status,headers:U.headers,message:D,durationMs:Date.now()-P})),this.makeStatusError(U.status,at,D,U.headers)}return cn(this).info(ot),cn(this).debug(`[${A}] response start`,Is({retryOfRequestLogID:o,url:U.url,status:U.status,headers:U.headers,durationMs:X-P})),{response:U,options:d,controller:q,requestLogID:A,retryOfRequestLogID:o,startTime:P}}async fetchWithTimeout(t,e,o,r){const l=e||{},{signal:c,method:d}=l,y=Cc(l,["signal","method"]);c&&c.addEventListener("abort",()=>r.abort());const m=setTimeout(()=>r.abort(),o),v=globalThis.ReadableStream&&y.body instanceof globalThis.ReadableStream||typeof y.body=="object"&&y.body!==null&&Symbol.asyncIterator in y.body,E=Object.assign(Object.assign(Object.assign({signal:r.signal},v?{duplex:"half"}:{}),{method:"GET"}),y);d&&(E.method=d.toUpperCase());try{return await this.fetch.call(void 0,t,E)}finally{clearTimeout(m)}}async shouldRetry(t){const e=t.headers.get("x-should-retry");return e==="true"?!0:e==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}async retryRequest(t,e,o,r){var l;let c;const d=r?.get("retry-after-ms");if(d){const m=parseFloat(d);Number.isNaN(m)||(c=m)}const y=r?.get("retry-after");if(y&&!c){const m=parseFloat(y);Number.isNaN(m)?c=Date.parse(y)-Date.now():c=m*1e3}if(!(c&&0<=c&&c<60*1e3)){const m=(l=t.maxRetries)!==null&&l!==void 0?l:this.maxRetries;c=this.calculateDefaultRetryTimeoutMillis(e,m)}return await pD(c),this.makeRequest(t,e-1,o)}calculateDefaultRetryTimeoutMillis(t,e){const l=e-t,c=Math.min(.5*Math.pow(2,l),8),d=1-Math.random()*.25;return c*d*1e3}async buildRequest(t,{retryCount:e=0}={}){var o,r,l;const c=Object.assign({},t),{method:d,path:y,query:m,defaultBaseURL:v}=c,E=this.buildURL(y,m,v);"timeout"in c&&dD("timeout",c.timeout),c.timeout=(o=c.timeout)!==null&&o!==void 0?o:this.timeout;const{bodyHeaders:A,body:I}=this.buildBody({options:c}),P=await this.buildHeaders({options:t,method:d,bodyHeaders:A,retryCount:e});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:d,headers:P},c.signal&&{signal:c.signal}),globalThis.ReadableStream&&I instanceof globalThis.ReadableStream&&{duplex:"half"}),I&&{body:I}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(l=c.fetchOptions)!==null&&l!==void 0?l:{}),url:E,timeout:c.timeout}}async buildHeaders({options:t,method:e,bodyHeaders:o,retryCount:r}){let l={};this.idempotencyHeader&&e!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),l[this.idempotencyHeader]=t.idempotencyKey);const c=await this.authHeaders(t);let d=il([l,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},t.timeout?{"X-Stainless-Timeout":String(Math.trunc(t.timeout/1e3))}:{}),_D()),this._options.defaultHeaders,o,t.headers,c]);return this.validateHeaders(d),d.values}buildBody({options:{body:t,headers:e}}){if(!t)return{bodyHeaders:void 0,body:void 0};const o=il([e]);return ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof DataView||typeof t=="string"&&o.values.has("content-type")||globalThis.Blob&&t instanceof globalThis.Blob||t instanceof FormData||t instanceof URLSearchParams||globalThis.ReadableStream&&t instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:t}:typeof t=="object"&&(Symbol.asyncIterator in t||Symbol.iterator in t&&"next"in t&&typeof t.next=="function")?{bodyHeaders:void 0,body:TD(t)}:this.encoder({body:t,headers:o})}}Hc.DEFAULT_TIMEOUT=6e4;class ke extends Hc{constructor(){super(...arguments),this.interactions=new GE(this)}}FE=ke;ke.GeminiNextGenAPIClient=FE;ke.GeminiNextGenAPIClientError=Hn;ke.APIError=fn;ke.APIConnectionError=Bc;ke.APIConnectionTimeoutError=CE;ke.APIUserAbortError=bh;ke.NotFoundError=NE;ke.ConflictError=ME;ke.RateLimitError=bE;ke.BadRequestError=RE;ke.AuthenticationError=IE;ke.InternalServerError=xE;ke.PermissionDeniedError=wE;ke.UnprocessableEntityError=DE;ke.toFile=wD;ke.Interactions=GE;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function GD(n,t){const e={},o=f(n,["name"]);return o!=null&&p(e,["_url","name"],o),e}function BD(n,t){const e={},o=f(n,["name"]);return o!=null&&p(e,["_url","name"],o),e}function FD(n,t){const e={},o=f(n,["sdkHttpResponse"]);return o!=null&&p(e,["sdkHttpResponse"],o),e}function HD(n,t){const e={},o=f(n,["sdkHttpResponse"]);return o!=null&&p(e,["sdkHttpResponse"],o),e}function zD(n,t,e){const o={};if(f(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=f(n,["tunedModelDisplayName"]);if(t!==void 0&&r!=null&&p(t,["displayName"],r),f(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=f(n,["epochCount"]);t!==void 0&&l!=null&&p(t,["tuningTask","hyperparameters","epochCount"],l);const c=f(n,["learningRateMultiplier"]);if(c!=null&&p(o,["tuningTask","hyperparameters","learningRateMultiplier"],c),f(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const d=f(n,["batchSize"]);t!==void 0&&d!=null&&p(t,["tuningTask","hyperparameters","batchSize"],d);const y=f(n,["learningRate"]);if(t!==void 0&&y!=null&&p(t,["tuningTask","hyperparameters","learningRate"],y),f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(f(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return o}function YD(n,t,e){const o={};let r=f(e,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const I=f(n,["validationDataset"]);t!==void 0&&I!=null&&p(t,["supervisedTuningSpec"],jv(I))}else if(r==="PREFERENCE_TUNING"){const I=f(n,["validationDataset"]);t!==void 0&&I!=null&&p(t,["preferenceOptimizationSpec"],jv(I))}const l=f(n,["tunedModelDisplayName"]);t!==void 0&&l!=null&&p(t,["tunedModelDisplayName"],l);const c=f(n,["description"]);t!==void 0&&c!=null&&p(t,["description"],c);let d=f(e,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const I=f(n,["epochCount"]);t!==void 0&&I!=null&&p(t,["supervisedTuningSpec","hyperParameters","epochCount"],I)}else if(d==="PREFERENCE_TUNING"){const I=f(n,["epochCount"]);t!==void 0&&I!=null&&p(t,["preferenceOptimizationSpec","hyperParameters","epochCount"],I)}let y=f(e,["config","method"]);if(y===void 0&&(y="SUPERVISED_FINE_TUNING"),y==="SUPERVISED_FINE_TUNING"){const I=f(n,["learningRateMultiplier"]);t!==void 0&&I!=null&&p(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],I)}else if(y==="PREFERENCE_TUNING"){const I=f(n,["learningRateMultiplier"]);t!==void 0&&I!=null&&p(t,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],I)}let m=f(e,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const I=f(n,["exportLastCheckpointOnly"]);t!==void 0&&I!=null&&p(t,["supervisedTuningSpec","exportLastCheckpointOnly"],I)}else if(m==="PREFERENCE_TUNING"){const I=f(n,["exportLastCheckpointOnly"]);t!==void 0&&I!=null&&p(t,["preferenceOptimizationSpec","exportLastCheckpointOnly"],I)}let v=f(e,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const I=f(n,["adapterSize"]);t!==void 0&&I!=null&&p(t,["supervisedTuningSpec","hyperParameters","adapterSize"],I)}else if(v==="PREFERENCE_TUNING"){const I=f(n,["adapterSize"]);t!==void 0&&I!=null&&p(t,["preferenceOptimizationSpec","hyperParameters","adapterSize"],I)}if(f(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(f(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const E=f(n,["labels"]);t!==void 0&&E!=null&&p(t,["labels"],E);const A=f(n,["beta"]);return t!==void 0&&A!=null&&p(t,["preferenceOptimizationSpec","hyperParameters","beta"],A),o}function JD(n,t){const e={},o=f(n,["baseModel"]);o!=null&&p(e,["baseModel"],o);const r=f(n,["preTunedModel"]);r!=null&&p(e,["preTunedModel"],r);const l=f(n,["trainingDataset"]);l!=null&&ib(l);const c=f(n,["config"]);return c!=null&&zD(c,e),e}function KD(n,t){const e={},o=f(n,["baseModel"]);o!=null&&p(e,["baseModel"],o);const r=f(n,["preTunedModel"]);r!=null&&p(e,["preTunedModel"],r);const l=f(n,["trainingDataset"]);l!=null&&ob(l,e,t);const c=f(n,["config"]);return c!=null&&YD(c,e,t),e}function QD(n,t){const e={},o=f(n,["name"]);return o!=null&&p(e,["_url","name"],o),e}function $D(n,t){const e={},o=f(n,["name"]);return o!=null&&p(e,["_url","name"],o),e}function XD(n,t,e){const o={},r=f(n,["pageSize"]);t!==void 0&&r!=null&&p(t,["_query","pageSize"],r);const l=f(n,["pageToken"]);t!==void 0&&l!=null&&p(t,["_query","pageToken"],l);const c=f(n,["filter"]);return t!==void 0&&c!=null&&p(t,["_query","filter"],c),o}function WD(n,t,e){const o={},r=f(n,["pageSize"]);t!==void 0&&r!=null&&p(t,["_query","pageSize"],r);const l=f(n,["pageToken"]);t!==void 0&&l!=null&&p(t,["_query","pageToken"],l);const c=f(n,["filter"]);return t!==void 0&&c!=null&&p(t,["_query","filter"],c),o}function ZD(n,t){const e={},o=f(n,["config"]);return o!=null&&XD(o,e),e}function jD(n,t){const e={},o=f(n,["config"]);return o!=null&&WD(o,e),e}function tb(n,t){const e={},o=f(n,["sdkHttpResponse"]);o!=null&&p(e,["sdkHttpResponse"],o);const r=f(n,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const l=f(n,["tunedModels"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(d=>HE(d))),p(e,["tuningJobs"],c)}return e}function eb(n,t){const e={},o=f(n,["sdkHttpResponse"]);o!=null&&p(e,["sdkHttpResponse"],o);const r=f(n,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const l=f(n,["tuningJobs"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(d=>Ph(d))),p(e,["tuningJobs"],c)}return e}function nb(n,t){const e={},o=f(n,["name"]);o!=null&&p(e,["model"],o);const r=f(n,["name"]);return r!=null&&p(e,["endpoint"],r),e}function ib(n,t){const e={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const o=f(n,["examples"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>l)),p(e,["examples","examples"],r)}return e}function ob(n,t,e){const o={};let r=f(e,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const c=f(n,["gcsUri"]);t!==void 0&&c!=null&&p(t,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(r==="PREFERENCE_TUNING"){const c=f(n,["gcsUri"]);t!==void 0&&c!=null&&p(t,["preferenceOptimizationSpec","trainingDatasetUri"],c)}let l=f(e,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const c=f(n,["vertexDatasetResource"]);t!==void 0&&c!=null&&p(t,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(l==="PREFERENCE_TUNING"){const c=f(n,["vertexDatasetResource"]);t!==void 0&&c!=null&&p(t,["preferenceOptimizationSpec","trainingDatasetUri"],c)}if(f(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return o}function HE(n,t){const e={},o=f(n,["sdkHttpResponse"]);o!=null&&p(e,["sdkHttpResponse"],o);const r=f(n,["name"]);r!=null&&p(e,["name"],r);const l=f(n,["state"]);l!=null&&p(e,["state"],sE(l));const c=f(n,["createTime"]);c!=null&&p(e,["createTime"],c);const d=f(n,["tuningTask","startTime"]);d!=null&&p(e,["startTime"],d);const y=f(n,["tuningTask","completeTime"]);y!=null&&p(e,["endTime"],y);const m=f(n,["updateTime"]);m!=null&&p(e,["updateTime"],m);const v=f(n,["description"]);v!=null&&p(e,["description"],v);const E=f(n,["baseModel"]);E!=null&&p(e,["baseModel"],E);const A=f(n,["_self"]);return A!=null&&p(e,["tunedModel"],nb(A)),e}function Ph(n,t){const e={},o=f(n,["sdkHttpResponse"]);o!=null&&p(e,["sdkHttpResponse"],o);const r=f(n,["name"]);r!=null&&p(e,["name"],r);const l=f(n,["state"]);l!=null&&p(e,["state"],sE(l));const c=f(n,["createTime"]);c!=null&&p(e,["createTime"],c);const d=f(n,["startTime"]);d!=null&&p(e,["startTime"],d);const y=f(n,["endTime"]);y!=null&&p(e,["endTime"],y);const m=f(n,["updateTime"]);m!=null&&p(e,["updateTime"],m);const v=f(n,["error"]);v!=null&&p(e,["error"],v);const E=f(n,["description"]);E!=null&&p(e,["description"],E);const A=f(n,["baseModel"]);A!=null&&p(e,["baseModel"],A);const I=f(n,["tunedModel"]);I!=null&&p(e,["tunedModel"],I);const P=f(n,["preTunedModel"]);P!=null&&p(e,["preTunedModel"],P);const q=f(n,["supervisedTuningSpec"]);q!=null&&p(e,["supervisedTuningSpec"],q);const U=f(n,["preferenceOptimizationSpec"]);U!=null&&p(e,["preferenceOptimizationSpec"],U);const X=f(n,["tuningDataStats"]);X!=null&&p(e,["tuningDataStats"],X);const ot=f(n,["encryptionSpec"]);ot!=null&&p(e,["encryptionSpec"],ot);const J=f(n,["partnerModelTuningSpec"]);J!=null&&p(e,["partnerModelTuningSpec"],J);const et=f(n,["customBaseModel"]);et!=null&&p(e,["customBaseModel"],et);const ct=f(n,["experiment"]);ct!=null&&p(e,["experiment"],ct);const at=f(n,["labels"]);at!=null&&p(e,["labels"],at);const D=f(n,["outputUri"]);D!=null&&p(e,["outputUri"],D);const M=f(n,["pipelineJob"]);M!=null&&p(e,["pipelineJob"],M);const N=f(n,["serviceAccount"]);N!=null&&p(e,["serviceAccount"],N);const V=f(n,["tunedModelDisplayName"]);V!=null&&p(e,["tunedModelDisplayName"],V);const L=f(n,["veoTuningSpec"]);return L!=null&&p(e,["veoTuningSpec"],L),e}function sb(n,t){const e={},o=f(n,["sdkHttpResponse"]);o!=null&&p(e,["sdkHttpResponse"],o);const r=f(n,["name"]);r!=null&&p(e,["name"],r);const l=f(n,["metadata"]);l!=null&&p(e,["metadata"],l);const c=f(n,["done"]);c!=null&&p(e,["done"],c);const d=f(n,["error"]);return d!=null&&p(e,["error"],d),e}function jv(n,t){const e={},o=f(n,["gcsUri"]);o!=null&&p(e,["validationDatasetUri"],o);const r=f(n,["vertexDatasetResource"]);return r!=null&&p(e,["validationDatasetUri"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rb extends Xi{constructor(t){super(),this.apiClient=t,this.list=async(e={})=>new Vs(Ji.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(e),e),this.get=async e=>await this.getInternal(e),this.tune=async e=>{var o;if(this.apiClient.isVertexAI())if(e.baseModel.startsWith("projects/")){const r={tunedModelName:e.baseModel};!((o=e.config)===null||o===void 0)&&o.preTunedModelCheckpointId&&(r.checkpointId=e.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},e),{preTunedModel:r});return l.baseModel=void 0,await this.tuneInternal(l)}else{const r=Object.assign({},e);return await this.tuneInternal(r)}else{const r=Object.assign({},e),l=await this.tuneMldevInternal(r);let c="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?c=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(c=l.name.split("/operations/")[0]),{name:c,state:Ah.JOB_STATE_QUEUED}}}}async getInternal(t){var e,o,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=$D(t);return d=ft("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>Ph(v))}else{const m=QD(t);return d=ft("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>HE(v))}}async listInternal(t){var e,o,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=jD(t);return d=ft("tuningJobs",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=eb(v),A=new Rv;return Object.assign(A,E),A})}else{const m=ZD(t);return d=ft("tunedModels",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=tb(v),A=new Rv;return Object.assign(A,E),A})}}async cancel(t){var e,o,r,l;let c,d="",y={};if(this.apiClient.isVertexAI()){const m=BD(t);return d=ft("{name}:cancel",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=HD(v),A=new Iv;return Object.assign(A,E),A})}else{const m=GD(t);return d=ft("{name}:cancel",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:d,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=t.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=t.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const A=E;return A.sdkHttpResponse={headers:v.headers},A})),c.then(v=>{const E=FD(v),A=new Iv;return Object.assign(A,E),A})}}async tuneInternal(t){var e,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const d=KD(t,t);return l=ft("tuningJobs",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:y.headers},v})),r.then(y=>Ph(y))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var e,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=JD(t);return l=ft("tunedModels",d._url),c=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:y.headers},v})),r.then(y=>sb(y))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ab{async download(t,e){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const lb=1024*1024*8,ub=3,cb=1e3,fb=2,Ic="x-goog-upload-status";async function db(n,t,e){var o;const r=await zE(n,t,e),l=await r?.json();if(((o=r?.headers)===null||o===void 0?void 0:o[Ic])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function hb(n,t,e){var o;const r=await zE(n,t,e),l=await r?.json();if(((o=r?.headers)===null||o===void 0?void 0:o[Ic])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const c=jT(l),d=new sp;return Object.assign(d,c),d}async function zE(n,t,e){var o,r;let l=0,c=0,d=new Sh(new Response),y="upload";for(l=n.size;c<l;){const m=Math.min(lb,l-c),v=n.slice(c,c+m);c+m>=l&&(y+=", finalize");let E=0,A=cb;for(;E<ub&&(d=await e.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":y,"X-Goog-Upload-Offset":String(c),"Content-Length":String(m)}}}),!(!((o=d?.headers)===null||o===void 0)&&o[Ic]));)E++,await mb(A),A=A*fb;if(c+=m,((r=d?.headers)===null||r===void 0?void 0:r[Ic])!=="active")break;if(l<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return d}async function pb(n){return{size:n.size,type:n.type}}function mb(n){return new Promise(t=>setTimeout(t,n))}class gb{async upload(t,e,o){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await db(t,e,o)}async uploadToFileSearchStore(t,e,o){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await hb(t,e,o)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await pb(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yb{create(t,e,o){return new _b(t,e,o)}}class _b{constructor(t,e,o){this.url=t,this.headers=e,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const tT="x-goog-api-key";class vb{constructor(t){this.apiKey=t}async addAuthHeaders(t,e){if(t.get(tT)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");t.append(tT,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Tb="gl-node/";class YE{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const t=this.httpOptions;t?.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const e=new ke({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:t?.timeout});return this._interactions=e.interactions,this._interactions}constructor(t){var e;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(e=t.vertexai)!==null&&e!==void 0?e:!1,this.apiKey=t.apiKey;const o=pC(t.httpOptions,t.vertexai,void 0,void 0);o&&(t.httpOptions?t.httpOptions.baseUrl=o:t.httpOptions={baseUrl:o}),this.apiVersion=t.apiVersion,this.httpOptions=t.httpOptions;const r=new vb(this.apiKey);this.apiClient=new pM({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:Tb+"web",uploader:new gb,downloader:new ab}),this.models=new VM(this.apiClient),this.live=new wM(this.apiClient,r,new yb),this.batches=new HR(this.apiClient),this.chats=new CI(this.models,this.apiClient),this.caches=new EI(this.apiClient),this.files=new PI(this.apiClient),this.operations=new PM(this.apiClient),this.authTokens=new XM(this.apiClient),this.tunings=new rb(this.apiClient),this.fileSearchStores=new oD(this.apiClient)}}var eT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JE=function(n){const t=[];let e=0;for(let o=0;o<n.length;o++){let r=n.charCodeAt(o);r<128?t[e++]=r:r<2048?(t[e++]=r>>6|192,t[e++]=r&63|128):(r&64512)===55296&&o+1<n.length&&(n.charCodeAt(o+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++o)&1023),t[e++]=r>>18|240,t[e++]=r>>12&63|128,t[e++]=r>>6&63|128,t[e++]=r&63|128):(t[e++]=r>>12|224,t[e++]=r>>6&63|128,t[e++]=r&63|128)}return t},Eb=function(n){const t=[];let e=0,o=0;for(;e<n.length;){const r=n[e++];if(r<128)t[o++]=String.fromCharCode(r);else if(r>191&&r<224){const l=n[e++];t[o++]=String.fromCharCode((r&31)<<6|l&63)}else if(r>239&&r<365){const l=n[e++],c=n[e++],d=n[e++],y=((r&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;t[o++]=String.fromCharCode(55296+(y>>10)),t[o++]=String.fromCharCode(56320+(y&1023))}else{const l=n[e++],c=n[e++];t[o++]=String.fromCharCode((r&15)<<12|(l&63)<<6|c&63)}}return t.join("")},KE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,o=[];for(let r=0;r<n.length;r+=3){const l=n[r],c=r+1<n.length,d=c?n[r+1]:0,y=r+2<n.length,m=y?n[r+2]:0,v=l>>2,E=(l&3)<<4|d>>4;let A=(d&15)<<2|m>>6,I=m&63;y||(I=64,c||(A=64)),o.push(e[v],e[E],e[A],e[I])}return o.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(JE(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):Eb(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,o=[];for(let r=0;r<n.length;){const l=e[n.charAt(r++)],d=r<n.length?e[n.charAt(r)]:0;++r;const m=r<n.length?e[n.charAt(r)]:64;++r;const E=r<n.length?e[n.charAt(r)]:64;if(++r,l==null||d==null||m==null||E==null)throw new Ab;const A=l<<2|d>>4;if(o.push(A),m!==64){const I=d<<4&240|m>>2;if(o.push(I),E!==64){const P=m<<6&192|E;o.push(P)}}}return o},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Ab extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Sb=function(n){const t=JE(n);return KE.encodeByteArray(t,!0)},wc=function(n){return Sb(n).replace(/\./g,"")},Cb=function(n){try{return KE.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ib=()=>Rb().__FIREBASE_DEFAULTS__,wb=()=>{if(typeof process>"u"||typeof eT>"u")return;const n=eT.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Nb=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=n&&Cb(n[1]);return t&&JSON.parse(t)},hp=()=>{try{return Ib()||wb()||Nb()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Mb=n=>{var t,e;return(e=(t=hp())===null||t===void 0?void 0:t.emulatorHosts)===null||e===void 0?void 0:e[n]},Db=n=>{const t=Mb(n);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const o=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),o]:[t.substring(0,e),o]},QE=()=>{var n;return(n=hp())===null||n===void 0?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,o)=>{e?this.reject(e):this.resolve(o),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,o))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xb(n,t){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},o=t||"demo-project",r=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${o}`,aud:o,iat:r,exp:r+3600,auth_time:r,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},n);return[wc(JSON.stringify(e)),wc(JSON.stringify(c)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vb(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Pb(){var n;const t=(n=hp())===null||n===void 0?void 0:n.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Ub(){return!Pb()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Lb(){try{return typeof indexedDB=="object"}catch{return!1}}function kb(){return new Promise((n,t)=>{try{let e=!0;const o="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(o);r.onsuccess=()=>{r.result.close(),e||self.indexedDB.deleteDatabase(o),n(!0)},r.onupgradeneeded=()=>{e=!1},r.onerror=()=>{var l;t(((l=r.error)===null||l===void 0?void 0:l.message)||"")}}catch(e){t(e)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ob="FirebaseError";class Kr extends Error{constructor(t,e,o){super(e),this.code=t,this.customData=o,this.name=Ob,Object.setPrototypeOf(this,Kr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$E.prototype.create)}}class $E{constructor(t,e,o){this.service=t,this.serviceName=e,this.errors=o}create(t,...e){const o=e[0]||{},r=`${this.service}/${t}`,l=this.errors[t],c=l?qb(l,o):"Error",d=`${this.serviceName}: ${c} (${r}).`;return new Kr(r,d,o)}}function qb(n,t){return n.replace(Gb,(e,o)=>{const r=t[o];return r!=null?String(r):`<${o}?>`})}const Gb=/\{\$([^}]+)}/g;function Uh(n,t){if(n===t)return!0;const e=Object.keys(n),o=Object.keys(t);for(const r of e){if(!o.includes(r))return!1;const l=n[r],c=t[r];if(nT(l)&&nT(c)){if(!Uh(l,c))return!1}else if(l!==c)return!1}for(const r of o)if(!e.includes(r))return!1;return!0}function nT(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lr(n){return n&&n._delegate?n._delegate:n}class hl{constructor(t,e,o){this.name=t,this.instanceFactory=e,this.type=o,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const o=new bb;if(this.instancesDeferred.set(e,o),this.isInitialized(e)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:e});r&&o.resolve(r)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const o=this.normalizeInstanceIdentifier(t?.identifier),r=(e=t?.optional)!==null&&e!==void 0?e:!1;if(this.isInitialized(o)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:o})}catch(l){if(r)return null;throw l}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Hb(t))try{this.getOrInitializeService({instanceIdentifier:ws})}catch{}for(const[e,o]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const l=this.getOrInitializeService({instanceIdentifier:r});o.resolve(l)}catch{}}}}clearInstance(t=ws){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=ws){return this.instances.has(t)}getOptions(t=ws){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,o=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(o))throw Error(`${this.name}(${o}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:o,options:e});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);o===d&&c.resolve(r)}return r}onInit(t,e){var o;const r=this.normalizeInstanceIdentifier(e),l=(o=this.onInitCallbacks.get(r))!==null&&o!==void 0?o:new Set;l.add(t),this.onInitCallbacks.set(r,l);const c=this.instances.get(r);return c&&t(c,r),()=>{l.delete(t)}}invokeOnInitCallbacks(t,e){const o=this.onInitCallbacks.get(e);if(o)for(const r of o)try{r(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let o=this.instances.get(t);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:Fb(t),options:e}),this.instances.set(t,o),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(o,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,o)}catch{}return o||null}normalizeInstanceIdentifier(t=ws){return this.component?this.component.multipleInstances?t:ws:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Fb(n){return n===ws?void 0:n}function Hb(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new Bb(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(qt||(qt={}));const Yb={debug:qt.DEBUG,verbose:qt.VERBOSE,info:qt.INFO,warn:qt.WARN,error:qt.ERROR,silent:qt.SILENT},Jb=qt.INFO,Kb={[qt.DEBUG]:"log",[qt.VERBOSE]:"log",[qt.INFO]:"info",[qt.WARN]:"warn",[qt.ERROR]:"error"},Qb=(n,t,...e)=>{if(t<n.logLevel)return;const o=new Date().toISOString(),r=Kb[t];if(r)console[r](`[${o}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class XE{constructor(t){this.name=t,this._logLevel=Jb,this._logHandler=Qb,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in qt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Yb[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,qt.DEBUG,...t),this._logHandler(this,qt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,qt.VERBOSE,...t),this._logHandler(this,qt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,qt.INFO,...t),this._logHandler(this,qt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,qt.WARN,...t),this._logHandler(this,qt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,qt.ERROR,...t),this._logHandler(this,qt.ERROR,...t)}}const $b=(n,t)=>t.some(e=>n instanceof e);let iT,oT;function Xb(){return iT||(iT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Wb(){return oT||(oT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const WE=new WeakMap,Lh=new WeakMap,ZE=new WeakMap,hh=new WeakMap,pp=new WeakMap;function Zb(n){const t=new Promise((e,o)=>{const r=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{e(Fo(n.result)),r()},c=()=>{o(n.error),r()};n.addEventListener("success",l),n.addEventListener("error",c)});return t.then(e=>{e instanceof IDBCursor&&WE.set(e,n)}).catch(()=>{}),pp.set(t,n),t}function jb(n){if(Lh.has(n))return;const t=new Promise((e,o)=>{const r=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{e(),r()},c=()=>{o(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});Lh.set(n,t)}let kh={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return Lh.get(n);if(t==="objectStoreNames")return n.objectStoreNames||ZE.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return Fo(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function tx(n){kh=n(kh)}function ex(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const o=n.call(ph(this),t,...e);return ZE.set(o,t.sort?t.sort():[t]),Fo(o)}:Wb().includes(n)?function(...t){return n.apply(ph(this),t),Fo(WE.get(this))}:function(...t){return Fo(n.apply(ph(this),t))}}function nx(n){return typeof n=="function"?ex(n):(n instanceof IDBTransaction&&jb(n),$b(n,Xb())?new Proxy(n,kh):n)}function Fo(n){if(n instanceof IDBRequest)return Zb(n);if(hh.has(n))return hh.get(n);const t=nx(n);return t!==n&&(hh.set(n,t),pp.set(t,n)),t}const ph=n=>pp.get(n);function ix(n,t,{blocked:e,upgrade:o,blocking:r,terminated:l}={}){const c=indexedDB.open(n,t),d=Fo(c);return o&&c.addEventListener("upgradeneeded",y=>{o(Fo(c.result),y.oldVersion,y.newVersion,Fo(c.transaction),y)}),e&&c.addEventListener("blocked",y=>e(y.oldVersion,y.newVersion,y)),d.then(y=>{l&&y.addEventListener("close",()=>l()),r&&y.addEventListener("versionchange",m=>r(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const ox=["get","getKey","getAll","getAllKeys","count"],sx=["put","add","delete","clear"],mh=new Map;function sT(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(mh.get(t))return mh.get(t);const e=t.replace(/FromIndex$/,""),o=t!==e,r=sx.includes(e);if(!(e in(o?IDBIndex:IDBObjectStore).prototype)||!(r||ox.includes(e)))return;const l=async function(c,...d){const y=this.transaction(c,r?"readwrite":"readonly");let m=y.store;return o&&(m=m.index(d.shift())),(await Promise.all([m[e](...d),r&&y.done]))[0]};return mh.set(t,l),l}tx(n=>({...n,get:(t,e,o)=>sT(t,e)||n.get(t,e,o),has:(t,e)=>!!sT(t,e)||n.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(ax(e)){const o=e.getImmediate();return`${o.library}/${o.version}`}else return null}).filter(e=>e).join(" ")}}function ax(n){const t=n.getComponent();return t?.type==="VERSION"}const Oh="@firebase/app",rT="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ki=new XE("@firebase/app"),lx="@firebase/app-compat",ux="@firebase/analytics-compat",cx="@firebase/analytics",fx="@firebase/app-check-compat",dx="@firebase/app-check",hx="@firebase/auth",px="@firebase/auth-compat",mx="@firebase/database",gx="@firebase/data-connect",yx="@firebase/database-compat",_x="@firebase/functions",vx="@firebase/functions-compat",Tx="@firebase/installations",Ex="@firebase/installations-compat",Ax="@firebase/messaging",Sx="@firebase/messaging-compat",Cx="@firebase/performance",Rx="@firebase/performance-compat",Ix="@firebase/remote-config",wx="@firebase/remote-config-compat",Nx="@firebase/storage",Mx="@firebase/storage-compat",Dx="@firebase/firestore",bx="@firebase/vertexai-preview",xx="@firebase/firestore-compat",Vx="firebase",Px="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qh="[DEFAULT]",Ux={[Oh]:"fire-core",[lx]:"fire-core-compat",[cx]:"fire-analytics",[ux]:"fire-analytics-compat",[dx]:"fire-app-check",[fx]:"fire-app-check-compat",[hx]:"fire-auth",[px]:"fire-auth-compat",[mx]:"fire-rtdb",[gx]:"fire-data-connect",[yx]:"fire-rtdb-compat",[_x]:"fire-fn",[vx]:"fire-fn-compat",[Tx]:"fire-iid",[Ex]:"fire-iid-compat",[Ax]:"fire-fcm",[Sx]:"fire-fcm-compat",[Cx]:"fire-perf",[Rx]:"fire-perf-compat",[Ix]:"fire-rc",[wx]:"fire-rc-compat",[Nx]:"fire-gcs",[Mx]:"fire-gcs-compat",[Dx]:"fire-fst",[xx]:"fire-fst-compat",[bx]:"fire-vertex","fire-js":"fire-js",[Vx]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pl=new Map,Lx=new Map,Gh=new Map;function aT(n,t){try{n.container.addComponent(t)}catch(e){Ki.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function Nc(n){const t=n.name;if(Gh.has(t))return Ki.debug(`There were multiple attempts to register component ${t}.`),!1;Gh.set(t,n);for(const e of pl.values())aT(e,n);for(const e of Lx.values())aT(e,n);return!0}function kx(n,t){const e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ox={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ho=new $E("app","Firebase",Ox);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx{constructor(t,e,o){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=o,this.container.addComponent(new hl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Ho.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gx=Px;function jE(n,t={}){let e=n;typeof t!="object"&&(t={name:t});const o=Object.assign({name:qh,automaticDataCollectionEnabled:!1},t),r=o.name;if(typeof r!="string"||!r)throw Ho.create("bad-app-name",{appName:String(r)});if(e||(e=QE()),!e)throw Ho.create("no-options");const l=pl.get(r);if(l){if(Uh(e,l.options)&&Uh(o,l.config))return l;throw Ho.create("duplicate-app",{appName:r})}const c=new zb(r);for(const y of Gh.values())c.addComponent(y);const d=new qx(e,o,c);return pl.set(r,d),d}function t0(n=qh){const t=pl.get(n);if(!t&&n===qh&&QE())return jE();if(!t)throw Ho.create("no-app",{appName:n});return t}function Bx(){return Array.from(pl.values())}function Pr(n,t,e){var o;let r=(o=Ux[n])!==null&&o!==void 0?o:n;e&&(r+=`-${e}`);const l=r.match(/\s|\//),c=t.match(/\s|\//);if(l||c){const d=[`Unable to register library "${r}" with version "${t}":`];l&&d.push(`library name "${r}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Ki.warn(d.join(" "));return}Nc(new hl(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fx="firebase-heartbeat-database",Hx=1,ml="firebase-heartbeat-store";let gh=null;function e0(){return gh||(gh=ix(Fx,Hx,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(ml)}catch(e){console.warn(e)}}}}).catch(n=>{throw Ho.create("idb-open",{originalErrorMessage:n.message})})),gh}async function zx(n){try{const e=(await e0()).transaction(ml),o=await e.objectStore(ml).get(n0(n));return await e.done,o}catch(t){if(t instanceof Kr)Ki.warn(t.message);else{const e=Ho.create("idb-get",{originalErrorMessage:t?.message});Ki.warn(e.message)}}}async function lT(n,t){try{const o=(await e0()).transaction(ml,"readwrite");await o.objectStore(ml).put(t,n0(n)),await o.done}catch(e){if(e instanceof Kr)Ki.warn(e.message);else{const o=Ho.create("idb-set",{originalErrorMessage:e?.message});Ki.warn(o.message)}}}function n0(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx=1024,Jx=720*60*60*1e3;class Kx{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new $x(e),this._heartbeatsCachePromise=this._storage.read().then(o=>(this._heartbeatsCache=o,o))}async triggerHeartbeat(){var t,e;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=uT();return((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l)?void 0:(this._heartbeatsCache.heartbeats.push({date:l,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(c=>{const d=new Date(c.date).valueOf();return Date.now()-d<=Jx}),this._storage.overwrite(this._heartbeatsCache))}catch(o){Ki.warn(o)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=uT(),{heartbeatsToSend:o,unsentEntries:r}=Qx(this._heartbeatsCache.heartbeats),l=wc(JSON.stringify({version:2,heartbeats:o}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(e){return Ki.warn(e),""}}}function uT(){return new Date().toISOString().substring(0,10)}function Qx(n,t=Yx){const e=[];let o=n.slice();for(const r of n){const l=e.find(c=>c.agent===r.agent);if(l){if(l.dates.push(r.date),cT(e)>t){l.dates.pop();break}}else if(e.push({agent:r.agent,dates:[r.date]}),cT(e)>t){e.pop();break}o=o.slice(1)}return{heartbeatsToSend:e,unsentEntries:o}}class $x{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Lb()?kb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await zx(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const r=await this.read();return lT(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var e;if(await this._canUseIndexedDBPromise){const r=await this.read();return lT(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function cT(n){return wc(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xx(n){Nc(new hl("platform-logger",t=>new rx(t),"PRIVATE")),Nc(new hl("heartbeat",t=>new Kx(t),"PRIVATE")),Pr(Oh,rT,n),Pr(Oh,rT,"esm2017"),Pr("fire-js","")}Xx("");var Wx="firebase",Zx="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pr(Wx,Zx,"app");var fT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ms,i0;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(D,M){function N(){}N.prototype=M.prototype,D.D=M.prototype,D.prototype=new N,D.prototype.constructor=D,D.C=function(V,L,G){for(var b=Array(arguments.length-2),Kt=2;Kt<arguments.length;Kt++)b[Kt-2]=arguments[Kt];return M.prototype[L].apply(V,b)}}function e(){this.blockSize=-1}function o(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(o,e),o.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(D,M,N){N||(N=0);var V=Array(16);if(typeof M=="string")for(var L=0;16>L;++L)V[L]=M.charCodeAt(N++)|M.charCodeAt(N++)<<8|M.charCodeAt(N++)<<16|M.charCodeAt(N++)<<24;else for(L=0;16>L;++L)V[L]=M[N++]|M[N++]<<8|M[N++]<<16|M[N++]<<24;M=D.g[0],N=D.g[1],L=D.g[2];var G=D.g[3],b=M+(G^N&(L^G))+V[0]+3614090360&4294967295;M=N+(b<<7&4294967295|b>>>25),b=G+(L^M&(N^L))+V[1]+3905402710&4294967295,G=M+(b<<12&4294967295|b>>>20),b=L+(N^G&(M^N))+V[2]+606105819&4294967295,L=G+(b<<17&4294967295|b>>>15),b=N+(M^L&(G^M))+V[3]+3250441966&4294967295,N=L+(b<<22&4294967295|b>>>10),b=M+(G^N&(L^G))+V[4]+4118548399&4294967295,M=N+(b<<7&4294967295|b>>>25),b=G+(L^M&(N^L))+V[5]+1200080426&4294967295,G=M+(b<<12&4294967295|b>>>20),b=L+(N^G&(M^N))+V[6]+2821735955&4294967295,L=G+(b<<17&4294967295|b>>>15),b=N+(M^L&(G^M))+V[7]+4249261313&4294967295,N=L+(b<<22&4294967295|b>>>10),b=M+(G^N&(L^G))+V[8]+1770035416&4294967295,M=N+(b<<7&4294967295|b>>>25),b=G+(L^M&(N^L))+V[9]+2336552879&4294967295,G=M+(b<<12&4294967295|b>>>20),b=L+(N^G&(M^N))+V[10]+4294925233&4294967295,L=G+(b<<17&4294967295|b>>>15),b=N+(M^L&(G^M))+V[11]+2304563134&4294967295,N=L+(b<<22&4294967295|b>>>10),b=M+(G^N&(L^G))+V[12]+1804603682&4294967295,M=N+(b<<7&4294967295|b>>>25),b=G+(L^M&(N^L))+V[13]+4254626195&4294967295,G=M+(b<<12&4294967295|b>>>20),b=L+(N^G&(M^N))+V[14]+2792965006&4294967295,L=G+(b<<17&4294967295|b>>>15),b=N+(M^L&(G^M))+V[15]+1236535329&4294967295,N=L+(b<<22&4294967295|b>>>10),b=M+(L^G&(N^L))+V[1]+4129170786&4294967295,M=N+(b<<5&4294967295|b>>>27),b=G+(N^L&(M^N))+V[6]+3225465664&4294967295,G=M+(b<<9&4294967295|b>>>23),b=L+(M^N&(G^M))+V[11]+643717713&4294967295,L=G+(b<<14&4294967295|b>>>18),b=N+(G^M&(L^G))+V[0]+3921069994&4294967295,N=L+(b<<20&4294967295|b>>>12),b=M+(L^G&(N^L))+V[5]+3593408605&4294967295,M=N+(b<<5&4294967295|b>>>27),b=G+(N^L&(M^N))+V[10]+38016083&4294967295,G=M+(b<<9&4294967295|b>>>23),b=L+(M^N&(G^M))+V[15]+3634488961&4294967295,L=G+(b<<14&4294967295|b>>>18),b=N+(G^M&(L^G))+V[4]+3889429448&4294967295,N=L+(b<<20&4294967295|b>>>12),b=M+(L^G&(N^L))+V[9]+568446438&4294967295,M=N+(b<<5&4294967295|b>>>27),b=G+(N^L&(M^N))+V[14]+3275163606&4294967295,G=M+(b<<9&4294967295|b>>>23),b=L+(M^N&(G^M))+V[3]+4107603335&4294967295,L=G+(b<<14&4294967295|b>>>18),b=N+(G^M&(L^G))+V[8]+1163531501&4294967295,N=L+(b<<20&4294967295|b>>>12),b=M+(L^G&(N^L))+V[13]+2850285829&4294967295,M=N+(b<<5&4294967295|b>>>27),b=G+(N^L&(M^N))+V[2]+4243563512&4294967295,G=M+(b<<9&4294967295|b>>>23),b=L+(M^N&(G^M))+V[7]+1735328473&4294967295,L=G+(b<<14&4294967295|b>>>18),b=N+(G^M&(L^G))+V[12]+2368359562&4294967295,N=L+(b<<20&4294967295|b>>>12),b=M+(N^L^G)+V[5]+4294588738&4294967295,M=N+(b<<4&4294967295|b>>>28),b=G+(M^N^L)+V[8]+2272392833&4294967295,G=M+(b<<11&4294967295|b>>>21),b=L+(G^M^N)+V[11]+1839030562&4294967295,L=G+(b<<16&4294967295|b>>>16),b=N+(L^G^M)+V[14]+4259657740&4294967295,N=L+(b<<23&4294967295|b>>>9),b=M+(N^L^G)+V[1]+2763975236&4294967295,M=N+(b<<4&4294967295|b>>>28),b=G+(M^N^L)+V[4]+1272893353&4294967295,G=M+(b<<11&4294967295|b>>>21),b=L+(G^M^N)+V[7]+4139469664&4294967295,L=G+(b<<16&4294967295|b>>>16),b=N+(L^G^M)+V[10]+3200236656&4294967295,N=L+(b<<23&4294967295|b>>>9),b=M+(N^L^G)+V[13]+681279174&4294967295,M=N+(b<<4&4294967295|b>>>28),b=G+(M^N^L)+V[0]+3936430074&4294967295,G=M+(b<<11&4294967295|b>>>21),b=L+(G^M^N)+V[3]+3572445317&4294967295,L=G+(b<<16&4294967295|b>>>16),b=N+(L^G^M)+V[6]+76029189&4294967295,N=L+(b<<23&4294967295|b>>>9),b=M+(N^L^G)+V[9]+3654602809&4294967295,M=N+(b<<4&4294967295|b>>>28),b=G+(M^N^L)+V[12]+3873151461&4294967295,G=M+(b<<11&4294967295|b>>>21),b=L+(G^M^N)+V[15]+530742520&4294967295,L=G+(b<<16&4294967295|b>>>16),b=N+(L^G^M)+V[2]+3299628645&4294967295,N=L+(b<<23&4294967295|b>>>9),b=M+(L^(N|~G))+V[0]+4096336452&4294967295,M=N+(b<<6&4294967295|b>>>26),b=G+(N^(M|~L))+V[7]+1126891415&4294967295,G=M+(b<<10&4294967295|b>>>22),b=L+(M^(G|~N))+V[14]+2878612391&4294967295,L=G+(b<<15&4294967295|b>>>17),b=N+(G^(L|~M))+V[5]+4237533241&4294967295,N=L+(b<<21&4294967295|b>>>11),b=M+(L^(N|~G))+V[12]+1700485571&4294967295,M=N+(b<<6&4294967295|b>>>26),b=G+(N^(M|~L))+V[3]+2399980690&4294967295,G=M+(b<<10&4294967295|b>>>22),b=L+(M^(G|~N))+V[10]+4293915773&4294967295,L=G+(b<<15&4294967295|b>>>17),b=N+(G^(L|~M))+V[1]+2240044497&4294967295,N=L+(b<<21&4294967295|b>>>11),b=M+(L^(N|~G))+V[8]+1873313359&4294967295,M=N+(b<<6&4294967295|b>>>26),b=G+(N^(M|~L))+V[15]+4264355552&4294967295,G=M+(b<<10&4294967295|b>>>22),b=L+(M^(G|~N))+V[6]+2734768916&4294967295,L=G+(b<<15&4294967295|b>>>17),b=N+(G^(L|~M))+V[13]+1309151649&4294967295,N=L+(b<<21&4294967295|b>>>11),b=M+(L^(N|~G))+V[4]+4149444226&4294967295,M=N+(b<<6&4294967295|b>>>26),b=G+(N^(M|~L))+V[11]+3174756917&4294967295,G=M+(b<<10&4294967295|b>>>22),b=L+(M^(G|~N))+V[2]+718787259&4294967295,L=G+(b<<15&4294967295|b>>>17),b=N+(G^(L|~M))+V[9]+3951481745&4294967295,D.g[0]=D.g[0]+M&4294967295,D.g[1]=D.g[1]+(L+(b<<21&4294967295|b>>>11))&4294967295,D.g[2]=D.g[2]+L&4294967295,D.g[3]=D.g[3]+G&4294967295}o.prototype.u=function(D,M){M===void 0&&(M=D.length);for(var N=M-this.blockSize,V=this.B,L=this.h,G=0;G<M;){if(L==0)for(;G<=N;)r(this,D,G),G+=this.blockSize;if(typeof D=="string"){for(;G<M;)if(V[L++]=D.charCodeAt(G++),L==this.blockSize){r(this,V),L=0;break}}else for(;G<M;)if(V[L++]=D[G++],L==this.blockSize){r(this,V),L=0;break}}this.h=L,this.o+=M},o.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var M=1;M<D.length-8;++M)D[M]=0;var N=8*this.o;for(M=D.length-8;M<D.length;++M)D[M]=N&255,N/=256;for(this.u(D),D=Array(16),M=N=0;4>M;++M)for(var V=0;32>V;V+=8)D[N++]=this.g[M]>>>V&255;return D};function l(D,M){var N=d;return Object.prototype.hasOwnProperty.call(N,D)?N[D]:N[D]=M(D)}function c(D,M){this.h=M;for(var N=[],V=!0,L=D.length-1;0<=L;L--){var G=D[L]|0;V&&G==M||(N[L]=G,V=!1)}this.g=N}var d={};function y(D){return-128<=D&&128>D?l(D,function(M){return new c([M|0],0>M?-1:0)}):new c([D|0],0>D?-1:0)}function m(D){if(isNaN(D)||!isFinite(D))return E;if(0>D)return U(m(-D));for(var M=[],N=1,V=0;D>=N;V++)M[V]=D/N|0,N*=4294967296;return new c(M,0)}function v(D,M){if(D.length==0)throw Error("number format error: empty string");if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(D.charAt(0)=="-")return U(v(D.substring(1),M));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=m(Math.pow(M,8)),V=E,L=0;L<D.length;L+=8){var G=Math.min(8,D.length-L),b=parseInt(D.substring(L,L+G),M);8>G?(G=m(Math.pow(M,G)),V=V.j(G).add(m(b))):(V=V.j(N),V=V.add(m(b)))}return V}var E=y(0),A=y(1),I=y(16777216);n=c.prototype,n.m=function(){if(q(this))return-U(this).m();for(var D=0,M=1,N=0;N<this.g.length;N++){var V=this.i(N);D+=(0<=V?V:4294967296+V)*M,M*=4294967296}return D},n.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(P(this))return"0";if(q(this))return"-"+U(this).toString(D);for(var M=m(Math.pow(D,6)),N=this,V="";;){var L=et(N,M).g;N=X(N,L.j(M));var G=((0<N.g.length?N.g[0]:N.h)>>>0).toString(D);if(N=L,P(N))return G+V;for(;6>G.length;)G="0"+G;V=G+V}},n.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function P(D){if(D.h!=0)return!1;for(var M=0;M<D.g.length;M++)if(D.g[M]!=0)return!1;return!0}function q(D){return D.h==-1}n.l=function(D){return D=X(this,D),q(D)?-1:P(D)?0:1};function U(D){for(var M=D.g.length,N=[],V=0;V<M;V++)N[V]=~D.g[V];return new c(N,~D.h).add(A)}n.abs=function(){return q(this)?U(this):this},n.add=function(D){for(var M=Math.max(this.g.length,D.g.length),N=[],V=0,L=0;L<=M;L++){var G=V+(this.i(L)&65535)+(D.i(L)&65535),b=(G>>>16)+(this.i(L)>>>16)+(D.i(L)>>>16);V=b>>>16,G&=65535,b&=65535,N[L]=b<<16|G}return new c(N,N[N.length-1]&-2147483648?-1:0)};function X(D,M){return D.add(U(M))}n.j=function(D){if(P(this)||P(D))return E;if(q(this))return q(D)?U(this).j(U(D)):U(U(this).j(D));if(q(D))return U(this.j(U(D)));if(0>this.l(I)&&0>D.l(I))return m(this.m()*D.m());for(var M=this.g.length+D.g.length,N=[],V=0;V<2*M;V++)N[V]=0;for(V=0;V<this.g.length;V++)for(var L=0;L<D.g.length;L++){var G=this.i(V)>>>16,b=this.i(V)&65535,Kt=D.i(L)>>>16,ve=D.i(L)&65535;N[2*V+2*L]+=b*ve,ot(N,2*V+2*L),N[2*V+2*L+1]+=G*ve,ot(N,2*V+2*L+1),N[2*V+2*L+1]+=b*Kt,ot(N,2*V+2*L+1),N[2*V+2*L+2]+=G*Kt,ot(N,2*V+2*L+2)}for(V=0;V<M;V++)N[V]=N[2*V+1]<<16|N[2*V];for(V=M;V<2*M;V++)N[V]=0;return new c(N,0)};function ot(D,M){for(;(D[M]&65535)!=D[M];)D[M+1]+=D[M]>>>16,D[M]&=65535,M++}function J(D,M){this.g=D,this.h=M}function et(D,M){if(P(M))throw Error("division by zero");if(P(D))return new J(E,E);if(q(D))return M=et(U(D),M),new J(U(M.g),U(M.h));if(q(M))return M=et(D,U(M)),new J(U(M.g),M.h);if(30<D.g.length){if(q(D)||q(M))throw Error("slowDivide_ only works with positive integers.");for(var N=A,V=M;0>=V.l(D);)N=ct(N),V=ct(V);var L=at(N,1),G=at(V,1);for(V=at(V,2),N=at(N,2);!P(V);){var b=G.add(V);0>=b.l(D)&&(L=L.add(N),G=b),V=at(V,1),N=at(N,1)}return M=X(D,L.j(M)),new J(L,M)}for(L=E;0<=D.l(M);){for(N=Math.max(1,Math.floor(D.m()/M.m())),V=Math.ceil(Math.log(N)/Math.LN2),V=48>=V?1:Math.pow(2,V-48),G=m(N),b=G.j(M);q(b)||0<b.l(D);)N-=V,G=m(N),b=G.j(M);P(G)&&(G=A),L=L.add(G),D=X(D,b)}return new J(L,D)}n.A=function(D){return et(this,D).h},n.and=function(D){for(var M=Math.max(this.g.length,D.g.length),N=[],V=0;V<M;V++)N[V]=this.i(V)&D.i(V);return new c(N,this.h&D.h)},n.or=function(D){for(var M=Math.max(this.g.length,D.g.length),N=[],V=0;V<M;V++)N[V]=this.i(V)|D.i(V);return new c(N,this.h|D.h)},n.xor=function(D){for(var M=Math.max(this.g.length,D.g.length),N=[],V=0;V<M;V++)N[V]=this.i(V)^D.i(V);return new c(N,this.h^D.h)};function ct(D){for(var M=D.g.length+1,N=[],V=0;V<M;V++)N[V]=D.i(V)<<1|D.i(V-1)>>>31;return new c(N,D.h)}function at(D,M){var N=M>>5;M%=32;for(var V=D.g.length-N,L=[],G=0;G<V;G++)L[G]=0<M?D.i(G+N)>>>M|D.i(G+N+1)<<32-M:D.i(G+N);return new c(L,D.h)}o.prototype.digest=o.prototype.v,o.prototype.reset=o.prototype.s,o.prototype.update=o.prototype.u,i0=o,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=m,c.fromString=v,Ms=c}).apply(typeof fT<"u"?fT:typeof self<"u"?self:typeof window<"u"?window:{});var uc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var o0,rl,s0,gc,Bh,r0,a0,l0;(function(){var n,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,T,C){return h==Array.prototype||h==Object.prototype||(h[T]=C.value),h};function e(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof uc=="object"&&uc];for(var T=0;T<h.length;++T){var C=h[T];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var o=e(this);function r(h,T){if(T)t:{var C=o;h=h.split(".");for(var w=0;w<h.length-1;w++){var F=h[w];if(!(F in C))break t;C=C[F]}h=h[h.length-1],w=C[h],T=T(w),T!=w&&T!=null&&t(C,h,{configurable:!0,writable:!0,value:T})}}function l(h,T){h instanceof String&&(h+="");var C=0,w=!1,F={next:function(){if(!w&&C<h.length){var Q=C++;return{value:T(Q,h[Q]),done:!1}}return w=!0,{done:!0,value:void 0}}};return F[Symbol.iterator]=function(){return F},F}r("Array.prototype.values",function(h){return h||function(){return l(this,function(T,C){return C})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function y(h){var T=typeof h;return T=T!="object"?T:h?Array.isArray(h)?"array":T:"null",T=="array"||T=="object"&&typeof h.length=="number"}function m(h){var T=typeof h;return T=="object"&&h!=null||T=="function"}function v(h,T,C){return h.call.apply(h.bind,arguments)}function E(h,T,C){if(!h)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var F=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(F,w),h.apply(T,F)}}return function(){return h.apply(T,arguments)}}function A(h,T,C){return A=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:E,A.apply(null,arguments)}function I(h,T){var C=Array.prototype.slice.call(arguments,1);return function(){var w=C.slice();return w.push.apply(w,arguments),h.apply(this,w)}}function P(h,T){function C(){}C.prototype=T.prototype,h.aa=T.prototype,h.prototype=new C,h.prototype.constructor=h,h.Qb=function(w,F,Q){for(var ut=Array(arguments.length-2),$t=2;$t<arguments.length;$t++)ut[$t-2]=arguments[$t];return T.prototype[F].apply(w,ut)}}function q(h){const T=h.length;if(0<T){const C=Array(T);for(let w=0;w<T;w++)C[w]=h[w];return C}return[]}function U(h,T){for(let C=1;C<arguments.length;C++){const w=arguments[C];if(y(w)){const F=h.length||0,Q=w.length||0;h.length=F+Q;for(let ut=0;ut<Q;ut++)h[F+ut]=w[ut]}else h.push(w)}}class X{constructor(T,C){this.i=T,this.j=C,this.h=0,this.g=null}get(){let T;return 0<this.h?(this.h--,T=this.g,this.g=T.next,T.next=null):T=this.i(),T}}function ot(h){return/^[\s\xa0]*$/.test(h)}function J(){var h=d.navigator;return h&&(h=h.userAgent)?h:""}function et(h){return et[" "](h),h}et[" "]=function(){};var ct=J().indexOf("Gecko")!=-1&&!(J().toLowerCase().indexOf("webkit")!=-1&&J().indexOf("Edge")==-1)&&!(J().indexOf("Trident")!=-1||J().indexOf("MSIE")!=-1)&&J().indexOf("Edge")==-1;function at(h,T,C){for(const w in h)T.call(C,h[w],w,h)}function D(h,T){for(const C in h)T.call(void 0,h[C],C,h)}function M(h){const T={};for(const C in h)T[C]=h[C];return T}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(h,T){let C,w;for(let F=1;F<arguments.length;F++){w=arguments[F];for(C in w)h[C]=w[C];for(let Q=0;Q<N.length;Q++)C=N[Q],Object.prototype.hasOwnProperty.call(w,C)&&(h[C]=w[C])}}function L(h){var T=1;h=h.split(":");const C=[];for(;0<T&&h.length;)C.push(h.shift()),T--;return h.length&&C.push(h.join(":")),C}function G(h){d.setTimeout(()=>{throw h},0)}function b(){var h=Gt;let T=null;return h.g&&(T=h.g,h.g=h.g.next,h.g||(h.h=null),T.next=null),T}class Kt{constructor(){this.h=this.g=null}add(T,C){const w=ve.get();w.set(T,C),this.h?this.h.next=w:this.g=w,this.h=w}}var ve=new X(()=>new $,h=>h.reset());class ${constructor(){this.next=this.g=this.h=null}set(T,C){this.h=T,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let lt,_t=!1,Gt=new Kt,Qt=()=>{const h=d.Promise.resolve(void 0);lt=()=>{h.then(O)}};var O=()=>{for(var h;h=b();){try{h.h.call(h.g)}catch(C){G(C)}var T=ve;T.j(h),100>T.h&&(T.h++,h.next=T.g,T.g=h)}_t=!1};function Z(){this.s=this.s,this.C=this.C}Z.prototype.s=!1,Z.prototype.ma=function(){this.s||(this.s=!0,this.N())},Z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function rt(h,T){this.type=h,this.g=this.target=T,this.defaultPrevented=!1}rt.prototype.h=function(){this.defaultPrevented=!0};var pt=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,T=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const C=()=>{};d.addEventListener("test",C,T),d.removeEventListener("test",C,T)}catch{}return h})();function Et(h,T){if(rt.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var C=this.type=h.type,w=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=T,T=h.relatedTarget){if(ct){t:{try{et(T.nodeName);var F=!0;break t}catch{}F=!1}F||(T=null)}}else C=="mouseover"?T=h.fromElement:C=="mouseout"&&(T=h.toElement);this.relatedTarget=T,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:Mt[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Et.aa.h.call(this)}}P(Et,rt);var Mt={2:"touch",3:"pen",4:"mouse"};Et.prototype.h=function(){Et.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Lt="closure_listenable_"+(1e6*Math.random()|0),Oe=0;function ue(h,T,C,w,F){this.listener=h,this.proxy=null,this.src=T,this.type=C,this.capture=!!w,this.ha=F,this.key=++Oe,this.da=this.fa=!1}function ni(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function _i(h){this.src=h,this.g={},this.h=0}_i.prototype.add=function(h,T,C,w,F){var Q=h.toString();h=this.g[Q],h||(h=this.g[Q]=[],this.h++);var ut=ks(h,T,w,F);return-1<ut?(T=h[ut],C||(T.fa=!1)):(T=new ue(T,this.src,Q,!!w,F),T.fa=C,h.push(T)),T};function Xo(h,T){var C=T.type;if(C in h.g){var w=h.g[C],F=Array.prototype.indexOf.call(w,T,void 0),Q;(Q=0<=F)&&Array.prototype.splice.call(w,F,1),Q&&(ni(T),h.g[C].length==0&&(delete h.g[C],h.h--))}}function ks(h,T,C,w){for(var F=0;F<h.length;++F){var Q=h[F];if(!Q.da&&Q.listener==T&&Q.capture==!!C&&Q.ha==w)return F}return-1}var zn="closure_lm_"+(1e6*Math.random()|0),Wo={};function Os(h,T,C,w,F){if(Array.isArray(T)){for(var Q=0;Q<T.length;Q++)Os(h,T[Q],C,w,F);return null}return C=bl(C),h&&h[Lt]?h.K(T,C,m(w)?!!w.capture:!1,F):ef(h,T,C,!1,w,F)}function ef(h,T,C,w,F,Q){if(!T)throw Error("Invalid event type");var ut=m(F)?!!F.capture:!!F,$t=jr(h);if($t||(h[zn]=$t=new _i(h)),C=$t.add(T,C,w,ut,Q),C.proxy)return C;if(w=Dl(),C.proxy=w,w.src=h,w.listener=C,h.addEventListener)pt||(F=ut),F===void 0&&(F=!1),h.addEventListener(T.toString(),w,F);else if(h.attachEvent)h.attachEvent(Gs(T.toString()),w);else if(h.addListener&&h.removeListener)h.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return C}function Dl(){function h(C){return T.call(h.src,h.listener,C)}const T=nf;return h}function qs(h,T,C,w,F){if(Array.isArray(T))for(var Q=0;Q<T.length;Q++)qs(h,T[Q],C,w,F);else w=m(w)?!!w.capture:!!w,C=bl(C),h&&h[Lt]?(h=h.i,T=String(T).toString(),T in h.g&&(Q=h.g[T],C=ks(Q,C,w,F),-1<C&&(ni(Q[C]),Array.prototype.splice.call(Q,C,1),Q.length==0&&(delete h.g[T],h.h--)))):h&&(h=jr(h))&&(T=h.g[T.toString()],h=-1,T&&(h=ks(T,C,w,F)),(C=-1<h?T[h]:null)&&Zo(C))}function Zo(h){if(typeof h!="number"&&h&&!h.da){var T=h.src;if(T&&T[Lt])Xo(T.i,h);else{var C=h.type,w=h.proxy;T.removeEventListener?T.removeEventListener(C,w,h.capture):T.detachEvent?T.detachEvent(Gs(C),w):T.addListener&&T.removeListener&&T.removeListener(w),(C=jr(T))?(Xo(C,h),C.h==0&&(C.src=null,T[zn]=null)):ni(h)}}}function Gs(h){return h in Wo?Wo[h]:Wo[h]="on"+h}function nf(h,T){if(h.da)h=!0;else{T=new Et(T,this);var C=h.listener,w=h.ha||h.src;h.fa&&Zo(h),h=C.call(w,T)}return h}function jr(h){return h=h[zn],h instanceof _i?h:null}var qe="__closure_events_fn_"+(1e9*Math.random()>>>0);function bl(h){return typeof h=="function"?h:(h[qe]||(h[qe]=function(T){return h.handleEvent(T)}),h[qe])}function we(){Z.call(this),this.i=new _i(this),this.M=this,this.F=null}P(we,Z),we.prototype[Lt]=!0,we.prototype.removeEventListener=function(h,T,C,w){qs(this,h,T,C,w)};function De(h,T){var C,w=h.F;if(w)for(C=[];w;w=w.F)C.push(w);if(h=h.M,w=T.type||T,typeof T=="string")T=new rt(T,h);else if(T instanceof rt)T.target=T.target||h;else{var F=T;T=new rt(w,h),V(T,F)}if(F=!0,C)for(var Q=C.length-1;0<=Q;Q--){var ut=T.g=C[Q];F=vi(ut,w,!0,T)&&F}if(ut=T.g=h,F=vi(ut,w,!0,T)&&F,F=vi(ut,w,!1,T)&&F,C)for(Q=0;Q<C.length;Q++)ut=T.g=C[Q],F=vi(ut,w,!1,T)&&F}we.prototype.N=function(){if(we.aa.N.call(this),this.i){var h=this.i,T;for(T in h.g){for(var C=h.g[T],w=0;w<C.length;w++)ni(C[w]);delete h.g[T],h.h--}}this.F=null},we.prototype.K=function(h,T,C,w){return this.i.add(String(h),T,!1,C,w)},we.prototype.L=function(h,T,C,w){return this.i.add(String(h),T,!0,C,w)};function vi(h,T,C,w){if(T=h.i.g[String(T)],!T)return!0;T=T.concat();for(var F=!0,Q=0;Q<T.length;++Q){var ut=T[Q];if(ut&&!ut.da&&ut.capture==C){var $t=ut.listener,Te=ut.ha||ut.src;ut.fa&&Xo(h.i,ut),F=$t.call(Te,w)!==!1&&F}}return F&&!w.defaultPrevented}function xl(h,T,C){if(typeof h=="function")C&&(h=A(h,C));else if(h&&typeof h.handleEvent=="function")h=A(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(T)?-1:d.setTimeout(h,T||0)}function ta(h){h.g=xl(()=>{h.g=null,h.i&&(h.i=!1,ta(h))},h.l);const T=h.h;h.h=null,h.m.apply(null,T)}class of extends Z{constructor(T,C){super(),this.m=T,this.l=C,this.h=null,this.i=!1,this.g=null}j(T){this.h=arguments,this.g?this.i=!0:ta(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function jo(h){Z.call(this),this.h=h,this.g={}}P(jo,Z);var Zi=[];function Xe(h){at(h.g,function(T,C){this.g.hasOwnProperty(C)&&Zo(T)},h),h.g={}}jo.prototype.N=function(){jo.aa.N.call(this),Xe(this)},jo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Mn=d.JSON.stringify,on=d.JSON.parse,sf=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function ea(){}ea.prototype.h=null;function Vl(h){return h.h||(h.h=h.i())}function ts(){}var ii={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ji(){rt.call(this,"d")}P(ji,rt);function Yn(){rt.call(this,"c")}P(Yn,rt);var Dn={},to=null;function Bs(){return to=to||new we}Dn.La="serverreachability";function na(h){rt.call(this,Dn.La,h)}P(na,rt);function Ti(h){const T=Bs();De(T,new na(T))}Dn.STAT_EVENT="statevent";function eo(h,T){rt.call(this,Dn.STAT_EVENT,h),this.stat=T}P(eo,rt);function Ge(h){const T=Bs();De(T,new eo(T,h))}Dn.Ma="timingevent";function ia(h,T){rt.call(this,Dn.Ma,h),this.size=T}P(ia,rt);function no(h,T){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},T)}function io(){this.g=!0}io.prototype.xa=function(){this.g=!1};function oa(h,T,C,w,F,Q){h.info(function(){if(h.g)if(Q)for(var ut="",$t=Q.split("&"),Te=0;Te<$t.length;Te++){var Dt=$t[Te].split("=");if(1<Dt.length){var xe=Dt[0];Dt=Dt[1];var Ve=xe.split("_");ut=2<=Ve.length&&Ve[1]=="type"?ut+(xe+"="+Dt+"&"):ut+(xe+"=redacted&")}}else ut=null;else ut=Q;return"XMLHTTP REQ ("+w+") [attempt "+F+"]: "+T+`
`+C+`
`+ut})}function sa(h,T,C,w,F,Q,ut){h.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+F+"]: "+T+`
`+C+`
`+Q+" "+ut})}function Ei(h,T,C,w){h.info(function(){return"XMLHTTP TEXT ("+T+"): "+oi(h,C)+(w?" "+w:"")})}function Pl(h,T){h.info(function(){return"TIMEOUT: "+T})}io.prototype.info=function(){};function oi(h,T){if(!h.g)return T;if(!T)return null;try{var C=JSON.parse(T);if(C){for(h=0;h<C.length;h++)if(Array.isArray(C[h])){var w=C[h];if(!(2>w.length)){var F=w[1];if(Array.isArray(F)&&!(1>F.length)){var Q=F[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(var ut=1;ut<F.length;ut++)F[ut]=""}}}}return Mn(C)}catch{return T}}var fe={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Be={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},si;function oo(){}P(oo,ea),oo.prototype.g=function(){return new XMLHttpRequest},oo.prototype.i=function(){return{}},si=new oo;function ri(h,T,C,w){this.j=h,this.i=T,this.l=C,this.R=w||1,this.U=new jo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ul}function Ul(){this.i=null,this.g="",this.h=!1}var ra={},Ai={};function es(h,T,C){h.L=1,h.v=os(de(T)),h.m=C,h.P=!0,Si(h,null)}function Si(h,T){h.F=Date.now(),Jn(h),h.A=de(h.v);var C=h.A,w=h.R;Array.isArray(w)||(w=[String(w)]),Ii(C.i,"t",w),h.C=0,C=h.j.J,h.h=new Ul,h.g=Wl(h.j,C?T:null,!h.m),0<h.O&&(h.M=new of(A(h.Y,h,h.g),h.O)),T=h.U,C=h.g,w=h.ca;var F="readystatechange";Array.isArray(F)||(F&&(Zi[0]=F.toString()),F=Zi);for(var Q=0;Q<F.length;Q++){var ut=Os(C,F[Q],w||T.handleEvent,!1,T.h||T);if(!ut)break;T.g[ut.key]=ut}T=h.H?M(h.H):{},h.m?(h.u||(h.u="POST"),T["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,T)):(h.u="GET",h.g.ea(h.A,h.u,null,T)),Ti(),oa(h.i,h.u,h.A,h.l,h.R,h.m)}ri.prototype.ca=function(h){h=h.target;const T=this.M;T&&an(h)==3?T.j():this.Y(h)},ri.prototype.Y=function(h){try{if(h==this.g)t:{const Ve=an(this.g);var T=this.g.Ba();const _o=this.g.Z();if(!(3>Ve)&&(Ve!=3||this.g&&(this.h.h||this.g.oa()||as(this.g)))){this.J||Ve!=4||T==7||(T==8||0>=_o?Ti(3):Ti(2)),Fs(this);var C=this.g.Z();this.X=C;e:if(Ci(this)){var w=as(this.g);h="";var F=w.length,Q=an(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){sn(this),so(this);var ut="";break e}this.h.i=new d.TextDecoder}for(T=0;T<F;T++)this.h.h=!0,h+=this.h.i.decode(w[T],{stream:!(Q&&T==F-1)});w.length=0,this.h.g+=h,this.C=0,ut=this.h.g}else ut=this.g.oa();if(this.o=C==200,sa(this.i,this.u,this.A,this.l,this.R,Ve,C),this.o){if(this.T&&!this.K){e:{if(this.g){var $t,Te=this.g;if(($t=Te.g?Te.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ot($t)){var Dt=$t;break e}}Dt=null}if(C=Dt)Ei(this.i,this.l,C,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ai(this,C);else{this.o=!1,this.s=3,Ge(12),sn(this),so(this);break t}}if(this.P){C=!0;let hn;for(;!this.J&&this.C<ut.length;)if(hn=ns(this,ut),hn==Ai){Ve==4&&(this.s=4,Ge(14),C=!1),Ei(this.i,this.l,null,"[Incomplete Response]");break}else if(hn==ra){this.s=4,Ge(15),Ei(this.i,this.l,ut,"[Invalid Chunk]"),C=!1;break}else Ei(this.i,this.l,hn,null),ai(this,hn);if(Ci(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ve!=4||ut.length!=0||this.h.h||(this.s=1,Ge(16),C=!1),this.o=this.o&&C,!C)Ei(this.i,this.l,ut,"[Invalid Chunked Response]"),sn(this),so(this);else if(0<ut.length&&!this.W){this.W=!0;var xe=this.j;xe.g==this&&xe.ba&&!xe.M&&(xe.j.info("Great, no buffering proxy detected. Bytes received: "+ut.length),ya(xe),xe.M=!0,Ge(11))}}else Ei(this.i,this.l,ut,null),ai(this,ut);Ve==4&&sn(this),this.o&&!this.J&&(Ve==4?Ql(this.j,this):(this.o=!1,Jn(this)))}else Fl(this.g),C==400&&0<ut.indexOf("Unknown SID")?(this.s=3,Ge(12)):(this.s=0,Ge(13)),sn(this),so(this)}}}catch{}finally{}};function Ci(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function ns(h,T){var C=h.C,w=T.indexOf(`
`,C);return w==-1?Ai:(C=Number(T.substring(C,w)),isNaN(C)?ra:(w+=1,w+C>T.length?Ai:(T=T.slice(w,w+C),h.C=w+C,T)))}ri.prototype.cancel=function(){this.J=!0,sn(this)};function Jn(h){h.S=Date.now()+h.I,me(h,h.I)}function me(h,T){if(h.B!=null)throw Error("WatchDog timer not null");h.B=no(A(h.ba,h),T)}function Fs(h){h.B&&(d.clearTimeout(h.B),h.B=null)}ri.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Pl(this.i,this.A),this.L!=2&&(Ti(),Ge(17)),sn(this),this.s=2,so(this)):me(this,this.S-h)};function so(h){h.j.G==0||h.J||Ql(h.j,h)}function sn(h){Fs(h);var T=h.M;T&&typeof T.ma=="function"&&T.ma(),h.M=null,Xe(h.U),h.g&&(T=h.g,h.g=null,T.abort(),T.ma())}function ai(h,T){try{var C=h.j;if(C.G!=0&&(C.g==h||ro(C.h,h))){if(!h.K&&ro(C.h,h)&&C.G==3){try{var w=C.Da.g.parse(T)}catch{w=null}if(Array.isArray(w)&&w.length==3){var F=w;if(F[0]==0){t:if(!C.u){if(C.g)if(C.g.F+3e3<h.F)go(C),mo(C);else break t;ga(C),Ge(18)}}else C.za=F[1],0<C.za-C.T&&37500>F[2]&&C.F&&C.v==0&&!C.C&&(C.C=no(A(C.Za,C),6e3));if(1>=Ll(C.h)&&C.ca){try{C.ca()}catch{}C.ca=void 0}}else Ni(C,11)}else if((h.K||C.g==h)&&go(C),!ot(T))for(F=C.Da.g.parse(T),T=0;T<F.length;T++){let Dt=F[T];if(C.T=Dt[0],Dt=Dt[1],C.G==2)if(Dt[0]=="c"){C.K=Dt[1],C.ia=Dt[2];const xe=Dt[3];xe!=null&&(C.la=xe,C.j.info("VER="+C.la));const Ve=Dt[4];Ve!=null&&(C.Aa=Ve,C.j.info("SVER="+C.Aa));const _o=Dt[5];_o!=null&&typeof _o=="number"&&0<_o&&(w=1.5*_o,C.L=w,C.j.info("backChannelRequestTimeoutMs_="+w)),w=C;const hn=h.g;if(hn){const cs=hn.g?hn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(cs){var Q=w.h;Q.g||cs.indexOf("spdy")==-1&&cs.indexOf("quic")==-1&&cs.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(ao(Q,Q.h),Q.h=null))}if(w.D){const Mi=hn.g?hn.g.getResponseHeader("X-HTTP-Session-Id"):null;Mi&&(w.ya=Mi,Bt(w.I,w.D,Mi))}}C.G=3,C.l&&C.l.ua(),C.ba&&(C.R=Date.now()-h.F,C.j.info("Handshake RTT: "+C.R+"ms")),w=C;var ut=h;if(w.qa=Xl(w,w.J?w.ia:null,w.W),ut.K){bn(w.h,ut);var $t=ut,Te=w.L;Te&&($t.I=Te),$t.B&&(Fs($t),Jn($t)),w.g=ut}else Jl(w);0<C.i.length&&Xs(C)}else Dt[0]!="stop"&&Dt[0]!="close"||Ni(C,7);else C.G==3&&(Dt[0]=="stop"||Dt[0]=="close"?Dt[0]=="stop"?Ni(C,7):pa(C):Dt[0]!="noop"&&C.l&&C.l.ta(Dt),C.v=0)}}Ti(4)}catch{}}var rf=class{constructor(h,T){this.g=h,this.map=T}};function aa(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function la(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Ll(h){return h.h?1:h.g?h.g.size:0}function ro(h,T){return h.h?h.h==T:h.g?h.g.has(T):!1}function ao(h,T){h.g?h.g.add(T):h.h=T}function bn(h,T){h.h&&h.h==T?h.h=null:h.g&&h.g.has(T)&&h.g.delete(T)}aa.prototype.cancel=function(){if(this.i=rn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function rn(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let T=h.i;for(const C of h.g.values())T=T.concat(C.D);return T}return q(h.i)}function kl(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(y(h)){for(var T=[],C=h.length,w=0;w<C;w++)T.push(h[w]);return T}T=[],C=0;for(w in h)T[C++]=h[w];return T}function af(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(y(h)||typeof h=="string"){var T=[];h=h.length;for(var C=0;C<h;C++)T.push(C);return T}T=[],C=0;for(const w in h)T[C++]=w;return T}}}function Hs(h,T){if(h.forEach&&typeof h.forEach=="function")h.forEach(T,void 0);else if(y(h)||typeof h=="string")Array.prototype.forEach.call(h,T,void 0);else for(var C=af(h),w=kl(h),F=w.length,Q=0;Q<F;Q++)T.call(void 0,w[Q],C&&C[Q],h)}var ua=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function zs(h,T){if(h){h=h.split("&");for(var C=0;C<h.length;C++){var w=h[C].indexOf("="),F=null;if(0<=w){var Q=h[C].substring(0,w);F=h[C].substring(w+1)}else Q=h[C];T(Q,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function Ri(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Ri){this.h=h.h,lo(this,h.j),this.o=h.o,this.g=h.g,is(this,h.s),this.l=h.l;var T=h.i,C=new li;C.i=T.i,T.g&&(C.g=new Map(T.g),C.h=T.h),Ys(this,C),this.m=h.m}else h&&(T=String(h).match(ua))?(this.h=!1,lo(this,T[1]||"",!0),this.o=uo(T[2]||""),this.g=uo(T[3]||"",!0),is(this,T[4]),this.l=uo(T[5]||"",!0),Ys(this,T[6]||"",!0),this.m=uo(T[7]||"")):(this.h=!1,this.i=new li(null,this.h))}Ri.prototype.toString=function(){var h=[],T=this.j;T&&h.push(xn(T,ca,!0),":");var C=this.g;return(C||T=="file")&&(h.push("//"),(T=this.o)&&h.push(xn(T,ca,!0),"@"),h.push(encodeURIComponent(String(C)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.s,C!=null&&h.push(":",String(C))),(C=this.l)&&(this.g&&C.charAt(0)!="/"&&h.push("/"),h.push(xn(C,C.charAt(0)=="/"?fa:Ol,!0))),(C=this.i.toString())&&h.push("?",C),(C=this.m)&&h.push("#",xn(C,cf)),h.join("")};function de(h){return new Ri(h)}function lo(h,T,C){h.j=C?uo(T,!0):T,h.j&&(h.j=h.j.replace(/:$/,""))}function is(h,T){if(T){if(T=Number(T),isNaN(T)||0>T)throw Error("Bad port number "+T);h.s=T}else h.s=null}function Ys(h,T,C){T instanceof li?(h.i=T,ql(h.i,h.h)):(C||(T=xn(T,uf)),h.i=new li(T,h.h))}function Bt(h,T,C){h.i.set(T,C)}function os(h){return Bt(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function uo(h,T){return h?T?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function xn(h,T,C){return typeof h=="string"?(h=encodeURI(h).replace(T,lf),C&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function lf(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var ca=/[#\/\?@]/g,Ol=/[#\?:]/g,fa=/[#\?]/g,uf=/[#\?@]/g,cf=/#/g;function li(h,T){this.h=this.g=null,this.i=h||null,this.j=!!T}function be(h){h.g||(h.g=new Map,h.h=0,h.i&&zs(h.i,function(T,C){h.add(decodeURIComponent(T.replace(/\+/g," ")),C)}))}n=li.prototype,n.add=function(h,T){be(this),this.i=null,h=vn(this,h);var C=this.g.get(h);return C||this.g.set(h,C=[]),C.push(T),this.h+=1,this};function Js(h,T){be(h),T=vn(h,T),h.g.has(T)&&(h.i=null,h.h-=h.g.get(T).length,h.g.delete(T))}function Ks(h,T){return be(h),T=vn(h,T),h.g.has(T)}n.forEach=function(h,T){be(this),this.g.forEach(function(C,w){C.forEach(function(F){h.call(T,F,w,this)},this)},this)},n.na=function(){be(this);const h=Array.from(this.g.values()),T=Array.from(this.g.keys()),C=[];for(let w=0;w<T.length;w++){const F=h[w];for(let Q=0;Q<F.length;Q++)C.push(T[w])}return C},n.V=function(h){be(this);let T=[];if(typeof h=="string")Ks(this,h)&&(T=T.concat(this.g.get(vn(this,h))));else{h=Array.from(this.g.values());for(let C=0;C<h.length;C++)T=T.concat(h[C])}return T},n.set=function(h,T){return be(this),this.i=null,h=vn(this,h),Ks(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[T]),this.h+=1,this},n.get=function(h,T){return h?(h=this.V(h),0<h.length?String(h[0]):T):T};function Ii(h,T,C){Js(h,T),0<C.length&&(h.i=null,h.g.set(vn(h,T),q(C)),h.h+=C.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],T=Array.from(this.g.keys());for(var C=0;C<T.length;C++){var w=T[C];const Q=encodeURIComponent(String(w)),ut=this.V(w);for(w=0;w<ut.length;w++){var F=Q;ut[w]!==""&&(F+="="+encodeURIComponent(String(ut[w]))),h.push(F)}}return this.i=h.join("&")};function vn(h,T){return T=String(T),h.j&&(T=T.toLowerCase()),T}function ql(h,T){T&&!h.j&&(be(h),h.i=null,h.g.forEach(function(C,w){var F=w.toLowerCase();w!=F&&(Js(this,w),Ii(this,F,C))},h)),h.j=T}function da(h,T){const C=new io;if(d.Image){const w=new Image;w.onload=I(dn,C,"TestLoadImage: loaded",!0,T,w),w.onerror=I(dn,C,"TestLoadImage: error",!1,T,w),w.onabort=I(dn,C,"TestLoadImage: abort",!1,T,w),w.ontimeout=I(dn,C,"TestLoadImage: timeout",!1,T,w),d.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=h}else T(!1)}function Gl(h,T){const C=new io,w=new AbortController,F=setTimeout(()=>{w.abort(),dn(C,"TestPingServer: timeout",!1,T)},1e4);fetch(h,{signal:w.signal}).then(Q=>{clearTimeout(F),Q.ok?dn(C,"TestPingServer: ok",!0,T):dn(C,"TestPingServer: server error",!1,T)}).catch(()=>{clearTimeout(F),dn(C,"TestPingServer: error",!1,T)})}function dn(h,T,C,w,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),w(C)}catch{}}function Kn(){this.g=new sf}function ha(h,T,C){const w=C||"";try{Hs(h,function(F,Q){let ut=F;m(F)&&(ut=Mn(F)),T.push(w+Q+"="+encodeURIComponent(ut))})}catch(F){throw T.push(w+"type="+encodeURIComponent("_badmap")),F}}function ui(h){this.l=h.Ub||null,this.j=h.eb||!1}P(ui,ea),ui.prototype.g=function(){return new Tn(this.l,this.j)},ui.prototype.i=(function(h){return function(){return h}})({});function Tn(h,T){we.call(this),this.D=h,this.o=T,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}P(Tn,we),n=Tn.prototype,n.open=function(h,T){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=T,this.readyState=1,co(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const T={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(T.body=h),(this.D||d).fetch(new Request(this.A,T)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ci(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,co(this)),this.g&&(this.readyState=3,co(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Qs(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Qs(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var T=h.value?h.value:new Uint8Array(0);(T=this.v.decode(T,{stream:!h.done}))&&(this.response=this.responseText+=T)}h.done?ci(this):co(this),this.readyState==3&&Qs(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,ci(this))},n.Qa=function(h){this.g&&(this.response=h,ci(this))},n.ga=function(){this.g&&ci(this)};function ci(h){h.readyState=4,h.l=null,h.j=null,h.v=null,co(h)}n.setRequestHeader=function(h,T){this.u.append(h,T)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],T=this.h.entries();for(var C=T.next();!C.done;)C=C.value,h.push(C[0]+": "+C[1]),C=T.next();return h.join(`\r
`)};function co(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Tn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function ss(h){let T="";return at(h,function(C,w){T+=w,T+=":",T+=C,T+=`\r
`}),T}function fo(h,T,C){t:{for(w in C){var w=!1;break t}w=!0}w||(C=ss(C),typeof h=="string"?C!=null&&encodeURIComponent(String(C)):Bt(h,T,C))}function ie(h){we.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}P(ie,we);var We=/^https?$/i,wi=["POST","PUT"];n=ie.prototype,n.Ha=function(h){this.J=h},n.ea=function(h,T,C,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);T=T?T.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():si.g(),this.v=this.o?Vl(this.o):Vl(si),this.g.onreadystatechange=A(this.Ea,this);try{this.B=!0,this.g.open(T,String(h),!0),this.B=!1}catch(Q){rs(this,Q);return}if(h=C||"",C=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var F in w)C.set(F,w[F]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const Q of w.keys())C.set(Q,w.get(Q));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(C.keys()).find(Q=>Q.toLowerCase()=="content-type"),F=d.FormData&&h instanceof d.FormData,!(0<=Array.prototype.indexOf.call(wi,T,void 0))||w||F||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,ut]of C)this.g.setRequestHeader(Q,ut);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{$s(this),this.u=!0,this.g.send(h),this.u=!1}catch(Q){rs(this,Q)}};function rs(h,T){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=T,h.m=5,ho(h),po(h)}function ho(h){h.A||(h.A=!0,De(h,"complete"),De(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,De(this,"complete"),De(this,"abort"),po(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),po(this,!0)),ie.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Bl(this):this.bb())},n.bb=function(){Bl(this)};function Bl(h){if(h.h&&typeof c<"u"&&(!h.v[1]||an(h)!=4||h.Z()!=2)){if(h.u&&an(h)==4)xl(h.Ea,0,h);else if(De(h,"readystatechange"),an(h)==4){h.h=!1;try{const ut=h.Z();t:switch(ut){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var T=!0;break t;default:T=!1}var C;if(!(C=T)){var w;if(w=ut===0){var F=String(h.D).match(ua)[1]||null;!F&&d.self&&d.self.location&&(F=d.self.location.protocol.slice(0,-1)),w=!We.test(F?F.toLowerCase():"")}C=w}if(C)De(h,"complete"),De(h,"success");else{h.m=6;try{var Q=2<an(h)?h.g.statusText:""}catch{Q=""}h.l=Q+" ["+h.Z()+"]",ho(h)}}finally{po(h)}}}}function po(h,T){if(h.g){$s(h);const C=h.g,w=h.v[0]?()=>{}:null;h.g=null,h.v=null,T||De(h,"ready");try{C.onreadystatechange=w}catch{}}}function $s(h){h.I&&(d.clearTimeout(h.I),h.I=null)}n.isActive=function(){return!!this.g};function an(h){return h.g?h.g.readyState:0}n.Z=function(){try{return 2<an(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var T=this.g.responseText;return h&&T.indexOf(h)==0&&(T=T.substring(h.length)),on(T)}};function as(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Fl(h){const T={};h=(h.g&&2<=an(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<h.length;w++){if(ot(h[w]))continue;var C=L(h[w]);const F=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const Q=T[F]||[];T[F]=Q,Q.push(C)}D(T,function(w){return w.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ls(h,T,C){return C&&C.internalChannelParams&&C.internalChannelParams[h]||T}function Hl(h){this.Aa=0,this.i=[],this.j=new io,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ls("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ls("baseRetryDelayMs",5e3,h),this.cb=ls("retryDelaySeedMs",1e4,h),this.Wa=ls("forwardChannelMaxRetries",2,h),this.wa=ls("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new aa(h&&h.concurrentRequestLimit),this.Da=new Kn,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Hl.prototype,n.la=8,n.G=1,n.connect=function(h,T,C,w){Ge(0),this.W=h,this.H=T||{},C&&w!==void 0&&(this.H.OSID=C,this.H.OAID=w),this.F=this.X,this.I=Xl(this,null,this.W),Xs(this)};function pa(h){if(zl(h),h.G==3){var T=h.U++,C=de(h.I);if(Bt(C,"SID",h.K),Bt(C,"RID",T),Bt(C,"TYPE","terminate"),us(h,C),T=new ri(h,h.j,T),T.L=2,T.v=os(de(C)),C=!1,d.navigator&&d.navigator.sendBeacon)try{C=d.navigator.sendBeacon(T.v.toString(),"")}catch{}!C&&d.Image&&(new Image().src=T.v,C=!0),C||(T.g=Wl(T.j,null),T.g.ea(T.v)),T.F=Date.now(),Jn(T)}_a(h)}function mo(h){h.g&&(ya(h),h.g.cancel(),h.g=null)}function zl(h){mo(h),h.u&&(d.clearTimeout(h.u),h.u=null),go(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&d.clearTimeout(h.s),h.s=null)}function Xs(h){if(!la(h.h)&&!h.s){h.s=!0;var T=h.Ga;lt||Qt(),_t||(lt(),_t=!0),Gt.add(T,h),h.B=0}}function ff(h,T){return Ll(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=T.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=no(A(h.Ga,h,T),$l(h,h.B)),h.B++,!0)}n.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const F=new ri(this,this.j,h);let Q=this.o;if(this.S&&(Q?(Q=M(Q),V(Q,this.S)):Q=this.S),this.m!==null||this.O||(F.H=Q,Q=null),this.P)t:{for(var T=0,C=0;C<this.i.length;C++){e:{var w=this.i[C];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break e}w=void 0}if(w===void 0)break;if(T+=w,4096<T){T=C;break t}if(T===4096||C===this.i.length-1){T=C+1;break t}}T=1e3}else T=1e3;T=ma(this,F,T),C=de(this.I),Bt(C,"RID",h),Bt(C,"CVER",22),this.D&&Bt(C,"X-HTTP-Session-Id",this.D),us(this,C),Q&&(this.O?T="headers="+encodeURIComponent(String(ss(Q)))+"&"+T:this.m&&fo(C,this.m,Q)),ao(this.h,F),this.Ua&&Bt(C,"TYPE","init"),this.P?(Bt(C,"$req",T),Bt(C,"SID","null"),F.T=!0,es(F,C,null)):es(F,C,T),this.G=2}}else this.G==3&&(h?Yl(this,h):this.i.length==0||la(this.h)||Yl(this))};function Yl(h,T){var C;T?C=T.l:C=h.U++;const w=de(h.I);Bt(w,"SID",h.K),Bt(w,"RID",C),Bt(w,"AID",h.T),us(h,w),h.m&&h.o&&fo(w,h.m,h.o),C=new ri(h,h.j,C,h.B+1),h.m===null&&(C.H=h.o),T&&(h.i=T.D.concat(h.i)),T=ma(h,C,1e3),C.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),ao(h.h,C),es(C,w,T)}function us(h,T){h.H&&at(h.H,function(C,w){Bt(T,w,C)}),h.l&&Hs({},function(C,w){Bt(T,w,C)})}function ma(h,T,C){C=Math.min(h.i.length,C);var w=h.l?A(h.l.Na,h.l,h):null;t:{var F=h.i;let Q=-1;for(;;){const ut=["count="+C];Q==-1?0<C?(Q=F[0].g,ut.push("ofs="+Q)):Q=0:ut.push("ofs="+Q);let $t=!0;for(let Te=0;Te<C;Te++){let Dt=F[Te].g;const xe=F[Te].map;if(Dt-=Q,0>Dt)Q=Math.max(0,F[Te].g-100),$t=!1;else try{ha(xe,ut,"req"+Dt+"_")}catch{w&&w(xe)}}if($t){w=ut.join("&");break t}}}return h=h.i.splice(0,C),T.D=h,w}function Jl(h){if(!h.g&&!h.u){h.Y=1;var T=h.Fa;lt||Qt(),_t||(lt(),_t=!0),Gt.add(T,h),h.v=0}}function ga(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=no(A(h.Fa,h),$l(h,h.v)),h.v++,!0)}n.Fa=function(){if(this.u=null,Kl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=no(A(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ge(10),mo(this),Kl(this))};function ya(h){h.A!=null&&(d.clearTimeout(h.A),h.A=null)}function Kl(h){h.g=new ri(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var T=de(h.qa);Bt(T,"RID","rpc"),Bt(T,"SID",h.K),Bt(T,"AID",h.T),Bt(T,"CI",h.F?"0":"1"),!h.F&&h.ja&&Bt(T,"TO",h.ja),Bt(T,"TYPE","xmlhttp"),us(h,T),h.m&&h.o&&fo(T,h.m,h.o),h.L&&(h.g.I=h.L);var C=h.g;h=h.ia,C.L=1,C.v=os(de(T)),C.m=null,C.P=!0,Si(C,h)}n.Za=function(){this.C!=null&&(this.C=null,mo(this),ga(this),Ge(19))};function go(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function Ql(h,T){var C=null;if(h.g==T){go(h),ya(h),h.g=null;var w=2}else if(ro(h.h,T))C=T.D,bn(h.h,T),w=1;else return;if(h.G!=0){if(T.o)if(w==1){C=T.m?T.m.length:0,T=Date.now()-T.F;var F=h.B;w=Bs(),De(w,new ia(w,C)),Xs(h)}else Jl(h);else if(F=T.s,F==3||F==0&&0<T.X||!(w==1&&ff(h,T)||w==2&&ga(h)))switch(C&&0<C.length&&(T=h.h,T.i=T.i.concat(C)),F){case 1:Ni(h,5);break;case 4:Ni(h,10);break;case 3:Ni(h,6);break;default:Ni(h,2)}}}function $l(h,T){let C=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(C*=2),C*T}function Ni(h,T){if(h.j.info("Error code "+T),T==2){var C=A(h.fb,h),w=h.Xa;const F=!w;w=new Ri(w||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||lo(w,"https"),os(w),F?da(w.toString(),C):Gl(w.toString(),C)}else Ge(2);h.G=0,h.l&&h.l.sa(T),_a(h),zl(h)}n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),Ge(2)):(this.j.info("Failed to ping google.com"),Ge(1))};function _a(h){if(h.G=0,h.ka=[],h.l){const T=rn(h.h);(T.length!=0||h.i.length!=0)&&(U(h.ka,T),U(h.ka,h.i),h.h.i.length=0,q(h.i),h.i.length=0),h.l.ra()}}function Xl(h,T,C){var w=C instanceof Ri?de(C):new Ri(C);if(w.g!="")T&&(w.g=T+"."+w.g),is(w,w.s);else{var F=d.location;w=F.protocol,T=T?T+"."+F.hostname:F.hostname,F=+F.port;var Q=new Ri(null);w&&lo(Q,w),T&&(Q.g=T),F&&is(Q,F),C&&(Q.l=C),w=Q}return C=h.D,T=h.ya,C&&T&&Bt(w,C,T),Bt(w,"VER",h.la),us(h,w),w}function Wl(h,T,C){if(T&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return T=h.Ca&&!h.pa?new ie(new ui({eb:C})):new ie(h.pa),T.Ha(h.J),T}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Zl(){}n=Zl.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Ws(){}Ws.prototype.g=function(h,T){return new ln(h,T)};function ln(h,T){we.call(this),this.g=new Hl(T),this.l=h,this.h=T&&T.messageUrlParams||null,h=T&&T.messageHeaders||null,T&&T.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=T&&T.initMessageHeaders||null,T&&T.messageContentType&&(h?h["X-WebChannel-Content-Type"]=T.messageContentType:h={"X-WebChannel-Content-Type":T.messageContentType}),T&&T.va&&(h?h["X-WebChannel-Client-Profile"]=T.va:h={"X-WebChannel-Client-Profile":T.va}),this.g.S=h,(h=T&&T.Sb)&&!ot(h)&&(this.g.m=h),this.v=T&&T.supportsCrossDomainXhr||!1,this.u=T&&T.sendRawJson||!1,(T=T&&T.httpSessionIdParam)&&!ot(T)&&(this.g.D=T,h=this.h,h!==null&&T in h&&(h=this.h,T in h&&delete h[T])),this.j=new yo(this)}P(ln,we),ln.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ln.prototype.close=function(){pa(this.g)},ln.prototype.o=function(h){var T=this.g;if(typeof h=="string"){var C={};C.__data__=h,h=C}else this.u&&(C={},C.__data__=Mn(h),h=C);T.i.push(new rf(T.Ya++,h)),T.G==3&&Xs(T)},ln.prototype.N=function(){this.g.l=null,delete this.j,pa(this.g),delete this.g,ln.aa.N.call(this)};function jl(h){ji.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var T=h.__sm__;if(T){t:{for(const C in T){h=C;break t}h=void 0}(this.i=h)&&(h=this.i,T=T!==null&&h in T?T[h]:void 0),this.data=T}else this.data=h}P(jl,ji);function tu(){Yn.call(this),this.status=1}P(tu,Yn);function yo(h){this.g=h}P(yo,Zl),yo.prototype.ua=function(){De(this.g,"a")},yo.prototype.ta=function(h){De(this.g,new jl(h))},yo.prototype.sa=function(h){De(this.g,new tu)},yo.prototype.ra=function(){De(this.g,"b")},Ws.prototype.createWebChannel=Ws.prototype.g,ln.prototype.send=ln.prototype.o,ln.prototype.open=ln.prototype.m,ln.prototype.close=ln.prototype.close,l0=function(){return new Ws},a0=function(){return Bs()},r0=Dn,Bh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},fe.NO_ERROR=0,fe.TIMEOUT=8,fe.HTTP_ERROR=6,gc=fe,Be.COMPLETE="complete",s0=Be,ts.EventType=ii,ii.OPEN="a",ii.CLOSE="b",ii.ERROR="c",ii.MESSAGE="d",we.prototype.listen=we.prototype.K,rl=ts,ie.prototype.listenOnce=ie.prototype.L,ie.prototype.getLastError=ie.prototype.Ka,ie.prototype.getLastErrorCode=ie.prototype.Ba,ie.prototype.getStatus=ie.prototype.Z,ie.prototype.getResponseJson=ie.prototype.Oa,ie.prototype.getResponseText=ie.prototype.oa,ie.prototype.send=ie.prototype.ea,ie.prototype.setWithCredentials=ie.prototype.Ha,o0=ie}).apply(typeof uc<"u"?uc:typeof self<"u"?self:typeof window<"u"?window:{});const dT="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}tn.UNAUTHENTICATED=new tn(null),tn.GOOGLE_CREDENTIALS=new tn("google-credentials-uid"),tn.FIRST_PARTY=new tn("first-party-uid"),tn.MOCK_USER=new tn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qr="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ds=new XE("@firebase/firestore");function ol(){return Ds.logLevel}function mt(n,...t){if(Ds.logLevel<=qt.DEBUG){const e=t.map(mp);Ds.debug(`Firestore (${Qr}): ${n}`,...e)}}function Qi(n,...t){if(Ds.logLevel<=qt.ERROR){const e=t.map(mp);Ds.error(`Firestore (${Qr}): ${n}`,...e)}}function kr(n,...t){if(Ds.logLevel<=qt.WARN){const e=t.map(mp);Ds.warn(`Firestore (${Qr}): ${n}`,...e)}}function mp(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(e){return JSON.stringify(e)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(n="Unexpected state"){const t=`FIRESTORE (${Qr}) INTERNAL ASSERTION FAILED: `+n;throw Qi(t),new Error(t)}function Zt(n,t){n||At()}function It(n,t){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ht extends Kr{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class jx{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(tn.UNAUTHENTICATED)))}shutdown(){}}class t1{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class e1{constructor(t){this.t=t,this.currentUser=tn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){Zt(this.o===void 0);let o=this.i;const r=y=>this.i!==o?(o=this.i,e(y)):Promise.resolve();let l=new zo;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new zo,t.enqueueRetryable((()=>r(this.currentUser)))};const c=()=>{const y=l;t.enqueueRetryable((async()=>{await y.promise,await r(this.currentUser)}))},d=y=>{mt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((y=>d(y))),setTimeout((()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?d(y):(mt("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new zo)}}),0),c()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((o=>this.i!==t?(mt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(Zt(typeof o.accessToken=="string"),new u0(o.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Zt(t===null||typeof t=="string"),new tn(t)}}class n1{constructor(t,e,o){this.l=t,this.h=e,this.P=o,this.type="FirstParty",this.user=tn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class i1{constructor(t,e,o){this.l=t,this.h=e,this.P=o}getToken(){return Promise.resolve(new n1(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable((()=>e(tn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class o1{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class s1{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,e){Zt(this.o===void 0);const o=l=>{l.error!=null&&mt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.R;return this.R=l.token,mt("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?e(l.token):Promise.resolve()};this.o=l=>{t.enqueueRetryable((()=>o(l)))};const r=l=>{mt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((l=>r(l))),setTimeout((()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?r(l):mt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((e=>e?(Zt(typeof e.token=="string"),this.R=e.token,new o1(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r1(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let o=0;o<n;o++)e[o]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let o="";for(;o.length<20;){const r=r1(40);for(let l=0;l<r.length;++l)o.length<20&&r[l]<e&&(o+=t.charAt(r[l]%t.length))}return o}}function zt(n,t){return n<t?-1:n>t?1:0}function Or(n,t,e){return n.length===t.length&&n.every(((o,r)=>e(o,t[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new ht(nt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new ht(nt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new ht(nt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ht(nt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Me.fromMillis(Date.now())}static fromDate(t){return Me.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),o=Math.floor(1e6*(t-1e3*e));return new Me(e,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?zt(this.nanoseconds,t.nanoseconds):zt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Rt(t)}static min(){return new Rt(new Me(0,0))}static max(){return new Rt(new Me(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(t,e,o){e===void 0?e=0:e>t.length&&At(),o===void 0?o=t.length-e:o>t.length-e&&At(),this.segments=t,this.offset=e,this.len=o}get length(){return this.len}isEqual(t){return gl.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof gl?t.forEach((o=>{e.push(o)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,o=this.limit();e<o;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const o=Math.min(t.length,e.length);for(let r=0;r<o;r++){const l=t.get(r),c=e.get(r);if(l<c)return-1;if(l>c)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class ae extends gl{construct(t,e,o){return new ae(t,e,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const o of t){if(o.indexOf("//")>=0)throw new ht(nt.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);e.push(...o.split("/").filter((r=>r.length>0)))}return new ae(e)}static emptyPath(){return new ae([])}}const a1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ke extends gl{construct(t,e,o){return new Ke(t,e,o)}static isValidIdentifier(t){return a1.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ke.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ke(["__name__"])}static fromServerFormat(t){const e=[];let o="",r=0;const l=()=>{if(o.length===0)throw new ht(nt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(o),o=""};let c=!1;for(;r<t.length;){const d=t[r];if(d==="\\"){if(r+1===t.length)throw new ht(nt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const y=t[r+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new ht(nt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);o+=y,r+=2}else d==="`"?(c=!c,r++):d!=="."||c?(o+=d,r++):(l(),r++)}if(l(),c)throw new ht(nt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Ke(e)}static emptyPath(){return new Ke([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(t){this.path=t}static fromPath(t){return new vt(ae.fromString(t))}static fromName(t){return new vt(ae.fromString(t).popFirst(5))}static empty(){return new vt(ae.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&ae.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return ae.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new vt(new ae(t.slice()))}}function l1(n,t){const e=n.toTimestamp().seconds,o=n.toTimestamp().nanoseconds+1,r=Rt.fromTimestamp(o===1e9?new Me(e+1,0):new Me(e,o));return new Jo(r,vt.empty(),t)}function u1(n){return new Jo(n.readTime,n.key,-1)}class Jo{constructor(t,e,o){this.readTime=t,this.documentKey=e,this.largestBatchId=o}static min(){return new Jo(Rt.min(),vt.empty(),-1)}static max(){return new Jo(Rt.max(),vt.empty(),-1)}}function c1(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=vt.comparator(n.documentKey,t.documentKey),e!==0?e:zt(n.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class d1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cl(n){if(n.code!==nt.FAILED_PRECONDITION||n.message!==f1)throw n;mt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&At(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new st(((o,r)=>{this.nextCallback=l=>{this.wrapSuccess(t,l).next(o,r)},this.catchCallback=l=>{this.wrapFailure(e,l).next(o,r)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof st?e:st.resolve(e)}catch(e){return st.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):st.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):st.reject(e)}static resolve(t){return new st(((e,o)=>{e(t)}))}static reject(t){return new st(((e,o)=>{o(t)}))}static waitFor(t){return new st(((e,o)=>{let r=0,l=0,c=!1;t.forEach((d=>{++r,d.next((()=>{++l,c&&l===r&&e()}),(y=>o(y)))})),c=!0,l===r&&e()}))}static or(t){let e=st.resolve(!1);for(const o of t)e=e.next((r=>r?st.resolve(r):o()));return e}static forEach(t,e){const o=[];return t.forEach(((r,l)=>{o.push(e.call(this,r,l))})),this.waitFor(o)}static mapArray(t,e){return new st(((o,r)=>{const l=t.length,c=new Array(l);let d=0;for(let y=0;y<l;y++){const m=y;e(t[m]).next((v=>{c[m]=v,++d,d===l&&o(c)}),(v=>r(v)))}}))}static doWhile(t,e){return new st(((o,r)=>{const l=()=>{t()===!0?e().next((()=>{l()}),r):o()};l()}))}}function h1(n){const t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function Rl(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=o=>this.ie(o),this.se=o=>e.writeSequenceNumber(o))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}gp.oe=-1;function zc(n){return n==null}function Mc(n){return n===0&&1/n==-1/0}function p1(n){return typeof n=="number"&&Number.isInteger(n)&&!Mc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hT(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function $r(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function f0(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(t,e){this.comparator=t,this.root=e||Je.EMPTY}insert(t,e){return new ce(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Je.BLACK,null,null))}remove(t){return new ce(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Je.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const o=this.comparator(t,e.key);if(o===0)return e.value;o<0?e=e.left:o>0&&(e=e.right)}return null}indexOf(t){let e=0,o=this.root;for(;!o.isEmpty();){const r=this.comparator(t,o.key);if(r===0)return e+o.left.size;r<0?o=o.left:(e+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,o)=>(t(e,o),!1)))}toString(){const t=[];return this.inorderTraversal(((e,o)=>(t.push(`${e}:${o}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new cc(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new cc(this.root,t,this.comparator,!1)}getReverseIterator(){return new cc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new cc(this.root,t,this.comparator,!0)}}class cc{constructor(t,e,o,r){this.isReverse=r,this.nodeStack=[];let l=1;for(;!t.isEmpty();)if(l=e?o(t.key,e):1,e&&r&&(l*=-1),l<0)t=this.isReverse?t.left:t.right;else{if(l===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Je{constructor(t,e,o,r,l){this.key=t,this.value=e,this.color=o??Je.RED,this.left=r??Je.EMPTY,this.right=l??Je.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,o,r,l){return new Je(t??this.key,e??this.value,o??this.color,r??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,o){let r=this;const l=o(t,r.key);return r=l<0?r.copy(null,null,null,r.left.insert(t,e,o),null):l===0?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,o)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Je.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let o,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),e(t,r.key)===0){if(r.right.isEmpty())return Je.EMPTY;o=r.right.min(),r=r.copy(o.key,o.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Je.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Je.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw At();const t=this.left.check();if(t!==this.right.check())throw At();return t+(this.isRed()?0:1)}}Je.EMPTY=null,Je.RED=!0,Je.BLACK=!1;Je.EMPTY=new class{constructor(){this.size=0}get key(){throw At()}get value(){throw At()}get color(){throw At()}get left(){throw At()}get right(){throw At()}copy(t,e,o,r,l){return this}insert(t,e,o){return new Je(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(t){this.comparator=t,this.data=new ce(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,o)=>(t(e),!1)))}forEachInRange(t,e){const o=this.data.getIteratorFrom(t[0]);for(;o.hasNext();){const r=o.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let o;for(o=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();o.hasNext();)if(!t(o.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new pT(this.data.getIterator())}getIteratorFrom(t){return new pT(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((o=>{e=e.add(o)})),e}isEqual(t){if(!(t instanceof Qe)||this.size!==t.size)return!1;const e=this.data.getIterator(),o=t.data.getIterator();for(;e.hasNext();){const r=e.getNext().key,l=o.getNext().key;if(this.comparator(r,l)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new Qe(this.comparator);return e.data=t,e}}class pT{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(t){this.fields=t,t.sort(Ke.comparator)}static empty(){return new Wn([])}unionWith(t){let e=new Qe(Ke.comparator);for(const o of this.fields)e=e.add(o);for(const o of t)e=e.add(o);return new Wn(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Or(this.fields,t.fields,((e,o)=>e.isEqual(o)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(t){this.binaryString=t}static fromBase64String(t){const e=(function(r){try{return atob(r)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new d0("Invalid base64 string: "+l):l}})(t);return new $e(e)}static fromUint8Array(t){const e=(function(r){let l="";for(let c=0;c<r.length;++c)l+=String.fromCharCode(r[c]);return l})(t);return new $e(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(e){return btoa(e)})(this.binaryString)}toUint8Array(){return(function(e){const o=new Uint8Array(e.length);for(let r=0;r<e.length;r++)o[r]=e.charCodeAt(r);return o})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return zt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}$e.EMPTY_BYTE_STRING=new $e("");const m1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ko(n){if(Zt(!!n),typeof n=="string"){let t=0;const e=m1.exec(n);if(Zt(!!e),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}const o=new Date(n);return{seconds:Math.floor(o.getTime()/1e3),nanos:t}}return{seconds:_e(n.seconds),nanos:_e(n.nanos)}}function _e(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function bs(n){return typeof n=="string"?$e.fromBase64String(n):$e.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yp(n){var t,e;return((e=(((t=n?.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||e===void 0?void 0:e.stringValue)==="server_timestamp"}function _p(n){const t=n.mapValue.fields.__previous_value__;return yp(t)?_p(t):t}function yl(n){const t=Ko(n.mapValue.fields.__local_write_time__.timestampValue);return new Me(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{constructor(t,e,o,r,l,c,d,y,m){this.databaseId=t,this.appId=e,this.persistenceKey=o,this.host=r,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=y,this.useFetchStreams=m}}class _l{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new _l("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof _l&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fc={mapValue:{}};function xs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?yp(n)?4:_1(n)?9007199254740991:y1(n)?10:11:At()}function yi(n,t){if(n===t)return!0;const e=xs(n);if(e!==xs(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return yl(n).isEqual(yl(t));case 3:return(function(r,l){if(typeof r.timestampValue=="string"&&typeof l.timestampValue=="string"&&r.timestampValue.length===l.timestampValue.length)return r.timestampValue===l.timestampValue;const c=Ko(r.timestampValue),d=Ko(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(n,t);case 5:return n.stringValue===t.stringValue;case 6:return(function(r,l){return bs(r.bytesValue).isEqual(bs(l.bytesValue))})(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return(function(r,l){return _e(r.geoPointValue.latitude)===_e(l.geoPointValue.latitude)&&_e(r.geoPointValue.longitude)===_e(l.geoPointValue.longitude)})(n,t);case 2:return(function(r,l){if("integerValue"in r&&"integerValue"in l)return _e(r.integerValue)===_e(l.integerValue);if("doubleValue"in r&&"doubleValue"in l){const c=_e(r.doubleValue),d=_e(l.doubleValue);return c===d?Mc(c)===Mc(d):isNaN(c)&&isNaN(d)}return!1})(n,t);case 9:return Or(n.arrayValue.values||[],t.arrayValue.values||[],yi);case 10:case 11:return(function(r,l){const c=r.mapValue.fields||{},d=l.mapValue.fields||{};if(hT(c)!==hT(d))return!1;for(const y in c)if(c.hasOwnProperty(y)&&(d[y]===void 0||!yi(c[y],d[y])))return!1;return!0})(n,t);default:return At()}}function vl(n,t){return(n.values||[]).find((e=>yi(e,t)))!==void 0}function qr(n,t){if(n===t)return 0;const e=xs(n),o=xs(t);if(e!==o)return zt(e,o);switch(e){case 0:case 9007199254740991:return 0;case 1:return zt(n.booleanValue,t.booleanValue);case 2:return(function(l,c){const d=_e(l.integerValue||l.doubleValue),y=_e(c.integerValue||c.doubleValue);return d<y?-1:d>y?1:d===y?0:isNaN(d)?isNaN(y)?0:-1:1})(n,t);case 3:return mT(n.timestampValue,t.timestampValue);case 4:return mT(yl(n),yl(t));case 5:return zt(n.stringValue,t.stringValue);case 6:return(function(l,c){const d=bs(l),y=bs(c);return d.compareTo(y)})(n.bytesValue,t.bytesValue);case 7:return(function(l,c){const d=l.split("/"),y=c.split("/");for(let m=0;m<d.length&&m<y.length;m++){const v=zt(d[m],y[m]);if(v!==0)return v}return zt(d.length,y.length)})(n.referenceValue,t.referenceValue);case 8:return(function(l,c){const d=zt(_e(l.latitude),_e(c.latitude));return d!==0?d:zt(_e(l.longitude),_e(c.longitude))})(n.geoPointValue,t.geoPointValue);case 9:return gT(n.arrayValue,t.arrayValue);case 10:return(function(l,c){var d,y,m,v;const E=l.fields||{},A=c.fields||{},I=(d=E.value)===null||d===void 0?void 0:d.arrayValue,P=(y=A.value)===null||y===void 0?void 0:y.arrayValue,q=zt(((m=I?.values)===null||m===void 0?void 0:m.length)||0,((v=P?.values)===null||v===void 0?void 0:v.length)||0);return q!==0?q:gT(I,P)})(n.mapValue,t.mapValue);case 11:return(function(l,c){if(l===fc.mapValue&&c===fc.mapValue)return 0;if(l===fc.mapValue)return 1;if(c===fc.mapValue)return-1;const d=l.fields||{},y=Object.keys(d),m=c.fields||{},v=Object.keys(m);y.sort(),v.sort();for(let E=0;E<y.length&&E<v.length;++E){const A=zt(y[E],v[E]);if(A!==0)return A;const I=qr(d[y[E]],m[v[E]]);if(I!==0)return I}return zt(y.length,v.length)})(n.mapValue,t.mapValue);default:throw At()}}function mT(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return zt(n,t);const e=Ko(n),o=Ko(t),r=zt(e.seconds,o.seconds);return r!==0?r:zt(e.nanos,o.nanos)}function gT(n,t){const e=n.values||[],o=t.values||[];for(let r=0;r<e.length&&r<o.length;++r){const l=qr(e[r],o[r]);if(l)return l}return zt(e.length,o.length)}function Gr(n){return Fh(n)}function Fh(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(e){const o=Ko(e);return`time(${o.seconds},${o.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(e){return bs(e).toBase64()})(n.bytesValue):"referenceValue"in n?(function(e){return vt.fromName(e).toString()})(n.referenceValue):"geoPointValue"in n?(function(e){return`geo(${e.latitude},${e.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(e){let o="[",r=!0;for(const l of e.values||[])r?r=!1:o+=",",o+=Fh(l);return o+"]"})(n.arrayValue):"mapValue"in n?(function(e){const o=Object.keys(e.fields||{}).sort();let r="{",l=!0;for(const c of o)l?l=!1:r+=",",r+=`${c}:${Fh(e.fields[c])}`;return r+"}"})(n.mapValue):At()}function yT(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function Hh(n){return!!n&&"integerValue"in n}function vp(n){return!!n&&"arrayValue"in n}function _T(n){return!!n&&"nullValue"in n}function vT(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function yc(n){return!!n&&"mapValue"in n}function y1(n){var t,e;return((e=(((t=n?.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||e===void 0?void 0:e.stringValue)==="__vector__"}function ul(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return $r(n.mapValue.fields,((e,o)=>t.mapValue.fields[e]=ul(o))),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=ul(n.arrayValue.values[e]);return t}return Object.assign({},n)}function _1(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(t){this.value=t}static empty(){return new Bn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let o=0;o<t.length-1;++o)if(e=(e.mapValue.fields||{})[t.get(o)],!yc(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=ul(e)}setAll(t){let e=Ke.emptyPath(),o={},r=[];t.forEach(((c,d)=>{if(!e.isImmediateParentOf(d)){const y=this.getFieldsMap(e);this.applyChanges(y,o,r),o={},r=[],e=d.popLast()}c?o[d.lastSegment()]=ul(c):r.push(d.lastSegment())}));const l=this.getFieldsMap(e);this.applyChanges(l,o,r)}delete(t){const e=this.field(t.popLast());yc(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return yi(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let o=0;o<t.length;++o){let r=e.mapValue.fields[t.get(o)];yc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(o)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,o){$r(e,((r,l)=>t[r]=l));for(const r of o)delete t[r]}clone(){return new Bn(ul(this.value))}}function h0(n){const t=[];return $r(n.fields,((e,o)=>{const r=new Ke([e]);if(yc(o)){const l=h0(o.mapValue).fields;if(l.length===0)t.push(r);else for(const c of l)t.push(r.child(c))}else t.push(r)})),new Wn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(t,e,o,r,l,c,d){this.key=t,this.documentType=e,this.version=o,this.readTime=r,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(t){return new en(t,0,Rt.min(),Rt.min(),Rt.min(),Bn.empty(),0)}static newFoundDocument(t,e,o,r){return new en(t,1,e,Rt.min(),o,r,0)}static newNoDocument(t,e){return new en(t,2,e,Rt.min(),Rt.min(),Bn.empty(),0)}static newUnknownDocument(t,e){return new en(t,3,e,Rt.min(),Rt.min(),Bn.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(Rt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Bn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Bn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Rt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof en&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new en(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(t,e){this.position=t,this.inclusive=e}}function TT(n,t,e){let o=0;for(let r=0;r<n.position.length;r++){const l=t[r],c=n.position[r];if(l.field.isKeyField()?o=vt.comparator(vt.fromName(c.referenceValue),e.key):o=qr(c,e.data.field(l.field)),l.dir==="desc"&&(o*=-1),o!==0)break}return o}function ET(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!yi(n.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(t,e="asc"){this.field=t,this.dir=e}}function v1(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{}class Ie extends p0{constructor(t,e,o){super(),this.field=t,this.op=e,this.value=o}static create(t,e,o){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,o):new E1(t,e,o):e==="array-contains"?new C1(t,o):e==="in"?new R1(t,o):e==="not-in"?new I1(t,o):e==="array-contains-any"?new w1(t,o):new Ie(t,e,o)}static createKeyFieldInFilter(t,e,o){return e==="in"?new A1(t,o):new S1(t,o)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&this.matchesComparison(qr(e,this.value)):e!==null&&xs(this.value)===xs(e)&&this.matchesComparison(qr(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return At()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ti extends p0{constructor(t,e){super(),this.filters=t,this.op=e,this.ae=null}static create(t,e){return new ti(t,e)}matches(t){return m0(this)?this.filters.find((e=>!e.matches(t)))===void 0:this.filters.find((e=>e.matches(t)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function m0(n){return n.op==="and"}function g0(n){return T1(n)&&m0(n)}function T1(n){for(const t of n.filters)if(t instanceof ti)return!1;return!0}function zh(n){if(n instanceof Ie)return n.field.canonicalString()+n.op.toString()+Gr(n.value);if(g0(n))return n.filters.map((t=>zh(t))).join(",");{const t=n.filters.map((e=>zh(e))).join(",");return`${n.op}(${t})`}}function y0(n,t){return n instanceof Ie?(function(o,r){return r instanceof Ie&&o.op===r.op&&o.field.isEqual(r.field)&&yi(o.value,r.value)})(n,t):n instanceof ti?(function(o,r){return r instanceof ti&&o.op===r.op&&o.filters.length===r.filters.length?o.filters.reduce(((l,c,d)=>l&&y0(c,r.filters[d])),!0):!1})(n,t):void At()}function _0(n){return n instanceof Ie?(function(e){return`${e.field.canonicalString()} ${e.op} ${Gr(e.value)}`})(n):n instanceof ti?(function(e){return e.op.toString()+" {"+e.getFilters().map(_0).join(" ,")+"}"})(n):"Filter"}class E1 extends Ie{constructor(t,e,o){super(t,e,o),this.key=vt.fromName(o.referenceValue)}matches(t){const e=vt.comparator(t.key,this.key);return this.matchesComparison(e)}}class A1 extends Ie{constructor(t,e){super(t,"in",e),this.keys=v0("in",e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class S1 extends Ie{constructor(t,e){super(t,"not-in",e),this.keys=v0("not-in",e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function v0(n,t){var e;return(((e=t.arrayValue)===null||e===void 0?void 0:e.values)||[]).map((o=>vt.fromName(o.referenceValue)))}class C1 extends Ie{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return vp(e)&&vl(e.arrayValue,this.value)}}class R1 extends Ie{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&vl(this.value.arrayValue,e)}}class I1 extends Ie{constructor(t,e){super(t,"not-in",e)}matches(t){if(vl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&!vl(this.value.arrayValue,e)}}class w1 extends Ie{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!vp(e)||!e.arrayValue.values)&&e.arrayValue.values.some((o=>vl(this.value.arrayValue,o)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(t,e=null,o=[],r=[],l=null,c=null,d=null){this.path=t,this.collectionGroup=e,this.orderBy=o,this.filters=r,this.limit=l,this.startAt=c,this.endAt=d,this.ue=null}}function AT(n,t=null,e=[],o=[],r=null,l=null,c=null){return new N1(n,t,e,o,r,l,c)}function Tp(n){const t=It(n);if(t.ue===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((o=>zh(o))).join(","),e+="|ob:",e+=t.orderBy.map((o=>(function(l){return l.field.canonicalString()+l.dir})(o))).join(","),zc(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((o=>Gr(o))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((o=>Gr(o))).join(",")),t.ue=e}return t.ue}function Ep(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!v1(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!y0(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!ET(n.startAt,t.startAt)&&ET(n.endAt,t.endAt)}function Yh(n){return vt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(t,e=null,o=[],r=[],l=null,c="F",d=null,y=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=o,this.filters=r,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=y,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function M1(n,t,e,o,r,l,c,d){return new Xr(n,t,e,o,r,l,c,d)}function T0(n){return new Xr(n)}function ST(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function E0(n){return n.collectionGroup!==null}function cl(n){const t=It(n);if(t.ce===null){t.ce=[];const e=new Set;for(const l of t.explicitOrderBy)t.ce.push(l),e.add(l.field.canonicalString());const o=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Qe(Ke.comparator);return c.filters.forEach((y=>{y.getFlattenedFilters().forEach((m=>{m.isInequality()&&(d=d.add(m.field))}))})),d})(t).forEach((l=>{e.has(l.canonicalString())||l.isKeyField()||t.ce.push(new Tl(l,o))})),e.has(Ke.keyField().canonicalString())||t.ce.push(new Tl(Ke.keyField(),o))}return t.ce}function mi(n){const t=It(n);return t.le||(t.le=D1(t,cl(n))),t.le}function D1(n,t){if(n.limitType==="F")return AT(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map((r=>{const l=r.dir==="desc"?"asc":"desc";return new Tl(r.field,l)}));const e=n.endAt?new Dc(n.endAt.position,n.endAt.inclusive):null,o=n.startAt?new Dc(n.startAt.position,n.startAt.inclusive):null;return AT(n.path,n.collectionGroup,t,n.filters,n.limit,e,o)}}function Jh(n,t){const e=n.filters.concat([t]);return new Xr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),e,n.limit,n.limitType,n.startAt,n.endAt)}function Kh(n,t,e){return new Xr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function Yc(n,t){return Ep(mi(n),mi(t))&&n.limitType===t.limitType}function A0(n){return`${Tp(mi(n))}|lt:${n.limitType}`}function wr(n){return`Query(target=${(function(e){let o=e.path.canonicalString();return e.collectionGroup!==null&&(o+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(o+=`, filters: [${e.filters.map((r=>_0(r))).join(", ")}]`),zc(e.limit)||(o+=", limit: "+e.limit),e.orderBy.length>0&&(o+=`, orderBy: [${e.orderBy.map((r=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(r))).join(", ")}]`),e.startAt&&(o+=", startAt: ",o+=e.startAt.inclusive?"b:":"a:",o+=e.startAt.position.map((r=>Gr(r))).join(",")),e.endAt&&(o+=", endAt: ",o+=e.endAt.inclusive?"a:":"b:",o+=e.endAt.position.map((r=>Gr(r))).join(",")),`Target(${o})`})(mi(n))}; limitType=${n.limitType})`}function Jc(n,t){return t.isFoundDocument()&&(function(o,r){const l=r.key.path;return o.collectionGroup!==null?r.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(l):vt.isDocumentKey(o.path)?o.path.isEqual(l):o.path.isImmediateParentOf(l)})(n,t)&&(function(o,r){for(const l of cl(o))if(!l.field.isKeyField()&&r.data.field(l.field)===null)return!1;return!0})(n,t)&&(function(o,r){for(const l of o.filters)if(!l.matches(r))return!1;return!0})(n,t)&&(function(o,r){return!(o.startAt&&!(function(c,d,y){const m=TT(c,d,y);return c.inclusive?m<=0:m<0})(o.startAt,cl(o),r)||o.endAt&&!(function(c,d,y){const m=TT(c,d,y);return c.inclusive?m>=0:m>0})(o.endAt,cl(o),r))})(n,t)}function b1(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function S0(n){return(t,e)=>{let o=!1;for(const r of cl(n)){const l=x1(r,t,e);if(l!==0)return l;o=o||r.field.isKeyField()}return 0}}function x1(n,t,e){const o=n.field.isKeyField()?vt.comparator(t.key,e.key):(function(l,c,d){const y=c.data.field(l),m=d.data.field(l);return y!==null&&m!==null?qr(y,m):At()})(n.field,t,e);switch(n.dir){case"asc":return o;case"desc":return-1*o;default:return At()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),o=this.inner[e];if(o!==void 0){for(const[r,l]of o)if(this.equalsFn(r,t))return l}}has(t){return this.get(t)!==void 0}set(t,e){const o=this.mapKeyFn(t),r=this.inner[o];if(r===void 0)return this.inner[o]=[[t,e]],void this.innerSize++;for(let l=0;l<r.length;l++)if(this.equalsFn(r[l][0],t))return void(r[l]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),o=this.inner[e];if(o===void 0)return!1;for(let r=0;r<o.length;r++)if(this.equalsFn(o[r][0],t))return o.length===1?delete this.inner[e]:o.splice(r,1),this.innerSize--,!0;return!1}forEach(t){$r(this.inner,((e,o)=>{for(const[r,l]of o)t(r,l)}))}isEmpty(){return f0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1=new ce(vt.comparator);function $i(){return V1}const C0=new ce(vt.comparator);function al(...n){let t=C0;for(const e of n)t=t.insert(e.key,e);return t}function R0(n){let t=C0;return n.forEach(((e,o)=>t=t.insert(e,o.overlayedDocument))),t}function Ns(){return fl()}function I0(){return fl()}function fl(){return new Wr((n=>n.toString()),((n,t)=>n.isEqual(t)))}const P1=new ce(vt.comparator),U1=new Qe(vt.comparator);function Ut(...n){let t=U1;for(const e of n)t=t.add(e);return t}const L1=new Qe(zt);function k1(){return L1}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ap(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Mc(t)?"-0":t}}function w0(n){return{integerValue:""+n}}function O1(n,t){return p1(t)?w0(t):Ap(n,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(){this._=void 0}}function q1(n,t,e){return n instanceof bc?(function(r,l){const c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return l&&yp(l)&&(l=_p(l)),l&&(c.fields.__previous_value__=l),{mapValue:c}})(e,t):n instanceof El?M0(n,t):n instanceof Al?D0(n,t):(function(r,l){const c=N0(r,l),d=CT(c)+CT(r.Pe);return Hh(c)&&Hh(r.Pe)?w0(d):Ap(r.serializer,d)})(n,t)}function G1(n,t,e){return n instanceof El?M0(n,t):n instanceof Al?D0(n,t):e}function N0(n,t){return n instanceof xc?(function(o){return Hh(o)||(function(l){return!!l&&"doubleValue"in l})(o)})(t)?t:{integerValue:0}:null}class bc extends Kc{}class El extends Kc{constructor(t){super(),this.elements=t}}function M0(n,t){const e=b0(t);for(const o of n.elements)e.some((r=>yi(r,o)))||e.push(o);return{arrayValue:{values:e}}}class Al extends Kc{constructor(t){super(),this.elements=t}}function D0(n,t){let e=b0(t);for(const o of n.elements)e=e.filter((r=>!yi(r,o)));return{arrayValue:{values:e}}}class xc extends Kc{constructor(t,e){super(),this.serializer=t,this.Pe=e}}function CT(n){return _e(n.integerValue||n.doubleValue)}function b0(n){return vp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function B1(n,t){return n.field.isEqual(t.field)&&(function(o,r){return o instanceof El&&r instanceof El||o instanceof Al&&r instanceof Al?Or(o.elements,r.elements,yi):o instanceof xc&&r instanceof xc?yi(o.Pe,r.Pe):o instanceof bc&&r instanceof bc})(n.transform,t.transform)}class F1{constructor(t,e){this.version=t,this.transformResults=e}}class Yi{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Yi}static exists(t){return new Yi(void 0,t)}static updateTime(t){return new Yi(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function _c(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}class Qc{}function x0(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new P0(n.key,Yi.none()):new Il(n.key,n.data,Yi.none());{const e=n.data,o=Bn.empty();let r=new Qe(Ke.comparator);for(let l of t.fields)if(!r.has(l)){let c=e.field(l);c===null&&l.length>1&&(l=l.popLast(),c=e.field(l)),c===null?o.delete(l):o.set(l,c),r=r.add(l)}return new Ps(n.key,o,new Wn(r.toArray()),Yi.none())}}function H1(n,t,e){n instanceof Il?(function(r,l,c){const d=r.value.clone(),y=IT(r.fieldTransforms,l,c.transformResults);d.setAll(y),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(n,t,e):n instanceof Ps?(function(r,l,c){if(!_c(r.precondition,l))return void l.convertToUnknownDocument(c.version);const d=IT(r.fieldTransforms,l,c.transformResults),y=l.data;y.setAll(V0(r)),y.setAll(d),l.convertToFoundDocument(c.version,y).setHasCommittedMutations()})(n,t,e):(function(r,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,t,e)}function dl(n,t,e,o){return n instanceof Il?(function(l,c,d,y){if(!_c(l.precondition,c))return d;const m=l.value.clone(),v=wT(l.fieldTransforms,y,c);return m.setAll(v),c.convertToFoundDocument(c.version,m).setHasLocalMutations(),null})(n,t,e,o):n instanceof Ps?(function(l,c,d,y){if(!_c(l.precondition,c))return d;const m=wT(l.fieldTransforms,y,c),v=c.data;return v.setAll(V0(l)),v.setAll(m),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(n,t,e,o):(function(l,c,d){return _c(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(n,t,e)}function z1(n,t){let e=null;for(const o of n.fieldTransforms){const r=t.data.field(o.field),l=N0(o.transform,r||null);l!=null&&(e===null&&(e=Bn.empty()),e.set(o.field,l))}return e||null}function RT(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!(function(o,r){return o===void 0&&r===void 0||!(!o||!r)&&Or(o,r,((l,c)=>B1(l,c)))})(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}class Il extends Qc{constructor(t,e,o,r=[]){super(),this.key=t,this.value=e,this.precondition=o,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Ps extends Qc{constructor(t,e,o,r,l=[]){super(),this.key=t,this.data=e,this.fieldMask=o,this.precondition=r,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function V0(n){const t=new Map;return n.fieldMask.fields.forEach((e=>{if(!e.isEmpty()){const o=n.data.field(e);t.set(e,o)}})),t}function IT(n,t,e){const o=new Map;Zt(n.length===e.length);for(let r=0;r<e.length;r++){const l=n[r],c=l.transform,d=t.data.field(l.field);o.set(l.field,G1(c,d,e[r]))}return o}function wT(n,t,e){const o=new Map;for(const r of n){const l=r.transform,c=e.data.field(r.field);o.set(r.field,q1(l,c,t))}return o}class P0 extends Qc{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Y1 extends Qc{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(t,e,o,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=o,this.mutations=r}applyToRemoteDocument(t,e){const o=e.mutationResults;for(let r=0;r<this.mutations.length;r++){const l=this.mutations[r];l.key.isEqual(t.key)&&H1(l,t,o[r])}}applyToLocalView(t,e){for(const o of this.baseMutations)o.key.isEqual(t.key)&&(e=dl(o,t,e,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(t.key)&&(e=dl(o,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const o=I0();return this.mutations.forEach((r=>{const l=t.get(r.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=e.has(r.key)?null:d;const y=x0(c,d);y!==null&&o.set(r.key,y),c.isValidDocument()||c.convertToNoDocument(Rt.min())})),o}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),Ut())}isEqual(t){return this.batchId===t.batchId&&Or(this.mutations,t.mutations,((e,o)=>RT(e,o)))&&Or(this.baseMutations,t.baseMutations,((e,o)=>RT(e,o)))}}class Sp{constructor(t,e,o,r){this.batch=t,this.commitVersion=e,this.mutationResults=o,this.docVersions=r}static from(t,e,o){Zt(t.mutations.length===o.length);let r=(function(){return P1})();const l=t.mutations;for(let c=0;c<l.length;c++)r=r.insert(l[c].key,o[c].version);return new Sp(t,e,o,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Re,Ot;function $1(n){switch(n){default:return At();case nt.CANCELLED:case nt.UNKNOWN:case nt.DEADLINE_EXCEEDED:case nt.RESOURCE_EXHAUSTED:case nt.INTERNAL:case nt.UNAVAILABLE:case nt.UNAUTHENTICATED:return!1;case nt.INVALID_ARGUMENT:case nt.NOT_FOUND:case nt.ALREADY_EXISTS:case nt.PERMISSION_DENIED:case nt.FAILED_PRECONDITION:case nt.ABORTED:case nt.OUT_OF_RANGE:case nt.UNIMPLEMENTED:case nt.DATA_LOSS:return!0}}function U0(n){if(n===void 0)return Qi("GRPC error has no .code"),nt.UNKNOWN;switch(n){case Re.OK:return nt.OK;case Re.CANCELLED:return nt.CANCELLED;case Re.UNKNOWN:return nt.UNKNOWN;case Re.DEADLINE_EXCEEDED:return nt.DEADLINE_EXCEEDED;case Re.RESOURCE_EXHAUSTED:return nt.RESOURCE_EXHAUSTED;case Re.INTERNAL:return nt.INTERNAL;case Re.UNAVAILABLE:return nt.UNAVAILABLE;case Re.UNAUTHENTICATED:return nt.UNAUTHENTICATED;case Re.INVALID_ARGUMENT:return nt.INVALID_ARGUMENT;case Re.NOT_FOUND:return nt.NOT_FOUND;case Re.ALREADY_EXISTS:return nt.ALREADY_EXISTS;case Re.PERMISSION_DENIED:return nt.PERMISSION_DENIED;case Re.FAILED_PRECONDITION:return nt.FAILED_PRECONDITION;case Re.ABORTED:return nt.ABORTED;case Re.OUT_OF_RANGE:return nt.OUT_OF_RANGE;case Re.UNIMPLEMENTED:return nt.UNIMPLEMENTED;case Re.DATA_LOSS:return nt.DATA_LOSS;default:return At()}}(Ot=Re||(Re={}))[Ot.OK=0]="OK",Ot[Ot.CANCELLED=1]="CANCELLED",Ot[Ot.UNKNOWN=2]="UNKNOWN",Ot[Ot.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ot[Ot.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ot[Ot.NOT_FOUND=5]="NOT_FOUND",Ot[Ot.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ot[Ot.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ot[Ot.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ot[Ot.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ot[Ot.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ot[Ot.ABORTED=10]="ABORTED",Ot[Ot.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ot[Ot.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ot[Ot.INTERNAL=13]="INTERNAL",Ot[Ot.UNAVAILABLE=14]="UNAVAILABLE",Ot[Ot.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X1(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W1=new Ms([4294967295,4294967295],0);function NT(n){const t=X1().encode(n),e=new i0;return e.update(t),new Uint8Array(e.digest())}function MT(n){const t=new DataView(n.buffer),e=t.getUint32(0,!0),o=t.getUint32(4,!0),r=t.getUint32(8,!0),l=t.getUint32(12,!0);return[new Ms([e,o],0),new Ms([r,l],0)]}class Cp{constructor(t,e,o){if(this.bitmap=t,this.padding=e,this.hashCount=o,e<0||e>=8)throw new ll(`Invalid padding: ${e}`);if(o<0)throw new ll(`Invalid hash count: ${o}`);if(t.length>0&&this.hashCount===0)throw new ll(`Invalid hash count: ${o}`);if(t.length===0&&e!==0)throw new ll(`Invalid padding when bitmap length is 0: ${e}`);this.Ie=8*t.length-e,this.Te=Ms.fromNumber(this.Ie)}Ee(t,e,o){let r=t.add(e.multiply(Ms.fromNumber(o)));return r.compare(W1)===1&&(r=new Ms([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;const e=NT(t),[o,r]=MT(e);for(let l=0;l<this.hashCount;l++){const c=this.Ee(o,r,l);if(!this.de(c))return!1}return!0}static create(t,e,o){const r=t%8==0?0:8-t%8,l=new Uint8Array(Math.ceil(t/8)),c=new Cp(l,r,e);return o.forEach((d=>c.insert(d))),c}insert(t){if(this.Ie===0)return;const e=NT(t),[o,r]=MT(e);for(let l=0;l<this.hashCount;l++){const c=this.Ee(o,r,l);this.Ae(c)}}Ae(t){const e=Math.floor(t/8),o=t%8;this.bitmap[e]|=1<<o}}class ll extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(t,e,o,r,l){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=o,this.documentUpdates=r,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(t,e,o){const r=new Map;return r.set(t,wl.createSynthesizedTargetChangeForCurrentChange(t,e,o)),new $c(Rt.min(),r,new ce(zt),$i(),Ut())}}class wl{constructor(t,e,o,r,l){this.resumeToken=t,this.current=e,this.addedDocuments=o,this.modifiedDocuments=r,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(t,e,o){return new wl(o,e,Ut(),Ut(),Ut())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(t,e,o,r){this.Re=t,this.removedTargetIds=e,this.key=o,this.Ve=r}}class L0{constructor(t,e){this.targetId=t,this.me=e}}class k0{constructor(t,e,o=$e.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=o,this.cause=r}}class DT{constructor(){this.fe=0,this.ge=xT(),this.pe=$e.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}ve(){let t=Ut(),e=Ut(),o=Ut();return this.ge.forEach(((r,l)=>{switch(l){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:o=o.add(r);break;default:At()}})),new wl(this.pe,this.ye,t,e,o)}Ce(){this.we=!1,this.ge=xT()}Fe(t,e){this.we=!0,this.ge=this.ge.insert(t,e)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,Zt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Z1{constructor(t){this.Le=t,this.Be=new Map,this.ke=$i(),this.qe=bT(),this.Qe=new ce(zt)}Ke(t){for(const e of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(e,t.Ve):this.Ue(e,t.key,t.Ve);for(const e of t.removedTargetIds)this.Ue(e,t.key,t.Ve)}We(t){this.forEachTarget(t,(e=>{const o=this.Ge(e);switch(t.state){case 0:this.ze(e)&&o.De(t.resumeToken);break;case 1:o.Oe(),o.Se||o.Ce(),o.De(t.resumeToken);break;case 2:o.Oe(),o.Se||this.removeTarget(e);break;case 3:this.ze(e)&&(o.Ne(),o.De(t.resumeToken));break;case 4:this.ze(e)&&(this.je(e),o.De(t.resumeToken));break;default:At()}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Be.forEach(((o,r)=>{this.ze(r)&&e(r)}))}He(t){const e=t.targetId,o=t.me.count,r=this.Je(e);if(r){const l=r.target;if(Yh(l))if(o===0){const c=new vt(l.path);this.Ue(e,c,en.newNoDocument(c,Rt.min()))}else Zt(o===1);else{const c=this.Ye(e);if(c!==o){const d=this.Ze(t),y=d?this.Xe(d,t,c):1;if(y!==0){this.je(e);const m=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(e,m)}}}}}Ze(t){const e=t.me.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:o="",padding:r=0},hashCount:l=0}=e;let c,d;try{c=bs(o).toUint8Array()}catch(y){if(y instanceof d0)return kr("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{d=new Cp(c,r,l)}catch(y){return kr(y instanceof ll?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return d.Ie===0?null:d}Xe(t,e,o){return e.me.count===o-this.nt(t,e.targetId)?0:2}nt(t,e){const o=this.Le.getRemoteKeysForTarget(e);let r=0;return o.forEach((l=>{const c=this.Le.tt(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;t.mightContain(d)||(this.Ue(e,l,null),r++)})),r}rt(t){const e=new Map;this.Be.forEach(((l,c)=>{const d=this.Je(c);if(d){if(l.current&&Yh(d.target)){const y=new vt(d.target.path);this.ke.get(y)!==null||this.it(c,y)||this.Ue(c,y,en.newNoDocument(y,t))}l.be&&(e.set(c,l.ve()),l.Ce())}}));let o=Ut();this.qe.forEach(((l,c)=>{let d=!0;c.forEachWhile((y=>{const m=this.Je(y);return!m||m.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(o=o.add(l))})),this.ke.forEach(((l,c)=>c.setReadTime(t)));const r=new $c(t,e,this.Qe,this.ke,o);return this.ke=$i(),this.qe=bT(),this.Qe=new ce(zt),r}$e(t,e){if(!this.ze(t))return;const o=this.it(t,e.key)?2:0;this.Ge(t).Fe(e.key,o),this.ke=this.ke.insert(e.key,e),this.qe=this.qe.insert(e.key,this.st(e.key).add(t))}Ue(t,e,o){if(!this.ze(t))return;const r=this.Ge(t);this.it(t,e)?r.Fe(e,1):r.Me(e),this.qe=this.qe.insert(e,this.st(e).delete(t)),o&&(this.ke=this.ke.insert(e,o))}removeTarget(t){this.Be.delete(t)}Ye(t){const e=this.Ge(t).ve();return this.Le.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let e=this.Be.get(t);return e||(e=new DT,this.Be.set(t,e)),e}st(t){let e=this.qe.get(t);return e||(e=new Qe(zt),this.qe=this.qe.insert(t,e)),e}ze(t){const e=this.Je(t)!==null;return e||mt("WatchChangeAggregator","Detected inactive target",t),e}Je(t){const e=this.Be.get(t);return e&&e.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new DT),this.Le.getRemoteKeysForTarget(t).forEach((e=>{this.Ue(t,e,null)}))}it(t,e){return this.Le.getRemoteKeysForTarget(t).has(e)}}function bT(){return new ce(vt.comparator)}function xT(){return new ce(vt.comparator)}const j1={asc:"ASCENDING",desc:"DESCENDING"},tV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},eV={and:"AND",or:"OR"};class nV{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function Qh(n,t){return n.useProto3Json||zc(t)?t:{value:t}}function Vc(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function O0(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function iV(n,t){return Vc(n,t.toTimestamp())}function gi(n){return Zt(!!n),Rt.fromTimestamp((function(e){const o=Ko(e);return new Me(o.seconds,o.nanos)})(n))}function Rp(n,t){return $h(n,t).canonicalString()}function $h(n,t){const e=(function(r){return new ae(["projects",r.projectId,"databases",r.database])})(n).child("documents");return t===void 0?e:e.child(t)}function q0(n){const t=ae.fromString(n);return Zt(z0(t)),t}function Xh(n,t){return Rp(n.databaseId,t.path)}function yh(n,t){const e=q0(t);if(e.get(1)!==n.databaseId.projectId)throw new ht(nt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new ht(nt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new vt(B0(e))}function G0(n,t){return Rp(n.databaseId,t)}function oV(n){const t=q0(n);return t.length===4?ae.emptyPath():B0(t)}function Wh(n){return new ae(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function B0(n){return Zt(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function VT(n,t,e){return{name:Xh(n,t),fields:e.value.mapValue.fields}}function sV(n,t){let e;if("targetChange"in t){t.targetChange;const o=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:At()})(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],l=(function(m,v){return m.useProto3Json?(Zt(v===void 0||typeof v=="string"),$e.fromBase64String(v||"")):(Zt(v===void 0||v instanceof Buffer||v instanceof Uint8Array),$e.fromUint8Array(v||new Uint8Array))})(n,t.targetChange.resumeToken),c=t.targetChange.cause,d=c&&(function(m){const v=m.code===void 0?nt.UNKNOWN:U0(m.code);return new ht(v,m.message||"")})(c);e=new k0(o,r,l,d||null)}else if("documentChange"in t){t.documentChange;const o=t.documentChange;o.document,o.document.name,o.document.updateTime;const r=yh(n,o.document.name),l=gi(o.document.updateTime),c=o.document.createTime?gi(o.document.createTime):Rt.min(),d=new Bn({mapValue:{fields:o.document.fields}}),y=en.newFoundDocument(r,l,c,d),m=o.targetIds||[],v=o.removedTargetIds||[];e=new vc(m,v,y.key,y)}else if("documentDelete"in t){t.documentDelete;const o=t.documentDelete;o.document;const r=yh(n,o.document),l=o.readTime?gi(o.readTime):Rt.min(),c=en.newNoDocument(r,l),d=o.removedTargetIds||[];e=new vc([],d,c.key,c)}else if("documentRemove"in t){t.documentRemove;const o=t.documentRemove;o.document;const r=yh(n,o.document),l=o.removedTargetIds||[];e=new vc([],l,r,null)}else{if(!("filter"in t))return At();{t.filter;const o=t.filter;o.targetId;const{count:r=0,unchangedNames:l}=o,c=new Q1(r,l),d=o.targetId;e=new L0(d,c)}}return e}function rV(n,t){let e;if(t instanceof Il)e={update:VT(n,t.key,t.value)};else if(t instanceof P0)e={delete:Xh(n,t.key)};else if(t instanceof Ps)e={update:VT(n,t.key,t.data),updateMask:mV(t.fieldMask)};else{if(!(t instanceof Y1))return At();e={verify:Xh(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map((o=>(function(l,c){const d=c.transform;if(d instanceof bc)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof El)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Al)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof xc)return{fieldPath:c.field.canonicalString(),increment:d.Pe};throw At()})(0,o)))),t.precondition.isNone||(e.currentDocument=(function(r,l){return l.updateTime!==void 0?{updateTime:iV(r,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:At()})(n,t.precondition)),e}function aV(n,t){return n&&n.length>0?(Zt(t!==void 0),n.map((e=>(function(r,l){let c=r.updateTime?gi(r.updateTime):gi(l);return c.isEqual(Rt.min())&&(c=gi(l)),new F1(c,r.transformResults||[])})(e,t)))):[]}function lV(n,t){return{documents:[G0(n,t.path)]}}function uV(n,t){const e={structuredQuery:{}},o=t.path;let r;t.collectionGroup!==null?(r=o,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=o.popLast(),e.structuredQuery.from=[{collectionId:o.lastSegment()}]),e.parent=G0(n,r);const l=(function(m){if(m.length!==0)return H0(ti.create(m,"and"))})(t.filters);l&&(e.structuredQuery.where=l);const c=(function(m){if(m.length!==0)return m.map((v=>(function(A){return{field:Nr(A.field),direction:dV(A.dir)}})(v)))})(t.orderBy);c&&(e.structuredQuery.orderBy=c);const d=Qh(n,t.limit);return d!==null&&(e.structuredQuery.limit=d),t.startAt&&(e.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(t.startAt)),t.endAt&&(e.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(t.endAt)),{_t:e,parent:r}}function cV(n){let t=oV(n.parent);const e=n.structuredQuery,o=e.from?e.from.length:0;let r=null;if(o>0){Zt(o===1);const v=e.from[0];v.allDescendants?r=v.collectionId:t=t.child(v.collectionId)}let l=[];e.where&&(l=(function(E){const A=F0(E);return A instanceof ti&&g0(A)?A.getFilters():[A]})(e.where));let c=[];e.orderBy&&(c=(function(E){return E.map((A=>(function(P){return new Tl(Mr(P.field),(function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(P.direction))})(A)))})(e.orderBy));let d=null;e.limit&&(d=(function(E){let A;return A=typeof E=="object"?E.value:E,zc(A)?null:A})(e.limit));let y=null;e.startAt&&(y=(function(E){const A=!!E.before,I=E.values||[];return new Dc(I,A)})(e.startAt));let m=null;return e.endAt&&(m=(function(E){const A=!E.before,I=E.values||[];return new Dc(I,A)})(e.endAt)),M1(t,r,c,l,d,"F",y,m)}function fV(n,t){const e=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return At()}})(t.purpose);return e==null?null:{"goog-listen-tags":e}}function F0(n){return n.unaryFilter!==void 0?(function(e){switch(e.unaryFilter.op){case"IS_NAN":const o=Mr(e.unaryFilter.field);return Ie.create(o,"==",{doubleValue:NaN});case"IS_NULL":const r=Mr(e.unaryFilter.field);return Ie.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Mr(e.unaryFilter.field);return Ie.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Mr(e.unaryFilter.field);return Ie.create(c,"!=",{nullValue:"NULL_VALUE"});default:return At()}})(n):n.fieldFilter!==void 0?(function(e){return Ie.create(Mr(e.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return At()}})(e.fieldFilter.op),e.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(e){return ti.create(e.compositeFilter.filters.map((o=>F0(o))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return At()}})(e.compositeFilter.op))})(n):At()}function dV(n){return j1[n]}function hV(n){return tV[n]}function pV(n){return eV[n]}function Nr(n){return{fieldPath:n.canonicalString()}}function Mr(n){return Ke.fromServerFormat(n.fieldPath)}function H0(n){return n instanceof Ie?(function(e){if(e.op==="=="){if(vT(e.value))return{unaryFilter:{field:Nr(e.field),op:"IS_NAN"}};if(_T(e.value))return{unaryFilter:{field:Nr(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(vT(e.value))return{unaryFilter:{field:Nr(e.field),op:"IS_NOT_NAN"}};if(_T(e.value))return{unaryFilter:{field:Nr(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Nr(e.field),op:hV(e.op),value:e.value}}})(n):n instanceof ti?(function(e){const o=e.getFilters().map((r=>H0(r)));return o.length===1?o[0]:{compositeFilter:{op:pV(e.op),filters:o}}})(n):At()}function mV(n){const t=[];return n.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function z0(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(t,e,o,r,l=Rt.min(),c=Rt.min(),d=$e.EMPTY_BYTE_STRING,y=null){this.target=t,this.targetId=e,this.purpose=o,this.sequenceNumber=r,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=y}withSequenceNumber(t){return new Bo(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new Bo(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Bo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Bo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gV{constructor(t){this.ct=t}}function yV(n){const t=cV({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Kh(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _V{constructor(){this.un=new vV}addToCollectionParentIndex(t,e){return this.un.add(e),st.resolve()}getCollectionParents(t,e){return st.resolve(this.un.getEntries(e))}addFieldIndex(t,e){return st.resolve()}deleteFieldIndex(t,e){return st.resolve()}deleteAllFieldIndexes(t){return st.resolve()}createTargetIndexes(t,e){return st.resolve()}getDocumentsMatchingTarget(t,e){return st.resolve(null)}getIndexType(t,e){return st.resolve(0)}getFieldIndexes(t,e){return st.resolve([])}getNextCollectionGroupToUpdate(t){return st.resolve(null)}getMinOffset(t,e){return st.resolve(Jo.min())}getMinOffsetFromCollectionGroup(t,e){return st.resolve(Jo.min())}updateCollectionGroup(t,e,o){return st.resolve()}updateIndexEntries(t,e){return st.resolve()}}class vV{constructor(){this.index={}}add(t){const e=t.lastSegment(),o=t.popLast(),r=this.index[e]||new Qe(ae.comparator),l=!r.has(o);return this.index[e]=r.add(o),l}has(t){const e=t.lastSegment(),o=t.popLast(),r=this.index[e];return r&&r.has(o)}getEntries(t){return(this.index[t]||new Qe(ae.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(t){this.Ln=t}next(){return this.Ln+=2,this.Ln}static Bn(){return new Br(0)}static kn(){return new Br(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TV{constructor(){this.changes=new Wr((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,en.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const o=this.changes.get(e);return o!==void 0?st.resolve(o):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EV{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AV{constructor(t,e,o,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=o,this.indexManager=r}getDocument(t,e){let o=null;return this.documentOverlayCache.getOverlay(t,e).next((r=>(o=r,this.remoteDocumentCache.getEntry(t,e)))).next((r=>(o!==null&&dl(o.mutation,r,Wn.empty(),Me.now()),r)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((o=>this.getLocalViewOfDocuments(t,o,Ut()).next((()=>o))))}getLocalViewOfDocuments(t,e,o=Ut()){const r=Ns();return this.populateOverlays(t,r,e).next((()=>this.computeViews(t,e,r,o).next((l=>{let c=al();return l.forEach(((d,y)=>{c=c.insert(d,y.overlayedDocument)})),c}))))}getOverlayedDocuments(t,e){const o=Ns();return this.populateOverlays(t,o,e).next((()=>this.computeViews(t,e,o,Ut())))}populateOverlays(t,e,o){const r=[];return o.forEach((l=>{e.has(l)||r.push(l)})),this.documentOverlayCache.getOverlays(t,r).next((l=>{l.forEach(((c,d)=>{e.set(c,d)}))}))}computeViews(t,e,o,r){let l=$i();const c=fl(),d=(function(){return fl()})();return e.forEach(((y,m)=>{const v=o.get(m.key);r.has(m.key)&&(v===void 0||v.mutation instanceof Ps)?l=l.insert(m.key,m):v!==void 0?(c.set(m.key,v.mutation.getFieldMask()),dl(v.mutation,m,v.mutation.getFieldMask(),Me.now())):c.set(m.key,Wn.empty())})),this.recalculateAndSaveOverlays(t,l).next((y=>(y.forEach(((m,v)=>c.set(m,v))),e.forEach(((m,v)=>{var E;return d.set(m,new EV(v,(E=c.get(m))!==null&&E!==void 0?E:null))})),d)))}recalculateAndSaveOverlays(t,e){const o=fl();let r=new ce(((c,d)=>c-d)),l=Ut();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((c=>{for(const d of c)d.keys().forEach((y=>{const m=e.get(y);if(m===null)return;let v=o.get(y)||Wn.empty();v=d.applyToLocalView(m,v),o.set(y,v);const E=(r.get(d.batchId)||Ut()).add(y);r=r.insert(d.batchId,E)}))})).next((()=>{const c=[],d=r.getReverseIterator();for(;d.hasNext();){const y=d.getNext(),m=y.key,v=y.value,E=I0();v.forEach((A=>{if(!l.has(A)){const I=x0(e.get(A),o.get(A));I!==null&&E.set(A,I),l=l.add(A)}})),c.push(this.documentOverlayCache.saveOverlays(t,m,E))}return st.waitFor(c)})).next((()=>o))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((o=>this.recalculateAndSaveOverlays(t,o)))}getDocumentsMatchingQuery(t,e,o,r){return(function(c){return vt.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):E0(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,o,r):this.getDocumentsMatchingCollectionQuery(t,e,o,r)}getNextDocuments(t,e,o,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,o,r).next((l=>{const c=r-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,o.largestBatchId,r-l.size):st.resolve(Ns());let d=-1,y=l;return c.next((m=>st.forEach(m,((v,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),l.get(v)?st.resolve():this.remoteDocumentCache.getEntry(t,v).next((A=>{y=y.insert(v,A)}))))).next((()=>this.populateOverlays(t,m,l))).next((()=>this.computeViews(t,y,m,Ut()))).next((v=>({batchId:d,changes:R0(v)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new vt(e)).next((o=>{let r=al();return o.isFoundDocument()&&(r=r.insert(o.key,o)),r}))}getDocumentsMatchingCollectionGroupQuery(t,e,o,r){const l=e.collectionGroup;let c=al();return this.indexManager.getCollectionParents(t,l).next((d=>st.forEach(d,(y=>{const m=(function(E,A){return new Xr(A,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(e,y.child(l));return this.getDocumentsMatchingCollectionQuery(t,m,o,r).next((v=>{v.forEach(((E,A)=>{c=c.insert(E,A)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(t,e,o,r){let l;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,o.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,o,l,r)))).next((c=>{l.forEach(((y,m)=>{const v=m.getKey();c.get(v)===null&&(c=c.insert(v,en.newInvalidDocument(v)))}));let d=al();return c.forEach(((y,m)=>{const v=l.get(y);v!==void 0&&dl(v.mutation,m,Wn.empty(),Me.now()),Jc(e,m)&&(d=d.insert(y,m))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SV{constructor(t){this.serializer=t,this.hr=new Map,this.Pr=new Map}getBundleMetadata(t,e){return st.resolve(this.hr.get(e))}saveBundleMetadata(t,e){return this.hr.set(e.id,(function(r){return{id:r.id,version:r.version,createTime:gi(r.createTime)}})(e)),st.resolve()}getNamedQuery(t,e){return st.resolve(this.Pr.get(e))}saveNamedQuery(t,e){return this.Pr.set(e.name,(function(r){return{name:r.name,query:yV(r.bundledQuery),readTime:gi(r.readTime)}})(e)),st.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CV{constructor(){this.overlays=new ce(vt.comparator),this.Ir=new Map}getOverlay(t,e){return st.resolve(this.overlays.get(e))}getOverlays(t,e){const o=Ns();return st.forEach(e,(r=>this.getOverlay(t,r).next((l=>{l!==null&&o.set(r,l)})))).next((()=>o))}saveOverlays(t,e,o){return o.forEach(((r,l)=>{this.ht(t,e,l)})),st.resolve()}removeOverlaysForBatchId(t,e,o){const r=this.Ir.get(o);return r!==void 0&&(r.forEach((l=>this.overlays=this.overlays.remove(l))),this.Ir.delete(o)),st.resolve()}getOverlaysForCollection(t,e,o){const r=Ns(),l=e.length+1,c=new vt(e.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const y=d.getNext().value,m=y.getKey();if(!e.isPrefixOf(m.path))break;m.path.length===l&&y.largestBatchId>o&&r.set(y.getKey(),y)}return st.resolve(r)}getOverlaysForCollectionGroup(t,e,o,r){let l=new ce(((m,v)=>m-v));const c=this.overlays.getIterator();for(;c.hasNext();){const m=c.getNext().value;if(m.getKey().getCollectionGroup()===e&&m.largestBatchId>o){let v=l.get(m.largestBatchId);v===null&&(v=Ns(),l=l.insert(m.largestBatchId,v)),v.set(m.getKey(),m)}}const d=Ns(),y=l.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach(((m,v)=>d.set(m,v))),!(d.size()>=r)););return st.resolve(d)}ht(t,e,o){const r=this.overlays.get(o.key);if(r!==null){const c=this.Ir.get(r.largestBatchId).delete(o.key);this.Ir.set(r.largestBatchId,c)}this.overlays=this.overlays.insert(o.key,new K1(e,o));let l=this.Ir.get(e);l===void 0&&(l=Ut(),this.Ir.set(e,l)),this.Ir.set(e,l.add(o.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RV{constructor(){this.sessionToken=$e.EMPTY_BYTE_STRING}getSessionToken(t){return st.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,st.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(){this.Tr=new Qe(Le.Er),this.dr=new Qe(Le.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(t,e){const o=new Le(t,e);this.Tr=this.Tr.add(o),this.dr=this.dr.add(o)}Rr(t,e){t.forEach((o=>this.addReference(o,e)))}removeReference(t,e){this.Vr(new Le(t,e))}mr(t,e){t.forEach((o=>this.removeReference(o,e)))}gr(t){const e=new vt(new ae([])),o=new Le(e,t),r=new Le(e,t+1),l=[];return this.dr.forEachInRange([o,r],(c=>{this.Vr(c),l.push(c.key)})),l}pr(){this.Tr.forEach((t=>this.Vr(t)))}Vr(t){this.Tr=this.Tr.delete(t),this.dr=this.dr.delete(t)}yr(t){const e=new vt(new ae([])),o=new Le(e,t),r=new Le(e,t+1);let l=Ut();return this.dr.forEachInRange([o,r],(c=>{l=l.add(c.key)})),l}containsKey(t){const e=new Le(t,0),o=this.Tr.firstAfterOrEqual(e);return o!==null&&t.isEqual(o.key)}}class Le{constructor(t,e){this.key=t,this.wr=e}static Er(t,e){return vt.comparator(t.key,e.key)||zt(t.wr,e.wr)}static Ar(t,e){return zt(t.wr,e.wr)||vt.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IV{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.Sr=1,this.br=new Qe(Le.Er)}checkEmpty(t){return st.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,o,r){const l=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new J1(l,e,o,r);this.mutationQueue.push(c);for(const d of r)this.br=this.br.add(new Le(d.key,l)),this.indexManager.addToCollectionParentIndex(t,d.key.path.popLast());return st.resolve(c)}lookupMutationBatch(t,e){return st.resolve(this.Dr(e))}getNextMutationBatchAfterBatchId(t,e){const o=e+1,r=this.vr(o),l=r<0?0:r;return st.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return st.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(t){return st.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const o=new Le(e,0),r=new Le(e,Number.POSITIVE_INFINITY),l=[];return this.br.forEachInRange([o,r],(c=>{const d=this.Dr(c.wr);l.push(d)})),st.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(t,e){let o=new Qe(zt);return e.forEach((r=>{const l=new Le(r,0),c=new Le(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([l,c],(d=>{o=o.add(d.wr)}))})),st.resolve(this.Cr(o))}getAllMutationBatchesAffectingQuery(t,e){const o=e.path,r=o.length+1;let l=o;vt.isDocumentKey(l)||(l=l.child(""));const c=new Le(new vt(l),0);let d=new Qe(zt);return this.br.forEachWhile((y=>{const m=y.key.path;return!!o.isPrefixOf(m)&&(m.length===r&&(d=d.add(y.wr)),!0)}),c),st.resolve(this.Cr(d))}Cr(t){const e=[];return t.forEach((o=>{const r=this.Dr(o);r!==null&&e.push(r)})),e}removeMutationBatch(t,e){Zt(this.Fr(e.batchId,"removed")===0),this.mutationQueue.shift();let o=this.br;return st.forEach(e.mutations,(r=>{const l=new Le(r.key,e.batchId);return o=o.delete(l),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)})).next((()=>{this.br=o}))}On(t){}containsKey(t,e){const o=new Le(e,0),r=this.br.firstAfterOrEqual(o);return st.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,st.resolve()}Fr(t,e){return this.vr(t)}vr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Dr(t){const e=this.vr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wV{constructor(t){this.Mr=t,this.docs=(function(){return new ce(vt.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const o=e.key,r=this.docs.get(o),l=r?r.size:0,c=this.Mr(e);return this.docs=this.docs.insert(o,{document:e.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(t,o.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const o=this.docs.get(e);return st.resolve(o?o.document.mutableCopy():en.newInvalidDocument(e))}getEntries(t,e){let o=$i();return e.forEach((r=>{const l=this.docs.get(r);o=o.insert(r,l?l.document.mutableCopy():en.newInvalidDocument(r))})),st.resolve(o)}getDocumentsMatchingQuery(t,e,o,r){let l=$i();const c=e.path,d=new vt(c.child("")),y=this.docs.getIteratorFrom(d);for(;y.hasNext();){const{key:m,value:{document:v}}=y.getNext();if(!c.isPrefixOf(m.path))break;m.path.length>c.length+1||c1(u1(v),o)<=0||(r.has(v.key)||Jc(e,v))&&(l=l.insert(v.key,v.mutableCopy()))}return st.resolve(l)}getAllFromCollectionGroup(t,e,o,r){At()}Or(t,e){return st.forEach(this.docs,(o=>e(o)))}newChangeBuffer(t){return new NV(this)}getSize(t){return st.resolve(this.size)}}class NV extends TV{constructor(t){super(),this.cr=t}applyChanges(t){const e=[];return this.changes.forEach(((o,r)=>{r.isValidDocument()?e.push(this.cr.addEntry(t,r)):this.cr.removeEntry(o)})),st.waitFor(e)}getFromCache(t,e){return this.cr.getEntry(t,e)}getAllFromCache(t,e){return this.cr.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MV{constructor(t){this.persistence=t,this.Nr=new Wr((e=>Tp(e)),Ep),this.lastRemoteSnapshotVersion=Rt.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Ip,this.targetCount=0,this.kr=Br.Bn()}forEachTarget(t,e){return this.Nr.forEach(((o,r)=>e(r))),st.resolve()}getLastRemoteSnapshotVersion(t){return st.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return st.resolve(this.Lr)}allocateTargetId(t){return this.highestTargetId=this.kr.next(),st.resolve(this.highestTargetId)}setTargetsMetadata(t,e,o){return o&&(this.lastRemoteSnapshotVersion=o),e>this.Lr&&(this.Lr=e),st.resolve()}Kn(t){this.Nr.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.kr=new Br(e),this.highestTargetId=e),t.sequenceNumber>this.Lr&&(this.Lr=t.sequenceNumber)}addTargetData(t,e){return this.Kn(e),this.targetCount+=1,st.resolve()}updateTargetData(t,e){return this.Kn(e),st.resolve()}removeTargetData(t,e){return this.Nr.delete(e.target),this.Br.gr(e.targetId),this.targetCount-=1,st.resolve()}removeTargets(t,e,o){let r=0;const l=[];return this.Nr.forEach(((c,d)=>{d.sequenceNumber<=e&&o.get(d.targetId)===null&&(this.Nr.delete(c),l.push(this.removeMatchingKeysForTargetId(t,d.targetId)),r++)})),st.waitFor(l).next((()=>r))}getTargetCount(t){return st.resolve(this.targetCount)}getTargetData(t,e){const o=this.Nr.get(e)||null;return st.resolve(o)}addMatchingKeys(t,e,o){return this.Br.Rr(e,o),st.resolve()}removeMatchingKeys(t,e,o){this.Br.mr(e,o);const r=this.persistence.referenceDelegate,l=[];return r&&e.forEach((c=>{l.push(r.markPotentiallyOrphaned(t,c))})),st.waitFor(l)}removeMatchingKeysForTargetId(t,e){return this.Br.gr(e),st.resolve()}getMatchingKeysForTargetId(t,e){const o=this.Br.yr(e);return st.resolve(o)}containsKey(t,e){return st.resolve(this.Br.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DV{constructor(t,e){this.qr={},this.overlays={},this.Qr=new gp(0),this.Kr=!1,this.Kr=!0,this.$r=new RV,this.referenceDelegate=t(this),this.Ur=new MV(this),this.indexManager=new _V,this.remoteDocumentCache=(function(r){return new wV(r)})((o=>this.referenceDelegate.Wr(o))),this.serializer=new gV(e),this.Gr=new SV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new CV,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let o=this.qr[t.toKey()];return o||(o=new IV(e,this.referenceDelegate),this.qr[t.toKey()]=o),o}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(t,e,o){mt("MemoryPersistence","Starting transaction:",t);const r=new bV(this.Qr.next());return this.referenceDelegate.zr(),o(r).next((l=>this.referenceDelegate.jr(r).next((()=>l)))).toPromise().then((l=>(r.raiseOnCommittedEvent(),l)))}Hr(t,e){return st.or(Object.values(this.qr).map((o=>()=>o.containsKey(t,e))))}}class bV extends d1{constructor(t){super(),this.currentSequenceNumber=t}}class wp{constructor(t){this.persistence=t,this.Jr=new Ip,this.Yr=null}static Zr(t){return new wp(t)}get Xr(){if(this.Yr)return this.Yr;throw At()}addReference(t,e,o){return this.Jr.addReference(o,e),this.Xr.delete(o.toString()),st.resolve()}removeReference(t,e,o){return this.Jr.removeReference(o,e),this.Xr.add(o.toString()),st.resolve()}markPotentiallyOrphaned(t,e){return this.Xr.add(e.toString()),st.resolve()}removeTarget(t,e){this.Jr.gr(e.targetId).forEach((r=>this.Xr.add(r.toString())));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(t,e.targetId).next((r=>{r.forEach((l=>this.Xr.add(l.toString())))})).next((()=>o.removeTargetData(t,e)))}zr(){this.Yr=new Set}jr(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return st.forEach(this.Xr,(o=>{const r=vt.fromPath(o);return this.ei(t,r).next((l=>{l||e.removeEntry(r,Rt.min())}))})).next((()=>(this.Yr=null,e.apply(t))))}updateLimboDocument(t,e){return this.ei(t,e).next((o=>{o?this.Xr.delete(e.toString()):this.Xr.add(e.toString())}))}Wr(t){return 0}ei(t,e){return st.or([()=>st.resolve(this.Jr.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Hr(t,e)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(t,e,o,r){this.targetId=t,this.fromCache=e,this.$i=o,this.Ui=r}static Wi(t,e){let o=Ut(),r=Ut();for(const l of e.docChanges)switch(l.type){case 0:o=o.add(l.doc.key);break;case 1:r=r.add(l.doc.key)}return new Np(t,e.fromCache,o,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xV{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VV{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return Ub()?8:h1(Vb())>0?6:4})()}initialize(t,e){this.Ji=t,this.indexManager=e,this.Gi=!0}getDocumentsMatchingQuery(t,e,o,r){const l={result:null};return this.Yi(t,e).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.Zi(t,e,r,o).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new xV;return this.Xi(t,e,c).next((d=>{if(l.result=d,this.zi)return this.es(t,e,c,d.size)}))})).next((()=>l.result))}es(t,e,o,r){return o.documentReadCount<this.ji?(ol()<=qt.DEBUG&&mt("QueryEngine","SDK will not create cache indexes for query:",wr(e),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),st.resolve()):(ol()<=qt.DEBUG&&mt("QueryEngine","Query:",wr(e),"scans",o.documentReadCount,"local documents and returns",r,"documents as results."),o.documentReadCount>this.Hi*r?(ol()<=qt.DEBUG&&mt("QueryEngine","The SDK decides to create cache indexes for query:",wr(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,mi(e))):st.resolve())}Yi(t,e){if(ST(e))return st.resolve(null);let o=mi(e);return this.indexManager.getIndexType(t,o).next((r=>r===0?null:(e.limit!==null&&r===1&&(e=Kh(e,null,"F"),o=mi(e)),this.indexManager.getDocumentsMatchingTarget(t,o).next((l=>{const c=Ut(...l);return this.Ji.getDocuments(t,c).next((d=>this.indexManager.getMinOffset(t,o).next((y=>{const m=this.ts(e,d);return this.ns(e,m,c,y.readTime)?this.Yi(t,Kh(e,null,"F")):this.rs(t,m,e,y)}))))})))))}Zi(t,e,o,r){return ST(e)||r.isEqual(Rt.min())?st.resolve(null):this.Ji.getDocuments(t,o).next((l=>{const c=this.ts(e,l);return this.ns(e,c,o,r)?st.resolve(null):(ol()<=qt.DEBUG&&mt("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),wr(e)),this.rs(t,c,e,l1(r,-1)).next((d=>d)))}))}ts(t,e){let o=new Qe(S0(t));return e.forEach(((r,l)=>{Jc(t,l)&&(o=o.add(l))})),o}ns(t,e,o,r){if(t.limit===null)return!1;if(o.size!==e.size)return!0;const l=t.limitType==="F"?e.last():e.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(r)>0)}Xi(t,e,o){return ol()<=qt.DEBUG&&mt("QueryEngine","Using full collection scan to execute query:",wr(e)),this.Ji.getDocumentsMatchingQuery(t,e,Jo.min(),o)}rs(t,e,o,r){return this.Ji.getDocumentsMatchingQuery(t,o,r).next((l=>(e.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PV{constructor(t,e,o,r){this.persistence=t,this.ss=e,this.serializer=r,this.os=new ce(zt),this._s=new Wr((l=>Tp(l)),Ep),this.us=new Map,this.cs=t.getRemoteDocumentCache(),this.Ur=t.getTargetCache(),this.Gr=t.getBundleCache(),this.ls(o)}ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new AV(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.os)))}}function UV(n,t,e,o){return new PV(n,t,e,o)}async function Y0(n,t){const e=It(n);return await e.persistence.runTransaction("Handle user change","readonly",(o=>{let r;return e.mutationQueue.getAllMutationBatches(o).next((l=>(r=l,e.ls(t),e.mutationQueue.getAllMutationBatches(o)))).next((l=>{const c=[],d=[];let y=Ut();for(const m of r){c.push(m.batchId);for(const v of m.mutations)y=y.add(v.key)}for(const m of l){d.push(m.batchId);for(const v of m.mutations)y=y.add(v.key)}return e.localDocuments.getDocuments(o,y).next((m=>({hs:m,removedBatchIds:c,addedBatchIds:d})))}))}))}function LV(n,t){const e=It(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",(o=>{const r=t.batch.keys(),l=e.cs.newChangeBuffer({trackRemovals:!0});return(function(d,y,m,v){const E=m.batch,A=E.keys();let I=st.resolve();return A.forEach((P=>{I=I.next((()=>v.getEntry(y,P))).next((q=>{const U=m.docVersions.get(P);Zt(U!==null),q.version.compareTo(U)<0&&(E.applyToRemoteDocument(q,m),q.isValidDocument()&&(q.setReadTime(m.commitVersion),v.addEntry(q)))}))})),I.next((()=>d.mutationQueue.removeMutationBatch(y,E)))})(e,o,t,l).next((()=>l.apply(o))).next((()=>e.mutationQueue.performConsistencyCheck(o))).next((()=>e.documentOverlayCache.removeOverlaysForBatchId(o,r,t.batch.batchId))).next((()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,(function(d){let y=Ut();for(let m=0;m<d.mutationResults.length;++m)d.mutationResults[m].transformResults.length>0&&(y=y.add(d.batch.mutations[m].key));return y})(t)))).next((()=>e.localDocuments.getDocuments(o,r)))}))}function J0(n){const t=It(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Ur.getLastRemoteSnapshotVersion(e)))}function kV(n,t){const e=It(n),o=t.snapshotVersion;let r=e.os;return e.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=e.cs.newChangeBuffer({trackRemovals:!0});r=e.os;const d=[];t.targetChanges.forEach(((v,E)=>{const A=r.get(E);if(!A)return;d.push(e.Ur.removeMatchingKeys(l,v.removedDocuments,E).next((()=>e.Ur.addMatchingKeys(l,v.addedDocuments,E))));let I=A.withSequenceNumber(l.currentSequenceNumber);t.targetMismatches.get(E)!==null?I=I.withResumeToken($e.EMPTY_BYTE_STRING,Rt.min()).withLastLimboFreeSnapshotVersion(Rt.min()):v.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(v.resumeToken,o)),r=r.insert(E,I),(function(q,U,X){return q.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=3e8?!0:X.addedDocuments.size+X.modifiedDocuments.size+X.removedDocuments.size>0})(A,I,v)&&d.push(e.Ur.updateTargetData(l,I))}));let y=$i(),m=Ut();if(t.documentUpdates.forEach((v=>{t.resolvedLimboDocuments.has(v)&&d.push(e.persistence.referenceDelegate.updateLimboDocument(l,v))})),d.push(OV(l,c,t.documentUpdates).next((v=>{y=v.Ps,m=v.Is}))),!o.isEqual(Rt.min())){const v=e.Ur.getLastRemoteSnapshotVersion(l).next((E=>e.Ur.setTargetsMetadata(l,l.currentSequenceNumber,o)));d.push(v)}return st.waitFor(d).next((()=>c.apply(l))).next((()=>e.localDocuments.getLocalViewOfDocuments(l,y,m))).next((()=>y))})).then((l=>(e.os=r,l)))}function OV(n,t,e){let o=Ut(),r=Ut();return e.forEach((l=>o=o.add(l))),t.getEntries(n,o).next((l=>{let c=$i();return e.forEach(((d,y)=>{const m=l.get(d);y.isFoundDocument()!==m.isFoundDocument()&&(r=r.add(d)),y.isNoDocument()&&y.version.isEqual(Rt.min())?(t.removeEntry(d,y.readTime),c=c.insert(d,y)):!m.isValidDocument()||y.version.compareTo(m.version)>0||y.version.compareTo(m.version)===0&&m.hasPendingWrites?(t.addEntry(y),c=c.insert(d,y)):mt("LocalStore","Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",y.version)})),{Ps:c,Is:r}}))}function qV(n,t){const e=It(n);return e.persistence.runTransaction("Get next mutation batch","readonly",(o=>(t===void 0&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(o,t))))}function GV(n,t){const e=It(n);return e.persistence.runTransaction("Allocate target","readwrite",(o=>{let r;return e.Ur.getTargetData(o,t).next((l=>l?(r=l,st.resolve(r)):e.Ur.allocateTargetId(o).next((c=>(r=new Bo(t,c,"TargetPurposeListen",o.currentSequenceNumber),e.Ur.addTargetData(o,r).next((()=>r)))))))})).then((o=>{const r=e.os.get(o.targetId);return(r===null||o.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.os=e.os.insert(o.targetId,o),e._s.set(t,o.targetId)),o}))}async function Zh(n,t,e){const o=It(n),r=o.os.get(t),l=e?"readwrite":"readwrite-primary";try{e||await o.persistence.runTransaction("Release target",l,(c=>o.persistence.referenceDelegate.removeTarget(c,r)))}catch(c){if(!Rl(c))throw c;mt("LocalStore",`Failed to update sequence numbers for target ${t}: ${c}`)}o.os=o.os.remove(t),o._s.delete(r.target)}function PT(n,t,e){const o=It(n);let r=Rt.min(),l=Ut();return o.persistence.runTransaction("Execute query","readwrite",(c=>(function(y,m,v){const E=It(y),A=E._s.get(v);return A!==void 0?st.resolve(E.os.get(A)):E.Ur.getTargetData(m,v)})(o,c,mi(t)).next((d=>{if(d)return r=d.lastLimboFreeSnapshotVersion,o.Ur.getMatchingKeysForTargetId(c,d.targetId).next((y=>{l=y}))})).next((()=>o.ss.getDocumentsMatchingQuery(c,t,e?r:Rt.min(),e?l:Ut()))).next((d=>(BV(o,b1(t),d),{documents:d,Ts:l})))))}function BV(n,t,e){let o=n.us.get(t)||Rt.min();e.forEach(((r,l)=>{l.readTime.compareTo(o)>0&&(o=l.readTime)})),n.us.set(t,o)}class UT{constructor(){this.activeTargetIds=k1()}fs(t){this.activeTargetIds=this.activeTargetIds.add(t)}gs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Vs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class FV{constructor(){this.so=new UT,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,o){}addLocalQueryTarget(t,e=!0){return e&&this.so.fs(t),this.oo[t]||"not-current"}updateQueryState(t,e,o){this.oo[t]=e}removeLocalQueryTarget(t){this.so.gs(t)}isLocalQueryTarget(t){return this.so.activeTargetIds.has(t)}clearQueryState(t){delete this.oo[t]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(t){return this.so.activeTargetIds.has(t)}start(){return this.so=new UT,Promise.resolve()}handleUserChange(t,e,o){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HV{_o(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(t){this.ho.push(t)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){mt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.ho)t(0)}lo(){mt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.ho)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dc=null;function _h(){return dc===null?dc=(function(){return 268435456+Math.round(2147483648*Math.random())})():dc++,"0x"+dc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YV{constructor(t){this.Io=t.Io,this.To=t.To}Eo(t){this.Ao=t}Ro(t){this.Vo=t}mo(t){this.fo=t}onMessage(t){this.po=t}close(){this.To()}send(t){this.Io(t)}yo(){this.Ao()}wo(){this.Vo()}So(t){this.fo(t)}bo(t){this.po(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const je="WebChannelConnection";class JV extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const o=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Do=o+"://"+e.host,this.vo=`projects/${r}/databases/${l}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${l}`}get Fo(){return!1}Mo(e,o,r,l,c){const d=_h(),y=this.xo(e,o.toUriEncodedString());mt("RestConnection",`Sending RPC '${e}' ${d}:`,y,r);const m={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(m,l,c),this.No(e,y,m,r).then((v=>(mt("RestConnection",`Received RPC '${e}' ${d}: `,v),v)),(v=>{throw kr("RestConnection",`RPC '${e}' ${d} failed with error: `,v,"url: ",y,"request:",r),v}))}Lo(e,o,r,l,c,d){return this.Mo(e,o,r,l,c)}Oo(e,o,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Qr})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),o&&o.headers.forEach(((l,c)=>e[c]=l)),r&&r.headers.forEach(((l,c)=>e[c]=l))}xo(e,o){const r=zV[e];return`${this.Do}/v1/${o}:${r}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}No(t,e,o,r){const l=_h();return new Promise(((c,d)=>{const y=new o0;y.setWithCredentials(!0),y.listenOnce(s0.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case gc.NO_ERROR:const v=y.getResponseJson();mt(je,`XHR for RPC '${t}' ${l} received:`,JSON.stringify(v)),c(v);break;case gc.TIMEOUT:mt(je,`RPC '${t}' ${l} timed out`),d(new ht(nt.DEADLINE_EXCEEDED,"Request time out"));break;case gc.HTTP_ERROR:const E=y.getStatus();if(mt(je,`RPC '${t}' ${l} failed with status:`,E,"response text:",y.getResponseText()),E>0){let A=y.getResponseJson();Array.isArray(A)&&(A=A[0]);const I=A?.error;if(I&&I.status&&I.message){const P=(function(U){const X=U.toLowerCase().replace(/_/g,"-");return Object.values(nt).indexOf(X)>=0?X:nt.UNKNOWN})(I.status);d(new ht(P,I.message))}else d(new ht(nt.UNKNOWN,"Server responded with status "+y.getStatus()))}else d(new ht(nt.UNAVAILABLE,"Connection failed."));break;default:At()}}finally{mt(je,`RPC '${t}' ${l} completed.`)}}));const m=JSON.stringify(r);mt(je,`RPC '${t}' ${l} sending request:`,r),y.send(e,"POST",m,o,15)}))}Bo(t,e,o){const r=_h(),l=[this.Do,"/","google.firestore.v1.Firestore","/",t,"/channel"],c=l0(),d=a0(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(y.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(y.useFetchStreams=!0),this.Oo(y.initMessageHeaders,e,o),y.encodeInitMessageHeaders=!0;const v=l.join("");mt(je,`Creating RPC '${t}' stream ${r}: ${v}`,y);const E=c.createWebChannel(v,y);let A=!1,I=!1;const P=new YV({Io:U=>{I?mt(je,`Not sending because RPC '${t}' stream ${r} is closed:`,U):(A||(mt(je,`Opening RPC '${t}' stream ${r} transport.`),E.open(),A=!0),mt(je,`RPC '${t}' stream ${r} sending:`,U),E.send(U))},To:()=>E.close()}),q=(U,X,ot)=>{U.listen(X,(J=>{try{ot(J)}catch(et){setTimeout((()=>{throw et}),0)}}))};return q(E,rl.EventType.OPEN,(()=>{I||(mt(je,`RPC '${t}' stream ${r} transport opened.`),P.yo())})),q(E,rl.EventType.CLOSE,(()=>{I||(I=!0,mt(je,`RPC '${t}' stream ${r} transport closed`),P.So())})),q(E,rl.EventType.ERROR,(U=>{I||(I=!0,kr(je,`RPC '${t}' stream ${r} transport errored:`,U),P.So(new ht(nt.UNAVAILABLE,"The operation could not be completed")))})),q(E,rl.EventType.MESSAGE,(U=>{var X;if(!I){const ot=U.data[0];Zt(!!ot);const J=ot,et=J.error||((X=J[0])===null||X===void 0?void 0:X.error);if(et){mt(je,`RPC '${t}' stream ${r} received error:`,et);const ct=et.status;let at=(function(N){const V=Re[N];if(V!==void 0)return U0(V)})(ct),D=et.message;at===void 0&&(at=nt.INTERNAL,D="Unknown error status: "+ct+" with message "+et.message),I=!0,P.So(new ht(at,D)),E.close()}else mt(je,`RPC '${t}' stream ${r} received:`,ot),P.bo(ot)}})),q(d,r0.STAT_EVENT,(U=>{U.stat===Bh.PROXY?mt(je,`RPC '${t}' stream ${r} detected buffering proxy`):U.stat===Bh.NOPROXY&&mt(je,`RPC '${t}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{P.wo()}),0),P}}function vh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xc(n){return new nV(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K0{constructor(t,e,o=1e3,r=1.5,l=6e4){this.ui=t,this.timerId=e,this.ko=o,this.qo=r,this.Qo=l,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(t){this.cancel();const e=Math.floor(this.Ko+this.zo()),o=Math.max(0,Date.now()-this.Uo),r=Math.max(0,e-o);r>0&&mt("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${e} ms, last attempt: ${o} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,(()=>(this.Uo=Date.now(),t()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{constructor(t,e,o,r,l,c,d,y){this.ui=t,this.Ho=o,this.Jo=r,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=y,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new K0(t,e)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(t){this.u_(),this.stream.send(t)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(t,e){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,t!==4?this.t_.reset():e&&e.code===nt.RESOURCE_EXHAUSTED?(Qi(e.toString()),Qi("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):e&&e.code===nt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.mo(e)}l_(){}auth(){this.state=1;const t=this.h_(this.Yo),e=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([o,r])=>{this.Yo===e&&this.P_(o,r)}),(o=>{t((()=>{const r=new ht(nt.UNKNOWN,"Fetching auth token failed: "+o.message);return this.I_(r)}))}))}P_(t,e){const o=this.h_(this.Yo);this.stream=this.T_(t,e),this.stream.Eo((()=>{o((()=>this.listener.Eo()))})),this.stream.Ro((()=>{o((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((r=>{o((()=>this.I_(r)))})),this.stream.onMessage((r=>{o((()=>++this.e_==1?this.E_(r):this.onNext(r)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(t){return mt("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}h_(t){return e=>{this.ui.enqueueAndForget((()=>this.Yo===t?e():(mt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class KV extends Q0{constructor(t,e,o,r,l,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,o,r,c),this.serializer=l}T_(t,e){return this.connection.Bo("Listen",t,e)}E_(t){return this.onNext(t)}onNext(t){this.t_.reset();const e=sV(this.serializer,t),o=(function(l){if(!("targetChange"in l))return Rt.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Rt.min():c.readTime?gi(c.readTime):Rt.min()})(t);return this.listener.d_(e,o)}A_(t){const e={};e.database=Wh(this.serializer),e.addTarget=(function(l,c){let d;const y=c.target;if(d=Yh(y)?{documents:lV(l,y)}:{query:uV(l,y)._t},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=O0(l,c.resumeToken);const m=Qh(l,c.expectedCount);m!==null&&(d.expectedCount=m)}else if(c.snapshotVersion.compareTo(Rt.min())>0){d.readTime=Vc(l,c.snapshotVersion.toTimestamp());const m=Qh(l,c.expectedCount);m!==null&&(d.expectedCount=m)}return d})(this.serializer,t);const o=fV(this.serializer,t);o&&(e.labels=o),this.a_(e)}R_(t){const e={};e.database=Wh(this.serializer),e.removeTarget=t,this.a_(e)}}class QV extends Q0{constructor(t,e,o,r,l,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,o,r,c),this.serializer=l}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(t,e){return this.connection.Bo("Write",t,e)}E_(t){return Zt(!!t.streamToken),this.lastStreamToken=t.streamToken,Zt(!t.writeResults||t.writeResults.length===0),this.listener.f_()}onNext(t){Zt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.t_.reset();const e=aV(t.writeResults,t.commitTime),o=gi(t.commitTime);return this.listener.g_(o,e)}p_(){const t={};t.database=Wh(this.serializer),this.a_(t)}m_(t){const e={streamToken:this.lastStreamToken,writes:t.map((o=>rV(this.serializer,o)))};this.a_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $V extends class{}{constructor(t,e,o,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=o,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new ht(nt.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(t,e,o,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Mo(t,$h(e,o),r,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===nt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ht(nt.UNKNOWN,l.toString())}))}Lo(t,e,o,r,l){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Lo(t,$h(e,o),r,c,d,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===nt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ht(nt.UNKNOWN,c.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class XV{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(t){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.C_("Offline")))}set(t){this.x_(),this.S_=0,t==="Online"&&(this.D_=!1),this.C_(t)}C_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}F_(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Qi(e),this.D_=!1):mt("OnlineStateTracker",e)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WV{constructor(t,e,o,r,l){this.localStore=t,this.datastore=e,this.asyncQueue=o,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=l,this.k_._o((c=>{o.enqueueAndForget((async()=>{Us(this)&&(mt("RemoteStore","Restarting streams for network reachability change."),await(async function(y){const m=It(y);m.L_.add(4),await Nl(m),m.q_.set("Unknown"),m.L_.delete(4),await Wc(m)})(this))}))})),this.q_=new XV(o,r)}}async function Wc(n){if(Us(n))for(const t of n.B_)await t(!0)}async function Nl(n){for(const t of n.B_)await t(!1)}function $0(n,t){const e=It(n);e.N_.has(t.targetId)||(e.N_.set(t.targetId,t),xp(e)?bp(e):Zr(e).r_()&&Dp(e,t))}function Mp(n,t){const e=It(n),o=Zr(e);e.N_.delete(t),o.r_()&&X0(e,t),e.N_.size===0&&(o.r_()?o.o_():Us(e)&&e.q_.set("Unknown"))}function Dp(n,t){if(n.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Rt.min())>0){const e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}Zr(n).A_(t)}function X0(n,t){n.Q_.xe(t),Zr(n).R_(t)}function bp(n){n.Q_=new Z1({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>n.N_.get(t)||null,tt:()=>n.datastore.serializer.databaseId}),Zr(n).start(),n.q_.v_()}function xp(n){return Us(n)&&!Zr(n).n_()&&n.N_.size>0}function Us(n){return It(n).L_.size===0}function W0(n){n.Q_=void 0}async function ZV(n){n.q_.set("Online")}async function jV(n){n.N_.forEach(((t,e)=>{Dp(n,t)}))}async function tP(n,t){W0(n),xp(n)?(n.q_.M_(t),bp(n)):n.q_.set("Unknown")}async function eP(n,t,e){if(n.q_.set("Online"),t instanceof k0&&t.state===2&&t.cause)try{await(async function(r,l){const c=l.cause;for(const d of l.targetIds)r.N_.has(d)&&(await r.remoteSyncer.rejectListen(d,c),r.N_.delete(d),r.Q_.removeTarget(d))})(n,t)}catch(o){mt("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),o),await Pc(n,o)}else if(t instanceof vc?n.Q_.Ke(t):t instanceof L0?n.Q_.He(t):n.Q_.We(t),!e.isEqual(Rt.min()))try{const o=await J0(n.localStore);e.compareTo(o)>=0&&await(function(l,c){const d=l.Q_.rt(c);return d.targetChanges.forEach(((y,m)=>{if(y.resumeToken.approximateByteSize()>0){const v=l.N_.get(m);v&&l.N_.set(m,v.withResumeToken(y.resumeToken,c))}})),d.targetMismatches.forEach(((y,m)=>{const v=l.N_.get(y);if(!v)return;l.N_.set(y,v.withResumeToken($e.EMPTY_BYTE_STRING,v.snapshotVersion)),X0(l,y);const E=new Bo(v.target,y,m,v.sequenceNumber);Dp(l,E)})),l.remoteSyncer.applyRemoteEvent(d)})(n,e)}catch(o){mt("RemoteStore","Failed to raise snapshot:",o),await Pc(n,o)}}async function Pc(n,t,e){if(!Rl(t))throw t;n.L_.add(1),await Nl(n),n.q_.set("Offline"),e||(e=()=>J0(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{mt("RemoteStore","Retrying IndexedDB access"),await e(),n.L_.delete(1),await Wc(n)}))}function Z0(n,t){return t().catch((e=>Pc(n,e,t)))}async function Zc(n){const t=It(n),e=Qo(t);let o=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;nP(t);)try{const r=await qV(t.localStore,o);if(r===null){t.O_.length===0&&e.o_();break}o=r.batchId,iP(t,r)}catch(r){await Pc(t,r)}j0(t)&&tA(t)}function nP(n){return Us(n)&&n.O_.length<10}function iP(n,t){n.O_.push(t);const e=Qo(n);e.r_()&&e.V_&&e.m_(t.mutations)}function j0(n){return Us(n)&&!Qo(n).n_()&&n.O_.length>0}function tA(n){Qo(n).start()}async function oP(n){Qo(n).p_()}async function sP(n){const t=Qo(n);for(const e of n.O_)t.m_(e.mutations)}async function rP(n,t,e){const o=n.O_.shift(),r=Sp.from(o,t,e);await Z0(n,(()=>n.remoteSyncer.applySuccessfulWrite(r))),await Zc(n)}async function aP(n,t){t&&Qo(n).V_&&await(async function(o,r){if((function(c){return $1(c)&&c!==nt.ABORTED})(r.code)){const l=o.O_.shift();Qo(o).s_(),await Z0(o,(()=>o.remoteSyncer.rejectFailedWrite(l.batchId,r))),await Zc(o)}})(n,t),j0(n)&&tA(n)}async function kT(n,t){const e=It(n);e.asyncQueue.verifyOperationInProgress(),mt("RemoteStore","RemoteStore received new credentials");const o=Us(e);e.L_.add(3),await Nl(e),o&&e.q_.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.L_.delete(3),await Wc(e)}async function lP(n,t){const e=It(n);t?(e.L_.delete(2),await Wc(e)):t||(e.L_.add(2),await Nl(e),e.q_.set("Unknown"))}function Zr(n){return n.K_||(n.K_=(function(e,o,r){const l=It(e);return l.w_(),new KV(o,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,r)})(n.datastore,n.asyncQueue,{Eo:ZV.bind(null,n),Ro:jV.bind(null,n),mo:tP.bind(null,n),d_:eP.bind(null,n)}),n.B_.push((async t=>{t?(n.K_.s_(),xp(n)?bp(n):n.q_.set("Unknown")):(await n.K_.stop(),W0(n))}))),n.K_}function Qo(n){return n.U_||(n.U_=(function(e,o,r){const l=It(e);return l.w_(),new QV(o,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,r)})(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:oP.bind(null,n),mo:aP.bind(null,n),f_:sP.bind(null,n),g_:rP.bind(null,n)}),n.B_.push((async t=>{t?(n.U_.s_(),await Zc(n)):(await n.U_.stop(),n.O_.length>0&&(mt("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{constructor(t,e,o,r,l){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=o,this.op=r,this.removalCallback=l,this.deferred=new zo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,o,r,l){const c=Date.now()+o,d=new Vp(t,e,c,r,l);return d.start(o),d}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ht(nt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Pp(n,t){if(Qi("AsyncQueue",`${t}: ${n}`),Rl(n))return new ht(nt.UNAVAILABLE,`${t}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(t){this.comparator=t?(e,o)=>t(e,o)||vt.comparator(e.key,o.key):(e,o)=>vt.comparator(e.key,o.key),this.keyedMap=al(),this.sortedSet=new ce(this.comparator)}static emptySet(t){return new Ur(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,o)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Ur)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),o=t.sortedSet.getIterator();for(;e.hasNext();){const r=e.getNext().key,l=o.getNext().key;if(!r.isEqual(l))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const o=new Ur;return o.comparator=this.comparator,o.keyedMap=t,o.sortedSet=e,o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(){this.W_=new ce(vt.comparator)}track(t){const e=t.doc.key,o=this.W_.get(e);o?t.type!==0&&o.type===3?this.W_=this.W_.insert(e,t):t.type===3&&o.type!==1?this.W_=this.W_.insert(e,{type:o.type,doc:t.doc}):t.type===2&&o.type===2?this.W_=this.W_.insert(e,{type:2,doc:t.doc}):t.type===2&&o.type===0?this.W_=this.W_.insert(e,{type:0,doc:t.doc}):t.type===1&&o.type===0?this.W_=this.W_.remove(e):t.type===1&&o.type===2?this.W_=this.W_.insert(e,{type:1,doc:o.doc}):t.type===0&&o.type===1?this.W_=this.W_.insert(e,{type:2,doc:t.doc}):At():this.W_=this.W_.insert(e,t)}G_(){const t=[];return this.W_.inorderTraversal(((e,o)=>{t.push(o)})),t}}class Fr{constructor(t,e,o,r,l,c,d,y,m){this.query=t,this.docs=e,this.oldDocs=o,this.docChanges=r,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=y,this.hasCachedResults=m}static fromInitialDocuments(t,e,o,r,l){const c=[];return e.forEach((d=>{c.push({type:0,doc:d})})),new Fr(t,e,Ur.emptySet(e),c,o,r,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Yc(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,o=t.docChanges;if(e.length!==o.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==o[r].type||!e[r].doc.isEqual(o[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((t=>t.J_()))}}class cP{constructor(){this.queries=qT(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(e,o){const r=It(e),l=r.queries;r.queries=qT(),l.forEach(((c,d)=>{for(const y of d.j_)y.onError(o)}))})(this,new ht(nt.ABORTED,"Firestore shutting down"))}}function qT(){return new Wr((n=>A0(n)),Yc)}async function fP(n,t){const e=It(n);let o=3;const r=t.query;let l=e.queries.get(r);l?!l.H_()&&t.J_()&&(o=2):(l=new uP,o=t.J_()?0:1);try{switch(o){case 0:l.z_=await e.onListen(r,!0);break;case 1:l.z_=await e.onListen(r,!1);break;case 2:await e.onFirstRemoteStoreListen(r)}}catch(c){const d=Pp(c,`Initialization of query '${wr(t.query)}' failed`);return void t.onError(d)}e.queries.set(r,l),l.j_.push(t),t.Z_(e.onlineState),l.z_&&t.X_(l.z_)&&Up(e)}async function dP(n,t){const e=It(n),o=t.query;let r=3;const l=e.queries.get(o);if(l){const c=l.j_.indexOf(t);c>=0&&(l.j_.splice(c,1),l.j_.length===0?r=t.J_()?0:1:!l.H_()&&t.J_()&&(r=2))}switch(r){case 0:return e.queries.delete(o),e.onUnlisten(o,!0);case 1:return e.queries.delete(o),e.onUnlisten(o,!1);case 2:return e.onLastRemoteStoreUnlisten(o);default:return}}function hP(n,t){const e=It(n);let o=!1;for(const r of t){const l=r.query,c=e.queries.get(l);if(c){for(const d of c.j_)d.X_(r)&&(o=!0);c.z_=r}}o&&Up(e)}function pP(n,t,e){const o=It(n),r=o.queries.get(t);if(r)for(const l of r.j_)l.onError(e);o.queries.delete(t)}function Up(n){n.Y_.forEach((t=>{t.next()}))}var jh,GT;(GT=jh||(jh={})).ea="default",GT.Cache="cache";class mP{constructor(t,e,o){this.query=t,this.ta=e,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=o||{}}X_(t){if(!this.options.includeMetadataChanges){const o=[];for(const r of t.docChanges)r.type!==3&&o.push(r);t=new Fr(t.query,t.docs,t.oldDocs,o,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.na?this.ia(t)&&(this.ta.next(t),e=!0):this.sa(t,this.onlineState)&&(this.oa(t),e=!0),this.ra=t,e}onError(t){this.ta.error(t)}Z_(t){this.onlineState=t;let e=!1;return this.ra&&!this.na&&this.sa(this.ra,t)&&(this.oa(this.ra),e=!0),e}sa(t,e){if(!t.fromCache||!this.J_())return!0;const o=e!=="Offline";return(!this.options._a||!o)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}ia(t){if(t.docChanges.length>0)return!0;const e=this.ra&&this.ra.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}oa(t){t=Fr.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.na=!0,this.ta.next(t)}J_(){return this.options.source!==jh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(t){this.key=t}}class nA{constructor(t){this.key=t}}class gP{constructor(t,e){this.query=t,this.Ta=e,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ut(),this.mutatedKeys=Ut(),this.Aa=S0(t),this.Ra=new Ur(this.Aa)}get Va(){return this.Ta}ma(t,e){const o=e?e.fa:new OT,r=e?e.Ra:this.Ra;let l=e?e.mutatedKeys:this.mutatedKeys,c=r,d=!1;const y=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,m=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal(((v,E)=>{const A=r.get(v),I=Jc(this.query,E)?E:null,P=!!A&&this.mutatedKeys.has(A.key),q=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let U=!1;A&&I?A.data.isEqual(I.data)?P!==q&&(o.track({type:3,doc:I}),U=!0):this.ga(A,I)||(o.track({type:2,doc:I}),U=!0,(y&&this.Aa(I,y)>0||m&&this.Aa(I,m)<0)&&(d=!0)):!A&&I?(o.track({type:0,doc:I}),U=!0):A&&!I&&(o.track({type:1,doc:A}),U=!0,(y||m)&&(d=!0)),U&&(I?(c=c.add(I),l=q?l.add(v):l.delete(v)):(c=c.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),l=l.delete(v.key),o.track({type:1,doc:v})}return{Ra:c,fa:o,ns:d,mutatedKeys:l}}ga(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,o,r){const l=this.Ra;this.Ra=t.Ra,this.mutatedKeys=t.mutatedKeys;const c=t.fa.G_();c.sort(((v,E)=>(function(I,P){const q=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return At()}};return q(I)-q(P)})(v.type,E.type)||this.Aa(v.doc,E.doc))),this.pa(o),r=r!=null&&r;const d=e&&!r?this.ya():[],y=this.da.size===0&&this.current&&!r?1:0,m=y!==this.Ea;return this.Ea=y,c.length!==0||m?{snapshot:new Fr(this.query,t.Ra,l,c,t.mutatedKeys,y===0,m,!1,!!o&&o.resumeToken.approximateByteSize()>0),wa:d}:{wa:d}}Z_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new OT,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(t){return!this.Ta.has(t)&&!!this.Ra.has(t)&&!this.Ra.get(t).hasLocalMutations}pa(t){t&&(t.addedDocuments.forEach((e=>this.Ta=this.Ta.add(e))),t.modifiedDocuments.forEach((e=>{})),t.removedDocuments.forEach((e=>this.Ta=this.Ta.delete(e))),this.current=t.current)}ya(){if(!this.current)return[];const t=this.da;this.da=Ut(),this.Ra.forEach((o=>{this.Sa(o.key)&&(this.da=this.da.add(o.key))}));const e=[];return t.forEach((o=>{this.da.has(o)||e.push(new nA(o))})),this.da.forEach((o=>{t.has(o)||e.push(new eA(o))})),e}ba(t){this.Ta=t.Ts,this.da=Ut();const e=this.ma(t.documents);return this.applyChanges(e,!0)}Da(){return Fr.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class yP{constructor(t,e,o){this.query=t,this.targetId=e,this.view=o}}class _P{constructor(t){this.key=t,this.va=!1}}class vP{constructor(t,e,o,r,l,c){this.localStore=t,this.remoteStore=e,this.eventManager=o,this.sharedClientState=r,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Ca={},this.Fa=new Wr((d=>A0(d)),Yc),this.Ma=new Map,this.xa=new Set,this.Oa=new ce(vt.comparator),this.Na=new Map,this.La=new Ip,this.Ba={},this.ka=new Map,this.qa=Br.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function TP(n,t,e=!0){const o=lA(n);let r;const l=o.Fa.get(t);return l?(o.sharedClientState.addLocalQueryTarget(l.targetId),r=l.view.Da()):r=await iA(o,t,e,!0),r}async function EP(n,t){const e=lA(n);await iA(e,t,!0,!1)}async function iA(n,t,e,o){const r=await GV(n.localStore,mi(t)),l=r.targetId,c=n.sharedClientState.addLocalQueryTarget(l,e);let d;return o&&(d=await AP(n,t,l,c==="current",r.resumeToken)),n.isPrimaryClient&&e&&$0(n.remoteStore,r),d}async function AP(n,t,e,o,r){n.Ka=(E,A,I)=>(async function(q,U,X,ot){let J=U.view.ma(X);J.ns&&(J=await PT(q.localStore,U.query,!1).then((({documents:D})=>U.view.ma(D,J))));const et=ot&&ot.targetChanges.get(U.targetId),ct=ot&&ot.targetMismatches.get(U.targetId)!=null,at=U.view.applyChanges(J,q.isPrimaryClient,et,ct);return FT(q,U.targetId,at.wa),at.snapshot})(n,E,A,I);const l=await PT(n.localStore,t,!0),c=new gP(t,l.Ts),d=c.ma(l.documents),y=wl.createSynthesizedTargetChangeForCurrentChange(e,o&&n.onlineState!=="Offline",r),m=c.applyChanges(d,n.isPrimaryClient,y);FT(n,e,m.wa);const v=new yP(t,e,c);return n.Fa.set(t,v),n.Ma.has(e)?n.Ma.get(e).push(t):n.Ma.set(e,[t]),m.snapshot}async function SP(n,t,e){const o=It(n),r=o.Fa.get(t),l=o.Ma.get(r.targetId);if(l.length>1)return o.Ma.set(r.targetId,l.filter((c=>!Yc(c,t)))),void o.Fa.delete(t);o.isPrimaryClient?(o.sharedClientState.removeLocalQueryTarget(r.targetId),o.sharedClientState.isActiveQueryTarget(r.targetId)||await Zh(o.localStore,r.targetId,!1).then((()=>{o.sharedClientState.clearQueryState(r.targetId),e&&Mp(o.remoteStore,r.targetId),tp(o,r.targetId)})).catch(Cl)):(tp(o,r.targetId),await Zh(o.localStore,r.targetId,!0))}async function CP(n,t){const e=It(n),o=e.Fa.get(t),r=e.Ma.get(o.targetId);e.isPrimaryClient&&r.length===1&&(e.sharedClientState.removeLocalQueryTarget(o.targetId),Mp(e.remoteStore,o.targetId))}async function RP(n,t,e){const o=xP(n);try{const r=await(function(c,d){const y=It(c),m=Me.now(),v=d.reduce(((I,P)=>I.add(P.key)),Ut());let E,A;return y.persistence.runTransaction("Locally write mutations","readwrite",(I=>{let P=$i(),q=Ut();return y.cs.getEntries(I,v).next((U=>{P=U,P.forEach(((X,ot)=>{ot.isValidDocument()||(q=q.add(X))}))})).next((()=>y.localDocuments.getOverlayedDocuments(I,P))).next((U=>{E=U;const X=[];for(const ot of d){const J=z1(ot,E.get(ot.key).overlayedDocument);J!=null&&X.push(new Ps(ot.key,J,h0(J.value.mapValue),Yi.exists(!0)))}return y.mutationQueue.addMutationBatch(I,m,X,d)})).next((U=>{A=U;const X=U.applyToLocalDocumentSet(E,q);return y.documentOverlayCache.saveOverlays(I,U.batchId,X)}))})).then((()=>({batchId:A.batchId,changes:R0(E)})))})(o.localStore,t);o.sharedClientState.addPendingMutation(r.batchId),(function(c,d,y){let m=c.Ba[c.currentUser.toKey()];m||(m=new ce(zt)),m=m.insert(d,y),c.Ba[c.currentUser.toKey()]=m})(o,r.batchId,e),await Ml(o,r.changes),await Zc(o.remoteStore)}catch(r){const l=Pp(r,"Failed to persist write");e.reject(l)}}async function oA(n,t){const e=It(n);try{const o=await kV(e.localStore,t);t.targetChanges.forEach(((r,l)=>{const c=e.Na.get(l);c&&(Zt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?c.va=!0:r.modifiedDocuments.size>0?Zt(c.va):r.removedDocuments.size>0&&(Zt(c.va),c.va=!1))})),await Ml(e,o,t)}catch(o){await Cl(o)}}function BT(n,t,e){const o=It(n);if(o.isPrimaryClient&&e===0||!o.isPrimaryClient&&e===1){const r=[];o.Fa.forEach(((l,c)=>{const d=c.view.Z_(t);d.snapshot&&r.push(d.snapshot)})),(function(c,d){const y=It(c);y.onlineState=d;let m=!1;y.queries.forEach(((v,E)=>{for(const A of E.j_)A.Z_(d)&&(m=!0)})),m&&Up(y)})(o.eventManager,t),r.length&&o.Ca.d_(r),o.onlineState=t,o.isPrimaryClient&&o.sharedClientState.setOnlineState(t)}}async function IP(n,t,e){const o=It(n);o.sharedClientState.updateQueryState(t,"rejected",e);const r=o.Na.get(t),l=r&&r.key;if(l){let c=new ce(vt.comparator);c=c.insert(l,en.newNoDocument(l,Rt.min()));const d=Ut().add(l),y=new $c(Rt.min(),new Map,new ce(zt),c,d);await oA(o,y),o.Oa=o.Oa.remove(l),o.Na.delete(t),Lp(o)}else await Zh(o.localStore,t,!1).then((()=>tp(o,t,e))).catch(Cl)}async function wP(n,t){const e=It(n),o=t.batch.batchId;try{const r=await LV(e.localStore,t);rA(e,o,null),sA(e,o),e.sharedClientState.updateMutationState(o,"acknowledged"),await Ml(e,r)}catch(r){await Cl(r)}}async function NP(n,t,e){const o=It(n);try{const r=await(function(c,d){const y=It(c);return y.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let v;return y.mutationQueue.lookupMutationBatch(m,d).next((E=>(Zt(E!==null),v=E.keys(),y.mutationQueue.removeMutationBatch(m,E)))).next((()=>y.mutationQueue.performConsistencyCheck(m))).next((()=>y.documentOverlayCache.removeOverlaysForBatchId(m,v,d))).next((()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v))).next((()=>y.localDocuments.getDocuments(m,v)))}))})(o.localStore,t);rA(o,t,e),sA(o,t),o.sharedClientState.updateMutationState(t,"rejected",e),await Ml(o,r)}catch(r){await Cl(r)}}function sA(n,t){(n.ka.get(t)||[]).forEach((e=>{e.resolve()})),n.ka.delete(t)}function rA(n,t,e){const o=It(n);let r=o.Ba[o.currentUser.toKey()];if(r){const l=r.get(t);l&&(e?l.reject(e):l.resolve(),r=r.remove(t)),o.Ba[o.currentUser.toKey()]=r}}function tp(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const o of n.Ma.get(t))n.Fa.delete(o),e&&n.Ca.$a(o,e);n.Ma.delete(t),n.isPrimaryClient&&n.La.gr(t).forEach((o=>{n.La.containsKey(o)||aA(n,o)}))}function aA(n,t){n.xa.delete(t.path.canonicalString());const e=n.Oa.get(t);e!==null&&(Mp(n.remoteStore,e),n.Oa=n.Oa.remove(t),n.Na.delete(e),Lp(n))}function FT(n,t,e){for(const o of e)o instanceof eA?(n.La.addReference(o.key,t),MP(n,o)):o instanceof nA?(mt("SyncEngine","Document no longer in limbo: "+o.key),n.La.removeReference(o.key,t),n.La.containsKey(o.key)||aA(n,o.key)):At()}function MP(n,t){const e=t.key,o=e.path.canonicalString();n.Oa.get(e)||n.xa.has(o)||(mt("SyncEngine","New document in limbo: "+e),n.xa.add(o),Lp(n))}function Lp(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const t=n.xa.values().next().value;n.xa.delete(t);const e=new vt(ae.fromString(t)),o=n.qa.next();n.Na.set(o,new _P(e)),n.Oa=n.Oa.insert(e,o),$0(n.remoteStore,new Bo(mi(T0(e.path)),o,"TargetPurposeLimboResolution",gp.oe))}}async function Ml(n,t,e){const o=It(n),r=[],l=[],c=[];o.Fa.isEmpty()||(o.Fa.forEach(((d,y)=>{c.push(o.Ka(y,t,e).then((m=>{var v;if((m||e)&&o.isPrimaryClient){const E=m?!m.fromCache:(v=e?.targetChanges.get(y.targetId))===null||v===void 0?void 0:v.current;o.sharedClientState.updateQueryState(y.targetId,E?"current":"not-current")}if(m){r.push(m);const E=Np.Wi(y.targetId,m);l.push(E)}})))})),await Promise.all(c),o.Ca.d_(r),await(async function(y,m){const v=It(y);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>st.forEach(m,(A=>st.forEach(A.$i,(I=>v.persistence.referenceDelegate.addReference(E,A.targetId,I))).next((()=>st.forEach(A.Ui,(I=>v.persistence.referenceDelegate.removeReference(E,A.targetId,I)))))))))}catch(E){if(!Rl(E))throw E;mt("LocalStore","Failed to update sequence numbers: "+E)}for(const E of m){const A=E.targetId;if(!E.fromCache){const I=v.os.get(A),P=I.snapshotVersion,q=I.withLastLimboFreeSnapshotVersion(P);v.os=v.os.insert(A,q)}}})(o.localStore,l))}async function DP(n,t){const e=It(n);if(!e.currentUser.isEqual(t)){mt("SyncEngine","User change. New user:",t.toKey());const o=await Y0(e.localStore,t);e.currentUser=t,(function(l,c){l.ka.forEach((d=>{d.forEach((y=>{y.reject(new ht(nt.CANCELLED,c))}))})),l.ka.clear()})(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,o.removedBatchIds,o.addedBatchIds),await Ml(e,o.hs)}}function bP(n,t){const e=It(n),o=e.Na.get(t);if(o&&o.va)return Ut().add(o.key);{let r=Ut();const l=e.Ma.get(t);if(!l)return r;for(const c of l){const d=e.Fa.get(c);r=r.unionWith(d.view.Va)}return r}}function lA(n){const t=It(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=oA.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=bP.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=IP.bind(null,t),t.Ca.d_=hP.bind(null,t.eventManager),t.Ca.$a=pP.bind(null,t.eventManager),t}function xP(n){const t=It(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=wP.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=NP.bind(null,t),t}class Uc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Xc(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),await this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)}ja(t,e){return null}Ha(t,e){return null}za(t){return UV(this.persistence,new VV,t.initialUser,this.serializer)}Ga(t){return new DV(wp.Zr,this.serializer)}Wa(t){return new FV}async terminate(){var t,e;(t=this.gcScheduler)===null||t===void 0||t.stop(),(e=this.indexBackfillerScheduler)===null||e===void 0||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Uc.provider={build:()=>new Uc};class ep{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=o=>BT(this.syncEngine,o,1),this.remoteStore.remoteSyncer.handleCredentialChange=DP.bind(null,this.syncEngine),await lP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new cP})()}createDatastore(t){const e=Xc(t.databaseInfo.databaseId),o=(function(l){return new JV(l)})(t.databaseInfo);return(function(l,c,d,y){return new $V(l,c,d,y)})(t.authCredentials,t.appCheckCredentials,o,e)}createRemoteStore(t){return(function(o,r,l,c,d){return new WV(o,r,l,c,d)})(this.localStore,this.datastore,t.asyncQueue,(e=>BT(this.syncEngine,e,0)),(function(){return LT.D()?new LT:new HV})())}createSyncEngine(t,e){return(function(r,l,c,d,y,m,v){const E=new vP(r,l,c,d,y,m);return v&&(E.Qa=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await(async function(r){const l=It(r);mt("RemoteStore","RemoteStore shutting down."),l.L_.add(5),await Nl(l),l.k_.shutdown(),l.q_.set("Unknown")})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(e=this.eventManager)===null||e===void 0||e.terminate()}}ep.provider={build:()=>new ep};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ya(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ya(this.observer.error,t):Qi("Uncaught Error in snapshot listener:",t.toString()))}Za(){this.muted=!0}Ya(t,e){setTimeout((()=>{this.muted||t(e)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{constructor(t,e,o,r,l){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=o,this.databaseInfo=r,this.user=tn.UNAUTHENTICATED,this.clientId=c0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(o,(async c=>{mt("FirestoreClient","Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(o,(c=>(mt("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new zo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const o=Pp(e,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}async function Th(n,t){n.asyncQueue.verifyOperationInProgress(),mt("FirestoreClient","Initializing OfflineComponentProvider");const e=n.configuration;await t.initialize(e);let o=e.initialUser;n.setCredentialChangeListener((async r=>{o.isEqual(r)||(await Y0(t.localStore,r),o=r)})),t.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=t}async function HT(n,t){n.asyncQueue.verifyOperationInProgress();const e=await UP(n);mt("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(e,n.configuration),n.setCredentialChangeListener((o=>kT(t.remoteStore,o))),n.setAppCheckTokenChangeListener(((o,r)=>kT(t.remoteStore,r))),n._onlineComponents=t}async function UP(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){mt("FirestoreClient","Using user provided OfflineComponentProvider");try{await Th(n,n._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!(function(r){return r.name==="FirebaseError"?r.code===nt.FAILED_PRECONDITION||r.code===nt.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(e))throw e;kr("Error using user provided cache. Falling back to memory cache: "+e),await Th(n,new Uc)}}else mt("FirestoreClient","Using default OfflineComponentProvider"),await Th(n,new Uc);return n._offlineComponents}async function uA(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(mt("FirestoreClient","Using user provided OnlineComponentProvider"),await HT(n,n._uninitializedComponentsProvider._online)):(mt("FirestoreClient","Using default OnlineComponentProvider"),await HT(n,new ep))),n._onlineComponents}function LP(n){return uA(n).then((t=>t.syncEngine))}async function kP(n){const t=await uA(n),e=t.eventManager;return e.onListen=TP.bind(null,t.syncEngine),e.onUnlisten=SP.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=EP.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=CP.bind(null,t.syncEngine),e}function OP(n,t,e={}){const o=new zo;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,y,m){const v=new VP({next:A=>{v.Za(),c.enqueueAndForget((()=>dP(l,E))),A.fromCache&&y.source==="server"?m.reject(new ht(nt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(A)},error:A=>m.reject(A)}),E=new mP(d,v,{includeMetadataChanges:!0,_a:!0});return fP(l,E)})(await kP(n),n.asyncQueue,t,e,o))),o.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cA(n){const t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zT=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fA(n,t,e){if(!e)throw new ht(nt.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function qP(n,t,e,o){if(t===!0&&o===!0)throw new ht(nt.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function YT(n){if(!vt.isDocumentKey(n))throw new ht(nt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function JT(n){if(vt.isDocumentKey(n))throw new ht(nt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function jc(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const t=(function(o){return o.constructor?o.constructor.name:null})(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":At()}function Sl(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new ht(nt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=jc(n);throw new ht(nt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{constructor(t){var e,o;if(t.host===void 0){if(t.ssl!==void 0)throw new ht(nt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(e=t.ssl)===null||e===void 0||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new ht(nt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}qP("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=cA((o=t.experimentalLongPollingOptions)!==null&&o!==void 0?o:{}),(function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new ht(nt.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new ht(nt.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new ht(nt.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(o,r){return o.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class tf{constructor(t,e,o,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=o,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new KT({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ht(nt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new ht(nt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new KT(t),t.credentials!==void 0&&(this._authCredentials=(function(o){if(!o)return new jx;switch(o.type){case"firstParty":return new i1(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new ht(nt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(e){const o=zT.get(e);o&&(mt("ComponentProvider","Removing Datastore"),zT.delete(e),o.terminate())})(this),Promise.resolve()}}function GP(n,t,e,o={}){var r;const l=(n=Sl(n,tf))._getSettings(),c=`${t}:${e}`;if(l.host!=="firestore.googleapis.com"&&l.host!==c&&kr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},l),{host:c,ssl:!1})),o.mockUserToken){let d,y;if(typeof o.mockUserToken=="string")d=o.mockUserToken,y=tn.MOCK_USER;else{d=xb(o.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);const m=o.mockUserToken.sub||o.mockUserToken.user_id;if(!m)throw new ht(nt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new tn(m)}n._authCredentials=new t1(new u0(d,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(t,e,o){this.converter=e,this._query=o,this.type="query",this.firestore=t}withConverter(t){return new Ls(this.firestore,t,this._query)}}class Nn{constructor(t,e,o){this.converter=e,this._key=o,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Yo(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Nn(this.firestore,t,this._key)}}class Yo extends Ls{constructor(t,e,o){super(t,e,T0(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Nn(this.firestore,null,new vt(t))}withConverter(t){return new Yo(this.firestore,t,this._path)}}function BP(n,t,...e){if(n=Lr(n),fA("collection","path",t),n instanceof tf){const o=ae.fromString(t,...e);return JT(o),new Yo(n,null,o)}{if(!(n instanceof Nn||n instanceof Yo))throw new ht(nt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=n._path.child(ae.fromString(t,...e));return JT(o),new Yo(n.firestore,null,o)}}function FP(n,t,...e){if(n=Lr(n),arguments.length===1&&(t=c0.newId()),fA("doc","path",t),n instanceof tf){const o=ae.fromString(t,...e);return YT(o),new Nn(n,null,new vt(o))}{if(!(n instanceof Nn||n instanceof Yo))throw new ht(nt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=n._path.child(ae.fromString(t,...e));return YT(o),new Nn(n.firestore,n instanceof Yo?n.converter:null,new vt(o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{constructor(t=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new K0(this,"async_queue_retry"),this.Vu=()=>{const o=vh();o&&mt("AsyncQueue","Visibility state changed to "+o.visibilityState),this.t_.jo()},this.mu=t;const e=vh();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.fu(),this.gu(t)}enterRestrictedMode(t){if(!this.Iu){this.Iu=!0,this.Au=t||!1;const e=vh();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.Vu)}}enqueue(t){if(this.fu(),this.Iu)return new Promise((()=>{}));const e=new zo;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Pu.push(t),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(t){if(!Rl(t))throw t;mt("AsyncQueue","Operation failed with retryable error: "+t)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(t){const e=this.mu.then((()=>(this.du=!0,t().catch((o=>{this.Eu=o,this.du=!1;const r=(function(c){let d=c.message||"";return c.stack&&(d=c.stack.includes(c.message)?c.stack:c.message+`
`+c.stack),d})(o);throw Qi("INTERNAL UNHANDLED ERROR: ",r),o})).then((o=>(this.du=!1,o))))));return this.mu=e,e}enqueueAfterDelay(t,e,o){this.fu(),this.Ru.indexOf(t)>-1&&(e=0);const r=Vp.createAndSchedule(this,t,e,o,(l=>this.yu(l)));return this.Tu.push(r),r}fu(){this.Eu&&At()}verifyOperationInProgress(){}async wu(){let t;do t=this.mu,await t;while(t!==this.mu)}Su(t){for(const e of this.Tu)if(e.timerId===t)return!0;return!1}bu(t){return this.wu().then((()=>{this.Tu.sort(((e,o)=>e.targetTimeMs-o.targetTimeMs));for(const e of this.Tu)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.wu()}))}Du(t){this.Ru.push(t)}yu(t){const e=this.Tu.indexOf(t);this.Tu.splice(e,1)}}class kp extends tf{constructor(t,e,o,r){super(t,e,o,r),this.type="firestore",this._queue=new QT,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new QT(t),this._firestoreClient=void 0,await t}}}function HP(n,t){const e=typeof n=="object"?n:t0(),o=typeof n=="string"?n:"(default)",r=kx(e,"firestore").getImmediate({identifier:o});if(!r._initialized){const l=Db("firestore");l&&GP(r,...l)}return r}function dA(n){if(n._terminated)throw new ht(nt.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||zP(n),n._firestoreClient}function zP(n){var t,e,o;const r=n._freezeSettings(),l=(function(d,y,m,v){return new g1(d,y,m,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,cA(v.experimentalLongPollingOptions),v.useFetchStreams)})(n._databaseId,((t=n._app)===null||t===void 0?void 0:t.options.appId)||"",n._persistenceKey,r);n._componentsProvider||!((e=r.localCache)===null||e===void 0)&&e._offlineComponentProvider&&(!((o=r.localCache)===null||o===void 0)&&o._onlineComponentProvider)&&(n._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),n._firestoreClient=new PP(n._authCredentials,n._appCheckCredentials,n._queue,l,n._componentsProvider&&(function(d){const y=d?._online.build();return{_offline:d?._offline.build(y),_online:y}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Hr($e.fromBase64String(t))}catch(e){throw new ht(nt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Hr($e.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new ht(nt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ke(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new ht(nt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new ht(nt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return zt(this._lat,t._lat)||zt(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(t){this._values=(t||[]).map((e=>e))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(o,r){if(o.length!==r.length)return!1;for(let l=0;l<o.length;++l)if(o[l]!==r[l])return!1;return!0})(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YP=/^__.*__$/;class JP{constructor(t,e,o){this.data=t,this.fieldMask=e,this.fieldTransforms=o}toMutation(t,e){return this.fieldMask!==null?new Ps(t,this.data,this.fieldMask,e,this.fieldTransforms):new Il(t,this.data,e,this.fieldTransforms)}}function pA(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw At()}}class Bp{constructor(t,e,o,r,l,c){this.settings=t,this.databaseId=e,this.serializer=o,this.ignoreUndefinedProperties=r,l===void 0&&this.vu(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(t){return new Bp(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(t){var e;const o=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.Fu({path:o,xu:!1});return r.Ou(t),r}Nu(t){var e;const o=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.Fu({path:o,xu:!1});return r.vu(),r}Lu(t){return this.Fu({path:void 0,xu:!0})}Bu(t){return Lc(t,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(t){return this.fieldMask.find((e=>t.isPrefixOf(e)))!==void 0||this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))!==void 0}vu(){if(this.path)for(let t=0;t<this.path.length;t++)this.Ou(this.path.get(t))}Ou(t){if(t.length===0)throw this.Bu("Document fields must not be empty");if(pA(this.Cu)&&YP.test(t))throw this.Bu('Document fields cannot begin and end with "__"')}}class KP{constructor(t,e,o){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=o||Xc(t)}Qu(t,e,o,r=!1){return new Bp({Cu:t,methodName:e,qu:o,path:Ke.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function mA(n){const t=n._freezeSettings(),e=Xc(n._databaseId);return new KP(n._databaseId,!!t.ignoreUndefinedProperties,e)}function QP(n,t,e,o,r,l={}){const c=n.Qu(l.merge||l.mergeFields?2:0,t,e,r);_A("Data must be an object, but it was:",c,o);const d=gA(o,c);let y,m;if(l.merge)y=new Wn(c.fieldMask),m=c.fieldTransforms;else if(l.mergeFields){const v=[];for(const E of l.mergeFields){const A=XP(t,E,e);if(!c.contains(A))throw new ht(nt.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);ZP(v,A)||v.push(A)}y=new Wn(v),m=c.fieldTransforms.filter((E=>y.covers(E.field)))}else y=null,m=c.fieldTransforms;return new JP(new Bn(d),y,m)}function $P(n,t,e,o=!1){return Fp(e,n.Qu(o?4:3,t))}function Fp(n,t){if(yA(n=Lr(n)))return _A("Unsupported field value:",t,n),gA(n,t);if(n instanceof hA)return(function(o,r){if(!pA(r.Cu))throw r.Bu(`${o._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Bu(`${o._methodName}() is not currently supported inside arrays`);const l=o._toFieldTransform(r);l&&r.fieldTransforms.push(l)})(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.xu&&t.Cu!==4)throw t.Bu("Nested arrays are not supported");return(function(o,r){const l=[];let c=0;for(const d of o){let y=Fp(d,r.Lu(c));y==null&&(y={nullValue:"NULL_VALUE"}),l.push(y),c++}return{arrayValue:{values:l}}})(n,t)}return(function(o,r){if((o=Lr(o))===null)return{nullValue:"NULL_VALUE"};if(typeof o=="number")return O1(r.serializer,o);if(typeof o=="boolean")return{booleanValue:o};if(typeof o=="string")return{stringValue:o};if(o instanceof Date){const l=Me.fromDate(o);return{timestampValue:Vc(r.serializer,l)}}if(o instanceof Me){const l=new Me(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:Vc(r.serializer,l)}}if(o instanceof qp)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof Hr)return{bytesValue:O0(r.serializer,o._byteString)};if(o instanceof Nn){const l=r.databaseId,c=o.firestore._databaseId;if(!c.isEqual(l))throw r.Bu(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Rp(o.firestore._databaseId||r.databaseId,o._key.path)}}if(o instanceof Gp)return(function(c,d){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:c.toArray().map((y=>{if(typeof y!="number")throw d.Bu("VectorValues must only contain numeric values.");return Ap(d.serializer,y)}))}}}}}})(o,r);throw r.Bu(`Unsupported field value: ${jc(o)}`)})(n,t)}function gA(n,t){const e={};return f0(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):$r(n,((o,r)=>{const l=Fp(r,t.Mu(o));l!=null&&(e[o]=l)})),{mapValue:{fields:e}}}function yA(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Me||n instanceof qp||n instanceof Hr||n instanceof Nn||n instanceof hA||n instanceof Gp)}function _A(n,t,e){if(!yA(e)||!(function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)})(e)){const o=jc(e);throw o==="an object"?t.Bu(n+" a custom object"):t.Bu(n+" "+o)}}function XP(n,t,e){if((t=Lr(t))instanceof Op)return t._internalPath;if(typeof t=="string")return vA(n,t);throw Lc("Field path arguments must be of type string or ",n,!1,void 0,e)}const WP=new RegExp("[~\\*/\\[\\]]");function vA(n,t,e){if(t.search(WP)>=0)throw Lc(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new Op(...t.split("."))._internalPath}catch{throw Lc(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function Lc(n,t,e,o,r){const l=o&&!o.isEmpty(),c=r!==void 0;let d=`Function ${t}() called with invalid data`;e&&(d+=" (via `toFirestore()`)"),d+=". ";let y="";return(l||c)&&(y+=" (found",l&&(y+=` in field ${o}`),c&&(y+=` in document ${r}`),y+=")"),new ht(nt.INVALID_ARGUMENT,d+n+y)}function ZP(n,t){return n.some((e=>e.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(t,e,o,r,l){this._firestore=t,this._userDataWriter=e,this._key=o,this._document=r,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Nn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new jP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(Hp("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class jP extends TA{data(){return super.data()}}function Hp(n,t){return typeof t=="string"?vA(n,t):t instanceof Op?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tU(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ht(nt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class zp{}class EA extends zp{}function eU(n,t,...e){let o=[];t instanceof zp&&o.push(t),o=o.concat(e),(function(l){const c=l.filter((y=>y instanceof Jp)).length,d=l.filter((y=>y instanceof Yp)).length;if(c>1||c>0&&d>0)throw new ht(nt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(o);for(const r of o)n=r._apply(n);return n}class Yp extends EA{constructor(t,e,o){super(),this._field=t,this._op=e,this._value=o,this.type="where"}static _create(t,e,o){return new Yp(t,e,o)}_apply(t){const e=this._parse(t);return AA(t._query,e),new Ls(t.firestore,t.converter,Jh(t._query,e))}_parse(t){const e=mA(t.firestore);return(function(l,c,d,y,m,v,E){let A;if(m.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new ht(nt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){XT(E,v);const I=[];for(const P of E)I.push($T(y,l,P));A={arrayValue:{values:I}}}else A=$T(y,l,E)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||XT(E,v),A=$P(d,c,E,v==="in"||v==="not-in");return Ie.create(m,v,A)})(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}}class Jp extends zp{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new Jp(t,e)}_parse(t){const e=this._queryConstraints.map((o=>o._parse(t))).filter((o=>o.getFilters().length>0));return e.length===1?e[0]:ti.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return e.getFilters().length===0?t:((function(r,l){let c=r;const d=l.getFlattenedFilters();for(const y of d)AA(c,y),c=Jh(c,y)})(t._query,e),new Ls(t.firestore,t.converter,Jh(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Kp extends EA{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new Kp(t,e)}_apply(t){const e=(function(r,l,c){if(r.startAt!==null)throw new ht(nt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new ht(nt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Tl(l,c)})(t._query,this._field,this._direction);return new Ls(t.firestore,t.converter,(function(r,l){const c=r.explicitOrderBy.concat([l]);return new Xr(r.path,r.collectionGroup,c,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)})(t._query,e))}}function nU(n,t="asc"){const e=t,o=Hp("orderBy",n);return Kp._create(o,e)}function $T(n,t,e){if(typeof(e=Lr(e))=="string"){if(e==="")throw new ht(nt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!E0(t)&&e.indexOf("/")!==-1)throw new ht(nt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const o=t.path.child(ae.fromString(e));if(!vt.isDocumentKey(o))throw new ht(nt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return yT(n,new vt(o))}if(e instanceof Nn)return yT(n,e._key);throw new ht(nt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${jc(e)}.`)}function XT(n,t){if(!Array.isArray(n)||n.length===0)throw new ht(nt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function AA(n,t){const e=(function(r,l){for(const c of r)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(e!==null)throw e===t.op?new ht(nt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new ht(nt.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}class iU{convertValue(t,e="none"){switch(xs(t)){case 0:return null;case 1:return t.booleanValue;case 2:return _e(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(bs(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw At()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const o={};return $r(t,((r,l)=>{o[r]=this.convertValue(l,e)})),o}convertVectorValue(t){var e,o,r;const l=(r=(o=(e=t.fields)===null||e===void 0?void 0:e.value.arrayValue)===null||o===void 0?void 0:o.values)===null||r===void 0?void 0:r.map((c=>_e(c.doubleValue)));return new Gp(l)}convertGeoPoint(t){return new qp(_e(t.latitude),_e(t.longitude))}convertArray(t,e){return(t.values||[]).map((o=>this.convertValue(o,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const o=_p(t);return o==null?null:this.convertValue(o,e);case"estimate":return this.convertTimestamp(yl(t));default:return null}}convertTimestamp(t){const e=Ko(t);return new Me(e.seconds,e.nanos)}convertDocumentKey(t,e){const o=ae.fromString(t);Zt(z0(o));const r=new _l(o.get(1),o.get(3)),l=new vt(o.popFirst(5));return r.isEqual(e)||Qi(`Document ${l} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oU(n,t,e){let o;return o=n?n.toFirestore(t):t,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class sU extends TA{constructor(t,e,o,r,l,c){super(t,e,o,r,c),this._firestore=t,this._firestoreImpl=t,this.metadata=l}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Tc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const o=this._document.data.field(Hp("DocumentSnapshot.get",t));if(o!==null)return this._userDataWriter.convertValue(o,e.serverTimestamps)}}}class Tc extends sU{data(t={}){return super.data(t)}}class rU{constructor(t,e,o,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new hc(r.hasPendingWrites,r.fromCache),this.query=o}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach((o=>{t.call(e,new Tc(this._firestore,this._userDataWriter,o.key,o,new hc(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new ht(nt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=(function(r,l){if(r._snapshot.oldDocs.isEmpty()){let c=0;return r._snapshot.docChanges.map((d=>{const y=new Tc(r._firestore,r._userDataWriter,d.doc.key,d.doc,new hc(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);return d.doc,{type:"added",doc:y,oldIndex:-1,newIndex:c++}}))}{let c=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const y=new Tc(r._firestore,r._userDataWriter,d.doc.key,d.doc,new hc(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let m=-1,v=-1;return d.type!==0&&(m=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),v=c.indexOf(d.doc.key)),{type:aU(d.type),doc:y,oldIndex:m,newIndex:v}}))}})(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function aU(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return At()}}class lU extends iU{constructor(t){super(),this.firestore=t}convertBytes(t){return new Hr(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Nn(this.firestore,null,e)}}function uU(n){n=Sl(n,Ls);const t=Sl(n.firestore,kp),e=dA(t),o=new lU(t);return tU(n._query),OP(e,n._query).then((r=>new rU(t,o,n,r)))}function cU(n,t,e){n=Sl(n,Nn);const o=Sl(n.firestore,kp),r=oU(n.converter,t);return fU(o,[QP(mA(o),"setDoc",n._key,r,n.converter!==null,e).toMutation(n._key,Yi.none())])}function fU(n,t){return(function(o,r){const l=new zo;return o.asyncQueue.enqueueAndForget((async()=>RP(await LP(o),r,l))),l.promise})(dA(n),t)}(function(t,e=!0){(function(r){Qr=r})(Gx),Nc(new hl("firestore",((o,{instanceIdentifier:r,options:l})=>{const c=o.getProvider("app").getImmediate(),d=new kp(new e1(o.getProvider("auth-internal")),new s1(o.getProvider("app-check-internal")),(function(m,v){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new ht(nt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _l(m.options.projectId,v)})(c,r),c);return l=Object.assign({useFetchStreams:e},l),d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),Pr(dT,"4.7.3",t),Pr(dT,"4.7.3","esm2017")})();const SA="az104_master_principles",dU=()=>{const n=localStorage.getItem("vault_firebase_config");return n?JSON.parse(n):{apiKey:"",authDomain:"",projectId:"",storageBucket:"",messagingSenderId:"",appId:""}},CA=()=>{const n=dU();if(!n.projectId)return null;const t=Bx().length===0?jE(n):t0();return HP(t)},hU=async n=>{const t=new TextEncoder().encode(n.trim().toLowerCase()),e=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(e)).map(r=>r.toString(16).padStart(2,"0")).join("")},pU=async(n,t,e)=>{try{const o=CA();if(!o)return;const r=FP(o,SA,n);await cU(r,{masteredAt:new Date().toISOString(),domain:t,foundationalRule:e,hash:n})}catch{}},mU=async()=>{try{const n=CA();if(!n)return[];const t=eU(BP(n,SA),nU("masteredAt","desc"));return(await uU(t)).docs.map(o=>o.data())}catch{return[]}},gU='You are the "AZ-104 Concept Validation Engine." Convert questions into reusable logic patterns rooted in official MS Learn documentation. Output JSON.',yU=async n=>{const e=await new YE({apiKey:""}).models.generateContent({model:"gemini-3-pro-preview",contents:{parts:[{text:gU},{text:`PROCESS:
${JSON.stringify(n)}`}]},config:{tools:[{googleSearch:{}}],responseMimeType:"application/json",responseSchema:{type:re.OBJECT,properties:{domain:{type:re.STRING},blocks:{type:re.ARRAY,items:{type:re.OBJECT,properties:{foundationalRule:{type:re.STRING},whyItWorks:{type:re.STRING},analogy:{type:re.STRING},analogousFoundationalConcept:{type:re.STRING},commonConfusion:{type:re.STRING},examEliminationCue:{type:re.STRING},memoryHook:{type:re.STRING}}}}}}}}),o=[];return e.candidates?.[0]?.groundingMetadata?.groundingChunks?.forEach(r=>{r.web&&o.push({title:r.web.title,uri:r.web.uri})}),{...JSON.parse(e.text||"{}"),sources:o}},_U=async(n,t)=>{const e=new YE({apiKey:""}),o=[{text:"Extract ONLY questions answered correctly as JSON. Format: {id, text, correctAnswer, explanation}."}];t?o.push({inlineData:{mimeType:"application/pdf",data:t}}):o.push({text:n});const r=await e.models.generateContent({model:"gemini-3-flash-preview",contents:{parts:o},config:{responseMimeType:"application/json",responseSchema:{type:re.ARRAY,items:{type:re.OBJECT,properties:{id:{type:re.STRING},text:{type:re.STRING},correctAnswer:{type:re.STRING},explanation:{type:re.STRING}}}}}});return JSON.parse(r.text||"[]")},vU=({isOpen:n,onClose:t,isApiKeySet:e})=>{const[o,r]=Ue.useState(()=>{const c=localStorage.getItem("vault_firebase_config");return c?JSON.parse(c):{projectId:"",apiKey:"",authDomain:"",appId:""}}),l=()=>{localStorage.setItem("vault_firebase_config",JSON.stringify(o)),alert("Config saved. Reloading..."),window.location.reload()};return n?it.jsxs("div",{className:"fixed inset-0 z-50 flex justify-end",children:[it.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:t}),it.jsxs("div",{className:"relative w-full max-w-md bg-slate-900 p-8 shadow-2xl animate-in slide-in-from-right duration-300",children:[it.jsxs("h3",{className:"text-xl font-black text-white mb-6 uppercase tracking-widest flex items-center gap-2",children:[it.jsx("i",{className:"fa-solid fa-plug text-blue-500"})," Integration Center"]}),it.jsxs("div",{className:"space-y-6",children:[it.jsxs("div",{className:`p-4 rounded-xl border ${e?"bg-emerald-500/10 border-emerald-500/30":"bg-red-500/10 border-red-500/30"}`,children:[it.jsx("p",{className:"text-[10px] font-black uppercase text-slate-500",children:"Gemini Logic Engine"}),it.jsx("p",{className:`text-sm font-bold ${e?"text-emerald-400":"text-red-400"}`,children:e?"Connected":"Disconnected (Check Env)"})]}),["projectId","apiKey","authDomain","appId"].map(c=>it.jsxs("div",{children:[it.jsx("label",{className:"block text-[10px] text-slate-500 uppercase mb-1",children:c}),it.jsx("input",{className:"w-full bg-slate-950 border border-slate-800 p-3 rounded text-sm text-slate-300 outline-none",value:o[c],onChange:d=>r({...o,[c]:d.target.value})})]},c)),it.jsx("button",{onClick:l,className:"w-full py-4 bg-blue-600 text-white font-black rounded-xl hover:bg-blue-500",children:"UPDATE VAULT CONFIG"}),it.jsx("button",{onClick:t,className:"w-full py-2 text-slate-500 text-xs font-bold uppercase",children:"Close"})]})]})]}):null},TU=({onPush:n,isApiKeySet:t,currentStagedCount:e})=>{const[o,r]=Ue.useState(""),[l,c]=Ue.useState(null),[d,y]=Ue.useState(null),[m,v]=Ue.useState(!1),[E,A]=Ue.useState([]),[I,P]=Ue.useState(new Set),q=Ue.useRef(null),U=e>=6,X=async J=>{const et=J.target.files?.[0];if(et?.type==="application/pdf"){const ct=new FileReader;ct.onload=()=>{c(ct.result.split(",")[1]),y(et.name),r("")},ct.readAsDataURL(et)}},ot=async()=>{if(!(!t||!o.trim()&&!l)){v(!0);try{const J=await _U(o,l||void 0);A(J),P(new Set)}catch{}finally{v(!1)}}};return it.jsxs("div",{className:"bg-slate-900/60 border border-slate-800 rounded-3xl p-6 flex flex-col gap-4 shadow-2xl h-full backdrop-blur-sm",children:[it.jsxs("div",{className:"flex justify-between items-center border-b border-slate-800 pb-4",children:[it.jsxs("div",{className:"flex flex-col",children:[it.jsx("h3",{className:"text-xs font-black uppercase tracking-widest text-blue-400",children:"Answer Scraper"}),it.jsxs("p",{className:"text-[9px] text-slate-500 font-bold uppercase",children:["Staging: ",e," / 6"]})]}),it.jsx("i",{className:"fa-solid fa-broom-wide text-slate-600"})]}),l?it.jsxs("div",{className:"bg-purple-600/10 border border-purple-500/30 p-4 rounded-xl relative text-center",children:[it.jsx("button",{onClick:()=>{c(null),y(null)},className:"absolute top-2 right-2 text-slate-500",children:it.jsx("i",{className:"fa-solid fa-xmark"})}),it.jsx("i",{className:"fa-solid fa-file-pdf text-2xl text-purple-400 mb-2"}),it.jsx("p",{className:"text-[10px] font-bold text-white truncate px-2",children:d})]}):it.jsxs(it.Fragment,{children:[it.jsx("textarea",{className:"w-full h-32 bg-slate-950 border border-slate-800 rounded-xl p-3 text-xs text-slate-400 outline-none focus:border-blue-500 transition-colors",placeholder:"Paste messy quiz text...",value:o,onChange:J=>r(J.target.value)}),it.jsx("input",{type:"file",ref:q,onChange:X,accept:"application/pdf",className:"hidden"}),it.jsx("button",{onClick:()=>q.current?.click(),className:"w-full py-2 border border-dashed border-slate-800 rounded-lg text-slate-500 hover:text-blue-400 text-[10px] font-bold uppercase transition-all",children:"Upload PDF"})]}),it.jsx("button",{disabled:m,onClick:ot,className:"w-full py-3 bg-blue-600 hover:bg-blue-500 rounded-xl text-white text-[10px] font-black uppercase transition-all shadow-lg",children:m?"CLEANING...":"EXTRACT VALID ANSWERS"}),it.jsx("div",{className:"flex-1 overflow-y-auto space-y-2 pr-1 custom-scrollbar",children:E.map((J,et)=>{const ct=I.has(J.id||J.text),at=ct||U;return it.jsxs("div",{className:`p-4 bg-slate-950 border rounded-2xl transition-all ${ct?"border-emerald-500/20 opacity-50":"border-slate-800"}`,children:[it.jsx("p",{className:`text-[10px] leading-relaxed mb-3 ${ct?"text-slate-600 italic":"text-slate-400"} line-clamp-3`,children:J.text}),it.jsx("button",{disabled:at,onClick:()=>{n(J),P(D=>new Set(D).add(J.id||J.text))},className:`w-full py-2 rounded-lg text-[9px] font-black uppercase transition-all ${ct?"bg-emerald-500/10 text-emerald-500":U?"bg-red-500/10 text-red-500 cursor-not-allowed":"bg-blue-500/5 text-blue-400 hover:bg-blue-400 hover:text-white"}`,children:ct?"ALREADY PUSHED":U?"STAGING FULL (6 MAX)":"PUSH TO ENGINE"})]},et)})})]})},EU=()=>{const[n,t]=Ue.useState("generator"),[e,o]=Ue.useState(""),[r,l]=Ue.useState(null),[c,d]=Ue.useState("IDLE"),[y,m]=Ue.useState([]),[v]=Ue.useState(!1),[E,A]=Ue.useState(!1),[I,P]=Ue.useState(!1);Ue.useEffect(()=>{n==="vault"&&mU().then(m)},[n]);const q=(e.match(/Question:/gi)||[]).length,U=J=>{o(et=>{if((et.match(/Question:/gi)||[]).length>=6)return et;const at=`Question: ${J.text}
Correct Answer: ${J.correctAnswer}
Explanation: ${J.explanation}`;return et.trim()?`${et.trim()}

${at}`:at})},X=async()=>{if(e.trim()){d("LOADING");try{const J=e.trim().split(/\n\s*\n/).filter(at=>at.toLowerCase().includes("question:")).slice(0,6),et=await yU(J.map(at=>({text:at,correctAnswer:"Verified"}))),ct=await Promise.all(J.map(hU));for(let at=0;at<(et.blocks||[]).length;at++)ct[at]&&await pU(ct[at],et.domain,et.blocks[at].foundationalRule);l(et),d("SUCCESS")}catch{d("ERROR")}}},ot=()=>{if(!r)return;const J=`DOMAIN: ${r.domain}

`+r.blocks.map(et=>`RULE: ${et.foundationalRule}
WHY: ${et.whyItWorks}
ANALOGY: ${et.analogy}
Hook: ${et.memoryHook}`).join(`

`);navigator.clipboard.writeText(J),P(!0),setTimeout(()=>P(!1),2e3)};return it.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8 flex flex-col min-h-screen",children:[it.jsxs("header",{className:"flex flex-col md:flex-row justify-between items-center gap-6 mb-12",children:[it.jsxs("div",{className:"text-center md:text-left",children:[it.jsxs("h1",{className:"text-3xl font-black italic tracking-tighter text-white",children:["ANALOGICAL ",it.jsx("span",{className:"text-blue-500",children:"INSIGHT"})," EXTRACTOR"]}),it.jsx("p",{className:"text-slate-500 text-sm uppercase tracking-widest font-bold",children:"AZ-104 Mastery Logic Engine"})]}),it.jsxs("div",{className:"flex gap-4",children:[it.jsxs("div",{className:"bg-slate-900 border border-slate-800 p-1 rounded-xl flex",children:[it.jsx("button",{onClick:()=>t("generator"),className:`px-6 py-2 rounded-lg text-xs font-black transition-all ${n==="generator"?"bg-blue-600 text-white":"text-slate-500"}`,children:"GENERATOR"}),it.jsx("button",{onClick:()=>t("vault"),className:`px-6 py-2 rounded-lg text-xs font-black transition-all ${n==="vault"?"bg-blue-600 text-white":"text-slate-500"}`,children:"VAULT"})]}),it.jsx("button",{onClick:()=>A(!0),className:"w-10 h-10 bg-slate-900 border border-slate-800 rounded-xl flex items-center justify-center text-slate-500 hover:text-blue-400 transition-all",children:it.jsx("i",{className:"fa-solid fa-gear"})})]})]}),it.jsx("main",{className:"flex-1",children:n==="generator"?r?it.jsxs("div",{className:"max-w-4xl mx-auto space-y-6 animate-in fade-in slide-in-from-bottom-4",children:[it.jsxs("div",{className:"flex justify-between items-center px-4",children:[it.jsxs("h2",{className:"text-xl font-black text-blue-500 uppercase italic tracking-tighter",children:["Results: ",r.domain]}),it.jsxs("div",{className:"flex gap-2",children:[it.jsxs("button",{onClick:ot,className:"px-4 py-2 bg-emerald-600 hover:bg-emerald-500 text-white text-[10px] font-black rounded-lg transition-all flex items-center gap-2",children:[it.jsx("i",{className:`fa-solid ${I?"fa-check":"fa-copy"}`}),I?"COPIED!":"COPY ALL"]}),it.jsx("button",{onClick:()=>{l(null),d("IDLE")},className:"px-4 py-2 bg-slate-800 hover:bg-red-900/20 text-slate-400 hover:text-red-400 text-[10px] font-black rounded-lg transition-all uppercase",children:"Discard & Reset"})]})]}),it.jsx("div",{className:"bg-slate-900 border border-slate-800 p-8 rounded-3xl space-y-10 shadow-2xl",children:r.blocks.map((J,et)=>it.jsxs("div",{className:"group relative border-l-2 border-blue-600/30 pl-8 hover:border-blue-500 transition-all",children:[it.jsx("div",{className:"absolute -left-[11px] top-0 w-5 h-5 bg-blue-600 rounded-full flex items-center justify-center text-[8px] font-black text-white",children:et+1}),it.jsx("h3",{className:"text-xl font-bold text-white mb-4 leading-tight",children:J.foundationalRule}),it.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 text-xs",children:[it.jsxs("div",{className:"space-y-4",children:[it.jsxs("div",{children:[it.jsx("p",{className:"text-blue-400 font-black uppercase mb-1",children:"Logic"}),it.jsx("p",{className:"text-slate-400 leading-relaxed",children:J.whyItWorks})]}),it.jsxs("div",{children:[it.jsx("p",{className:"text-emerald-400 font-black uppercase mb-1",children:"Analogy"}),it.jsxs("p",{className:"text-slate-500 italic",children:['"',J.analogy,'"']})]})]}),it.jsxs("div",{className:"space-y-4",children:[it.jsxs("div",{className:"bg-slate-950 p-3 rounded-xl border border-slate-800",children:[it.jsx("p",{className:"text-red-400 font-black uppercase mb-1",children:"Trap"}),it.jsx("p",{className:"text-slate-500",children:J.commonConfusion})]}),it.jsxs("div",{children:[it.jsx("p",{className:"text-amber-400 font-black uppercase mb-1",children:"Memory Hook"}),it.jsxs("p",{className:"text-lg font-black text-white italic tracking-tighter",children:['"',J.memoryHook,'"']})]})]})]})]},et))})]}):it.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8 h-full",children:[it.jsx("div",{className:"lg:col-span-4 h-full",children:it.jsx(TU,{isApiKeySet:v,currentStagedCount:q,onPush:U})}),it.jsxs("div",{className:"lg:col-span-8 flex flex-col gap-4",children:[it.jsxs("div",{className:"relative group flex-1",children:[it.jsx("div",{className:`absolute -inset-0.5 bg-gradient-to-r ${q>=6?"from-red-600 to-orange-600":"from-blue-600 to-indigo-600"} rounded-3xl blur opacity-10 group-focus-within:opacity-20 transition`}),it.jsx("textarea",{className:"relative w-full h-[450px] bg-slate-900/80 border border-slate-800 rounded-3xl p-8 text-slate-300 font-mono text-sm outline-none focus:ring-2 focus:ring-blue-500/30 transition-all shadow-2xl resize-none backdrop-blur-sm",placeholder:"Questions pushed from the scraper will appear here (Max 6)...",value:e,onChange:J=>o(J.target.value)}),it.jsxs("div",{className:"absolute top-4 right-4 flex items-center gap-4",children:[it.jsxs("span",{className:`text-[10px] font-black uppercase ${q>=6?"text-red-400":"text-slate-600"}`,children:["Items: ",q," / 6"]}),it.jsx("button",{onClick:()=>o(""),className:"text-slate-700 hover:text-red-400 text-xs font-bold uppercase transition-colors",children:"Clear All"})]})]}),it.jsx("button",{disabled:c==="LOADING"||!e.trim()||q===0,onClick:X,className:"w-full py-5 bg-blue-600 hover:bg-blue-500 disabled:bg-slate-800 text-white font-black rounded-3xl shadow-xl transition-all uppercase tracking-widest active:scale-95",children:c==="LOADING"?"Extracting Core Principles...":"Analyze & Store in Vault"})]})]}):it.jsxs("div",{className:"max-w-5xl mx-auto space-y-6 animate-in fade-in duration-500",children:[it.jsxs("h2",{className:"text-xl font-black text-white mb-8 flex items-center gap-3",children:[it.jsx("i",{className:"fa-solid fa-vault text-blue-500"})," Mastered Principles"]}),it.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:y.map((J,et)=>it.jsxs("div",{className:"bg-slate-900 border border-slate-800 p-6 rounded-2xl hover:border-blue-500/50 transition-all shadow-lg group",children:[it.jsxs("div",{className:"flex justify-between items-start mb-4",children:[it.jsx("span",{className:"text-[9px] font-black px-2 py-0.5 bg-blue-500/10 text-blue-500 rounded uppercase",children:J.domain}),it.jsx("span",{className:"text-[8px] text-slate-600 font-bold",children:new Date(J.masteredAt).toLocaleDateString()})]}),it.jsx("h3",{className:"text-slate-200 font-bold leading-snug mb-4 group-hover:text-white transition-colors",children:J.foundationalRule}),it.jsx("button",{onClick:()=>{navigator.clipboard.writeText(J.foundationalRule),alert("Copied Rule")},className:"text-[9px] font-black text-slate-600 hover:text-blue-400 uppercase tracking-widest",children:"Copy Principle"})]},et))}),y.length===0&&it.jsxs("div",{className:"text-center py-40 opacity-20",children:[it.jsx("i",{className:"fa-solid fa-box-open text-6xl mb-4"}),it.jsx("p",{className:"font-bold uppercase text-xs tracking-[0.5em]",children:"Vault Empty"})]})]})}),it.jsx(vU,{isOpen:E,onClose:()=>A(!1),isApiKeySet:v}),it.jsx("footer",{className:"mt-20 py-10 border-t border-slate-900 text-center opacity-30",children:it.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-[0.4em]",children:"Grounded in MS Learn  Built for AZ-104 Master Class"})})]})},WT=document.getElementById("root");WT&&uC.createRoot(WT).render(it.jsx(eC.StrictMode,{children:it.jsx(EU,{})}));
